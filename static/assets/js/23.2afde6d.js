(window.webpackJsonp=window.webpackJsonp||[]).push([[23,4,9,12],{"+0UK":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment"},[e("div",{staticClass:"comment-info"},[e("i",{staticClass:"author bk-itsm-icon icon-itsm-icon-my"}),t._v(" "),e("p",[e("span",{staticClass:"user-name"},[t._v(t._s(t.curComment.creator)+"  ")]),t._v(" "),e("span",{staticClass:"issue-time"},[t._v(t._s(t.$t('m["发布于"]'))+" "+t._s(t.createTime))]),t._v(" "),"INSIDE"===t.curComment.remark_type?e("i",{staticClass:"tip bk-itsm-icon icon-icon-no-permissions"},[t._v(" "+t._s(t.$t('m["仅内部可见"]')))]):t._e()]),t._v(" "),t.curComment.update_log.length?e("div",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips",value:{placement:"top-start",content:t.curComment.update_log},expression:"{\n        placement: 'top-start',\n        content: curComment.update_log\n      }"}],staticClass:"edited"},[e("span",[t._v(t._s(t.$t('m["已被编辑"]')))])]):t._e(),t._v(" "),e("div",{staticClass:"reply-praise"},[e("i",{staticClass:"bk-itsm-icon icon-xiaoxi",attrs:{title:"回复"},on:{click:function(e){return t.$emit("replyComment",t.curComment)}}})])]),t._v(" "),e("div",{staticClass:"comment-content"},[e("div",{domProps:{innerHTML:t._s(t.curComment.content)}}),t._v(" "),t.curComment.hasOwnProperty("parent_creator")?e("div",{staticClass:"comment-reply",on:{click:function(e){return t.jumpTargetComment(t.curComment)}}},[e("div",{staticClass:"comment-message"},[e("span",[e("i",{staticClass:"bk-itsm-icon icon-yinyong"}),t._v(t._s(t.$t('m["回复"]'))+" "+t._s(t.curComment.parent_creator)+" "+t._s(t.$t('m["的评论"]'))+" :")]),t._v(" "),e("div",{domProps:{innerHTML:t._s(t.curComment.parent_content)}})])]):t._e()]),t._v(" "),e("div",{staticClass:"operation"},[e("span",{on:{click:function(e){return t.$emit("editComment",t.curComment,"edit")}}},[t._v(t._s(t.$t('m["编辑"]')))]),t._v(" "),e("i",{staticClass:"line"}),t._v(" "),e("span",{on:{click:function(e){return t.handleDeleteDialogShow(!0)}}},[t._v(t._s(t.$t('m["删除"]')))])]),t._v(" "),e("bk-dialog",{attrs:{"ext-cls":"delete-dialog",width:"400","show-footer":!1},model:{value:t.deleteCommentDialog,callback:function(e){t.deleteCommentDialog=e},expression:"deleteCommentDialog"}},[e("i",{staticClass:"bk-itsm-icon icon-info-fail"}),t._v(" "),e("div",{staticClass:"delete-tip"},[t._v(t._s(t.$t('m["确认删除该条评论？"]')))]),t._v(" "),e("div",{staticClass:"delete-option"},[e("bk-button",{attrs:{theme:"primary"},on:{click:function(e){return t.deleteComment(t.curComment.id)}}},[t._v(t._s(t.$t('m["确定"]')))]),t._v(" "),e("bk-button",{on:{click:function(e){return t.handleDeleteDialogShow(!1)}}},[t._v(t._s(t.$t('m["取消"]')))])],1)])],1)},a=[];i._withStripped=!0},"+DO/":function(t,e,n){"use strict";n.r(e);var i=n("mAOo"),a=n("bpA+");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("qh2C");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"6869e7f4",null);e.default=r.exports},"+Fmt":function(t,e,n){"use strict";n.r(e);var i=n("ZTv3"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"+KRo":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-get-param"},[e("bk-table",{attrs:{data:t.paramTableData,size:"small"}},[e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['名称']"),prop:"name"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['必选']")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.is_necessary?t.$t('m.treeinfo["是"]'):t.$t('m.treeinfo["否"]'))+"\n      ")]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['备注']"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{attrs:{title:n.row.desc}},[t._v(t._s(n.row.desc||"--"))])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['参数值']"),width:"300"},scopedSlots:t._u([{key:"default",fn:function(n){return[t.isStatic?[t._v("\n          "+t._s(n.row.customValue||"--")+"\n        ")]:t.isCustom?[e("bk-input",{attrs:{clearable:!0,placeholder:t.$t("m.treeinfo['请输入参数值']")},model:{value:n.row.customValue,callback:function(e){t.$set(n.row,"customValue",e)},expression:"props.row.customValue"}})]:[e("div",{staticStyle:{width:"120px",position:"absolute",top:"5px",left:"15px"}},[e("bk-select",{attrs:{clearable:!1,searchable:"","font-size":"medium"},model:{value:n.row.source_type,callback:function(e){t.$set(n.row,"source_type",e)},expression:"props.row.source_type"}},t._l(t.sourceTypeList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)],1),t._v(" "),"CUSTOM"===n.row.source_type?e("div",{staticStyle:{width:"140px",position:"absolute",top:"4px",right:"15px"}},[e("bk-input",{class:{"bk-border-error":n.row.isCheck&&!n.row.value.toString()},attrs:{clearable:!0,placeholder:t.$t("m.treeinfo['请输入参数值']")},model:{value:n.row.value,callback:function(e){t.$set(n.row,"value",e)},expression:"props.row.value"}})],1):e("div",{staticStyle:{width:"140px",position:"absolute",top:"4px",right:"15px"}},[e("bk-select",{class:{"bk-border-error":n.row.isCheck&&!n.row.value.toString()},attrs:{clearable:!1,searchable:"","font-size":"medium"},model:{value:n.row.value_key,callback:function(e){t.$set(n.row,"value_key",e)},expression:"props.row.value_key"}},[t._l(t.stateList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),t._v(" "),"addField"!==t.entry?[e("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"extension"},on:{click:function(e){return t.addNewItem(n.row)}},slot:"extension"},[e("i",{staticClass:"bk-icon icon-plus-circle mr10"}),t._v(t._s(t.$t('m.treeinfo["添加变量"]'))+"\n                ")])]:t._e()],2)],1)]]}}])})],1)],1)},a=[];i._withStripped=!0},"+LW1":function(t,e,n){},"+QRE":function(t,e,n){"use strict";n.r(e);var i=n("gEzK"),a=n("h1eg");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("LaJ4");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"18c81a71",null);e.default=r.exports},"+TgL":function(t,e,n){},"+f5g":function(t,e,n){},"+lzq":function(t,e,n){"use strict";n.r(e);var i=n("dkT3"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"/+rQ":function(t,e,n){"use strict";n.r(e);var i=n("3SW3"),a=n("2qRF");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("Vbtg");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"dd037070",null);e.default=r.exports},"/14K":function(t,e,n){"use strict";n.r(e);var i=n("PCdW"),a=n("1ukW");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("4ZEI");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"ee766880",null);e.default=r.exports},"/5i8":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("ukIK")),a=r(n("xl+m")),s=r(n("T3vI")),o=r(n("/ojM"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"responseContent",components:{changeConductor:i.default,sendMessage:a.default,apiCall:s.default,modifyField:o.default},props:{item:{type:Object,default:function(){return{}}},signal:String},data:function(){return{}},computed:{onlyBackendSignals:function(){return this.$store.state.common.configurInfo.only_backend_signals||[]},isShowFrontendTrigger:function(){return!this.onlyBackendSignals.includes(this.signal)},disableRepeat:function(){return"GLOBAL_LEAVE_STATE"===this.signal||"GLOBAL_ENTER_STATE"===this.signal}},watch:{isShowFrontendTrigger:{handler:function(t){t||(this.item.performData.runMode="BACKEND")},immediate:!0},signal:{handler:function(t){"GLOBAL_LEAVE_STATE"!==t&&"GLOBAL_ENTER_STATE"!==t||(this.item.performData.repeat="more")},immediate:!0}},created:function(){this.initData()},methods:{initData:function(){var t=this;this.$set(this.item,"contentStatus",!1),"api"===this.item.wayInfo.key?this.item.wayInfo.field_schema.forEach((function(e){"api_source"===e.key?(t.$set(e,"systemId",""),t.$set(e,"apiId","")):t.$set(e,"apiContent",{})})):this.item.wayInfo.field_schema.forEach((function(e){var n=e.value||"";if("MEMBERS"===e.type||"MULTI_MEMBERS"===e.type)if(n=[],e.value)e.value.forEach((function(t){if(t.value){var e={key:t.value.member_type,value:t.value.members,secondLevelList:[],isLoading:!1};n.push(e)}}));else{n.push({key:"",value:"",secondLevelList:[],isLoading:!1})}t.$set(e,"value",n),"SUBCOMPONENT"===e.type&&e.sub_components&&e.sub_components.length&&e.sub_components.forEach((function(e){e.field_schema.length&&e.field_schema.forEach((function(e){var n=e.value||"";"MEMBERS"!==e.type&&"MULTI_MEMBERS"!==e.type||(n=[],Array.isArray(e.value)?e.value.forEach((function(t){if(t.value){var e={key:t.value.member_type,value:t.value.members,secondLevelList:[],isLoading:!1};n.push(e)}})):n=[{key:"",value:"",secondLevelList:[],isLoading:!1}]),t.$set(e,"value",n)}))}))}))}}}},"/6kH":function(t,e,n){"use strict";n("pRDg")},"/7qM":function(t,e,n){},"/9eO":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("CeR/"),s=n("2Mt+"),o=(i=s)&&i.__esModule?i:{default:i};e.default={name:"apiCall",components:{inputParams:o.default},props:{item:{type:Object,default:function(){return{}}}},data:function(){return{apiSysList:[],apiList:[],apiId:"",isLoading:!1}},mounted:function(){this.getRemoteSystemData(),this.initData()},methods:{initData:function(){var t=this;this.item.wayInfo.field_schema.forEach((function(e){"api_source"===e.key&&e.value&&t.getApiContent(e.value)}))},getRemoteSystemData:function(){var t=this,e={project_key:this.$route.query.project_id};this.$store.dispatch("apiRemote/get_all_remote_system",e).then((function(e){t.apiSysList=e.data.filter((function(t){return t.is_activated}))})).catch((function(e){(0,a.errorHandler)(e,t)})).finally((function(){}))},changeCode:function(){this.getApiTableList(arguments[2].systemId),arguments[2].apiId="",this.apiId=""},getApiTableList:function(t){var e=this;console.log(t);var n={remote_system:t||""};this.$store.dispatch("apiRemote/get_remote_api",n).then((function(t){e.apiList=t.data.filter((function(t){return t.is_activated}))})).catch((function(t){(0,a.errorHandler)(t,e)})).finally((function(){}))},changeApi:function(t){var e=arguments,n=this;this.isLoading=!0;var i=this.apiList.filter((function(t){return t.id===e[0]}))[0];this.item.wayInfo.field_schema.forEach((function(t){t.apiContent=i,n.$set(t.apiContent,"bodyTableData",[])})),this.apiId=t,setTimeout((function(){n.isLoading=!1}),1e3)},getApiContent:function(t){var e=this;this.isLoading=!0;var n={id:t};this.$store.dispatch("apiRemote/get_remote_api_detail",n).then((function(n){var i=n.data;e.item.wayInfo.field_schema.forEach((function(n){"api_source"===n.key&&n.value?(n.apiId=t,n.systemId=i.remote_system):(n.apiContent=i,e.$set(n.apiContent,"bodyTableData",[]))})),e.getApiTableList(i.remote_system),e.apiId=t,setTimeout((function(){e.isLoading=!1}),1e3)})).catch((function(t){(0,a.errorHandler)(t,e)})).finally((function(){}))}}}},"/AAH":function(t,e,n){"use strict";n.r(e);var i=n("KyEO"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"/BG8":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("Jwqd"),s=n("WSG0"),o=(i=s)&&i.__esModule?i:{default:i};var r={styles:{type:Object,default:function(){return{}}},value:{type:[String,Array],default:""}};e.default={name:"TagText",mixins:[(0,a.getFormMixins)(r)],data:function(){return{}},computed:{hasChildren:function(){return this.form.children&&Array.isArray(this.form.children)&&!!this.form.children.length}},methods:{onClick:function(){if(this.hasChildren){var t="";t=Array.isArray(this.value)?this.value.map((function(t){return(t.label||"")+t.value})).join(","):(this.label||"")+this.value;var e=this.getContext();if(e.config&&"combine"===e.config.mode)this.getTopViewItem().appendCrumbsItem(t,this.form.children);else(0,o.default)({title:t,formData:this.form.children,context:e})}}}}},"/Hw/":function(t,e,n){"use strict";n.r(e);var i=n("Ncax"),a=n("HOWN");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("5f0d");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"8cd94c38",null);e.default=r.exports},"/JtJ":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"basic-card-wrap"},[t.showFoldTitle?e("div",{staticClass:"more-configuration mb20",on:{click:function(e){t.showMore=!t.showMore}}},[t.showMore?e("i",{staticClass:"bk-icon icon-up-shape"}):e("i",{staticClass:"bk-icon icon-down-shape"}),t._v(" "),e("span",[t._v(t._s(t.foldTitle))])]):t._e(),t._v(" "),e("collapse-transition",[t.showMore?e("div",{staticClass:"common-section-card-block"},[e("label",{staticClass:"common-section-card-label"},[t._v("\n        "+t._s(t.cardLabel)+"\n        "),t.cardDesc?e("p",{staticClass:"common-section-card-desc"},[t._v(t._s(t.cardDesc))]):t._e()]),t._v(" "),e("div",{staticClass:"common-section-card-body"},[t._t("default")],2)]):t._e()])],1)},a=[];i._withStripped=!0},"/KdC":function(t,e,n){"use strict";n.r(e);var i=n("in5P"),a=n("13wB");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},"/LTZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading},expression:"{ isLoading: loading }"}],staticClass:"bk-log-flow"},[e("div",{staticClass:"mb20"},[e("bk-button",{staticClass:"mr10",attrs:{"data-test-id":"ticket_button_createAssociateTicket",theme:"default",title:t.$t("m.newCommon['新建']")},on:{click:t.openAddAssociation}},[t._v("\n      "+t._s(t.$t('m.newCommon["新建"]'))+"\n    ")]),t._v(" "),e("bk-button",{staticClass:"icon-cus",attrs:{"data-test-id":"ticket_button_associateTicketHistory",theme:"default",icon:" bk-itsm-icon icon-history",disabled:!t.historyList.length,title:t.historyList.length?t.$t("m.newCommon['绑定历史']"):t.$t("m.newCommon['暂无关联历史']")},on:{click:t.showHistory}})],1),t._v(" "),e("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.associaLoading},expression:"{ isLoading: associaLoading }"}],attrs:{data:t.associatedList,size:"small"}},[e("bk-table-column",{attrs:{label:t.$t("m.newCommon['单号']"),"min-width":"140","show-overflow-tooltip":!0,"render-header":t.$renderHeader},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticClass:"bk-lable-primary",attrs:{title:n.row.sn},on:{click:function(e){return t.checkOne(n.row,"noInfo")}}},[t._v("\n          "+t._s(n.row.sn)+"\n        ")])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.newCommon['工单类型']"),"show-overflow-tooltip":!0,"render-header":t.$renderHeader},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.service_type_name||"--")+"\n      ")]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.newCommon['服务名称']"),"show-overflow-tooltip":!0,"render-header":t.$renderHeader},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{attrs:{title:n.row.service_name}},[t._v(t._s(n.row.service_name||"--"))])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.newCommon['操作']"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("bk-button",{attrs:{theme:"primary",text:"",disabled:!n.row.can_derive},on:{click:function(e){return t.unBindDialogShow(n.row)}}},[t._v("\n          "+t._s(t.$t('m.newCommon["取消关联"]'))+"\n        ")])]}}])}),t._v(" "),e("div",{staticClass:"empty",attrs:{slot:"empty"},slot:"empty"},[e("empty",{attrs:{"is-error":t.listError},on:{onRefresh:function(e){return t.getAssociatesHistory()}}})],1)],1),t._v(" "),e("bk-dialog",{attrs:{"render-directive":"if",title:t.historyInfo.title,width:t.historyInfo.width,"header-position":t.historyInfo.headerPosition,"auto-close":t.historyInfo.autoClose,"mask-close":t.historyInfo.autoClose},model:{value:t.historyInfo.isShow,callback:function(e){t.$set(t.historyInfo,"isShow",e)},expression:"historyInfo.isShow"}},[e("div",{staticStyle:{width:"100%","max-height":"347px"}},[e("bk-table",{attrs:{data:t.historyList,size:"small"}},[e("bk-table-column",{attrs:{label:t.$t("m.newCommon['单号']"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticClass:"bk-lable-primary",attrs:{title:n.row.sn},on:{click:function(e){return t.checkOne(n.row)}}},[t._v("\n              "+t._s(n.row.sn)+"\n            ")])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.newCommon['绑定时间']"),prop:"create_at"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.newCommon['解绑时间']"),prop:"end_at"}}),t._v(" "),e("div",{staticClass:"empty",attrs:{slot:"empty"},slot:"empty"},[e("empty",{attrs:{"is-error":t.historyListError},on:{onRefresh:function(e){return t.getAssociates()}}})],1)],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("bk-button",{attrs:{theme:"default"},on:{click:t.closeHistory}},[t._v("\n        "+t._s(t.$t('m.home["取消"]'))+"\n      ")])],1)]),t._v(" "),e("bk-sideslider",{attrs:{"is-show":t.isShowAddAssociation,title:t.$t("m.manageCommon['新建关联单']"),"quick-close":!0,"before-close":t.closeSideslider,width:750},on:{"update:isShow":function(e){t.isShowAddAssociation=e},"update:is-show":function(e){t.isShowAddAssociation=e}}},[e("div",{staticClass:"p20",attrs:{slot:"content"},slot:"content"},[t.isShowAddAssociation?e("associated-dialog",{ref:"associated",attrs:{"ticket-info":t.ticketInfo},on:{close:function(e){t.isShowAddAssociation=!1},submitSuccess:t.submitSuccess}}):t._e()],1)])],1)},a=[];i._withStripped=!0},"/Mzk":function(t,e,n){"use strict";n.r(e);var i=n("wHJd"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"/VyA":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wang-editor"},[e("div",{staticClass:"change-comment",attrs:{title:t.commentType?"点击切换评论类型":"回复当前类型评论"},on:{click:t.handleChangeType}},[e("i",{class:["bk-itsm-icon",t.isInsideComment?"icon-suoding":"icon-jiesuo"]}),t._v(" "),e("span",[t._v(t._s(t.isInsideComment?t.$t("m['内部评论']"):t.$t("m['外部评论']")))]),t._v(" "),e("i",{staticClass:"bk-itsm-icon icon-jiantou_zuoyouqiehuan change-type"})]),t._v(" "),e("div",{attrs:{id:t.editorId}}),t._v(" "),e("ul",{staticClass:"bullet-box",style:{left:t.left+"px",top:t.top+"px",display:t.showFlag}},t._l(t.list,(function(n){return e("li",{key:n.key,on:{click:function(e){return t.selectLine(n)}}},[t._v("\n      "+t._s(n.name)+"\n    ")])})),0)])},a=[];i._withStripped=!0},"/WmN":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n("14Xm")),a=o(n("D3Ub")),s=n("CeR/");function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"TaskLibraryOptPanel",props:{taskList:{type:Array,default:function(){return[]}},ticketInfo:{type:Object,default:function(){return{}}}},data:function(){return{templateListLoading:!1,type:"new",formData:{name:""},rules:{name:[{required:!0,message:this.$t("m.task['任务库名称']")+this.$t('m.newCommon["为必填项！"]'),trigger:"blur"}]},templateList:[]}},methods:{getLibraryList:function(){var t=this;this.templateListLoading=!0,this.$store.dispatch("taskFlow/getLibraryList",{service_id:this.ticketInfo.service_id}).then((function(e){t.templateList=e.data})).catch((function(e){(0,s.errorHandler)(e,t)})).finally((function(){t.templateListLoading=!1}))},onSwitchType:function(t){this.type=t,this.formData.name="","update"===t&&this.getLibraryList()},onSbumit:function(){var t=this;return(0,a.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.taskForm.validate();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(t.taskList.length){e.next=8;break}return t.$bkMessage({message:t.$t("m.tickets['没有任务可以存入任务库']"),theme:"error"}),e.abrupt("return",!1);case 8:"new"===t.type?t.newTaskLibrary():t.updataLibrary();case 9:case"end":return e.stop()}}),e,t)})))()},newTaskLibrary:function(){var t=this,e={name:this.formData.name,service_id:this.ticketInfo.service_id,tasks:this.taskList.map((function(t){return t.id}))};this.$store.dispatch("taskFlow/creatLibrary",e).then((function(){t.$bkMessage({message:t.$t("m.task['任务库创建成功']"),theme:"success"}),t.$emit("close"),t.resetForm()})).catch((function(e){(0,s.errorHandler)(e,t)}))},updataLibrary:function(){var t=this,e={tasks:this.taskList.map((function(t){return t.id}))},n=this.formData.name;this.$store.dispatch("taskFlow/updataLibrary",{params:e,id:n}).then((function(){t.$bkMessage({message:t.$t("m.task['更新成功']"),theme:"success"}),t.$emit("close"),t.resetForm()})).catch((function(e){(0,s.errorHandler)(e,t)}))},resetForm:function(){this.formData.name="",this.type="new"}}}},"/e7F":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("/14K"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"approvalNodeInfo",components:{fieldsDone:s.default},props:{nodeInfo:{type:Object,default:function(){return{}}}},data:function(){return{}}}},"/hlf":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(n("GQeE")),a=l(n("14Xm")),s=l(n("D3Ub")),o=l(n("tgnH")),r=l(n("7Uj4")),c=l(n("KaYb"));function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"sopsTask",components:{sopsGetParam:c.default,DevopsPreview:o.default,webHook:r.default},props:{ticketInfo:Object,nodeInfo:Object,constants:Array,hookedVarList:Object,constantDefaultValue:Object,pipelineList:{type:Array,default:function(){return[]}},pipelineRules:Object,workflow:[Number,String],pipelineStages:Array,pipelineConstants:Array},data:function(){return{isStatic:!1,changeBtn:!1,context:{project:{id:"",bk_biz_id:"",name:"",from_cmdb:!0},bk_biz_id:"",site_url:window.SITE_URL_SOPS+window.PREFIX_SOPS},isHook:!1,isEdit:!1,stateList:[],disable:!0,errorTip:!1,pipelineFormList:[],pipelineData:{}}},watch:{pipelineConstants:function(t){var e=this;t.map((function(t){e.$set(e.pipelineData,t.key,t.value)}))}},mounted:function(){this.getRelatedFields()},methods:{getRelatedFields:function(){var t=this;return(0,s.default)(a.default.mark((function e(){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={workflow:t.workflow,state:t.nodeInfo.state_id,field:""},e.next=3,t.$store.dispatch("apiRemote/get_related_fields",n).then((function(e){t.stateList=e.data})).catch((function(t){console.log(t)})).finally((function(){}));case 3:case"end":return e.stop()}}),e,t)})))()},reSetSopTask:function(){this.changeBtn=!this.changeBtn,this.disable=!this.changeBtn,this.isHook=this.changeBtn,this.isEdit=!this.isEdit,this.$refs.sopsGetParam&&this.$refs.sopsGetParam.changeTicketformDisable(this.changeBtn)},onChangeHook:function(t,e){this.$emit("onChangeHook",t,e)},ignore:function(){var t=this,e={inputs:{},is_direct:!0,state_id:this.nodeInfo.state_id};this.$store.dispatch("deployOrder/ignoreNode",{params:e,ticketId:this.nodeInfo.ticket_id}).then((function(){t.$bkMessage({message:t.$t('m["忽略完成"]'),theme:"success"}),t.$emit("reloadTicket")}))},retry:function(t){var e=this;this.$store.dispatch("deployOrder/retryNode",{params:t,ticketId:this.nodeInfo.ticket_id}).then((function(){e.$bkMessage({message:e.$t('m.newCommon["提交成功"]'),theme:"success"}),e.changeBtn=!1,e.$emit("reloadTicket")}))},submit:function(){var t=this,e={inputs:{},state_id:this.nodeInfo.state_id};if("TASK-SOPS"===this.nodeInfo.type){if(!this.$refs.sopsGetParam.getRenderFormValidate())return;var n=this.nodeInfo.api_info.sops_info.find((function(t){return"bk_biz_id"===t.key})),a={name:n.name,value:n.params_value,key:n.key,value_type:"custom"},s=this.nodeInfo.contexts.task_params,o=s.exclude_task_nodes_id,r=s.template_id,c=s.template_source,l=[];this.constants.map((function(e){if("show"===e.show_type){var n=(0,i.default)(t.$refs.sopsGetParam.formData).filter((function(t){return t===e.key})),a=t.hookedVarList[n]?"variable":"custom",s={name:e.name,key:e.key,value:t.hookedVarList[n]?t.$refs.sopsGetParam.formData[n].slice(2,t.$refs.sopsGetParam.formData[n].length-1):t.$refs.sopsGetParam.formData[n],value_type:a,is_quoted:t.hookedVarList[n]};l.push(s)}})),e.inputs={bk_biz_id:a,template_id:r,constants:l,exclude_task_nodes_id:o,template_source:c},this.retry(e)}else"TASK-DEVOPS"===this.nodeInfo.type?this.$refs.devopsVariable.validate().then((function(){var n=(0,i.default)(t.$refs.devopsVariable.model).map((function(e){return{value:t.$refs.devopsVariable.model[e],name:e,key:e}})),a=t.nodeInfo.api_info.devops_info.find((function(t){return"project_id"===t.key})),s=t.nodeInfo.api_info.devops_info.find((function(t){return"pipeline_id"===t.key}));e.inputs={username:window.username,project_id:a,pipeline_id:s,constants:n},t.retry(e)})):this.$refs.webhook.validate().then((function(){var n=t.$refs.webhook.curEq,i=t.$refs.webhook.formData,a=i.success_exp,s=i.url,o=t.$refs.webhook.$refs.requestConfig.config,r=o.queryParams,c=o.bodyFormData,l=o.bodyWwwForm,u=o.authRadio,d=o.auth_config,f=o.settings,m=o.bodyValue,p=o.bodyRadio,h=o.rawType,v=r.filter((function(t){return t.select})),b={auth_type:"None"!==u?u:"",auth_config:{}},k=d.username,g=d.password,_=d.Token;"basic_auth"===u?(b.auth_config.username=k,b.auth_config.password=g):"bearer_token"===u&&(b.auth_config.token=_);var y={type:"none"!==p?p:"",raw_type:"",content:""};"form-data"===p?y.content=c.filter((function(t){return t.select})):"x-www-form-urlencoded"===p?y.content=l.filter((function(t){return t.select})):"raw"===p&&(y.raw_type=h,y.content=m);var I={timeout:Number(f.timeout)};e.inputs={method:n,url:s,success_exp:a,query_params:v,auth:b,headers:[],body:y,settings:I},"GET"===e.inputs.method?t.errorTip=!v.every((function(t){return""!==t.key&&""!==t.value})):"string"!=typeof y.content&&(t.errorTip=![y.content,v].every((function(t){return t.every((function(t){return""!==t.key&&""!==t.value}))}))),t.errorTip||t.retry(e)}))}}}},"/inP":function(t,e,n){"use strict";n.r(e);var i=n("Bzqh"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"/m8X":function(t,e,n){"use strict";n("BST3")},"/nBP":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"100%"}},[e("full-screen",{attrs:{"is-full":t.isFull,title:t.fullTitle},on:{onClose:t.closeFullSreen}},[t.isPreview?e("viewer",{attrs:{"initial-value":t.value,height:t.height+"px"}}):e("editor",{ref:"toastuiEditor",attrs:{height:t.height+"px","initial-edit-type":"wysiwyg","preview-style":"vertical","initial-value":t.value,options:t.editorOptions},on:{load:t.onEditorLoad,blur:t.onEditorBlur}}),t._v(" "),t.isFull?t._e():e("i",{staticClass:"bk-itsm-icon icon-order-open",on:{click:function(e){return e.stopPropagation(),t.openFullScreen.apply(null,arguments)}}})],1)],1)},a=[];i._withStripped=!0},"/ojM":function(t,e,n){"use strict";n.r(e);var i=n("jUNn"),a=n("aDD8");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("20vx");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"b4f443ec",null);e.default=r.exports},"/pAP":function(t,e,n){"use strict";n("kACU")},"/xVU":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("m1cH")),a=r(n("GQeE")),s=n("1R/T"),o=r(n("9ume"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={key:"requestConfig",components:{paramsTable:o.default},props:{type:{type:String,default:function(){return"GET"}},configur:{type:Object,default:function(){return{}}},isStatus:{type:Boolean,default:function(){return!0}},disable:{type:Boolean,default:function(){return!1}},stateList:Array},data:function(){return{left:20,top:72,acticeTab:"queryParams",panels:[{key:"queryParams",label:this.$t("m['参数']"),count:0},{key:"auth",label:this.$t("m['认证']"),count:0},{key:"headers",label:this.$t("m['头信息']"),count:0},{key:"body",label:this.$t("m['主体']"),count:0},{key:"settings",label:this.$t("m['设置']"),count:0}],list:[{check:!1,key:"",value:"",desc:"",select:!1}],rawList:["JSON","HTML","XML","Text"],rawVarList:[],filterParams:"",config:{auth_config:{Token:"",username:"",password:""},authRadio:"none",queryParams:[{check:!1,key:"",value:"",desc:"",select:!1}],headers:[{check:!1,key:"",value:"",desc:"",select:!1}],bodyWwwForm:[{check:!1,key:"",value:"",desc:"",select:!1}],bodyFormData:[{check:!1,key:"",value:"",desc:"",select:!1}],bodyRadio:"none",bodyValue:"",rawType:"Text",settings:{timeout:10}}}},computed:{count:function(){return{queryParams:this.config.queryParams.filter((function(t){return t.select})).length}},radioDisabled:function(){return"GET"===this.type}},watch:{type:function(t){"GET"===t&&(this.config.bodyRadio="none")},"config.bodyValue":function(t){if(this.$refs.textarea){var e=this.$refs.textarea,n=(0,s.position)(e);if(this.left=n.left+10,this.top=n.top+40+24+2-e.scrollTop,!t)return void(this.rawVarList=[]);var i=t.lastIndexOf("{{");if(-1!==i){var a=t.substring(i+2,t.length)||"";this.filterParams=a,this.rawVarList=this.stateList.filter((function(t){return-1!==t.name.indexOf(a)||-1!==t.key.indexOf(a)})),0!==this.rawVarList.length&&this.$refs.textarea.focus()}}}},created:function(){},mounted:function(){if(this.isStatus){if(0!==(0,a.default)(this.configur.extras).length){var t=this.configur.extras.webhook_info,e=t.auth,n=t.settings,s=t.query_params,o=t.body,r=t.headers;this.config.queryParams=[].concat((0,i.default)(s),(0,i.default)(this.config.queryParams)),this.config.headers=[].concat((0,i.default)(r),(0,i.default)(this.config.headers)),this.config.settings.timeout=n.timeout,this.config.authRadio=e.auth_type||"none","bearer_token"===e.auth_type?this.config.auth_config.Token=e.auth_config.token:"basic_auth"===e.auth_type&&(this.config.auth_config.username=e.auth_config.username,this.config.auth_config.password=e.auth_config.password),this.config.bodyRadio=o.type||"none","form-data"===o.type?this.config.bodyFormData=[].concat((0,i.default)(o.content),(0,i.default)(this.config.bodyFormData)):"x-www-form-urlencoded"===o.type?this.config.bodyWwwForm=[].concat((0,i.default)(o.content),(0,i.default)(this.config.bodyWwwForm)):"raw"===o.type&&(this.config.rawType=o.raw_type,this.config.bodyValue=o.content)}}else if(0!==(0,a.default)(this.configur.api_info).length){var c=this.configur.api_info.webhook_info,l=c.body,u=c.settings,d=c.auth,f=c.query_params;this.config.settings.timeout=u.timeout;var m=[];for(var p in f)m.push({key:p,value:f[p],select:!0});if(this.config.queryParams=[].concat(m,(0,i.default)(this.config.queryParams)),this.config.bodyRadio=l.type||"none","x-www-form-urlencoded"===l.type){var h=[];l.content.split("&").map((function(t){var e=t.split("=");h.push({key:e[0],value:e[1],select:!0})})),this.config.bodyWwwForm=[].concat(h,(0,i.default)(this.config.bodyWwwForm))}else"form-data"===l.type||"raw"===l.type&&(this.config.rawType=l.raw_type,this.config.bodyValue=l.content);"auth_type"in d?(this.config.authRadio=d.auth_type,"bearer_token"===d.auth_type?this.config.auth_config.Token=d.auth_config.token:"basic_auth"===d.auth_type&&(this.config.auth_config.username=d.auth_config.username,this.config.auth_config.password=d.auth_config.password)):this.config.authRadio="none"}},methods:{handleSelectContent:function(t){this.config.bodyValue=this.config.bodyValue.slice(0,-(this.filterParams.length+2))+"{{ "+t.key+"}}",this.$refs.textarea.focus()},changeTab:function(t){this.acticeTab=t.key},handleDelete:function(t){var e=this.list.indexOf(t);-1!==e&&this.list.splice(e,1)},changeFormStatus:function(t){this.$emit("changeFormStatus",t)},changeInput:function(t){t.check?[t.key,t.value,t.desc].every((function(t){return""===t}))&&(this.list.pop(),t.check=!1,t.select=!1):(t.check=!0,t.select=!0,this.list.push({check:!1,key:"",value:"",desc:"",select:!1}))}}}},"005i":function(t,e,n){"use strict";n.r(e);var i=n("36bi"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"01Jc":function(t,e,n){"use strict";n.r(e);var i=n("d8St"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"070I":function(t,e,n){"use strict";n.r(e);var i=n("nCLG"),a=n("hAcJ");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("e07s");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"532d79ca",null);e.default=r.exports},"0CIy":function(t,e,n){"use strict";n.r(e);var i=n("djBg"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"0NR2":function(t,e,n){"use strict";n.r(e);var i=n("eC4C"),a=n("4DM6");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("eIgA");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"3ce3b7ce",null);e.default=r.exports},"0Oxo":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},[e("bk-select",{class:{"bk-border-error":t.item.checkValue},attrs:{disabled:t.item.is_readonly&&!t.isCurrent||t.disabled,searchable:"",multiple:"","font-size":"medium",placeholder:t.item.desc},on:{selected:t.selected,toggle:function(e){t.item.checkValue=!1}},model:{value:t.selectedItems,callback:function(e){t.selectedItems=e},expression:"selectedItems"}},t._l(t.options,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},"0T5/":function(t,e,n){},"0UPU":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-table-fields"},[t.openFunction.FIRST_STATE_SWITCH?[e("span",{staticClass:"bk-field-tip"},[t._v(t._s(t.$t("m['单据内容：']")))]),t._v(" "),e("bk-form",{attrs:{"label-width":200,"form-type":"vertical","ext-cls":"bk-ext-form"}},[t._l(t.firstStateFields,(function(n,i){return[n.showFeild?e("div",{key:i,staticClass:"bk-field-line"},[e("fields-done",{attrs:{item:n,"basic-info-type":t.basicInfoType,fields:t.firstStateFields,"basic-infomation":t.basicInfomation}})],1):t._e()]}))],2)]:t._e(),t._v(" "),t.openFunction.TABLE_FIELDS_SWITCH?[e("span",{staticClass:"bk-field-tip"},[t._v(t._s(t.$t("m['基础字段信息：']")))]),t._v(" "),e("bk-form",{attrs:{"label-width":200,"form-type":"vertical","ext-cls":"bk-ext-form"}},t._l(t.tableFields,(function(n,i){return e("div",{key:i,staticClass:"bk-field-line"},[n.isEdit?[e("fields-running",{attrs:{item:n,fields:t.basicInfomation.table_fields,"basic-infomation":t.basicInfomation}})]:[e("fields-done",{attrs:{item:n,"basic-info-type":t.basicInfoType,fields:t.basicInfomation.table_fields,"basic-infomation":t.basicInfomation}})]],2)})),0)]:t._e()],2)},a=[];i._withStripped=!0},"0aAG":function(t,e,n){"use strict";n("x0hC")},"0aeA":function(t,e,n){"use strict";n("9iPB")},"0kDG":function(t,e,n){},"0mGZ":function(t,e,n){"use strict";n.r(e);var i=n("ZQWa"),a=n("nZ24");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("f/ki");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"a0ed28ba",null);e.default=r.exports},"0nTK":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=f(n("P2sY")),a=f(n("gDS+")),s=f(n("jWXv")),o=f(n("FyfS")),r=f(n("JO7F")),c=f(n("nLf9")),l=f(n("GQeE")),u=f(n("SEkw")),d=n("4ZMo");function f(t){return t&&t.__esModule?t:{default:t}}function m(t,e,n){return e in t?(0,u.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=(0,l.default)(n);"function"==typeof c.default&&(i=i.concat((0,c.default)(n).filter((function(t){return(0,r.default)(n,t).enumerable})))),i.forEach((function(e){m(t,e,n[e])}))}return t}var h=function(t,e,n,i,a,s,o,r,c,l){"boolean"!=typeof o&&(c=r,r=o,o=!1);var u,d="function"==typeof n?n.options:n;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,a&&(d.functional=!0)),i&&(d._scopeId=i),s?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(s)},d._ssrRegister=u):e&&(u=o?function(){e.call(this,l(this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),u)if(d.functional){var f=d.render;d.render=function(t,e){return u.call(e),f(t,e)}}else{var m=d.beforeCreate;d.beforeCreate=m?[].concat(m,u):[u]}return n},v="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase()),b=document.head||document.getElementsByTagName("head")[0],k={},g=function(t){return function(t,e){return function(t,e){var n=v?e.media||"default":t,i=k[n]||(k[n]={ids:new s.default,styles:[]});if(!i.ids.has(t)){i.ids.add(t);var o=e.source;if(e.map&&(o+="\n/*# sourceURL="+e.map.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent((0,a.default)(e.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",e.media&&i.element.setAttribute("media",e.media),b.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(o),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{var r=i.ids.size-1,c=document.createTextNode(o),l=i.element.childNodes;l[r]&&i.element.removeChild(l[r]),l.length?i.element.insertBefore(c,l[r]):i.element.appendChild(c)}}}(t,e)}},_=h({render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"palette-panel"},[this._t("palette",[this._m(0)])],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"palette-group"},[e("li",[e("div",{staticClass:"palette-default-item type-a",attrs:{"data-type":"type-a"}},[this._v("A")])]),e("li",[e("div",{staticClass:"palette-default-item type-b",attrs:{"data-type":"type-b"}},[this._v("B")])]),e("li",[e("div",{staticClass:"palette-default-item type-c",attrs:{"data-type":"type-c"}},[this._v("C")])]),e("li",[e("div",{staticClass:"palette-default-item type-d",attrs:{"data-type":"type-d"}},[this._v("D")])])])}]},(function(t){t&&t("data-v-6c6ee110_0",{source:".palette-group{margin:0;padding:0;background:#fcfcfc;text-align:center;list-style:none}.palette-group>li{padding:14px 0}.palette-default-item{display:inline-block;width:40px;height:40px;line-height:40px;font-size:12px;color:#888;border:1px solid #999;border-radius:2px;cursor:pointer;user-select:none}.palette-default-item:hover{box-shadow:0 0 8px rgba(50,50,50,.3)}.type-a{border-radius:50%}.type-b{border-radius:50%;border:4px solid #333}.type-c,.type-d{height:30px;line-height:30px;border:1px solid #999}.type-d{position:relative}.type-d:after{content:'';position:absolute;top:0;right:0;width:5px;height:5px;border-radius:50%;background:#ccc}",map:void 0,media:void 0})}),{name:"PalettePanel",props:["selector"],data:function(){return{}},mounted:function(){this.$emit("registerPaletteEvent")}},void 0,!1,void 0,g,void 0),y=h({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tool-panel"},t._l(t.tools,(function(e,i){return n("div",{key:i,class:["tool-item",e.cls,{actived:"frameSelect"===e.type&&t.isFrameSelecting}],attrs:{title:e.title},on:{click:function(n){return t.onToolClick(e)}}},[t._v("\n        "+t._s(e.name)+"\n    ")])})),0)},staticRenderFns:[]},(function(t){t&&t("data-v-20cba315_0",{source:".tool-item{display:inline-block;margin-right:10px;user-select:none;cursor:pointer}.tool-item:last-child{margin-right:0}.tool-item.actived{color:#3a84ff}",map:void 0,media:void 0})}),{name:"ToolPanel",props:["tools","isFrameSelecting"],data:function(){return{}},methods:{onToolClick:function(t){this.$emit("onToolClick",t)}}},void 0,!1,void 0,g,void 0),I=h({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bk-flow-location",on:{mousedown:function(e){t.moveFlag=!1},mousemove:function(e){t.moveFlag=!0},mouseup:function(e){return t.onNodeClick(t.node,e)}}},["type-a"===t.node.type?n("div",{staticClass:"type-a"},[t._v("start")]):"type-b"===t.node.type?n("div",{staticClass:"type-b"},[t._v("end")]):"type-c"===t.node.type?n("div",{staticClass:"type-c"},[t._v("taskNode")]):"type-d"===t.node.type?n("div",{staticClass:"type-d"},[t._v("subFlow")]):n("div",{staticClass:"node-default"})])},staticRenderFns:[]},(function(t){t&&t("data-v-2d0e3090_0",{source:".bk-flow-location .type-c,.bk-flow-location .type-d{width:120px;height:60px;line-height:60px;border:1px solid #ccc;text-align:center;cursor:pointer}.bk-flow-location .type-c:hover,.bk-flow-location .type-d:hover{border-color:#348aff}.bk-flow-location .type-d{position:relative}.bk-flow-location .type-d:after{content:'';position:absolute;top:0;right:0;width:10px;height:10px;border-radius:50%;background:#ccc}.bk-flow-location .type-a,.bk-flow-location .type-b{width:60px;height:60px;line-height:60px;border-radius:50%;border:1px solid #ccc;text-align:center}.bk-flow-location .type-b{border:4px solid #333}.bk-flow-location .node-default{width:120px;height:80px;line-height:80px;border:1px solid #ccc;border-radius:2px;text-align:center}.bk-flow-location .node-default.selected{border:1px solid #3a84ff}",map:void 0,media:void 0})}),{name:"NodeTemplate",props:{node:{type:Object,default:function(){return{}}}},data:function(){return{moveFlag:!1}},methods:{onNodeClick:function(t,e){this.moveFlag||console.log(t.x,t.y)}}},void 0,!1,void 0,g,void 0);function w(t){return"touches"in t?t.touches[0]:t}function C(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="",n=0;n<7;n++)e+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return t+e}var S={showPalette:{type:Boolean,default:!0},showTool:{type:Boolean,default:!0},tools:{type:Array,default:function(){return[{type:"zoomIn",name:"放大",cls:"tool-item"},{type:"zoomOut",name:"缩小",cls:"tool-item"},{type:"resetPosition",name:"重置",cls:"tool-item"},{type:"frameSelect",name:"框选",cls:"tool-item"}]}},editable:{type:Boolean,default:!0},selector:{type:String,default:"palette-default-item"},quickConnect:{type:Boolean,default:!0},data:{type:Object,default:function(){return{nodes:[],lines:[]}}},nodeOptions:{type:Object,default:function(){return{grid:[5,5]}}},connectorOptions:{type:Object,default:function(){return{paintStyle:{fill:"transparent",stroke:"#a9adb6",strokeWidth:2},hoverPaintStyle:{fill:"transparent",stroke:"#3a84ff"}}}},endpointOptions:{type:Object,default:function(){return{endpoint:"Dot",connector:["Flowchart",{stub:[1,6],alwaysRespectStub:!0,gap:8,cornerRadius:2}],connectorOverlays:[["PlainArrow",{width:8,length:6,location:1,id:"arrow"}]],anchor:["Left","Right","Top","Bottom"],isSource:!0,isTarget:!0}}}},T={mousedown:"ontouchstart"in document.documentElement?"touchstart":"mousedown",mousemove:"ontouchmove"in document.documentElement?"touchmove":"mousemove",mouseup:"ontouchend"in document.documentElement?"touchend":"mouseup"},L=h({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"jsflow"},[n("div",{staticClass:"canvas-area"},[t.showTool?n("div",{staticClass:"tool-panel-wrap"},[t._t("toolPanel",[n("tool-panel",{attrs:{tools:t.tools,"is-frame-selecting":t.isFrameSelecting},on:{onToolClick:t.onToolClick}})])],2):t._e(),t.showPalette?n("div",{ref:"palettePanel",staticClass:"palette-panel-wrap"},[t._t("palettePanel",[n("palette-panel",{attrs:{selector:t.selector}})])],2):t._e(),n("div",{ref:"canvasFlowWrap",staticClass:"canvas-flow-wrap",style:t.canvasWrapStyle,on:t._d({},[t.mousedown,t.onCanvasMouseDown,t.mouseup,t.onCanvasMouseUp])},[n("div",{ref:"canvasFlow",staticClass:"canvas-flow",style:t.canvasStyle,attrs:{id:"canvas-flow"}},t._l(t.nodes,(function(e){return n("div",{key:e.id,staticClass:"jsflow-node canvas-node",attrs:{id:e.id},on:{mouseover:function(n){return t.toggleHighLight(e,!0)},mouseout:function(n){return t.toggleHighLight(e,!1)}}},[t._t("nodeTemplate",[n("node-template",{attrs:{node:e}})],{node:e})],2)})),0),t.isFrameSelecting?n("div",{staticClass:"canvas-frame-selector",style:t.frameSelectorStyle}):t._e()]),t.showAddingNode?n("div",{staticClass:"jsflow-node adding-node",style:t.setNodeInitialPos(t.addingNodeConfig)},[t._t("nodeTemplate",[n("node-template",{attrs:{node:t.addingNodeConfig}})],{node:t.addingNodeConfig})],2):t._e()])])},staticRenderFns:[]},(function(t){t&&t("data-v-e853be96_0",{source:".jsflow{height:100%;border:1px solid #ccc}.jsflow .canvas-area{position:relative;height:100%}.jsflow .tool-panel-wrap{position:absolute;top:20px;left:70px;padding:10px 20px;background:#c4c6cc;opacity:.65;border-radius:4px;z-index:4}.jsflow .palette-panel-wrap{float:left;width:60px;height:100%;border-right:1px solid #ccc}.jsflow .canvas-flow-wrap{position:relative;height:100%;overflow:hidden}.jsflow .canvas-flow{position:relative;min-width:100%;min-height:100%}.jsflow .canvas-frame-selector{position:absolute;border:1px solid #3a84ff;background:rgba(58,132,255,.15)}.jsflow .jsflow-node{position:absolute;z-index:1}.jsflow .jtk-endpoint{z-index:1}.jsflow .adding-node{opacity:.8}.jsflow .jtk-endpoint.jtk-dragging{z-index:0}",map:void 0,media:void 0})}),{name:"JsFlow",components:{PalettePanel:_,ToolPanel:y,NodeTemplate:I},model:{prop:"data",event:"change"},props:S,data:function(){var t=this.data;return p({nodes:t.nodes,lines:t.lines,canvasGrabbing:!1,isFrameSelecting:!1,mouseDownPos:{},canvasPos:{x:0,y:0},canvasOffset:{x:0,y:0},frameSelectorPos:{x:0,y:0},frameSelectorRect:{width:0,height:0},selectedNodes:[],showAddingNode:!1,addingNodeConfig:{},addingNodeRect:{},canvasRect:{},paletteRect:{},zoom:1},T)},computed:{canvasWrapStyle:function(){return{cursor:this.isFrameSelecting?"crosshair":this.canvasGrabbing?"-webkit-grabbing":"-webkit-grab"}},canvasStyle:function(){return{left:"".concat(this.canvasOffset.x,"px"),top:"".concat(this.canvasOffset.y,"px")}},frameSelectorStyle:function(){return{left:"".concat(this.frameSelectorPos.x,"px"),top:"".concat(this.frameSelectorPos.y,"px"),width:"".concat(this.frameSelectorRect.width,"px"),height:"".concat(this.frameSelectorRect.height,"px")}}},watch:{data:{handler:function(t){var e=t.nodes,n=t.lines;this.nodes=e,this.lines=n},deep:!0},editable:function(t){var e=this.$el.querySelectorAll(".canvas-node");this.toggleNodeDraggable(e,t)}},mounted:function(){this.initCanvas(),this.registerEvent(),this.renderData(),this.canvasRect=this.$refs.canvasFlow.getBoundingClientRect(),this.$refs.palettePanel&&(this.paletteRect=this.$refs.palettePanel.getBoundingClientRect(),this.registerPaletteEvent())},beforeDestroy:function(){this.$refs.palettePanel&&this.$refs.palettePanel.removeEventListener(this.mousedown,this.nodeCreateHandler),this.$el.removeEventListener(this.mousemove,this.nodeMovingHandler),document.removeEventListener(this.mouseup,this.nodeMoveEndHandler)},methods:{initCanvas:function(){var t={},e=p({},this.endpointOptions,this.connectorOptions);for(var n in e){var i=n[0].toUpperCase();t["".concat(i).concat(n.slice(1))]=e[n]}this.instance=d.jsPlumb.getInstance(p({container:"canvas-flow"},t))},registerEvent:function(){var t=this;this.instance.bind("beforeDrag",(function(e){return!!t.editable&&("function"!=typeof t.$listeners.onBeforeDrag||t.$listeners.onBeforeDrag(e))})),this.instance.bind("beforeDrop",(function(e){return!!t.editable&&("function"!=typeof t.$listeners.onBeforeDrop||t.$listeners.onBeforeDrop(e))})),this.instance.bind("connectionDrag",(function(e){"function"==typeof t.$listeners.connectionDrag&&t.$emit("connectionDrag",e)})),this.instance.bind("connection",(function(e){if("function"==typeof t.$listeners.onConnection)return t.$listeners.onConnection(e)})),this.instance.bind("connectionDragStop",(function(e,n){if(!e.target||!e.target.classList.contains("jsflow-node")){var i=t.getNodeWithEndpoint(n.target);if(i){var a=t.nodes.find((function(t){return i.id===t.id}));if("function"==typeof t.$listeners.onConnectionDragStop){var s={id:e.source.id,arrow:e.endpoints[0].anchor.type};t.$emit("onConnectionDragStop",s,a.id,n)}}}})),this.instance.bind("beforeDetach",(function(e){return"function"!=typeof t.$listeners.onBeforeDetach||t.$listeners.onBeforeDetach(e)})),this.instance.bind("connectionDetached",(function(e,n){var i=t.lines.filter((function(t){return t.source.id!==e.sourceId&&t.target.id!==e.targetId}));t.lines=i,"function"==typeof t.$listeners.onConnectionDetached&&t.$emit("onConnectionDetached",i)})),this.instance.bind("connectionMoved",(function(e,n){"function"==typeof t.$listeners.onConnectionMoved&&t.$emit("onConnectionMoved",lines)})),this.instance.bind("click",(function(e,n){"function"==typeof t.$listeners.onConnectionClick&&t.$emit("onConnectionClick",e,n)})),this.instance.bind("dblclick",(function(e,n){"function"==typeof t.$listeners.onConnectionDbClick&&t.$emit("onConnectionDbClick",e,n)}))},renderData:function(){var t=this;this.instance.batch((function(){t.nodes.forEach((function(e){t.initNode(e)})),t.lines.forEach((function(e){t.createConnector(e,t.connectorOptions)}))}))},createNode:function(t){var e=this;("function"!=typeof this.$listeners.onCreateNodeBefore||this.$listeners.onCreateNodeBefore(t))&&(this.nodes.push(t),this.$nextTick((function(){e.initNode(t)})))},initNode:function(t){var e=document.getElementById(t.id);e.style.left="".concat(t.x,"px"),e.style.top="".concat(t.y,"px"),this.setNodeDraggable(t,this.nodeOptions),this.setNodeEndPoint(t,this.endpointOptions),"function"==typeof this.$listeners.onCreateNodeAfter&&this.$emit("onCreateNodeAfter",t)},removeNode:function(t){var e=this.nodes.findIndex((function(e){return e.id===t.id}));this.nodes.splice(e,1),this.instance.remove(t.id)},setNodeEndPoint:function(t,e){var n=this;(t.endpoints||["Top","Right","Bottom","Left"]).forEach((function(i){n.instance.addEndpoint(t.id,p({anchor:i,uuid:i+t.id},e))}))},setNodeDraggable:function(t,e){if(this.editable){var n=this;this.instance.draggable(t.id,p({grid:[20,20],drag:function(e){var a=(0,i.default)({},t);n.$emit("onNodeMoving",a,e)},stop:function(e){var a=n.nodes.findIndex((function(e){return e.id===t.id})),s=(0,i.default)({},t),r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,s=void 0;try{for(var r,c=(0,o.default)(t);!(i=(r=c.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){a=!0,s=t}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e.pos,2),c=r[0],l=r[1];s.x=c,s.y=l,n.nodes.splice(a,1,s),n.$emit("onNodeMoveStop",s,e)}},e))}},setNodePosition:function(t){var e=document.getElementById(t.id);e.style.left="".concat(t.x,"px"),e.style.top="".concat(t.y,"px"),this.instance.revalidate(e)},toggleNodeDraggable:function(t,e){this.instance.setDraggable(t,e)},setNodeInitialPos:function(t){return{left:"".concat(t.x,"px"),top:"".concat(t.y,"px")}},createConnector:function(t,e){var n=t.options||{};return this.instance.connect({source:t.source.id,target:t.target.id,uuids:[t.source.arrow+t.source.id,t.target.arrow+t.target.id]},p({},e,n))},getConnectorsByNodeId:function(t){return this.instance.getAllConnections().filter((function(e){return e.sourceId===t||e.targetId===t}))},getNodeWithEndpoint:function(t){var e=t.parentNode;return!(!e||"HTML"===e.nodeName)&&(e.classList.contains("jsflow-node")?e:this.getNodeWithEndpoint(e))},removeConnector:function(t){var e=this;this.instance.getConnections({source:t.source.id,target:t.target.id}).forEach((function(t){e.instance.deleteConnection(t)}))},addLineOverlay:function(t,e){var n=this;this.instance.getConnections({source:t.source.id,target:t.target.id}).forEach((function(t){t.addOverlay([e.type,{label:e.name,location:e.location,cssClass:e.cls,id:e.id,events:{click:function(t,e){n.$emit("onOverlayClick",t,e)}}}])}))},removeLineOverlay:function(t,e){this.instance.getConnections({source:t.source.id,target:t.target.id}).forEach((function(t){t.removeOverlay(e)}))},onCanvasMouseDown:function(t){t=w(t),this.isFrameSelecting?this.frameSelectHandler(t):(this.canvasGrabbing=!0,this.mouseDownPos={x:t.pageX,y:t.pageY},this.$refs.canvasFlowWrap.addEventListener(this.mousemove,this.canvasFlowMoveHandler,!1))},canvasFlowMoveHandler:function(t){t=w(t),this.canvasOffset={x:this.canvasPos.x+t.pageX-this.mouseDownPos.x,y:this.canvasPos.y+t.pageY-this.mouseDownPos.y}},onCanvasMouseUp:function(t){this.isFrameSelecting?this.frameSelectEndHandler(t):(this.canvasGrabbing=!1,this.$refs.canvasFlowWrap.removeEventListener(this.mousemove,this.canvasFlowMoveHandler),this.canvasPos={x:this.canvasOffset.x,y:this.canvasOffset.y})},registerPaletteEvent:function(){this.$refs.palettePanel.addEventListener(this.mousedown,this.nodeCreateHandler,!1)},nodeCreateHandler:function(t){var e=this,n=function t(e,n){return 1===e.nodeType&&e.classList.contains(n)?e:"HTML"!==e.parentNode.nodeName?t(e.parentNode,n):null}(t.target,this.selector);if(!n)return!1;var i=n.dataset.type?n.dataset.type:"",a=n.dataset?n.dataset.config:{};this.showAddingNode=!0,this.addingNodeConfig.id=C("node"),this.addingNodeConfig.type=i,this.$nextTick((function(){var n=e.$el.querySelector(".adding-node");e.addingNodeRect=n.getBoundingClientRect();var s=e.getAddingNodePos(t);e.addingNodeConfig=p({id:C("node"),type:i,x:s.x,y:s.y},a),e.$el.addEventListener(e.mousemove,e.nodeMovingHandler,!1),document.addEventListener(e.mouseup,e.nodeMoveEndHandler,!1)}))},nodeMovingHandler:function(t){var e=this.getAddingNodePos(t);this.$set(this.addingNodeConfig,"x",e.x),this.$set(this.addingNodeConfig,"y",e.y)},nodeMoveEndHandler:function(t){if(this.$el.removeEventListener(this.mousemove,this.nodeMovingHandler),document.removeEventListener(this.mouseup,this.nodeMoveEndHandler),this.showAddingNode=!1,t.pageX>this.paletteRect.left+this.paletteRect.width){var e=this.addingNodeConfig.x-this.paletteRect.width-this.canvasOffset.x,n=this.addingNodeConfig.y-this.canvasOffset.y;this.$set(this.addingNodeConfig,"x",e),this.$set(this.addingNodeConfig,"y",n),this.createNode(this.addingNodeConfig)}this.addingNodeConfig={},this.addingNodeRect={}},getAddingNodePos:function(t){return{x:t.pageX-this.paletteRect.left-this.addingNodeRect.width/2,y:t.pageY-this.paletteRect.top-this.addingNodeRect.height/2}},toggleHighLight:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=(this.instance.getEndpoints(t.id),document.getElementById(t.id));this.instance.selectEndpoints({source:i}).each((function(t){var i=n?e.endpointOptions.hoverPaintStyle:e.endpointOptions.paintStyle;t.setStyle(i)}))},onToolClick:function(t){"function"==typeof this[t.type]&&this[t.type](),this.$emit("onToolClick",t)},setZoom:function(t){this.instance.setContainer("canvas-flow"),this.$refs.canvasFlow.style.transform="matrix("+t+",0,0,"+t+",0,0)",this.$refs.canvasFlow.style.transformOrigin="0 0",this.$refs.canvasFlow.zoom=t,this.zoom=t,this.instance.setZoom(t)},zoomIn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.1;this.setZoom(this.zoom*t)},zoomOut:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.9;this.setZoom(this.zoom*t)},resetPosition:function(){this.setZoom(1),this.setCanvasPosition(0,0)},setCanvasPosition:function(t,e){this.canvasOffset={x:t,y:e},this.canvasPos={x:t,y:e}},frameSelect:function(){this.isFrameSelecting=!0},frameSelectHandler:function(t){this.mouseDownPos={x:t.pageX-this.canvasRect.left,y:t.pageY-this.canvasRect.top},this.$refs.canvasFlowWrap.addEventListener(this.mousemove,this.frameSelectMovingHandler,!1)},frameSelectMovingHandler:function(t){var e=t.pageX-this.mouseDownPos.x-this.canvasRect.left,n=t.pageY-this.mouseDownPos.y-this.canvasRect.top;this.frameSelectorRect={width:Math.abs(e),height:Math.abs(n)},this.frameSelectorPos={x:e>0?this.mouseDownPos.x:this.mouseDownPos.x+e,y:n>0?this.mouseDownPos.y:this.mouseDownPos.y+n}},frameSelectEndHandler:function(t){this.$refs.canvasFlowWrap.removeEventListener(this.mousemove,this.frameSelectMovingHandler),this.$refs.canvasFlowWrap.removeEventListener(this.mouseup,this.frameSelectEndHandler),document.addEventListener("keydown",this.nodeLineCopyhandler,!1),document.addEventListener("keydown",this.nodeLinePastehandler,!1),document.addEventListener("keydown",this.nodeLineDeletehandler,!1),document.addEventListener(this.mousedown,this.cancelFrameSelectorHandler,{capture:!1,once:!0});var e=this.getSelectedNodes(),n=e.map((function(t){return t.id}));this.isFrameSelecting=!1,this.frameSelectorPos={x:0,y:0},this.frameSelectorRect={width:0,height:0},this.selectedNodes=e,this.clearNodesDragSelection(),this.addNodesToDragSelection(n),this.$emit("frameSelectNodes",e.slice(0))},getSelectedNodes:function(){var t=this,e=this.frameSelectorPos,n=e.x,i=e.y,a=this.frameSelectorRect,s=a.width,o=a.height;return this.nodes.filter((function(e){var a=document.querySelector("#".concat(e.id)),r=a.getBoundingClientRect(),c=r.left-t.canvasRect.left,l=r.top-t.canvasRect.top;if(n<c&&n+s>c&&i<l&&i+o>l)return a.classList.add("selected"),!0}))},cancelFrameSelectorHandler:function(t){this.selectedNodes.forEach((function(t){var e=document.querySelector("#".concat(t.id));e&&e.classList.remove("selected")})),this.selectedNodes=[],this.clearNodesDragSelection()},nodeLineCopyhandler:function(t){(t.ctrlKey||t.metaKey)&&67===t.keyCode&&this.$emit("onNodeCopy",this.selectedNodes)},nodeLinePastehandler:function(t){(t.ctrlKey||t.metaKey)&&86===t.keyCode&&this.$emit("onNodePaste")},nodeLineDeletehandler:function(t){var e=this;46!==t.keyCode&&8!==t.keyCode||(this.selectedNodes.forEach((function(t){e.removeNode(t)})),this.cancelFrameSelectorHandler())},addNodesToDragSelection:function(t){this.instance.addToDragSelection(t)},clearNodesDragSelection:function(){this.instance.clearDragSelection()}}},void 0,!1,void 0,g,void 0);"undefined"!=typeof window&&"Vue"in window&&window.Vue.component("js-flow",L),e.default=L},"0njq":function(t,e,n){"use strict";n.r(e);var i=n("UL6+"),a=n("Mf0c");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("lSBQ");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"65ef1e14",null);e.default=r.exports},"0nzv":function(t,e,n){"use strict";n("Dx75")},"0rd9":function(t,e,n){"use strict";n.r(e);var i=n("3ncw"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"0uNP":function(t,e,n){"use strict";n.r(e);var i=n("DoRf"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"0vGa":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("QbLZ")),a=r(n("KW1/")),s=n("L2JU"),o=n("CeR/");function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"triggerCondition",components:{triggerField:a.default},props:{triggerRules:{type:Object,default:function(){return{}}}},data:function(){return{keyList:[]}},computed:(0,i.default)({globalChoise:function(){return this.$store.state.common.configurInfo}},(0,s.mapState)("trigger",{triggerVariables:function(t){return t.triggerVariables}})),mounted:function(){this.keyList=this.triggerVariables,this.$set(this.triggerRules,"checkStatus",!1)},methods:{addLine:function(t,e,n){t.itemList.splice(n+1,0,{condition:"",key:"",value:"",conditionList:[],type:"STRING"})},deleteLine:function(t,e,n){1!==t.itemList.length&&t.itemList.splice(n,1)},changeBetween:function(t){t.type="all"===t.type?"any":"all"},handleBetween:function(){this.triggerRules.type="all"===this.triggerRules.type?"any":"all"},addGroup:function(){this.triggerRules.list.push({type:"all",itemList:[{key:"",condition:"",value:"",conditionList:[],type:"STRING"}]})},deleteGroup:function(t,e){1!==this.triggerRules.list.length&&this.triggerRules.list.splice(e,1)},changeContent:function(t){var e=this.keyList.filter((function(e){return e.key===t.key}))[0],n=e.type.toLowerCase();t.conditionList=this.globalChoise.trigger_methods[n],this.getConditionList(e,t),t.condition="",this.$set(t,"conditionType",""),t.type=e.type;t.value=["MEMBERS","MEMBER","MULTI_MEMBERS","MULTISELECT","CHECKBOX"].some((function(e){return e===t.type}))?[]:""},changeCondition:function(t){var e=t.conditionList.filter((function(e){return e.name===t.condition}))[0];this.$set(t,"conditionType",e.input_type)},getConditionList:function(t,e){var n=this;["SELECT","RADIO","MULTISELECT","CHECKBOX"].some((function(e){return e===t.type}))&&(this.$set(e,"loading",!0),this.$set(e,"options",[]),"DATADICT"===t.source_type?this.$store.dispatch("datadict/get_data_by_key",{key:t.source_uri,field_key:t.key}).then((function(t){e.options=t.data.map((function(t){return{key:t.key,name:t.name}}))})).catch((function(t){(0,o.errorHandler)(t,n)})).finally((function(){e.loading=!1})):"API"===t.source_type?this.$store.dispatch("apiRemote/get_data_workflow",{kv_relation:t.kv_relation,api_instance_id:t.api_instance_id}).then((function(t){e.options=t.data.map((function(t){return{key:t.key,name:t.name}}))})).catch((function(t){(0,o.errorHandler)(t,n)})).finally((function(){e.loading=!1})):"RPC"===t.source_type?this.$store.dispatch("apiRemote/getRpcData",{meta:t.meta,source_uri:t.source_uri}).then((function(t){e.options=t.data.map((function(t){return{key:t.key,name:t.name}}))})).catch((function(t){(0,o.errorHandler)(t,n)})).finally((function(){e.loading=!1})):(e.options=t.choice.map((function(t){return{key:t.key,name:t.name}})),e.loading=!1))}}}},"1+H+":function(t,e,n){},"11QV":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=y(n("jWXv")),a=y(n("rfXi")),s=y(n("P2sY")),o=y(n("QbLZ")),r=y(n("gDS+")),c=y(n("14Xm")),l=y(n("D3Ub")),u=y(n("GQeE")),d=y(n("PaSM")),f=y(n("Y6/M")),m=y(n("JGQq")),p=y(n("lAAG")),h=y(n("qVGl")),v=y(n("XDfz")),b=y(n("2Vgw")),k=n("ughI"),g=n("CeR/"),_=n("ygAv");function y(t){return t&&t.__esModule?t:{default:t}}e.default={name:"addField",components:{dataSource:f.default,dataContent:m.default,customTableData:p.default,defaultValue:h.default,hiddenConditions:v.default},mixins:[d.default],props:{formAlign:{type:String,default:"vertical"},changeInfo:{type:Object,default:function(){return{}}},workflow:{type:[String,Number],default:function(){return""}},state:{type:[String,Number],default:function(){return""}},sospInfo:{type:Object,default:function(){return{}}},addOrigin:{type:Object,default:function(){return{isOther:!1,addOriginInfo:{}}}},isEditPublic:{type:Boolean,default:!1},templateStage:{type:String,default:""},templateInfo:{type:Object,default:function(){return{}}},autoSelectedType:{type:Boolean,default:!0},nodesList:Array},data:function(){return{isShowDataSource:!1,isDataLoading:!1,trueStatus:!0,falseStatus:!1,secondClick:!1,isPublicField:!1,formInfo:{prevId:"",name:"",key:"",type:"",regex:"",regex_config:{rule:{expressions:[],type:"and"}},customRegex:"",source_type:"",source_uri:"",default_value:"",layout:"",validate:"",desc:"",is_tips:!1,tips:"",show_type:!1,show_conditions:{}},regexFieldList:[],allBetweenList:[{id:1,available:"INT",name:this.$t("m.common['大于']"),typeName:">"},{id:2,available:"INT",name:this.$t("m.common['小于']"),typeName:"<"},{id:3,available:"INT",name:this.$t("m.common['不大于']"),typeName:"<="},{id:4,available:"INT",name:this.$t("m.common['不小于']"),typeName:">="},{id:5,available:"DATE",name:this.$t("m.common['早于']"),typeName:"<"},{id:6,available:"DATE",name:this.$t("m.common['晚于']"),typeName:">"},{id:7,available:"DATE",name:this.$t("m.common['不早于']"),typeName:">="},{id:8,available:"DATE",name:this.$t("m.common['不晚于']"),typeName:"<="}],betweenList:[],customTableInfo:{list:[{name:"",display:"input",choice:"",required:!1,nameCheck:!1,check:!1}]},prevNodeList:[],frontNodesList:[],regexList:[],showType:{sourceList:["SELECT","MULTISELECT","CHECKBOX","RADIO","TABLE","TREESELECT","INPUTSELECT"],belongDefaultList:["STRING","TEXT","INT","DATE","DATETIME","DATETIMERANGE","SELECT","MULTISELECT","CHECKBOX","RADIO","MEMBER","MEMBERS","INPUTSELECT","RICHTEXT","CUSTOM-FORM"],multipleList:["MULTISELECT","CHECKBOX","MEMBERS","MEMBER"],layoutList:["TABLE","CUSTOMTABLE","RICHTEXT","CUSTOM-FORM"]},rules:{},assignValue:{},fieldInfo:{list:[{name:"",key:"",required:!1}]},apiDetail:{},apiInfo:{api_info:{remote_system_id:"",remote_api_id:"",req_params:{},req_body:{},rsp_data:""},kv_relation:{key:"",name:""}},dictionaryData:{list:[],check:""},prcData:{list:[],check:""},prcTable:[],fileList:[],fileVal:"",checkStatus:{customStatus:!1,customTableStatus:!1,customFormStatus:!1},fieldTypeList:[],hiddenConditionStatus:!0,initFormData:{}}},computed:{globalChoise:function(){return this.$store.state.common.configurInfo},isShowDataSourcebtn:function(){return!("API"!==this.formInfo.source_type&&"CUSTOM"!==this.formInfo.source_type||0===(0,u.default)(this.apiDetail).length&&0===this.fieldInfo.list.length)},isDisabled:function(){return"API"===this.formInfo.source_type&&!this.apiInfo.api_info.remote_api_id}},watch:{formInfo:{handler:function(t){this.$emit("getAddFieldStatus",""!==t.name)},deep:!0},isShowDataSource:function(t){t&&(this.initFormData.bodyTableData=(0,_.deepClone)(this.$refs.dataContent[0].$refs.postParam.bodyTableData),this.initFormData.selectInfo=(0,_.deepClone)(this.$refs.dataContent[0].$refs.responseData.selectInfo))}},mounted:function(){var t=this;return(0,l.default)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isDataLoading=!0,e.next=3,t.initData();case 3:t.rules.name=t.checkCommonRules("name").name,t.rules.key=t.checkCommonRules("key").key,t.rules.type=t.checkCommonRules("select").select,t.rules.tips=t.checkCommonRules("select").select,t.rules.prevId=t.checkCommonRules("select").select,t.isDataLoading=!1,"add"===t.changeInfo.id&&t.autoSelectedType&&t.changeType();case 10:case"end":return e.stop()}}),e,t)})))()},methods:{validateContent:function(){this.checkField()?this.openDataSource():this.isShowDataSource=!1,this.$emit("change")},openDataSource:function(){this.isShowDataSource=!0},fieldNameChange:function(){var t=this.$refs.fieldForm.$data.formItems.find((function(t){return"key"===t.property}));t.fieldValue&&(t.validator.content="",t.validator.state=""),this.$emit("change")},initData:function(){var t=this;this.fieldTypeList=this.globalChoise.field_type.filter((function(t){return"DATETIMERANGE"!==t.typeName})),"COMPLEX-MEMBERS"!==this.changeInfo.type&&"SOPS_TEMPLATE"!==this.changeInfo.type||"templateField"!==this.addOrigin.addOriginInfo.type||(this.fieldTypeList=this.fieldTypeList.concat([{name:this.$t("m.common['复杂人员选择']"),typeName:"COMPLEX-MEMBERS"},{name:this.$t("m.common['标准运维模板']"),typeName:"SOPS_TEMPLATE"}])),this.globalChoise.source_type.forEach((function(e){var n="CUSTOM"===e.typeName?t.$t("m.treeinfo['自定义数据每行的name和key都不能相同。']"):t.$t("m.treeinfo['接口中的数据详情']");t.$set(e,"desc",n)})),this.nodesList?this.frontNodesList=this.nodesList:this.getFrontNodesList(),this.changeRegex("ASSOCIATED_FIELD_VALIDATION"),this.assignmentData(),this.getRegexList(),this.getRpcList(),this.getSysDictList(),this.getPreStates()},assignmentData:function(t){var e=this,n=t||this.changeInfo;if(this.formInfo.name=n.name,this.formInfo.key=n.key,this.formInfo.type=n.type,this.formInfo.regex=n.regex,n.regex_config&&n.regex_config.rule&&(this.changeRegex("ASSOCIATED_FIELD_VALIDATION"),this.formInfo.regex_config.rule.type=n.regex_config.rule.type,this.formInfo.regex_config=n.regex_config),"CUSTOM"===this.formInfo.regex&&(this.formInfo.customRegex=n.custom_regex||""),this.formInfo.layout=n.layout,this.formInfo.validate=n.validate_type,this.formInfo.desc=n.desc,this.formInfo.is_tips=n.is_tips,this.formInfo.tips=n.tips,this.formInfo.default_value=this.showType.multipleList.some((function(t){return t===n.type}))&&""!==n.default?n.default.split(","):n.default||"",this.formInfo.source_type=n.source_type,"CUSTOM"===n.source_type)if("FILE"===n.type)for(var i in n.choice)this.fileList.push(n.choice[i]);else 0!==n.choice.length&&(this.fieldInfo.list=[],n.choice.forEach((function(t){e.fieldInfo.list.push({name:t.name,key:t.key,required:!!t.required,nameCheck:!1,keyCheck:!1})})));else"API"===this.formInfo.source_type?this.apiInfo.api_info=n.api_info:"DATADICT"===this.formInfo.source_type?(this.formInfo.source_uri=n.source_uri,this.dictionaryData.check=this.formInfo.source_uri):"RPC"===this.formInfo.source_type&&(this.formInfo.source_uri=n.source_uri,this.prcData.check=n.source_uri);this.formInfo.show_type=0===n.show_type,this.formInfo.show_conditions=n.show_conditions||{},"CUSTOMTABLE"===this.formInfo.type&&(this.customTableInfo.list=[],Object.prototype.hasOwnProperty.call(n.meta,"columns")?n.meta.columns.forEach((function(t){var n=[];t.choice.forEach((function(t){n.push(t.name)})),e.customTableInfo.list.push({name:t.name,display:t.display,choice:n.join("\n"),required:t.required,nameCheck:!1,check:!1})})):this.customTableInfo.list.push({name:"",display:"input",choice:"",required:!1,nameCheck:!1,check:!1})),(0,u.default)(this.sospInfo).length&&(this.formInfo.name=this.sospInfo.name||"",this.formInfo.validate="REQUIRE"),this.initFormData.formInfo=(0,_.deepClone)(this.formInfo),this.assignValue=JSON.parse((0,r.default)(n))},getFrontNodesList:function(){var t=this;return(0,l.default)(c.default.mark((function e(){var n,i;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state||t.templateInfo.id){e.next=2;break}return e.abrupt("return");case 2:return n="",i={},t.state&&(n="apiRemote/get_related_fields",i.workflow=t.workflow,i.state=t.state),t.templateInfo.id&&(n="taskTemplate/getFrontFieldsList",i.id=t.templateInfo.id,i.stage=t.templateStage),e.next=8,t.$store.dispatch(n,i).then((function(e){t.frontNodesList=e.data})).catch((function(e){(0,g.errorHandler)(e,t)}));case 8:case"end":return e.stop()}}),e,t)})))()},addExpression:function(){this.formInfo.regex_config.rule.expressions.push({condition:"",key:"",source:"field",type:this.formInfo.type,value:""})},deleteExpression:function(t){1!==this.formInfo.regex_config.rule.expressions.length&&this.formInfo.regex_config.rule.expressions.splice(t,1)},changeType:function(){var t=this;return(0,l.default)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$emit("change"),t.formInfo.regex="EMPTY",t.formInfo.customRegex="",t.showType.layoutList.includes(t.formInfo.type)&&(t.formInfo.layout="COL_12"),t.formInfo.field="",t.dictionaryData.check="","TREESELECT"===t.formInfo.type?t.formInfo.source_type="DATADICT":t.formInfo.source_type="CUSTOM",t.fieldInfo.list.length||(t.fieldInfo.list=[{name:"",key:"",required:!1,nameCheck:!1,keyCheck:!1}]),"CUSTOM-FORM"===t.formInfo.type&&(t.formInfo.default_value=k.CUSTOM_FORM_DEFAULT_VALUE),e.next=11,t.getRegexList();case 11:t.formInfo.regex_config.rule.expressions=[];case 12:case"end":return e.stop()}}),e,t)})))()},changeRegex:function(t){var e=this;this.formInfo.customRegex="","ASSOCIATED_FIELD_VALIDATION"===t&&(this.regexFieldList=this.frontNodesList.filter((function(t){return"INT"===e.formInfo.type?t.type===e.formInfo.type:"DATE"===t.type||"DATETIME"===t.type})).filter((function(t){return t.id!==e.changeInfo.id})),["DATE","DATETIME"].includes(this.formInfo.type)&&this.regexFieldList.push({name:"系统时间",id:"system_time",key:"system_time",source:"system"}),this.betweenList=this.allBetweenList.filter((function(t){return"INT"===e.formInfo.type?"INT"===t.available:"DATE"===t.available})),this.betweenList.push({name:"等于",typeName:"=="}),this.formInfo.regex_config.rule.expressions.length||this.addExpression())},getRegexList:function(){var t=this,e=this.formInfo.type;this.$store.dispatch("cdeploy/regexList",e).then((function(e){t.regexList=e.data.regex_choice.map((function(e){return{name:e[1]?e[1]:t.$t('m.treeinfo["无"]'),typeName:e[0]}}))})).catch((function(e){(0,g.errorHandler)(e,t)}))},onRegexFieldChange:function(t,e){this.$emit("change");e.source=["system_time"].includes(t)?"system":"field"},relateSelected:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e[2].type=e[1].type,e[2].source=e[1].source},putKey:function(){var t=this;"number"!=typeof this.changeInfo.id&&(this.formInfo.key="",(0,b.default)(this.formInfo.name,{style:b.default.STYLE_NORMAL,heteronym:!1}).forEach((function(e){t.formInfo.key=""+t.formInfo.key+e})),this.formInfo.key=this.formInfo.key.toUpperCase(),this.formInfo.key=this.formInfo.key.replace(/\ /g,"_"),this.formInfo.key.length>=32&&(this.formInfo.key=this.formInfo.key.substr(0,32)))},changeApiInfo:function(t){this.$emit("change"),this.apiDetail=t},getRpcData:function(t){this.prcTable=t},handleFile:function(t){var e=this;this.$emit("change");for(var n=t.target.files[0],i=n.size/1024,a=n.name,s=0;s<this.fileList.length;s++)if(a===this.fileList[s].name)return void this.$bkMessage({message:this.$t('m.treeinfo["此文件已经上传"]'),theme:"error"});if(i<=1e5){var r=new FormData;r.append("field_file",n),this.$store.dispatch("cdeploy/fileUpload",{data:r}).then((function(t){for(var n in t.data.succeed_files)e.fileList.push((0,o.default)({},t.data.succeed_files[n],{key:n}));e.fileVal="",e.$bkMessage({message:e.$t('m.treeinfo["上传成功"]'),theme:"success"})})).catch((function(t){(0,g.errorHandler)(t,e)}))}else this.fileVal="",this.$bkMessage({message:this.$t('m.treeinfo["该文件大小超过100MB！"]'),theme:"error"})},deleteFile:function(t,e){this.fileList.splice(e,1)},addField:function(){var t=this;return(0,l.default)(c.default.mark((function e(){var n,i,a,o;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDataContent();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(!t.secondClick){e.next=7;break}return e.abrupt("return");case 7:t.secondClick=!0,"number"==typeof t.changeInfo.id?(i=t.changeInfo.id,a="TABLE"===t.changeInfo.source?"cdeploy/changeNewModuleField":"cdeploy/changeNewField",t.addOrigin.isOther&&t.addOrigin.addOriginInfo.updateUrl&&(a=t.addOrigin.addOriginInfo.updateUrl,"templateField"===t.addOrigin.addOriginInfo.type&&(n.task_schema_id=t.templateInfo.id,n.stage=t.templateStage,"COMPLEX-MEMBERS"!==n.type&&"SOPS_TEMPLATE"!==n.type||delete n.type)),t.changeInfo.project_key&&(n.project_key=t.changeInfo.project_key),t.$store.dispatch(a,{params:n,id:i}).then((function(){t.$bkMessage({message:t.$t('m.treeinfo["修改成功"]'),theme:"success"}),t.$emit("closeShade"),t.addOrigin.isOther&&t.addOrigin.addOriginInfo.updateUrl&&"templateField"!==t.addOrigin.addOriginInfo.type&&t.$parent.$parent.getList?t.$parent.$parent.getList():t.$parent.$parent.getTableList?t.$parent.$parent.getTableList():t.$emit("getRelatedFields"),t.$emit("onConfirm",(0,s.default)({},t.changeInfo,n))})).catch((function(e){(0,g.errorHandler)(e,t)})).finally((function(){t.secondClick=!1}))):(n.state=t.state,(0,u.default)(t.sospInfo).length&&(n.state=t.formInfo.prevId),o="cdeploy/addNewField",t.addOrigin.isOther&&t.addOrigin.addOriginInfo.addUrl&&(o=t.addOrigin.addOriginInfo.addUrl,"templateField"===t.addOrigin.addOriginInfo.type&&(n.task_schema_id=t.templateInfo.id,n.stage=t.templateStage)),t.changeInfo.project_key&&(n.project_key=t.changeInfo.project_key),t.$store.dispatch(o,{params:n}).then((function(e){t.addNew=e.data,t.$bkMessage({message:t.$t('m.treeinfo["新增成功"]'),theme:"success"}),t.$emit("closeShade"),t.addOrigin.isOther&&t.addOrigin.addOriginInfo.addUrl?"templateField"===t.addOrigin.addOriginInfo.type&&t.$parent.$parent.getTableList?t.$parent.$parent.getTableList():t.$parent.$parent.getList&&t.$parent.$parent.getList():t.$parent.$parent.getTableList?t.$parent.$parent.getTableList():(t.$emit("getRelatedFields"),t.$parent.$parent.showNew&&t.$parent.$parent.showNew(t.sospInfo,e)),t.$emit("onConfirm",e.data)})).catch((function(e){(0,g.errorHandler)(e,t)})).finally((function(){t.secondClick=!1})));case 9:case"end":return e.stop()}}),e,t)})))()},onCancelClick:function(){this.$emit("closeShade"),this.$emit("onCancel")},checkInfo:function(){var t=this;this.$refs.fieldForm.validate().then((function(){t.$refs.dataSource&&t.$refs.dataSource.checkSouce()||t.checkField()||(!t.formInfo.is_tips||t.formInfo.tips?t.addField():t.$bkMessage({theme:"warning",message:t.$t('m.treeinfo["字段释疑为必填项"]')}))}),(function(t){console.error(t)}))},getDataContent:function(){var t=this;return(0,l.default)(c.default.mark((function e(){var n,s,o,r,l,u;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n={}).layout=t.formInfo.layout,n.validate_type=t.formInfo.validate,n.regex=t.formInfo.regex,n.regex_config=t.formInfo.regex_config,n.desc=t.formInfo.desc,n.is_tips=t.formInfo.is_tips,n.tips=t.formInfo.tips,n.default="",t.showType.belongDefaultList.some((function(e){return e===t.formInfo.type}))&&(o=[],(s=["MULTISELECT","CHECKBOX","MEMBERS","MEMBER"]).some((function(e){return e===t.formInfo.type}))&&t.formInfo.default_value&&(o=t.formInfo.default_value.filter((function(t){return""!==t}))),n.default=s.some((function(e){return e===t.formInfo.type}))?o.join(","):t.formInfo.default_value),!t.$refs.hiddenConditions){e.next=20;break}if(!t.$refs.hiddenConditions.checkList()){e.next=14;break}return t.hiddenConditionStatus=!1,e.abrupt("return",!1);case 14:r=t.$refs.hiddenConditions.listInfo,n.show_conditions={type:t.$refs.hiddenConditions.conditionType,expressions:[]},r.forEach((function(t){n.show_conditions.expressions.push({key:t.key,condition:t.condition,value:Array.isArray(t.value)?t.value.join(","):t.value,type:t.type})})),n.show_type=0,e.next=22;break;case 20:n.show_type=1,n.show_conditions={};case 22:if("TABLE"===t.changeInfo.source){e.next=65;break}if(n.workflow=t.workflow,n.name=t.formInfo.name,n.key=t.formInfo.key,n.type=t.formInfo.type,n.desc=t.formInfo.desc,n.source_type=t.formInfo.source_type||"CUSTOM",n.custom_regex=t.formInfo.customRegex,n.is_tips=t.formInfo.is_tips,n.tips=t.formInfo.tips,"FILE"!==t.formInfo.type){e.next=37;break}n.choice={},t.fileList.forEach((function(e){t.$set(n.choice,e.key,e)})),e.next=54;break;case 37:if("CUSTOM"!==t.formInfo.source_type){e.next=42;break}n.choice=[],"SELECT"===t.formInfo.type||"MULTISELECT"===t.formInfo.type||"CHECKBOX"===t.formInfo.type||"RADIO"===t.formInfo.type||"INPUTSELECT"===t.formInfo.type?t.fieldInfo.list.forEach((function(t){n.choice.push({key:t.key,name:t.name})})):"TABLE"===t.formInfo.type&&t.fieldInfo.list.forEach((function(t){n.choice.push({key:t.key,name:t.name,required:t.required})})),e.next=54;break;case 42:if("API"!==t.formInfo.source_type){e.next=53;break}if("API"!==t.formInfo.source_type){e.next=49;break}return e.next=46,t.$refs.dataContent[0].apiFz();case 46:if(e.sent){e.next=49;break}return e.abrupt("return",!1);case 49:n.api_info=t.apiInfo.api_info,n.kv_relation=t.apiInfo.kv_relation,e.next=54;break;case 53:"DATADICT"===t.formInfo.source_type&&(n.choice=[],n.source_uri=t.dictionaryData.check);case 54:if("CUSTOMTABLE"!==t.formInfo.type){e.next=64;break}if(t.customTableInfo.list.forEach((function(t){var e=[];!t.choice||"select"!==t.display&&"multiselect"!==t.display||(e=t.choice.split("\n").filter((function(t){return t.length>0}))),t.nameCheck=0===t.name.length||t.name.length>120,t.check=!e.length&&("select"===t.display||"multiselect"===t.display)})),l=t.customTableInfo.list.some((function(t){return t.nameCheck})),u=t.customTableInfo.list.some((function(t){return t.check})),!l&&!u){e.next=61;break}return t.$bkMessage({theme:"warning",message:t.$t('m.treeinfo["请填写正确格式的自定义数据"]')}),e.abrupt("return",!1);case 61:n.meta={},n.meta.columns=[],t.customTableInfo.list.forEach((function(t){var e=t.choice.split("\n").filter((function(t){return t.length>0}));e=(0,a.default)(new i.default(e)),n.meta.columns.push({name:t.name,display:t.display,choice:t.choice.length?e:[],required:t.required})}));case 64:"RPC"===t.formInfo.source_type&&(n.source_uri=t.prcData.check,n.meta={},t.prcTable.forEach((function(t){var e="CUSTOM"===t.source_type?t.value:"${params_"+t.value_key+"}";n.meta[t.name]=e})));case 65:return e.abrupt("return",t.timeConversion(n));case 66:case"end":return e.stop()}}),e,t)})))()},timeConversion:function(t){var e=this;return""!==t.default&&("DATE"!==t.type&&"DATETIME"!==t.type||(t.default="DATE"===t.type?this.standardDayTime(t.default):this.standardTime(t.default))),t.show_conditions&&t.show_conditions.expressions&&t.show_conditions.expressions.length&&t.show_conditions.expressions.forEach((function(t){"DATE"!==t.type&&"DATETIME"!==t.type||(t.value="DATE"===t.type?e.standardDayTime(t.value):e.standardTime(t.value))})),t},checkField:function(){var t=this;this.checkStatus.customStatus=!1,this.checkStatus.customTableStatus=!1,this.checkStatus.customFormStatus=!1;if(["SELECT","MULTISELECT","CHECKBOX","RADIO","TABLE"].some((function(e){return t.formInfo.type===e}))&&"CUSTOM"===this.formInfo.source_type&&(this.fieldInfo.list.forEach((function(t){t.nameCheck=t.name.length>120||0===t.name.length,t.keyCheck=!/[a-zA-Z0-9]+$/.test(t.key)})),this.fieldInfo.list.forEach((function(e,n){t.fieldInfo.list.forEach((function(t,i){n!==i&&(t.key===e.key&&(e.keyCheck=!0),t.name===e.name&&(e.nameCheck=!0))}))})),this.checkStatus.customStatus=this.fieldInfo.list.some((function(t){return t.nameCheck||t.keyCheck}))),"CUSTOMTABLE"===this.formInfo.type){var e=[];this.customTableInfo.list.forEach((function(t){var n=[];!t.choice||"select"!==t.display&&"multiselect"!==t.display||(n=t.choice.split("\n").filter((function(t){return t.length>0}))),t.nameCheck=0===t.name.length||t.name.length>120,t.check=!n.length&&("select"===t.display||"multiselect"===t.display),e.includes(t.name)?t.nameCheck=!0:e.push(t.name)})),this.checkStatus.customTableStatus=this.customTableInfo.list.some((function(t){return t.nameCheck||t.check}))}if("CUSTOM-FORM"===this.formInfo.type)try{var n=JSON.parse(this.formInfo.default_value);n&&(this.checkStatus.customFormStatus=!n.schemes||!n.form_data)}catch(t){this.checkStatus.customFormStatus=!0}return this.checkStatus.customStatus||this.checkStatus.customTableStatus||this.checkStatus.customFormStatus},getRpcList:function(){var t=this;this.$store.dispatch("datadict/getPrcData").then((function(e){var n=["table_fields","flow_states"];t.prcData.list=e.data.filter((function(t){return-1===n.indexOf(t.key)})),t.prcData.list.filter((function(e){return e.key===t.prcData.check})).length&&(t.prcTable=t.prcData.list.filter((function(e){return e.key===t.prcData.check}))[0].req_params)})).catch((function(e){(0,g.errorHandler)(e,t)}))},getSysDictList:function(){var t=this;this.$store.dispatch("datadict/list",{}).then((function(e){t.dictionaryData.list=e.data.filter((function(t){return t.is_enabled}))})).catch((function(e){(0,g.errorHandler)(e,t)}))},getPreStates:function(){var t=this;this.state&&this.$store.dispatch("deployCommon/getPreStates",{id:this.state}).then((function(e){t.prevNodeList=e.data})).catch((function(e){(0,g.errorHandler)(e,t)}))}}}},"11RT":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt20 mb20"},[t.openFunction.TRIGGER_SWITCH&&"workflow"!==t.origin&&"transition"!==t.origin?e("div",{staticClass:"more-configuration",attrs:{"data-test-id":"trigger-div-showMoreConfig"},on:{click:function(e){t.showMoreConfig=!t.showMoreConfig}}},[t.showMoreConfig?e("i",{staticClass:"bk-icon icon-up-shape"}):e("i",{staticClass:"bk-icon icon-down-shape"}),t._v(" "),e("span",[t._v(t._s(t.$t("m.taskTemplate['高级配置']")))])]):t._e(),t._v(" "),t.showMoreConfig?e("div",{staticClass:"common-section-card-block mt20",class:[{"inner-mode":"workflow"===t.origin||"transition"===t.origin}]},[e("label",{staticClass:"common-section-card-label"},[t._v("\n      "+t._s(t.$t("m.newCommon['触发器']"))+"\n    ")]),t._v(" "),e("div",{staticClass:"common-section-card-body"},[t.showMoreConfig?[e("collapse-transition",[e("div",[e("div",[e("ul",{staticClass:"bk-trigger-content"},[t._l(t.boundTriggerList,(function(n,i){return e("li",{key:i,class:{"li-transition":"transition"===t.origin},on:{click:function(e){return e.stopPropagation(),t.openNew("add",n)}}},[e("span",{staticClass:"bk-trigger-icon"},[e("i",{staticClass:"bk-itsm-icon icon-info-circle icon-slide",staticStyle:{"font-size":"24px"}})]),t._v(" "),e("span",{staticClass:"bk-trigger-name",attrs:{title:n.name}},[t._v(t._s(n.name||"--")+"\n                    "),n.is_draft?e("span",{staticStyle:{color:"#3A84FF"}},[t._v(t._s(t.$t('m.taskTemplate["(草稿)"]')))]):t._e()]),t._v(" "),e("span",{staticClass:"bk-trigger-delete"},[e("i",{staticClass:"bk-icon icon-delete",on:{click:function(e){return e.stopPropagation(),t.delTrigger(n)}}})])])})),t._v(" "),e("bk-dropdown-menu",{staticStyle:{float:"left"},attrs:{trigger:"click"}},[e("div",{staticClass:"bk-trigger-add",attrs:{slot:"dropdown-trigger",title:t.$t("m.taskTemplate['添加触发器']")},slot:"dropdown-trigger"},[e("i",{staticClass:"bk-icon icon-plus"})]),t._v(" "),e("ul",{staticClass:"bk-dropdown-list",attrs:{slot:"dropdown-content"},slot:"dropdown-content"},[e("li",[e("a",{attrs:{href:"javascript:;","data-test-id":"taskTemplate-li-addTrigger"},on:{click:function(e){return t.openNew("add")}}},[t._v(t._s(t.$t("m.taskTemplate['新建']")))])]),t._v(" "),e("li",[e("a",{attrs:{href:"javascript:;","data-test-id":"taskTemplate-li-quoteCommonTrigger"},on:{click:function(e){return t.openNew("cite")}}},[t._v(t._s(t.$t("m.taskTemplate['引用公共触发器']")))])])])])],2)])])])]:t._e()],2),t._v(" "),[e("bk-dialog",{attrs:{theme:"primary",width:"660","mask-close":!1},model:{value:t.triggerDialogInfo.isShow,callback:function(e){t.$set(t.triggerDialogInfo,"isShow",e)},expression:"triggerDialogInfo.isShow"}},[e("div",{staticClass:"trigger-dialog-header",attrs:{slot:"header"},slot:"header"},[e("span",[t._v(t._s(t.$t("m.taskTemplate['引用公共触发器']")))]),t._v(" "),e("div",{staticClass:"bk-search-key"},[e("bk-input",{attrs:{clearable:!0,"right-icon":"bk-icon icon-search"},on:{enter:t.searchInfo,clear:t.clearSearch},model:{value:t.triggerDialogInfo.searchKey,callback:function(e){t.$set(t.triggerDialogInfo,"searchKey",e)},expression:"triggerDialogInfo.searchKey"}})],1)]),t._v(" "),e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.triggerDialogInfo.listLoading},expression:"{ isLoading: triggerDialogInfo.listLoading }"}],staticClass:"trigger-dialog-box"},[0===t.triggerDialogInfo.list.length?e("p",{staticClass:"dialog-none-content"},[e("i",{staticClass:"bk-icon icon-info-circle"}),t._v(" "),e("span",[t._v(t._s(t.$t("m.taskTemplate['暂无匹配的公共触发器，']")))]),t._v(" "),e("span",{staticClass:"bk-primary",on:{click:t.newTrigger}},[t._v(t._s(t.$t("m.taskTemplate['跳转创建']")))])]):[e("span",[t._v(t._s(t.$t("m.taskTemplate['根据您当前的引用位置，系统已筛选出适用的公共触发器。']")))]),t._v(" "),e("ul",{staticClass:"bk-trigger-content"},t._l(t.triggerDialogInfo.list,(function(n,i){return e("li",{key:i,class:{"li-checked":n.checked},on:{click:function(t){n.checked=!n.checked}}},[e("span",{staticClass:"bk-trigger-icon"},[e("i",{staticClass:"bk-itsm-icon icon-info-circle",class:[n.iconKey],staticStyle:{"font-size":"24px"}})]),t._v(" "),e("span",{staticClass:"bk-trigger-name",attrs:{title:n.name}},[t._v(t._s(n.name||"--"))]),t._v(" "),e("span",{staticClass:"bk-trigger-delete"},[e("bk-checkbox",{attrs:{value:n.checked}})],1)])})),0)]],2),t._v(" "),e("div",{staticClass:"trigger-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("bk-checkbox",{attrs:{value:Boolean(t.triggerDialogInfo.list.length===t.citeList.length&&t.triggerDialogInfo.list.length),"ext-cls":"checkbox",disabled:!t.triggerDialogInfo.list.length},on:{change:t.selectAllFn}},[t._v(t._s(t.$t("m.taskTemplate['全选']")))]),t._v(" "),e("span",[t._v(t._s(t.$t("m.taskTemplate['已选']"))),e("span",[t._v(t._s(t.citeList.length))]),t._v("个")]),t._v(" "),e("bk-button",{staticClass:"mr10",attrs:{theme:"primary","data-test-id":"common-trigger-confirm",title:t.$t("m.taskTemplate['确定']")},on:{click:t.citeTrigger}},[t._v("\n            "+t._s(t.$t("m.taskTemplate['确定']"))+"\n          ")]),t._v(" "),e("bk-button",{staticClass:"mr10",attrs:{theme:"default",title:t.$t("m.taskTemplate['取消']")},on:{click:t.initDialogInfo}},[t._v("\n            "+t._s(t.$t("m.taskTemplate['取消']"))+"\n          ")])],1)])],t._v(" "),[e("bk-sideslider",{attrs:{"is-show":t.triggerSliderInfo.isShow,title:t.triggerSliderInfo.title,width:t.triggerSliderInfo.width,"quick-close":!0,"before-close":t.handleBeforeClose},on:{"update:isShow":function(e){return t.$set(t.triggerSliderInfo,"isShow",e)},"update:is-show":function(e){return t.$set(t.triggerSliderInfo,"isShow",e)}}},[e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.triggerSliderInfo.addLoading},expression:"{ isLoading: triggerSliderInfo.addLoading }"}],staticStyle:{"min-height":"300px"},attrs:{slot:"content"},slot:"content"},[t.triggerSliderInfo.isShow?e("add-trigger",{attrs:{"node-type":t.nodeType,"trigger-info":t.triggerSliderInfo.item,"origin-info-to-trigger":t.originInfoToTrigger},on:{closeTrigger:function(e){t.triggerSliderInfo.isShow=!1},getList:t.getBoundTriggerList,change:function(e){t.isFormChanged=!0}}}):t._e()],1)])]],2):t._e()])},a=[];i._withStripped=!0},"13wB":function(t,e,n){"use strict";n.r(e);var i=n("ohl0"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"1GPn":function(t,e,n){"use strict";n.r(e);var i=n("dbNl"),a=n("gcTd");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("WmCl");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"4e0ce168",null);e.default=r.exports},"1TTJ":function(t,e,n){},"1exa":function(t,e,n){"use strict";n.r(e);var i=n("ODc7"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"1h6V":function(t,e,n){"use strict";n("nDi6")},"1hFm":function(t,e,n){"use strict";n.r(e);var i=n("NFkJ"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"1ukW":function(t,e,n){"use strict";n.r(e);var i=n("gXmA"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"1w2S":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this._self._c;return t("div",{staticClass:"no-data"},[t("img",{attrs:{src:this.imgUrl}}),this._v(" "),t("p",{style:{"font-size":this.fontSize+"px"}},[this._v("\n    "+this._s(this.text||this.$t('m.treeinfo["暂无数据"]'))+"\n  ")])])},a=[];i._withStripped=!0},"1zRx":function(t,e,n){"use strict";n("Wz47")},"20vx":function(t,e,n){"use strict";n("8MAP")},"236k":function(t,e,n){},"25E2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=x(n("z1yn")),a=x(n("jub7")),s=x(n("Za/z")),o=x(n("u14n")),r=x(n("/KdC")),c=x(n("TNjk")),l=x(n("qyUP")),u=x(n("VrAx")),d=x(n("4K0D")),f=x(n("nxpg")),m=x(n("eOfU")),p=x(n("MBfY")),h=x(n("/Hw/")),v=x(n("Q3ZP")),b=x(n("Wl5c")),k=x(n("0njq")),g=x(n("+QRE")),_=x(n("070I")),y=x(n("gy7N")),I=x(n("aYIO")),w=x(n("SUIt")),C=x(n("BWJp")),S=x(n("PaSM")),T=n("ygAv"),L=n("CeR/");function x(t){return t&&t.__esModule?t:{default:t}}e.default={name:"fieldInfo",components:{"CW-STRING":i.default,"CW-LINK":a.default,"CW-INT":s.default,"CW-TEXT":o.default,"CW-CHECKBOX":r.default,"CW-RADIO":c.default,"CW-SELECT":l.default,"CW-INPUTSELECT":u.default,"CW-MULTISELECT":d.default,"CW-DATE":f.default,"CW-DATETIME":m.default,"CW-MEMBER":p.default,"CW-MEMBERS":h.default,"CW-TABLE":v.default,"CW-CUSTOMTABLE":b.default,"CW-RICHTEXT":k.default,"CW-TREESELECT":g.default,"CW-FILE":_.default,"CW-CASCADE":y.default,"CW-SOPS_TEMPLATE":I.default,"CW-DEVOPS_TEMPLATE":w.default},mixins:[C.default,S.default],props:{fields:{type:Array,required:!0,default:function(){return[]}},allFieldList:{type:Array,default:function(){return[]}},basicInfomation:{type:Object,default:function(){return{}}},origin:{type:String,default:"normal"},typeInfo:{type:String,default:function(){return""}},disabled:{type:Boolean,default:!1}},data:function(){return{rotate:!1,labelWidth:200}},created:function(){var t=this;this.fields.forEach((function(e){t.$set(e,"checkValue",!1)}))},mounted:function(){var t=this;this.$nextTick((function(){t.labelWidth=t.$refs.fieldContent.clientWidth/2||200}))},methods:{freshBtn:function(t){this.rotate=!this.rotate,"CreateTicket"===this.$route.name?this.freshApi(t,this.fields,"submit"):this.freshApi(t,this.fields,"field")},freshRpc:function(t){var e=this;this.rotate=!this.rotate,this.$store.dispatch("apiRemote/getRpcData",t).then((function(e){t.choice=e.data,t.val=""})).catch((function(t){(0,L.errorHandler)(t,e)}))},fieldChange:function(){this.fieldFormatting(this.fields)},checkBuiltInTaskTemplate:function(){var t=this,e=[];return this.fields.forEach((function(n,i){"SOPS_TEMPLATE"!==n.type&&"DEVOPS_TEMPLATE"!==n.type||e.push(t.$refs["component"+i][0].validate())})),e.every((function(t){return!!t}))},jointVerification:function(){var t=this,e=!0;return this.relatedRegex(this.fields,(0,T.isEmpty)(this.allFieldList)?this.fields:this.allFieldList).validList.forEach((function(n){n.result||(e=!1,n.validList.forEach((function(e){var n=t.fields.find((function(t){return t.key===e.key}));n&&!n.checkValue&&(n.checkValue=!0,n.checkMessage=e.tips)})))})),e},requiredVerification:function(){var t=this,e=this.fields.filter((function(t){return t.showFeild&&"REQUIRE"===t.validate_type})).filter((function(t){return"CUSTOMTABLE"===t.type?t.meta.columns.some((function(t){return t.required})):"SOPS_TEMPLATE"!==t.type&&"DEVOPS_TEMPLATE"!==t.type})).filter((function(e){var n=!1;e.checkValue=!1;var i="";switch(e.type){case"TABLE":var a=!0;e.choice.forEach((function(t){""!==e.value[0][t.key]?a=!1:i+=t.name+", "})),n=a,i&&(i+=t.$t('m.newCommon["为必填项！"]'));break;case"CUSTOMTABLE":var s=!1;e.meta.columns.forEach((function(t){return e.value.forEach((function(e){t.required&&(0,T.isEmpty)(e[t.key])&&(i+=t.name+", ",s=!0)}))})),n=s,i&&(i+=t.$t('m.newCommon["为必填项！"]'));break;default:n=(0,T.isEmpty)(e.value)}return i&&(e.checkMessage=i,n=!0),e.checkValue=n,n})),n=this.checkBuiltInTaskTemplate();return!e.length&&n},checkValue:function(){this.fieldChange();var t=this.requiredVerification(),e=this.jointVerification();return t&&e}}}},"26lR":function(t,e,n){"use strict";n("YQTg")},"29mx":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},[e("bk-date-picker",{class:{"bk-border-error":t.item.checkValue},attrs:{placeholder:t.$t("m.newCommon['选择日期']"),disabled:t.item.is_readonly&&!t.isCurrent||t.disabled},on:{"open-change":function(e){t.item.checkValue=!1}},model:{value:t.item.val,callback:function(e){t.$set(t.item,"val",e)},expression:"item.val"}}),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},"2ICV":function(t,e,n){"use strict";n("vO6j")},"2Mt+":function(t,e,n){"use strict";n.r(e);var i=n("OV2Y"),a=n("TOmV");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("0nzv");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"89121fbe",null);e.default=r.exports},"2Z9S":function(t,e,n){"use strict";n.r(e);var i=n("jUMR"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"2bRs":function(t,e,n){"use strict";n.r(e);var i=n("5fYA"),a=n("/AAH");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("no//");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"823921c0",null);e.default=r.exports},"2p9g":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("CeR/"),a=l(n("vkdF")),s=l(n("T+BV")),o=l(n("9gVk")),r=n("zB2w"),c=l(n("hztf"));function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"",components:{dealTask:s.default,TaskStatus:a.default,taskHandleTrigger:o.default,Empty:c.default},props:{ticketInfo:{type:Object,default:function(){return{}}}},data:function(){return{isListLoading:!1,taskList:[],dealTaskInfo:{show:!1,itemContent:{},title:this.$t("m.task['查看任务']"),type:"SEE"},taskTemplateTypes:r.TASK_TEMPLATE_TYPES,listError:!1}},mounted:function(){this.getTaskList()},methods:{getTaskList:function(){var t=this;this.isListLoading=!0;var e={ticket_id:this.ticketInfo.id};return this.listError=!1,this.$store.dispatch("taskFlow/getTaskList",e).then((function(e){t.taskList=e.data})).catch((function(e){t.listError=!0,(0,i.errorHandler)(e,t)})).finally((function(){t.isListLoading=!1}))},onViewTask:function(t){this.dealTaskInfo.show=!0,this.dealTaskInfo.itemContent=t},getTaskTypeName:function(t){var e=this.taskTemplateTypes.find((function(e){return e.type===t}));return e?e.name:t}}}},"2qRF":function(t,e,n){"use strict";n.r(e);var i=n("t/b3"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"34/K":function(t,e,n){"use strict";n.r(e);var i=n("8fx1"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"362X":function(t,e,n){"use strict";n.r(e);var i=n("lArr"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"36bi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("14Xm")),a=r(n("D3Ub")),s=r(n("GQeE")),o=r(n("EstQ"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"bkPluginTask",components:{},props:{ticketInfo:Object,nodeInfo:Object,workflow:[Number,String]},data:function(){return{isStatic:!1,changeBtn:!1,formData:{},rules:{},constantList:[],isHook:!1,isEdit:!1,stateList:[],disable:!0,errorTip:!1}},watch:{},mounted:function(){this.init(),this.getRelatedFields()},methods:{init:function(){var t=this;if("inputs"in this.nodeInfo.contexts.build_params){var e={plugin_code:this.nodeInfo.contexts.build_params.plugin_code,plugin_version:this.nodeInfo.contexts.build_params.version};this.$store.dispatch("bkPlugin/getPluginDetail",e).then((function(e){t.constantList=(0,s.default)(t.nodeInfo.contexts.build_params.inputs).map((function(n){return t.$set(t.formData,n,t.nodeInfo.contexts.build_params.inputs[n]),t.$set(t.rules,n,[{required:!0,message:o.default.t('m.treeinfo["字段必填"]'),trigger:"blur"}]),{name:e.data.inputs.properties[n].title,key:n}}))}))}},getRelatedFields:function(){var t=this;return(0,a.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={workflow:t.workflow,state:t.nodeInfo.state_id,field:""},e.next=3,t.$store.dispatch("apiRemote/get_related_fields",n).then((function(e){t.stateList=e.data})).catch((function(t){console.log(t)})).finally((function(){}));case 3:case"end":return e.stop()}}),e,t)})))()},reSetSopTask:function(){this.changeBtn=!this.changeBtn,this.disable=!this.changeBtn,this.isEdit=!this.isEdit},onChangeHook:function(t,e){this.$emit("onChangeHook",t,e)},ignore:function(){var t=this,e={inputs:{},is_direct:!0,state_id:this.nodeInfo.state_id};this.$store.dispatch("deployOrder/ignoreNode",{params:e,ticketId:this.nodeInfo.ticket_id}).then((function(){t.$bkMessage({message:t.$t('m["忽略完成"]'),theme:"success"}),t.$emit("reloadTicket")}))},retry:function(t){var e=this;this.$store.dispatch("deployOrder/retryNode",{params:t,ticketId:this.nodeInfo.ticket_id}).then((function(){e.$bkMessage({message:e.$t('m.newCommon["提交成功"]'),theme:"success"}),e.changeBtn=!1,e.$emit("reloadTicket")}))},submit:function(){var t=this;this.$refs.form.validate().then((function(){var e={inputs:{inputs:{},context:{},plugin_code:t.nodeInfo.contexts.build_params.plugin_code,version:t.nodeInfo.contexts.build_params.version},state_id:t.nodeInfo.state_id};(0,s.default)(t.formData).map((function(n){e.inputs.inputs[n]=t.formData[n]})),t.retry(e)}))}}}},"3SW3":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-build-bill"},[e("bk-form",{ref:"billForm",class:{"inline-form":t.isGetField},attrs:{"label-width":200,"form-type":"vertical",model:t.formData}},[e("bk-form-item",{staticClass:"inline-item",attrs:{label:t.$t("m.manageCommon['服务目录']")}},[e("common-cascade",{ref:"commoncascader",staticStyle:{width:"100%"},attrs:{options:t.cascadeList,"iscollect-two":"all"!==t.customId,"isshow-number":"all"!==t.customId,isactive:!0,"options-favorites":t.optionsFavorites},on:{change:t.handleChange,collect:t.collect,cancelcollect:t.cancelcollect},model:{value:t.formData.cascadeCheck,callback:function(e){t.$set(t.formData,"cascadeCheck",e)},expression:"formData.cascadeCheck"}})],1),t._v(" "),e("bk-form-item",{staticClass:"inline-item",attrs:{label:t.$t("m.manageCommon['服务']")}},[e("bk-select",{attrs:{clearable:!1,loading:t.isSecondLoading,searchable:"","font-size":"medium"},on:{selected:t.selectedService},model:{value:t.formData.service_id,callback:function(e){t.$set(t.formData,"service_id",e)},expression:"formData.service_id"}},t._l(t.billList,(function(t){return e("bk-option",{key:t.id,attrs:{id:t.id,name:t.name,disabled:t.disabled}})})),1)],1),t._v(" "),e("bk-form-item",{attrs:{label:t.$t("m.manageCommon['服务说明']")}},[e("p",{staticClass:"bk-sevice-desc"},[t._v(t._s(t.billListInfo||"--"))])])],1)],1)},a=[];i._withStripped=!0},"3Xpq":function(t,e,n){"use strict";n("TlPd")},"3eLr":function(t,e,n){"use strict";n.r(e);var i=n("wpaA"),a=n("g5Ts");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("GHP1");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"75907687",null);e.default=r.exports},"3jvg":function(t,e,n){"use strict";n.r(e);var i=n("j7Oh"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"3nH4":function(t,e,n){"use strict";n("wXXQ")},"3ncw":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("efIh"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"LINK",mixins:[s.default],props:{item:{type:Object,default:function(){}},fields:{type:Array,default:function(){return[]}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{}},watch:{"item.val":function(){this.conditionField(this.item,this.fields)}},mounted:function(){this.conditionField(this.item,this.fields),this.item.value&&!this.item.val&&(this.item.val=this.item.value)}}},"3r/l":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=d(n("GQeE")),a=d(n("gDS+")),s=d(n("QbLZ")),o=d(n("spfV")),r=n("CeR/"),c=d(n("efIh")),l=n("L2JU"),u=d(n("EstQ"));function d(t){return t&&t.__esModule?t:{default:t}}e.default={name:"LogTab",components:{ticketLogDetail:o.default},mixins:[c.default],props:{ticketInfo:Object,isShowSla:Boolean},data:function(){return{dispalyLogInfo:null,flowStartText:this.$t('m.newCommon["流程开始"]'),loading:!1,list:[],isShowDetail:!1,imgUrl:n("iPSC"),commentInfo:{},processorList:[]}},computed:(0,s.default)({isShowComment:function(){return this.ticketInfo.is_over&&-1!==Number(this.ticketInfo.comment_id)}},(0,l.mapState)({nodeList:function(t){return t.deployOrder.nodeList}}),{token:function(){return this.$route.query.token}}),watch:{nodeList:{handler:function(t){0===t.length||this.ticketInfo.is_over||this.getCurrentProcess()},deep:!0}},created:function(){this.getOperationLogList(),this.getTicktComment()},methods:{getOperationLogList:function(){var t=this,e=this.$route.query.id;if(e){this.loading=!0;var n={};n.ticket=e,this.$route.query.token&&(n.token=this.$route.query.token),this.$store.dispatch("change/getLog",n).then((function(e){t.list=[],e.data.forEach((function(e){var n={};n.content=e.message,n.tag=e.operate_at,e.message!==t.flowStartText&&(e.content=e.operate_at,e.tag=e.message,e.type="primary",e.showMore=!1,e.filled=!0,delete e.type,e.color="green",t.list.push(JSON.parse((0,a.default)(e))))})),t.getCurrentProcess()})).catch((function(e){(0,r.errorHandler)(e,t)})).finally((function(){t.loading=!1}))}},getCurrentProcess:function(){var t=this;this.list=this.list.filter((function(t){return"blue"!==t.color})),this.nodeList.forEach((function(e,n){var i={action:"",deal_time:"",detail_message:"",form_data:[],from_state_name:e.name||"",from_state_type:"",id:-n,message:u.default.t('m["正在进行中"]')+"  "+e.processors,operate_at:e.update_at,operator:e.processors,processors:"",processors_type:"",showMore:!1,tag:"【"+e.name+"】"+u.default.t('m["正在进行中"]')+", "+u.default.t('m["当前处理人"]')+e.processors||!1,ticket:t.ticketInfo.id,ticket_id:t.ticketInfo.id,type:"primary",color:"blue"};console.log(e.status),"RUNNING"===e.status&&-1===t.list.findIndex((function(t){return t.id===i.id}))&&t.list.push(i)}))},getTicktComment:function(){var t=this;this.ticketInfo.is_over&&this.isShowComment&&this.$store.dispatch("ticket/getTicktComment",this.ticketInfo.comment_id).then((function(e){0!==(0,i.default)(e.data).length&&(t.commentInfo=e.data)}))},handleSelect:function(t){var e=this,n=JSON.parse((0,a.default)(t));n.form_data.forEach((function(t){t.val=t.value,e.conditionField(t,n.form_data)})),n.form_data=n.form_data.filter((function(t){return t.showFeild})),this.dispalyLogInfo=n},viewProcess:function(){this.$emit("viewProcess",!0)},handleEvaluate:function(){console.log("去评价")}}}},"429m":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(n("14Xm")),a=s(n("D3Ub"));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"getRpcParam",components:{},props:{prcTable:{type:Array,default:function(){return[]}},changeInfo:{type:Object,default:function(){return{}}},stateList:{type:Array,default:function(){return[]}},formInfo:{type:Object,default:function(){return{}}}},data:function(){return{sourceTypeList:[{id:1,key:"CUSTOM",name:this.$t('m.treeinfo["自定义"]')},{id:2,key:"FIELDS",name:this.$t('m.treeinfo["引用变量"]')}]}},computed:{},watch:{prcTable:function(){this.initData()}},mounted:function(){var t=this;return(0,a.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.changeInfo;case 2:t.initData();case 3:case"end":return e.stop()}}),e,t)})))()},methods:{initData:function(){var t=this;this.prcTable.forEach((function(e){for(var n in t.$set(e,"isCheck",!1),t.$set(e,"isSatisfied",!1),t.$set(e,"el",null),t.$set(e,"source_type","CUSTOM"),t.$set(e,"value_key",""),t.changeInfo.meta)e.name===n&&(-1!==t.changeInfo.meta[n].indexOf("{params_")?(e.source_type="FIELDS",e.value_key=t.changeInfo.meta[n].split("${params_")[1].split("}")[0]):(e.source_type="CUSTOM",e.value=t.changeInfo.meta[n]))}))}}}},4855:function(t,e,n){"use strict";n("KLeT")},"4DM6":function(t,e,n){"use strict";n.r(e);var i=n("/WmN"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"4DVm":function(t,e,n){"use strict";n.r(e);var i=n("E84W"),a=n("A4RE");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("wsaz");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"8390473c",null);e.default=r.exports},"4FVi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("gDS+"),s=(i=a)&&i.__esModule?i:{default:i},o=n("ygAv"),r=n("CeR/");e.default={name:"slaRecord",props:{basicInfomation:{type:Object,default:function(){return{}}},threshold:Array},data:function(){return{convertTimeArrToString:o.convertTimeArrToString,loading:!1,slaList:[],runningTime:[],curTime:new Date,taskStatusColor:[{},{textColor:"#3A84FF",backgroundColor:"#E1ECFF"},{textColor:"#2DCB56",backgroundColor:"#DCFFE2"},{textColor:"#63656E",backgroundColor:"#DCDEE5"},{textColor:"#63656E",backgroundColor:"#DCDEE5"},{textColor:"#EA3536",backgroundColor:"#FEDDDC"}],taskStatusList:["",this.$t('m.newCommon["未开启"]'),this.$t('m.newCommon["计时中"]'),this.$t('m.newCommon["暂停中"]'),this.$t('m.newCommon["已结束"]'),this.$t('m.newCommon["已超时"]')],responseCost:"",processCost:""}},watch:{},mounted:function(){this.getReceiptsSlaTask()},methods:{getReceiptsSlaTask:function(){var t=this;if(Object.prototype.hasOwnProperty.call(this.basicInfomation,"id")){this.loading=!0;var e={id:this.basicInfomation.id};this.$store.dispatch("change/getReceiptsSlaTask",e).then((function(e){t.slaList=e.data,t.slaList.forEach((function(e){t.$set(e,"sla_responseTime",[0,0,0,0,0,0]),t.$set(e,"sla_processTime",[0,0,0,0,0,0])}))})).catch((function(e){(0,r.errorHandler)(e,t)})).finally((function(){t.loading=!1,t.changeTimeoutStatus()}))}},changeTimeoutStatus:function(){var t=this;this.slaList.forEach((function(e,n){if(2===e.task_status){var i=(0,o.convertTimeArrToMS)((new Date).toLocaleDateString().split("/").concat((new Date).toTimeString().split(" ")[0].split(":"))),a=(0,o.convertTimeArrToMS)(e.reply_deadline.split(" ")[0].split("-").concat(e.reply_deadline.split(" ")[1].split(":")))-i,s=(0,o.convertTimeArrToMS)(e.deadline.split(" ")[0].split("-").concat(e.deadline.split(" ")[1].split(":")))-i;t.runTime(a,s,n,e.name)}e.reply_cost=(0,o.convertTimeArrToString)(e.reply_cost)}))},changeTime:function(t){var e=Math.abs(t);return{day:e/86400,hour:e%86400/3600,minute:e%86400%3600/60,sec:e%86400%3600%60}},goToSla:function(){this.$router.push({name:"projectServiceSla",params:{id:this.basicInfomation.service_id},query:{project_id:this.$route.query.project_id}})},runTime:function(t,e,n,i){var a=this,o=!1,r=!1,c=!0,l=!0,u=this.threshold.find((function(t){return t.sla_name===i})),d=JSON.parse((0,s.default)(t)),f=JSON.parse((0,s.default)(e));this.myInterval((function(){t--,e--,t<d-u.rTimeOutThreshold*d||t<0?(o=!0,c=!1):t<u.rWarningThreshold*d&&(c=!1),e<f-u.pTimeOutThreshold*f||e<0?(r=!0,l=!1):e<u.pWarningThreshold*f&&(l=!1);var i=[0,0],s=[0,0],m=a.changeTime(t),p=a.changeTime(e);i.push(parseInt(m.day),parseInt(m.hour),parseInt(m.minute),m.sec),s.push(parseInt(p.day),parseInt(p.hour),parseInt(p.minute),p.sec),a.slaList[n].sla_responseTime=i,a.slaList[n].sla_processTime=s,a.slaList[n].isResponseTimeout=o,a.slaList[n].isProcessTimeout=r,a.slaList[n].isResponseNormal=c,a.slaList[n].isProcessNormal=l,a.$set(a.slaList,n,a.slaList[n])}),1e3)},myInterval:function(t,e){var n=this;if(!0===this.isDestroyed)return!1;var i=setTimeout((function(){t(),clearTimeout(i),n.myInterval(t,e)}),e)},getCurrentCost:function(t){var e=new Date(t),n=new Date;return Math.round((n-e)/1e3)}}}},"4HBs":function(t,e,n){"use strict";n.r(e);var i=n("YOvt"),a=n("V77z");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("C0K7");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"24388a21",null);e.default=r.exports},"4K0D":function(t,e,n){"use strict";n.r(e);var i=n("0Oxo"),a=n("CyHO");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},"4K4u":function(t,e,n){"use strict";n.r(e);var i=n("5Ygy"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"4Lss":function(t,e,n){"use strict";n.r(e);var i=n("SDDO"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"4ZEI":function(t,e,n){"use strict";n("+TgL")},"4lVZ":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=d(n("m1cH")),a=d(n("14Xm")),s=d(n("gDS+")),o=d(n("GQeE")),r=d(n("D3Ub")),c=d(n("BkRI")),l=d(n("VflG")),u=d(n("9ZYk"));function d(t){return t&&t.__esModule?t:{default:t}}e.default={name:"responseData",components:{exportTree:u.default},mixins:[l.default],props:{changeInfo:{type:Object,default:function(){return{}}},apiDetail:{type:Object,default:function(){}},stateList:{type:Array,default:function(){return[]}},remoteApiIid:{type:[String,Number],default:function(){return""}},formInfo:{type:Object,default:function(){return{}}}},data:function(){return{organization:{processorPerson:[],processorTree:{},assignorPerson:[],assignorTree:{}},organizaInfo:{assignorShow:[!1,!1,!1]},cascaderData:[],bodyTableData:[],responseTableData:[],paramTableData:[],checkInfo:{name:"",road:""},sourceTypeList:[{id:1,key:"CUSTOM",name:this.$t('m.treeinfo["自定义"]')},{id:2,key:"FIELDS",name:this.$t('m.treeinfo["引用变量"]')}],paramTableInfo:{value:"",placeholder:this.$t('m.treeinfo["请选择数据来源"]')},selectInfo:{selectkeylist:[],selectkey:"",selectvaluelist:[],selectvalue:""},isShow:!1,tampFormInfo:{ancestorsList_str:"",isSelectedKey:"",isSelectedValue:"",settingKeyName:"",settingValueName:""},isCheck:!1,maxLevel:1,maxLevelTree:[1,1,1],settingKeyName:"",settingValueName:""}},computed:{},watch:{"apiDetail.rsp_data":{handler:function(){this.initData()},deep:!0}},mounted:function(){this.initData()},methods:{initData:function(){this.responseTableDataChange()},responseTableDataChange:function(){var t=this;return(0,r.default)(a.default.mark((function e(){var n,i,l,u,d,f,m,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.selectInfo={selectkeylist:[],selectkey:"",selectvaluelist:[],selectvalue:""},t.organization={processorPerson:[],processorTree:{},assignorPerson:[],assignorTree:{}},t.maxLevel=1,t.maxLevelTree=[1,1,1],t.settingKeyName="",t.settingValueName="",e.next=8,t.changeInfo;case 8:if((0,o.default)(t.apiDetail.rsp_data).length){e.next=13;break}t.apiDetail.responseTreeDataList=[{has_children:!1,showChildren:!0,checkInfo:!1,key:"root",is_necessary:!0,type:"object",desc:t.$t('m.treeinfo["初始化数据"]'),parentInfo:"",children:[]}],t.apiDetail.responseTableData=[],e.next=19;break;case 13:return e.next=15,t.jsonschemaToList({root:JSON.parse((0,s.default)(t.apiDetail.rsp_data))});case 15:return t.apiDetail.responseTreeDataList=e.sent,e.next=18,t.treeToTableList(JSON.parse((0,s.default)(t.apiDetail.responseTreeDataList[0].children)));case 18:t.apiDetail.responseTableData=e.sent;case 19:return e.next=21,JSON.parse((0,s.default)(t.apiDetail.responseTableData));case 21:return n=e.sent,e.next=24,n.forEach((function(e){e.children=[],e.source_type="CUSTOM",e.value="",e.name=e.key,e.isSelectAbled=!1,e.isSelectedKey=!1,e.isSelectedKeyDisabled=!1,e.isSelectedValue=!1,e.isSelectedValueDisabled=!t.changeInfo.api_info}));case 24:return e.next=26,t.recordChildren(n);case 26:return e.next=28,t.recordParent(n);case 28:return e.next=30,t.showSelectAbled(n);case 30:return i=e.sent,e.next=33,i.forEach(function(){var e=(0,r.default)(a.default.mark((function e(n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.markCanUseArray(n);case 2:case"end":return e.stop()}}),e,t)})));return function(t){return e.apply(this,arguments)}}());case 33:return e.next=35,n;case 35:return t.responseTableData=e.sent,l=t.responseTableData.filter((function(t){return!t.level&&"data"===t.key})),e.next=39,t.makeArrayTree(l);case 39:if(t.cascaderData=e.sent,t.organization.assignorPerson=t.cascaderData[0]||[],!t.changeInfo.api_info||t.changeInfo.api_info.remote_api_id!==t.apiDetail.id){e.next=64;break}return e.next=44,t.changeInfo.api_info.rsp_data.split(".");case 44:return u=e.sent,e.next=47,u.map((function(t,e){return t=e+"_"+t}));case 47:return d=e.sent,f=d.length+"_items_0",d.push(f),m=d.concat(t.changeInfo.kv_relation.key.split(".").map((function(t,e){return d.length+e+"_"+t}))).join(),p=d.concat(t.changeInfo.kv_relation.name.split(".").map((function(t,e){return d.length+e+"_"+t}))).join(),t.tampFormInfo.ancestorsList_str=d.toString(),t.responseTableData.forEach((function(e){e.ancestorsList_str===m&&(e.isSelectedKey=!0,t.tampFormInfo.isSelectedKey=e.ancestorsList_str,t.tampFormInfo.settingKeyName=e.name),e.ancestorsList_str===p&&(e.isSelectedValue=!0,t.tampFormInfo.isSelectedValue=e.ancestorsList_str,t.tampFormInfo.settingValueName=e.name)})),e.next=56,t.organization.assignorPerson.forEach((function(e){t.treeData(e,"assignors")}));case 56:t.selectInfo.selectkeylist=t.responseTableData.filter((function(t){return t.ancestorsList.join()===d.join()})),t.selectInfo.selectkey=t.tampFormInfo.isSelectedKey,t.selectInfo.selectvaluelist=(0,c.default)(t.selectInfo.selectkeylist),t.selectInfo.selectvalue=t.tampFormInfo.isSelectedValue,t.settingValueName=t.tampFormInfo.settingValueName,t.settingKeyName=t.tampFormInfo.settingKeyName,t.giveFirstCheckInfo(t.selectInfo.selectkeylist,m),t.giveFirstCheckInfo(t.selectInfo.selectvaluelist,p);case 64:case"end":return e.stop()}}),e,t)})))()},giveFirstCheckInfo:function(t,e){var n=this;t.forEach((function(t){t.ancestorsList_str===e&&(t.checkInfo=!0),t.has_children&&t.children.length&&"object"===t.type&&n.giveFirstCheckInfo(t.children,e)}))},treeData:function(t,e){var n=this;t.checkInfo=!1,t.has_children=!(!t.children||!t.children.length),t.showChildren=!0,String(this.tampFormInfo.ancestorsList_str.split(",").slice(0,-1).toString())===String(t.ancestorsList_str)&&"assignors"===e&&(t.checkInfo=!0,this.organization.assignorTree=t),t.has_children&&t.children.forEach((function(t){n.treeData(t,e)}))},recordChildren:function(t,e){var n=t.map((function(t){return t.level}));this.maxLevel=Math.max.apply(Math,(0,i.default)(n));for(var a=function(e){t.filter((function(t){return t.level===e})).forEach((function(e){!function(t,e){t.filter((function(t){return t.level===e.level-1&&t.primaryKey===e.parentPrimaryKey&&t.ancestorsList.toString()===e.ancestorsList.slice(0,-1).toString()}))[0].children.push(e)}(t,e)}))},s=this.maxLevel;s>(e||0);s--)a(s)},recordParent:function(t,e){for(var n=this.maxLevel,i=function(e){t.filter((function(t){return t.level===e})).forEach((function(e){!function(t,e){e.level?e.parentInfo=t.filter((function(t){return t.level===e.level-1&&t.primaryKey===e.parentPrimaryKey&&t.ancestorsList.toString()===e.ancestorsList.slice(0,-1).toString()}))[0]:e.parentInfo=""}(t,e)}))},a=0;a<=(e||n);a++)i(a)},markCanUseArray:function(t){t.isCanUseArray=!0,t.level&&this.markCanUseArray(t.parentInfo)},makeArrayTree:function(t){var e=[];return function t(e,n){n.forEach((function(i){n.name=i.name,n.isSelect=!1,n.ancestorsList_str=i.ancestorsList_str;var a=i.children;n.children=[],e.push(n),a&&a.length&&t(n.children,a)}))}(e,t),e},changeState:function(t){t.showChildren=!t.showChildren,t.children.forEach((function(e){e.isShow=t.showChildren})),t.showChildren||this.closeChildren(t)},closeChildren:function(t){var e=this;t.children.forEach((function(t){t.isShow=!1,t.has_children&&(t.showChildren=!1,e.closeChildren(t))}))},changeType:function(){},selectOneKey:function(t){var e=t.isSelectedKey;this.responseTableData.forEach((function(t){t.isSelectedKey=!1})),t.isSelectedKey=!e,this.responseTableData.filter((function(t){return t.isSelectAbled})).forEach((function(e){e.isSelectedKeyDisabled=!1,e.isSelectedValueDisabled=e.parentInfo!==t.parentInfo})),this.responseTableData.filter((function(e){return e.isSelectAbled&&e.parentInfo!==t.parentInfo})).forEach((function(t){t.isSelectedValue=!1}))},selectOneValue:function(t){var e=t.isSelectedValue;this.responseTableData.forEach((function(t){t.isSelectedValue=!1})),t.isSelectedValue=!e},countArrayAncestors:function(t){var e=[];return function t(n){"array"===n.parentInfo.type&&(e.push(n.parentInfo),t(n.parentInfo)),"object"===n.parentInfo.type&&t(n.parentInfo)}(t),e},showSelectAbled:function(t){var e=this;return(0,r.default)(a.default.mark((function n(){var i,s;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=[],s=t.filter((function(t){return"array"!==t.type&&"object"!==t.type&&t.level&&(!t.children||!t.children.length)&&-1!==t.ancestorsList.indexOf("0_data")})),s.filter((function(t){var n=e.countArrayAncestors(t),a=1===n.length&&("array"===t.parentInfo.type||"array"===t.parentInfo.parentInfo.type);return a&&-1===i.indexOf(n[0])&&i.push(n[0]),a})).forEach((function(t){t.isSelectAbled=!0})),n.abrupt("return",i);case 5:case"end":return n.stop()}}),n,e)})))()},showTree:function(t){if(t){var e=this.selectInfo.selectkeylist.map((function(t){return t.level}));this.$set(this.maxLevelTree,1,Math.max.apply(Math,(0,i.default)(e))-1),this.$set(this.maxLevelTree,2,Math.max.apply(Math,(0,i.default)(e))-1)}else{var n=this.organization.assignorPerson.map((function(t){return t.level}));this.$set(this.maxLevelTree,0,Math.max.apply(Math,(0,i.default)(n))-1)}for(var a=this.organizaInfo.assignorShow[t],s=0;s<3;s++)this.$set(this.organizaInfo.assignorShow,s,!1);this.$set(this.organizaInfo.assignorShow,t,!a)},closeOther0:function(){this.$set(this.organizaInfo.assignorShow,0,!1)},closeOther1:function(){this.$set(this.organizaInfo.assignorShow,1,!1)},closeOther2:function(){this.$set(this.organizaInfo.assignorShow,2,!1)},recordCheckFn:function(t){var e=this;t.checkInfo=!1,null===t.children||t.children&&!t.children.length||t.children.forEach((function(t){e.recordCheckFn(t)}))},assignorToggle:function(t,e){var n=this;"object"===t.type||e&&"array"===t.type||(e?1===e?(this.selectInfo.selectkeylist.forEach((function(t){n.recordCheckFn(t)})),this.selectInfo.selectkey=t.ancestorsList_str,this.settingKeyName=t.name,this.responseTableData.forEach((function(t){t.isSelectedKey=!1})),this.responseTableData.filter((function(e){return e.ancestorsList_str===t.ancestorsList_str}))[0].isSelectedKey=!0):(this.selectInfo.selectvaluelist.forEach((function(t){n.recordCheckFn(t)})),this.selectInfo.selectvalue=t.ancestorsList_str,this.settingValueName=t.name,this.responseTableData.forEach((function(t){t.isSelectedValue=!1})),this.responseTableData.filter((function(e){return e.ancestorsList_str===t.ancestorsList_str}))[0].isSelectedValue=!0):(this.organization.assignorPerson.forEach((function(t){n.recordCheckFn(t)})),this.selectInfo.selectkeylist=t.children[0].children,this.selectInfo.selectvaluelist=(0,c.default)(this.selectInfo.selectkeylist),this.organization.assignorTree=t,this.tampFormInfo.assignors=t.id,this.checkInfo.assignors=!1),t.checkInfo=!0,this.closeTree(e))},closeTree:function(t){this.$set(this.organizaInfo.assignorShow,t,!1)},toggleChildren:function(){arguments[0].showChildren=!arguments[0].showChildren}}}},"4nBA":function(t,e,n){"use strict";n.r(e);var i=n("8fDA"),a=n("ilb7");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("eRrw");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"90634162",null);e.default=r.exports},"4uXh":function(t,e,n){},"4zXE":function(t,e,n){"use strict";n("VFWN")},"5/Zn":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"CASCADE",props:{item:{type:Object,required:!0,default:function(){}},fields:{type:Array,required:!0,default:function(){return[]}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{firstShow:!1,firstInfo:this.item.val,firstList:[],secondInfo:"",firstPlace:this.$t('m.newCommon["请选择所属的厅委办"]'),secondPlace:this.$t('m.newCommon["请选择所属业务"]'),clickChange:!1}},computed:{changeFields:function(){return this.fields}},watch:{"item.val":function(){this.changeInfo()}},mounted:function(){this.changeInfo()},methods:{itemSelect:function(t){var e=this.item.choice.filter((function(e){return e.key===t}))[0];this.clickInfo=!0,this.firstShow=!!e.items,this.firstInfo=t,this.item.val=this.firstShow?"":t,this.firstList=e.items,this.secondInfo="",this.clickChange=!0},changeFrist:function(t){this.secondInfo=t,this.item.val=this.secondInfo},changeInfo:function(){if(this.clickChange)this.clickChange=!1;else if(this.item.val){this.firstShow=!1,this.firstList=[];for(var t=!0,e=0;e<this.item.choice.length;e++)if(String(this.item.choice[e].key)===String(this.item.val)){this.firstInfo=this.item.val,t=!1,this.firstShow=!!this.item.choice[e].items;break}if(t)for(var n=0;n<this.item.choice.length;n++)if(this.item.choice[n].items){var i=this.item.choice[n].items;this.firstShow=!0,this.firstInfo===this.item.choice[n].key&&(this.firstList=i);for(var a=0;a<i.length;a++)if(String(i[a].key)===String(this.item.val)){this.firstList=i,this.secondInfo=this.item.val,this.firstInfo=this.item.choice[n].key;break}}}else this.firstShow=!1,this.firstList=[],this.firstInfo=""}}}},"5AxX":function(t,e){t.exports="data:image/png;base64,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"},"5Pf/":function(t,e,n){"use strict";n.r(e);var i=n("7yQo"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"5Reh":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATQAAACYCAYAAABqKBW+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQ1QTNEM0FGNjZENDExRTc4QTYwOEQ2QTE1RUUyRTg3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQ1QTNEM0IwNjZENDExRTc4QTYwOEQ2QTE1RUUyRTg3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDVBM0QzQUQ2NkQ0MTFFNzhBNjA4RDZBMTVFRTJFODciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RDVBM0QzQUU2NkQ0MTFFNzhBNjA4RDZBMTVFRTJFODciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5gqeqEAAAicElEQVR42uyd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"},"5XEB":function(t,e,n){"use strict";n.r(e);var i=n("2p9g"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"5Ygy":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(n("14Xm")),a=l(n("D3Ub")),s=l(n("Y+p1")),o=l(n("m1XF")),r=n("CeR/"),c=l(n("hztf"));function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"AssociatedTab",components:{AssociatedDialog:o.default,Empty:c.default},props:{ticketInfo:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,associaLoading:!1,isShowAddAssociation:!1,historyInfo:{isShow:!1,width:700,headerPosition:"left",autoClose:!1,precision:0,title:this.$t('m.newCommon["绑定历史"]')},historyList:[],associatedList:[],listError:!1,historyListError:!1}},created:function(){},mounted:function(){this.getAssociates(),this.getAssociatesHistory()},methods:{getAssociates:function(){var t=this;return(0,a.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:t.ticketInfo.id},t.loading=!0,t.historyListError=!1,t.$route.query.token&&(n.token=t.$route.query.token),e.next=6,t.$store.dispatch("deployOrder/getAssociatedTickets",n).then((function(e){t.associatedList=e.data})).catch((function(e){t.historyListError=!0,(0,r.errorHandler)(e,t)})).finally((function(){t.loading=!1}));case 6:case"end":return e.stop()}}),e,t)})))()},closeSideslider:function(){var t=this;!(0,s.default)(this.$refs.associated.typeSelected,this.$refs.associated.initFormData.typeSelected)||!(0,s.default)(this.$refs.associated.checkList,this.$refs.associated.initFormData.checkList)?this.$bkInfo({title:this.$t('m["确定离开当前页？"]'),subTitle:this.$t('m["离开将会导致未保存信息丢失"]'),okText:this.$t('m["离开"]'),confirmLoading:!0,confirmFn:function(){t.isShowAddAssociation=!1},cancelFn:function(){t.isShowAddAssociation=!0}}):this.isShowAddAssociation=!1},getAssociatesHistory:function(){var t=this,e={id:this.ticketInfo.id,type:"DERIVE"};this.associaLoading=!0,this.listError=!1,this.$store.dispatch("change/getBindHistory",e).then((function(e){t.historyList=e.data})).catch((function(e){t.listError=!0,(0,r.errorHandler)(e,t)})).finally((function(){t.associaLoading=!1}))},openAddAssociation:function(){this.isShowAddAssociation=!0},showHistory:function(){this.historyList.length&&(this.historyInfo.isShow=!0)},closeHistory:function(){this.historyInfo.isShow=!1},checkOne:function(t){var e=this.$router.resolve({name:"TicketDetail",query:{id:""+t.id,from:this.$route.query.from}});window.open(e.href,"_blank")},unBindDialogShow:function(t){var e=this;this.$bkInfo({type:"warning",title:this.$t('m.manageCommon["确认取消关联？"]'),subTitle:this.$t('m.manageCommon["取消关联后，无法查看之间的关联信息"]'),confirmFn:function(){e.unBind(t)}})},unBind:function(t){var e=this;return(0,a.default)(i.default.mark((function n(){var a;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={from_ticket:e.ticketInfo.id,to_ticket:t.id},n.next=3,e.$store.dispatch("change/unbindTicket",a).then((function(){e.$bkMessage({message:e.$t('m.manageCommon["取消关联成功"]'),theme:"success"})})).catch((function(t){(0,r.errorHandler)(t,e)})).finally((function(){e.getAssociates(),e.getAssociatesHistory()}));case 3:case"end":return n.stop()}}),n,e)})))()},submitSuccess:function(){this.isShowAddAssociation=!1,this.getAssociates(),this.getAssociatesHistory()}}}},"5eUO":function(t,e,n){"use strict";n("qCVH")},"5f0d":function(t,e,n){"use strict";n("zcr8")},"5fYA":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:!t.nodeListCurren[0]},expression:"{ isLoading: !nodeListCurren[0] }"}],staticClass:"bk-node-content"},[t.nodeListCurren[0]&&(t.nodeListCurren[0].can_operate||t.nodeListCurren[0].can_view)&&"TASK-SOPS"!==t.nodeListCurren[0].type?[t.nodeListCurren[0]&&"TRANSITION"===t.nodeListCurren[0].action_type?e("div",{staticClass:"bk-logs-basic"},[e("h3",{staticClass:"bk-basic-h3"},[t._v(t._s(t.$t('m.newCommon["基本信息"]')))]),t._v(" "),e("ul",t._l(t.basicList,(function(n,i){return e("li",{key:i},[e("span",{staticClass:"bk-basic-label"},[t._v(t._s(n.name)+"：")]),t._v(" "),e("span",{staticClass:"bk-basic-value",attrs:{title:n.value}},[t._v(t._s(n.value||"--"))])])})),0)]):t._e()]:t._e(),t._v(" "),e("div",{staticClass:"bk-logs-basic"},[!t.nodeListCurren[0]||!t.nodeListCurren[0].can_operate&&!t.nodeListCurren[0].can_view||"NORMAL"!==t.nodeListCurren[0].type&&"SIGN"!==t.nodeListCurren[0].type?t._e():[e("h3",{staticClass:"bk-basic-h3"},[t._v("\n        "+t._s("SIGN"===t.nodeListCurren[0].type?t.$t("m.newCommon['会签进度']"):t.$t('m.newCommon["节点信息"]')))])],t._v(" "),t._l(t.nodeListCurren,(function(i,a){return e("div",{key:a,staticStyle:{position:"relative"}},[i.can_operate||i.can_view?[i.can_operate?t._e():e("div",{staticClass:"bk-node-form-disabled"}),t._v(" "),"RUNNING"!==i.status&&"QUEUEING"!==i.status||"NORMAL"!==i.type&&"APPROVAL"!==i.type?"RUNNING"!==i.status&&"QUEUEING"!==i.status&&"NORMAL"===i.type?e("field-preview",{attrs:{"comment-id":"fields-view",fields:i.fields,"ticket-id":t.basicInfomation.id,"stated-id":i.ticket_id}}):"TASK"===i.type?e("autoNodeInfo",{attrs:{"api-info":i.api_info,"node-info":i,"ticket-id":t.basicInfomation.id,"stated-id":i.ticket_id}}):"SIGN"===i.type?e("signNodeInfo",{attrs:{"node-info":i}}):"APPROVAL"===i.type?e("approvalNodeInfo",{attrs:{"api-info":i.api_info,"node-info":i}}):"TASK-DEVOPS"===i.type?e("devopsNodeInfo",{attrs:{"api-info":i.api_info,"node-info":i}}):"WEBHOOK"===i.type?e("web-hook-info",{attrs:{"api-info":i.api_info,"node-info":i}}):"BK-PLUGIN"===i.type?e("bk-plugin-info",{attrs:{"api-info":i.api_info,"node-info":i}}):e("sopsNodeInfo",{attrs:{"api-info":i.api_info,"node-info":i,"ticket-id":t.basicInfomation.id,"stated-id":i.ticket_id}}):[t.basicInfomation.is_over?[e("div",{staticClass:"bk-no-content bk-no-status"},["FINISHED"===t.basicInfomation.current_status?e("img",{attrs:{src:n("iPSC")}}):t._e(),t._v(" "),"TERMINATED"===t.basicInfomation.current_status?e("img",{attrs:{src:n("5AxX")}}):t._e(),t._v(" "),e("p",["FINISHED"===t.basicInfomation.current_status?e("span",[t._v(t._s(t.$t('m.newCommon["该单据已结束"]')))]):t._e(),t._v(" "),"TERMINATED"===t.basicInfomation.current_status?e("span",[t._v(t._s(t.$t('m.newCommon["该单据已被终止"]')))]):t._e()])])]:e("current-steps",{attrs:{"read-only":t.readOnly,"basic-infomation":t.basicInfomation,"current-step-list":t.currentStepList,"node-list":t.nodeListCurren,"open-status":t.openStatus},on:{closeSlider:t.closeSlider}}),t._v(" "),"QUEUEING"===i.status?e("div",{staticClass:"bk-option-see"},[e("span",[t._v(t._s(t.$t('m.newCommon["信息已经提交成功，系统正在处理中，请稍后查看！"]')))])]):t._e()]]:[e("div",{key:a,staticClass:"bk-without-permission"},[e("p",{staticClass:"bk-without-prompt"},[e("i",{staticClass:"bk-itsm-icon icon-icon-no-permissions"}),t._v(" "),i.can_operate?e("span",[t._v(t._s(t.$t('m.newCommon["抱歉你暂无该节点的查看权限"]')))]):e("span",[t._v(t._s(t.$t('m.newCommon["抱歉你暂无该节点的处理权限"]')))])])])]],2)}))],2)],2)},a=[];i._withStripped=!0},"5hmv":function(t,e,n){"use strict";n.r(e);var i=n("eM+a"),a=n("kQq5");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("l3JT");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},"676K":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-trigger-condition"},[e("div",{staticClass:"bk-condition-name"},[e("span",[t._v(t._s(t.$t("m.trigger['触发条件']")))])]),t._v(" "),e("div",{staticClass:"bk-condition-content",on:{click:function(e){t.triggerRules.checkStatus=!1}}},[e("ul",{staticClass:"bk-content-step"},[t._l(t.triggerRules.list,(function(n,i){return e("li",{key:i,staticClass:"bk-content-li"},[e("ul",{staticClass:"bk-content-item",class:{"bk-more-margin":1!==n.itemList.length}},t._l(n.itemList,(function(i,a){return e("li",{key:a,staticClass:"bk-content-item-li",class:{"bk-none-margin":n.itemList.length-1===a}},[1!==n.itemList.length?[a!==n.itemList.length-1?e("div",{staticClass:"bk-content-type",on:{click:function(e){return t.changeBetween(n)}}},[e("span",[t._v(t._s("all"===n.type?t.$t("m.trigger['且']"):t.$t("m.trigger['或']")))]),t._v(" "),e("i",{staticClass:"bk-icon icon-down-shape"})]):t._e(),t._v(" "),e("div",{staticClass:"bk-item-line"}),t._v(" "),0===a?e("div",{staticClass:"bk-item-line-none bk-item-none"}):t._e(),t._v(" "),a===n.itemList.length-1?e("div",{staticClass:"bk-item-line-none bk-item-none-bottom"}):t._e()]:t._e(),t._v(" "),e("bk-select",{staticStyle:{width:"190px"},attrs:{"ext-cls":"bk-item-float",clearable:!1,searchable:""},on:{change:function(e){return t.changeContent(i)}},model:{value:i.key,callback:function(e){t.$set(i,"key",e)},expression:"node.key"}},t._l(t.keyList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1),t._v(" "),e("bk-select",{staticStyle:{width:"140px"},attrs:{"ext-cls":"bk-item-float",clearable:!1,searchable:""},on:{selected:function(e){return t.changeCondition(i)}},model:{value:i.condition,callback:function(e){t.$set(i,"condition",e)},expression:"node.condition"}},t._l(i.conditionList,(function(t){return e("bk-option",{key:t.name,attrs:{id:t.name,name:t.label}})})),1),t._v(" "),"none"!==i.conditionType?[e("trigger-field",{staticStyle:{width:"170px",float:"left","margin-right":"8px"},attrs:{item:i}})]:t._e(),t._v(" "),e("div",{staticClass:"bk-between-operat"},[e("i",{staticClass:"bk-itsm-icon icon-flow-add",on:{click:function(e){return t.addLine(n,i,a)}}}),t._v(" "),e("i",{staticClass:"bk-itsm-icon icon-flow-reduce",class:{"bk-no-delete":1===n.itemList.length},on:{click:function(e){return t.deleteLine(n,i,a)}}})])],2)})),0),t._v(" "),e("i",{staticClass:"bk-icon icon-close-circle-shape",class:{"bk-no-delete":1===t.triggerRules.list.length},on:{click:function(e){return t.deleteGroup(n,i)}}}),t._v(" "),e("div",{staticClass:"bk-content-type",on:{click:t.handleBetween}},[e("span",[t._v(t._s("all"===t.triggerRules.type?t.$t("m.trigger['且']"):t.$t("m.trigger['或']")))]),t._v(" "),e("i",{staticClass:"bk-icon icon-down-shape"})]),t._v(" "),e("div",{staticClass:"bk-item-line"}),t._v(" "),0===i?e("div",{staticClass:"bk-item-line-none bk-item-none"}):t._e(),t._v(" "),1!==n.itemList.length?e("div",{staticClass:"bk-content-line"}):t._e()])})),t._v(" "),e("li",{staticClass:"bk-content-add"},[e("span",{on:{click:t.addGroup}},[e("i",{staticClass:"bk-icon icon-plus-circle mr5"}),e("span",[t._v(t._s(t.$t("m.trigger['添加']")))])]),t._v(" "),e("div",{staticClass:"bk-item-line"}),t._v(" "),e("div",{staticClass:"bk-item-line-none",class:{"bk-item-over-line":t.triggerRules.checkStatus}})])],2),t._v(" "),e("div",{staticClass:"bk-content-line"}),t._v(" "),t.triggerRules.checkStatus?e("p",{staticClass:"bk-error-info"},[t._v(t._s(t.$t("m.trigger['请填写完整的触发条件']")))]):t._e()])])},a=[];i._withStripped=!0},"68Tg":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("GQeE")),a=r(n("kcB7")),s=n("CeR/"),o=r(n("hztf"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"taskHistory",components:{historyDetail:a.default,Empty:o.default},props:{basicInfomation:{type:Object,default:function(){return{}}},nodeList:{type:Array,default:function(){return[]}},isShowSla:Boolean},data:function(){return{activeName:["ticket"],loading:!1,historyList:[],historyDetail:{isShow:!1,title:this.$t("m.task['记录详情']"),loading:!1,width:660,id:""},ticketAction:[],nodeActions:[],nodeIdMap:{},listError:!1}},computed:{taskHistoryRefresh:function(){return this.$store.state.taskHistoryRefresh}},watch:{taskHistoryRefresh:function(){this.getHistoryList()}},mounted:function(){this.getHistoryList()},methods:{headerCellAttributes:function(){return{title:arguments[0].column.label}},getHistoryList:function(){var t=this;this.loading=!0,this.listError=!1;var e=this.basicInfomation.id;this.$store.dispatch("trigger/getTicketTriggerRecord",{id:e}).then((function(e){t.ticketAction=e.data.ticket_actions.filter((function(t){return"FAILED"===t.status||"SUCCEED"===t.status})),t.nodeIdMap=e.data.state_map,t.nodeActions=(0,i.default)(e.data.state).map((function(n){return t.activeName.push(t.nodeIdMap[n]),{name:t.nodeIdMap[n],actions:e.data.state[n]}}))})).catch((function(e){t.listError=!0,(0,s.errorHandler)(e,t)})).finally((function(){t.loading=!1}))},openDetail:function(t){this.historyDetail.isShow=!0,this.historyDetail.id=t.id},orderingClick:function(t){this.historyList.sort(this.sortCompare("status",t.order))},sortCompare:function(t,e){return function(n,i){var a=n[t],s=i[t];return isNaN(Number(a))||isNaN(Number(s))||(a=Number(a),s=Number(s)),a<s?"ascending"===e?-1:1:a>s?"ascending"===e?1:-1:0}}}}},"6IIS":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading},expression:"{ isLoading: loading }"}],staticClass:"bk-correlationsla-info"},[t._l(t.slaList,(function(n,i){return e("div",{key:i,staticClass:"bk-correlationsla-li"},[e("div",{staticClass:"bk-corr-sla-name"},[2===n.task_status&&4===n.sla_status?e("span",{staticClass:"bk-corr-sla-status",style:"color: "+t.taskStatusColor[5].textColor+"; background-color: "+t.taskStatusColor[5].backgroundColor},[t._v("\n        "+t._s(t.taskStatusList[5])+"\n      ")]):e("span",{staticClass:"bk-corr-sla-status",style:"color: "+t.taskStatusColor[n.task_status].textColor+"; background-color: "+t.taskStatusColor[n.task_status].backgroundColor},[t._v("\n        "+t._s(t.taskStatusList[n.task_status])+"\n      ")]),t._v("\n      : "+t._s(n.name)+"\n    ")]),t._v(" "),e("div",{staticClass:"bk-time-box"},[e("i",{staticClass:"bk-itsm-icon icon-itsm-icon-two-five"}),t._v(" \n      "),e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:{content:"首次响应时间"+n.begin_at},expression:"{\n          content: '首次响应时间' + sla.begin_at\n        }",modifiers:{top:!0}}],staticClass:"underline time-type"},[t._v(t._s(t.$t('m["响应"]'))+t._s(n.isResponseTimeout?t.$t('m["已超时"]'):t.$t('m["倒计时"]')))]),t._v(" "),e("span",{class:["time",n.isResponseNormal?"":n.isResponseTimeout?"timeout":"warn"]},[t._v(t._s(n.sla_responseTime[3]))]),t._v(" :\n      "),e("span",{class:["time",n.isResponseNormal?"":n.isResponseTimeout?"timeout":"warn"]},[t._v(t._s(n.sla_responseTime[4]))]),t._v(" :\n      "),e("span",{class:["time",n.isResponseNormal?"":n.isResponseTimeout?"timeout":"warn"]},[t._v(t._s(n.sla_responseTime[5]))]),t._v(" "),n.isResponseNormal?t._e():e("i",{class:["status-icon","bk-itsm-icon",n.isResponseTimeout?"icon-itsm-icon-square-one":"icon-chaoshigaojing"]})]),t._v(" "),e("div",{staticClass:"bk-time-box"},[e("i",{staticClass:"bk-itsm-icon icon-itsm-icon-two-five"}),t._v(" \n      "),e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:{content:"首次处理时间"+(n.replied_at||"00-00-00 00:00:00")},expression:"{\n          content:\n            '首次处理时间' +\n            (sla.replied_at || '00-00-00 00:00:00')\n        }",modifiers:{top:!0}}],staticClass:"underline time-type"},[t._v(t._s(t.$t('m["处理"]'))+t._s(n.isProcessTimeout?t.$t('m["已超时"]'):t.$t('m["倒计时"]')))]),t._v(" "),e("span",{class:["time",n.isProcessNormal?"":n.isProcessTimeout?"timeout":"warn"]},[t._v(t._s(n.sla_processTime[3]))]),t._v(" :\n      "),e("span",{class:["time",n.isProcessNormal?"":n.isProcessTimeout?"timeout":"warn"]},[t._v(t._s(n.sla_processTime[4]))]),t._v(" :\n      "),e("span",{class:["time",n.isProcessNormal?"":n.isProcessTimeout?"timeout":"warn"]},[t._v(t._s(n.sla_processTime[5]))]),t._v(" "),n.isProcessNormal?t._e():e("i",{class:["status-icon","bk-itsm-icon",n.isProcessTimeout?"icon-itsm-icon-square-one":"icon-chaoshigaojing"]})])])})),t._v(" "),0!==t.slaList.length||t.loading?t._e():e("div",{staticClass:"bk-no-content"},[e("img",{attrs:{src:n("tNV3")}}),t._v(" "),e("p",[t._v("\n      "+t._s(t.$t('m["暂时没有设置SLA"]'))),e("span",{on:{click:t.goToSla}},[t._v(t._s(t.$t('m["去设置"]')))])])])],2)},a=[];i._withStripped=!0},"6Mdl":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-deal-person",class:{"person-vertical":"vertical"===t.formType,"inline-auto-width":"inline-auto-width"===t.formType,"no-second":t.noSecondTypeList.includes(t.formData.levelOne)}},[e("div",{staticClass:"first-level"},[e("bk-select",{attrs:{"ext-cls":"bk-form-width mr10","data-test-id":"dealPerson-select-firstHandler",loading:t.initLoaing,clearable:!1,searchable:"","font-size":"medium"},on:{selected:t.onFirstLevelChange},model:{value:t.formData.levelOne,callback:function(e){t.$set(t.formData,"levelOne",e)},expression:"formData.levelOne"}},t._l(t.firstLevelList,(function(t){return e("bk-option",{key:t.id,attrs:{"data-test-id":"dealPerson-select-first-"+t.id,id:t.id,name:t.name}})})),1)],1),t._v(" "),["PERSON","GENERAL","CMDB","IAM","API","ASSIGN_LEADER","VARIABLE","ORGANIZATION"].includes(t.formData.levelOne)?e("div",{staticClass:"second-level"},["PERSON"===t.formData.levelOne&&Array.isArray(t.formData.levelSecond)?[e("member-select",{attrs:{"data-test-id":"dealPerson-select-personSecondHandler","ext-cls":"bk-form-width","specify-id-list":t.targetSpecifyIdList},model:{value:t.formData.levelSecond,callback:function(e){t.$set(t.formData,"levelSecond",e)},expression:"formData.levelSecond"}})]:["GENERAL","CMDB","IAM","API","ASSIGN_LEADER","VARIABLE"].includes(t.formData.levelOne)?[e("bk-select",{attrs:{"ext-cls":"bk-form-width","data-test-id":"dealPerson-select-secondHandler",loading:t.isLoading,"show-select-all":"",multiple:!["ASSIGN_LEADER"].includes(t.formData.levelOne),searchable:"","font-size":"medium"},model:{value:t.formData.levelSecond,callback:function(e){t.$set(t.formData,"levelSecond",e)},expression:"formData.levelSecond"}},t._l(t.secondLevelList,(function(t){return e("bk-option",{key:t.id,attrs:{"data-test-id":"dealPerson-select-second-"+t.id,id:t.id,name:t.name}})})),1)]:"ORGANIZATION"===t.formData.levelOne?[e("bkTree",{attrs:{list:t.organizationList,"organization-loading":t.organizationLoading,"ext-cls":"bk-form-width"},on:{toggle:t.toggleInfo},model:{value:t.formData.levelSecond,callback:function(e){t.$set(t.formData,"levelSecond",e)},expression:"formData.levelSecond"}})]:t._e()],2):t._e(),t._v(" "),t.showError?e("p",{staticClass:"bk-error-info"},[t._v(t._s(t.requiredMsg||t.$t("m.treeinfo['处理人不能为空']")))]):t._e(),t._v(" "),e("bk-dialog",{attrs:{theme:"primary","footer-position":"center","mask-close":!1},on:{cancel:t.cancelSelect},model:{value:t.organizationTip.show,callback:function(e){t.$set(t.organizationTip,"show",e)},expression:"organizationTip.show"}},[e("i",{staticClass:"bk-itsm-icon icon-itsm-icon-mark-eight organization-tip"}),t._v(" "),e("p",[e("span",[t._v(t._s(t.$t('m["当前组织架构下共有员工"]')))]),t._v(" "),e("span",{staticStyle:{color:"red"}},[t._v(t._s(t.organizationTip.count))]),t._v(" "),e("span",[t._v(t._s(t.$t('m["人，如果开启了消息通知，会导致"]')))]),t._v(" "),e("span",{staticStyle:{color:"red"}},[t._v(t._s(t.organizationTip.count))]),t._v(" "),e("span",[t._v(t._s(t.$t('m["人都会收到单据代办通知，是否继续？如有疑问请咨询ITSM系统管理员。"]')))])])])],1)},a=[];i._withStripped=!0},"6i3v":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("QbLZ")),a=r(n("FCVG")),s=n("ygAv"),o=n("nShD");function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"fieldPreview",components:{RenderView:a.default},props:{fields:{type:Array,required:!0,default:function(){return[]}},ticketId:{type:[Number,String],default:function(){return""}},statedId:{type:[Number,String],default:function(){return""}},commentId:{type:String,default:function(){return""}}},data:function(){return{downFileUrl:"",cloneFields:[],customForm:{formData:[],context:{}}}},watch:{fields:{handler:function(){this.initFields()},immediate:!0}},methods:{initFields:function(){var t=this;this.cloneFields=(0,s.deepClone)(this.fields),this.cloneFields.forEach((function(e){if("CUSTOM-FORM"===e.type&&(e.value="string"==typeof e.value?JSON.parse(e.value):e.value),"FILE"===e.type){t.$set(e,"fileShow",[]);var n=JSON.parse(e.value);for(var a in n)e.fileShow.push((0,i.default)({},n[a],{key:a}))}}))},goToLink:function(t){0!==t.indexOf("http")&&(t="http://"+t),window.open(t,"_blank")},valToList:function(){var t=JSON.parse(this.item.value);for(var e in t)this.fileList.push(t[e])},downFile:function(t,e){this.downFileUrl=window.SITE_URL+"api/ticket/fields/"+e.id+"/download_file/?unique_key="+t.key+"&file_type=ticket",window.open(this.downFileUrl)},onBlur:function(){var t=this.editor.getMarkdown();this.item.val=t},getCustomTableDisplayValue:function(t,e){return(0,o.getCustomTableDisplayValue)(t,e)}}}},"6jts":function(t,e,n){"use strict";n("OzIr")},"6txE":function(t,e,n){"use strict";n("do6w")},"6xgL":function(t,e,n){},"6z7N":function(t,e,n){},"781l":function(t,e,n){"use strict";n("Kwbh")},"7DqX":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"TABLE",props:{item:{type:Object,required:!0,default:function(){}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{}},watch:{"item.val":function(){if(""===this.item.val){this.item.val=[];for(var t={},e=0;e<this.item.choice.length;e++){t[this.item.choice[e].key]=""}this.item.val.push(t)}"function"==typeof this.$parent.refresh&&this.$parent.refresh()}},created:function(){if(""===this.item.val||Array.isArray(this.item.val)&&!this.item.val.length){this.item.val=[];for(var t={},e=0;e<this.item.choice.length;e++){t[this.item.choice[e].key]=""}this.item.val.push(t)}},methods:{addOne:function(){for(var t={},e=0;e<this.item.choice.length;e++){t[this.item.choice[e].key]=""}this.item.val.push(t)},deleteOne:function(t){var e=this;1===this.item.val.length?this.$bkMessage({message:"默认行不能删除",theme:"warning"}):this.$bkInfo({title:"确认要删除此条数据？",confirmFn:function(){e.item.val.splice(t.$index,1)}})}}}},"7HxE":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"bk-clickoutside",rawName:"v-bk-clickoutside",value:t.closeHidden,expression:"closeHidden"}],ref:"cascader",staticClass:"bk-itsm-cascader",class:{visible:t.selector.open}},[e("div",{staticClass:"bk-cascader bk-cascader-input bk-selector",class:{open:t.selector.open},on:{click:t.showcascader}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.textinfo,expression:"textinfo"}],staticClass:"placeholder disabled",class:{fill:t.textinfo,focus:t.selector.open},attrs:{type:"text",placeholder:t.placeholder,disabled:t.disabled,readonly:t.readonly},domProps:{value:t.textinfo},on:{input:function(e){e.target.composing||(t.textinfo=e.target.value)}}}),t._v(" "),t.isactive?e("i",{staticClass:"bk-icon icon-angle-down bk-selector-icon"}):e("i",{staticClass:"bk-icon icon-circle-2-1 bk-selector-icon",staticStyle:{animation:"bk-icon-button-loading 0.8s infinite linear"}})]),t._v(" "),e("div",{staticClass:"bk-search-input",class:{"bk-search-input-one":""===t.searchContent,"bk-search-input-two":""===t.searchContent&&t.options2.length,"bk-search-input-three":""===t.searchContent&&t.options3.length}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchContent,expression:"searchContent"}],ref:"searchInput",staticClass:"bk-cascade-search-input",attrs:{type:"text",placeholder:"请搜索"},domProps:{value:t.searchContent},on:{input:function(e){e.target.composing||(t.searchContent=e.target.value)}}})]),t._v(" "),""===t.searchContent?e("div",{staticClass:"bk-cascader bk-cascader-select",style:t.styleObject},[e("ul",{staticClass:"bk-select bk-select-one",on:{scroll:t.scrollEvent}},[t._l(t.options1,(function(i,a){return e("li",{key:a,on:{scroll:t.scrollEvent}},[e("span",{staticClass:"bk-info-left",class:{signcolor:i.isselect,bkCollect:0===a&&t.iscollectTwo&&t.isshowNumber},on:{click:function(e){return t.selectLevel(1,a,i)}}},[e("span",[t._v(t._s(i.name))]),t._v(" "),0===a&&t.iscollectTwo&&t.isshowNumber?e("span",{staticStyle:{"margin-left":"-8px"}},[t._v("\n            "+t._s("（"+(i.children&&i.children.length?i.children.length:0)+"）")+"\n          ")]):t._e()]),t._v(" "),i.children&&i.children.length?e("span",{staticClass:"bk-info-right iconinfo",on:{click:function(e){return t.selectLevel(1,a,i)}}},[e("i",{staticClass:"bk-icon icon-angle-right"})]):t.iscollectTwo&&"favorites"!==i.key?e("span",{staticClass:"bk-text-danger bk-info-right collect",class:{signcolor:-1!==t.options_favorites_sign.indexOf(i.key)}},[-1===t.options_favorites_sign.indexOf(i.key)?e("i",{staticClass:"bk-icon icon-star",attrs:{title:t.$t("m.common['添加收藏']")},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.collect_s(i)}}}):e("img",{attrs:{src:n("gXL2"),alt:"starblank",title:t.$t("m.common['取消收藏']")},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.collect_s(i)}}})]):e("span",{staticClass:"bk-text-danger bk-info-right collect"},[e("span",{staticClass:"bk-tip-info bk-change",style:t.styletranslateY})])])})),t._v(" "),t.options1&&t.options1.length?t._e():e("div",{staticStyle:{height:"100%","text-align":"center","padding-top":"20px"}},[t._v("\n        "+t._s(t.$t('m.common["无数据"]'))+"\n      ")])],2),t._v(" "),t.options2&&t.options2.length?e("ul",{staticClass:"bk-select bk-select-two"},t._l(t.options2,(function(i,a){return e("li",{key:a},[e("span",{staticClass:"bk-info-left",class:{signcolor:i.isselect},on:{click:function(e){return t.selectLevel(2,a,i)}}},[t._v(t._s(i.name))]),t._v(" "),i.children&&i.children.length?e("span",{staticClass:"bk-info-right iconinfo",on:{click:function(e){return t.selectLevel(2,a,i)}}},[e("i",{staticClass:"bk-icon icon-angle-right"})]):t.iscollectTwo&&!i.favorites?e("span",{staticClass:"bk-text-danger bk-info-right collect",class:{signcolor:-1!==t.options_favorites_sign.indexOf(i.key)}},[-1===t.options_favorites_sign.indexOf(i.key)?e("i",{staticClass:"bk-icon icon-star",attrs:{title:t.$t("m.common['添加收藏']")},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.collect_s(i)}}}):e("img",{attrs:{src:n("gXL2"),alt:"starblank",title:t.$t("m.common['取消收藏']")},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.cancelcollect_s(i)}}})]):i.favorites?e("span",{staticClass:"bk-text-danger bk-info-right collect",on:{click:function(e){return t.cancelcollect_s(i,a)}}},[e("i",{staticClass:"bk-icon icon-close",staticStyle:{"font-size":"14px"}}),t._v(" "),e("span",{staticClass:"bk-tip-info bk-change",style:t.styletranslateY},[e("span",{staticClass:"bk-tooltips-arrows"}),t._v(" "),e("span",[t._v(t._s(t.$t('m.common["取消收藏"]')))])])]):e("span",{staticClass:"bk-text-danger bk-info-right collect"},[e("span",{staticClass:"bk-tip-info bk-change",style:t.styletranslateY})])])})),0):t._e(),t._v(" "),t.options3&&t.options3.length?e("ul",{staticClass:"bk-select bk-select-three"},t._l(t.options3,(function(i,a){return e("li",{key:a},[e("span",{staticClass:"bk-info-left",class:{signcolor:i.isselect},on:{click:function(e){return t.selectLevel(3,a,i)}}},[t._v(t._s(i.name))]),t._v(" "),i.children&&i.children.length?e("span",{staticClass:"bk-info-right iconinfo",on:{click:function(e){return t.selectLevel(3,a,i)}}},[e("i",{staticClass:"bk-icon icon-angle-right"})]):t.iscollectTwo?e("span",{staticClass:"bk-text-danger bk-info-right collect",class:{signcolor:-1!==t.options_favorites_sign.indexOf(i.key)}},[-1===t.options_favorites_sign.indexOf(i.key)?e("i",{staticClass:"bk-icon icon-star",attrs:{title:t.$t("m.common['添加收藏']")},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.collect_s(i)}}}):e("img",{attrs:{src:n("gXL2"),alt:"starblank",title:t.$t("m.common['取消收藏']")},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.collect_s(i)}}})]):e("span",{staticClass:"bk-text-danger bk-info-right collect"},[e("span",{staticClass:"bk-tip-info bk-change",style:t.styletranslateY})])])})),0):t._e()]):t._e(),t._v(" "),""!==t.searchContent?e("div",{staticClass:"bk-cascade-panel"},[e("ul",{staticClass:"bk-cascade-panel-ul",staticStyle:{width:"100%"}},[t._l(t.searchList,(function(n,i){return e("li",{key:i,staticClass:"bk-option",class:{"is-selected":n.isSelected,"is-disabled":n.disabled},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSelectItem(n,i)}}},[e("div",{staticClass:"bk-option-content"},[t._t("default",(function(){return[e("div",{staticClass:"bk-option-content-default",attrs:{title:n.name}},[e("span",{staticClass:"bk-option-name"},[t._v(t._s(n.name))])])]}))],2)])})),t._v(" "),t.searchList.length?t._e():e("li",{staticClass:"bk-option-none"},[e("span",[t._v("暂无数据")])])],2)]):t._e()])},a=[];i._withStripped=!0},"7LjQ":function(t,e,n){"use strict";n("UftK")},"7Uj4":function(t,e,n){"use strict";n.r(e);var i=n("r+Sh"),a=n("kWbx");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("HgU8");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"53e1cfba",null);e.default=r.exports},"7V2o":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},[e("bk-select",{class:{"bk-border-error":t.item.checkValue},attrs:{searchable:"",disabled:t.item.is_readonly&&!t.isCurrent||t.disabled,placeholder:t.item.desc,"font-size":"medium"},on:{selected:t.selected,toggle:function(e){t.item.checkValue=!1}},model:{value:t.item.val,callback:function(e){t.$set(t.item,"val",e)},expression:"item.val"}},t._l(t.options,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},"7XAC":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("2eEL"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"exportTree",components:{collapseTransition:s.default},props:{treeDataList:{type:Array,default:function(){return[]}},treeIndex:{type:Number,default:0},isKeyValue:{type:Number,default:0}},data:function(){return{pLeft:"padding-left:"+25*(this.treeIndex+1)+"px; padding-right: 10px;"}},methods:{toggleChildren:function(t){this.$emit("toggleChildren",t)},toggle:function(t){this.$emit("toggle",t,this.isKeyValue)},checkItem:function(t){this.$emit("selectItem",t)},selectItem:function(t){this.$emit("selectItem",t)}}}},"7sD+":function(t,e,n){"use strict";n("hHgK")},"7yQo":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n("QbLZ")),a=c(n("u8Ap")),s=c(n("OE89")),o=n("L2JU"),r=n("CeR/");function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"changeConductor",components:{memberSelect:a.default,exportTree:s.default},props:{itemInfo:{type:Object,default:function(){return{}}},recipientItem:{type:Object,default:function(){return{}}},recipientIndex:{type:Number,default:function(){return""}}},data:function(){return{recipientKeyList:[],roles:{viewTreeDataList:[],viewtree:{},viewTreeOpen:!1},variableList:[]}},computed:(0,i.default)({globalChoise:function(){return this.$store.state.common.configurInfo}},(0,o.mapState)("trigger",{triggerVariables:function(t){return t.triggerVariables}})),watch:{triggerVariables:function(t){this.variableList=t}},created:function(){var t=["OPEN","STARTER","BY_ASSIGNOR","EMPTY"];this.recipientKeyList=this.globalChoise.processor_type.filter((function(e){return!t.some((function(t){return t===e.typeName}))})),this.recipientItem.key&&(this.recipientItem.secondLevelList=[],"ORGANIZATION"===this.recipientItem.key?(this.getOrganization(),this.recipientItem.value&&this.setinitValue(Number(this.recipientItem.value))):"VARIABLE"===this.recipientItem.key?this.recipientItem.value=this.recipientItem.value:"PERSON"===this.recipientItem.key?(this.recipientItem.secondLevelList=[],this.recipientItem.value=Array.isArray(this.recipientItem.value)?this.recipientItem.value:this.recipientItem.value.split(",")):(this.recipientItem.value=Array.isArray(this.recipientItem.value)?this.recipientItem.value:this.recipientItem.value.split(","),this.secondListFn(this.recipientItem)))},mounted:function(){this.variableList=this.triggerVariables},methods:{setinitValue:function(t){var e=this;this.$store.dispatch("cdeploy/getTreeInfoChildren",{id:t}).then((function(t){e.roles.viewtree=t.data,e.concatName()}))},getSecondLevelList:function(){this.recipientItem.value=[],this.recipientItem.secondLevelList=[],"ORGANIZATION"===this.recipientItem.key?(this.recipientItem.value="",this.getOrganization()):"VARIABLE"===this.recipientItem.key?this.recipientItem.value="":"PERSON"===this.recipientItem.key?this.recipientItem.secondLevelList=[]:this.secondListFn(this.recipientItem)},secondListFn:function(t){var e=this;if(t.key){t.isLoading=!0;var n={role_type:t.key};"IAM"!==t.key&&(n.project_key=this.$store.state.project.id),this.$store.dispatch("deployCommon/getSecondUser",n).then((function(e){var n=e.data,i=[];"GENERAL"===t.key?n.forEach((function(t){i.push({id:String(t.id),name:t.name+"("+t.count+")",disabled:0===t.count})})):n.forEach((function(t){i.push({id:String(t.id),name:t.name})})),t.secondLevelList=i})).catch((function(t){(0,r.errorHandler)(t,e)})).finally((function(){t.isLoading=!1}))}},getOrganization:function(){var t=this;this.$store.dispatch("cdeploy/getTreeInfo").then((function(e){t.roles.viewTreeDataList=e.data,t.roles.viewTreeDataList.forEach((function(e){t.setCheckedValue(e,"view")}))})).catch((function(){}))},recordCheckFn:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.roles.viewTreeDataList;e.forEach((function(e){t.$set(e,"checkInfo",!1),e.children&&e.children.length&&t.recordCheckFn(e.children)}))},toggleInfo:function(t){this.recordCheckFn(),t.checkInfo=!0,this.roles.viewtree=t,this.concatName(),this.recipientItem.value=t.id,this.closeTree()},toggleChildren:function(t,e){var n=this;"view"===e&&(this.$set(t,"showChildren",!t.showChildren),this.$store.dispatch("cdeploy/getTreeInfoChildren",{id:t.id}).then((function(e){e.data.children.forEach((function(t){n.setCheckedValue(t,"view")})),n.$set(t,"children",e.data.children||[])})))},openChildren:function(t,e){var n=this;t.showChildren=!1,"view"===e&&(t.showChildren=this.roles.viewtree.route.some((function(e){return String(e.id)===String(t.id)}))),t.children&&t.children.length&&t.children.forEach((function(t){n.openChildren(t,e)}))},setCheckedValue:function(t,e){if(this.$set(t,"checkInfo",!1),this.$set(t,"has_children",t.has_children),String(this.recipientItem.value)===String(t.id)&&"view"===e)return t.checkInfo=!0,this.checked=t,void this.concatName();t.has_children&&(this.$set(t,"showChildren",!1),this.$set(t,"children",[]))},showTree:function(t){"view"===t&&(this.roles.viewTreeOpen=!this.roles.viewTreeOpen,this.roles.otherTreeOpen=!1)},closeTree:function(){this.roles.viewTreeOpen=!1},concatName:function(){this.$set(this.roles.viewtree,"showName",this.roles.viewtree.full_name)},addRecipient:function(){this.itemInfo.value.splice(this.recipientIndex+1,0,{type:"",value:"",secondLevelList:[],isLoading:!1})},deleteRecipient:function(){1!==this.itemInfo.value.length&&this.itemInfo.value.splice(this.recipientIndex,1)}}}},"8/xK":function(t,e,n){},"884s":function(t,e,n){"use strict";n("hJCJ")},"8LFY":function(t,e,n){},"8MAP":function(t,e,n){},"8YqZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-page bk-auto-node-basic"},[e("p",{staticClass:"bk-header-bold"},[t._v(t._s(t.$t('m.newCommon["任务参数"]')))]),t._v(" "),e("div",[e("div",{staticClass:"bk-param"},[e("bk-table",{attrs:{data:t.nodeInfo,"ext-cls":"bk-editor-table"}},[e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['字段名']"),prop:"name"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['参数值']"),width:"400"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(n.row.value||"--"))])]}}])})],1)],1)])])},a=[];i._withStripped=!0},"8aPs":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},[e("bk-input",{class:{"bk-border-error":t.item.checkValue},attrs:{maxlength:t.maxLength,disabled:t.item.is_readonly&&!t.isCurrent||t.disabled,placeholder:t.item.desc},on:{focus:function(e){t.item.checkValue=!1}},model:{value:t.item.val,callback:function(e){t.$set(t.item,"val",e)},expression:"item.val"}}),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},"8b3x":function(t,e,n){},"8b61":function(t,e,n){},"8fDA":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-flow-location",attrs:{"data-test-id":"node_template_view"},on:{mousedown:t.movdeDoneFn,mousemove:t.moveFn,mouseup:function(e){return t.onNodeClick(t.node,e)}}},["START"===t.node.type?e("div",{staticClass:"startpoint"},[t._v("\n    "+t._s(t.$t('m.treeinfo["开始"]'))+"\n  ")]):t._e(),t._v(" "),"END"===t.node.type?e("div",{staticClass:"endpoint"},[t._v("\n    "+t._s(t.$t('m.treeinfo["结束"]'))+"\n  ")]):t._e(),t._v(" "),t._l(t.typeList,(function(i,a){return t.node.type===i.type?[e("div",{key:a,staticClass:"common-node",class:{"common-auto":"TASK"===i.type}},["WAIT"===t.node.nodeInfo.statusInfo?e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:t.$t("m.treeinfo['任务未执行，无法查看']"),expression:"$t(`m.treeinfo['任务未执行，无法查看']`)",modifiers:{top:!0}}],staticClass:"bk-tool-span"}):t._e(),t._v(" "),e("span",{staticClass:"common-auto-icon",class:{"bk-is-draft":t.node.nodeInfo.is_draft,"bk-is-success":"FINISHED"===t.node.nodeInfo.statusInfo,"bk-is-error":"TERMINATED"===t.node.nodeInfo.statusInfo||"FAILED"===t.node.nodeInfo.statusInfo,"bk-is-preview":"WAIT"===t.node.nodeInfo.statusInfo}},["TASK"!==i.type?e("i",{staticClass:"bk-itsm-icon",class:i.iconStyle}):e("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v("API")])]),t._v(" "),e("span",{staticClass:"bk-more-word",class:{"bk-more-padding":t.previewInfo.canClick&&"WAIT"!==t.node.nodeInfo.statusInfo,"bk-word-success":"FINISHED"===t.node.nodeInfo.statusInfo,"bk-word-error":"TERMINATED"===t.node.nodeInfo.statusInfo||"FAILED"===t.node.nodeInfo.statusInfo,"bk-word-preview":"WAIT"===t.node.nodeInfo.statusInfo,"bk-word-normal":t.normalColor}},[t._v("\n        "+t._s(t.node.name||t.$t('m.treeinfo["新增节点"]')))]),t._v(" "),t.previewInfo.canClick&&"WAIT"!==t.node.nodeInfo.statusInfo?[e("div",{staticClass:"bk-icon-status",class:{"bk-icon-success":"FINISHED"===t.node.nodeInfo.statusInfo,"bk-icon-error":"TERMINATED"===t.node.nodeInfo.statusInfo||"FAILED"===t.node.nodeInfo.statusInfo}},["FINISHED"===t.node.nodeInfo.statusInfo?e("i",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:t.$t("m.treeinfo['已通过']"),expression:"$t(`m.treeinfo['已通过']`)",modifiers:{top:!0}}],staticClass:"bk-icon icon-check-1"}):t._e(),t._v(" "),"TERMINATED"===t.node.nodeInfo.statusInfo||"FAILED"===t.node.nodeInfo.statusInfo?e("i",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:"TERMINATED"===t.node.nodeInfo.statusInfo?t.$t("m.treeinfo['被终止']"):t.$t("m.treeinfo['失败']"),expression:"\n              node.nodeInfo.statusInfo === 'TERMINATED' ? $t(`m.treeinfo['被终止']`) : $t(`m.treeinfo['失败']`)\n            ",modifiers:{top:!0}}],staticClass:"bk-icon icon-close"}):t._e(),t._v(" "),"RUNNING"===t.node.nodeInfo.statusInfo||"SUSPEND"===t.node.nodeInfo.statusInfo?e("img",{staticClass:"bk-rotation",attrs:{src:n("9qga")}}):t._e()])]:t._e()],2)]:t._e()})),t._v(" "),"ROUTER-P"===t.node.type?e("div",{staticClass:"common-branch"},[e("i",{staticClass:"bk-itsm-icon icon-flow-convergence"})]):t._e(),t._v(" "),"COVERAGE"===t.node.type?e("div",{staticClass:"common-branch"},[e("i",{staticClass:"bk-itsm-icon icon-flow-branch"})]):t._e()],2)},a=[];i._withStripped=!0},"8fx1":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(n("z/5e")),a=s(n("efIh"));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"INT",mixins:[a.default],props:{item:{type:Object,required:!0,default:function(){}},fields:{type:Array,default:function(){return[]}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{max:i.default,isErrMessage:!1}},watch:{"item.val":function(t){this.isErrMessage=t>this.max||!1,this.conditionField(this.item,this.fields)}},mounted:function(){this.item.value&&!this.item.val&&(this.item.val=this.item.value)},methods:{}}},"8gVO":function(t,e,n){var i={"./1c":"9xzc","./1c.js":"9xzc","./abnf":"tSgA","./abnf.js":"tSgA","./accesslog":"mY11","./accesslog.js":"mY11","./actionscript":"+fC4","./actionscript.js":"+fC4","./ada":"Aayt","./ada.js":"Aayt","./angelscript":"28xz","./angelscript.js":"28xz","./apache":"8Kqh","./apache.js":"8Kqh","./applescript":"e8E9","./applescript.js":"e8E9","./arcade":"MF4s","./arcade.js":"MF4s","./arduino":"lE5/","./arduino.js":"lE5/","./armasm":"ozyK","./armasm.js":"ozyK","./asciidoc":"ApBa","./asciidoc.js":"ApBa","./aspectj":"mBTZ","./aspectj.js":"mBTZ","./autohotkey":"BIHe","./autohotkey.js":"BIHe","./autoit":"75kF","./autoit.js":"75kF","./avrasm":"pvv5","./avrasm.js":"pvv5","./awk":"EGmf","./awk.js":"EGmf","./axapta":"qIW7","./axapta.js":"qIW7","./bash":"8Pgg","./bash.js":"8Pgg","./basic":"oVqn","./basic.js":"oVqn","./bnf":"ddo8","./bnf.js":"ddo8","./brainfuck":"WSH0","./brainfuck.js":"WSH0","./c":"H+UY","./c-like":"r5rv","./c-like.js":"r5rv","./c.js":"H+UY","./cal":"d4EH","./cal.js":"d4EH","./capnproto":"Sl5E","./capnproto.js":"Sl5E","./ceylon":"unZW","./ceylon.js":"unZW","./clean":"Uasv","./clean.js":"Uasv","./clojure":"uIR8","./clojure-repl":"FJ32","./clojure-repl.js":"FJ32","./clojure.js":"uIR8","./cmake":"6quq","./cmake.js":"6quq","./coffeescript":"qZUF","./coffeescript.js":"qZUF","./coq":"gLO8","./coq.js":"gLO8","./cos":"gmEm","./cos.js":"gmEm","./cpp":"Agkw","./cpp.js":"Agkw","./crmsh":"yOV0","./crmsh.js":"yOV0","./crystal":"KUpP","./crystal.js":"KUpP","./csharp":"mK8d","./csharp.js":"mK8d","./csp":"QnJG","./csp.js":"QnJG","./css":"7oys","./css.js":"7oys","./d":"jW1C","./d.js":"jW1C","./dart":"fEaW","./dart.js":"fEaW","./delphi":"H4p3","./delphi.js":"H4p3","./diff":"SLii","./diff.js":"SLii","./django":"0kiY","./django.js":"0kiY","./dns":"iobV","./dns.js":"iobV","./dockerfile":"RLXu","./dockerfile.js":"RLXu","./dos":"fP8y","./dos.js":"fP8y","./dsconfig":"uR4j","./dsconfig.js":"uR4j","./dts":"sM9k","./dts.js":"sM9k","./dust":"9Nr/","./dust.js":"9Nr/","./ebnf":"G01c","./ebnf.js":"G01c","./elixir":"dycj","./elixir.js":"dycj","./elm":"UFGb","./elm.js":"UFGb","./erb":"E2cJ","./erb.js":"E2cJ","./erlang":"s8Vx","./erlang-repl":"9JLW","./erlang-repl.js":"9JLW","./erlang.js":"s8Vx","./excel":"9c9R","./excel.js":"9c9R","./fix":"KyKy","./fix.js":"KyKy","./flix":"oU5B","./flix.js":"oU5B","./fortran":"SF9x","./fortran.js":"SF9x","./fsharp":"AhXs","./fsharp.js":"AhXs","./gams":"fZ2E","./gams.js":"fZ2E","./gauss":"rnof","./gauss.js":"rnof","./gcode":"lKKg","./gcode.js":"lKKg","./gherkin":"NRrW","./gherkin.js":"NRrW","./glsl":"3wag","./glsl.js":"3wag","./gml":"5upZ","./gml.js":"5upZ","./go":"CyL5","./go.js":"CyL5","./golo":"kZ3Q","./golo.js":"kZ3Q","./gradle":"lURu","./gradle.js":"lURu","./groovy":"H2RM","./groovy.js":"H2RM","./haml":"T0rU","./haml.js":"T0rU","./handlebars":"5VxD","./handlebars.js":"5VxD","./haskell":"PziN","./haskell.js":"PziN","./haxe":"fHEK","./haxe.js":"fHEK","./hsp":"wi1Z","./hsp.js":"wi1Z","./htmlbars":"ebWy","./htmlbars.js":"ebWy","./http":"wB1n","./http.js":"wB1n","./hy":"hmeD","./hy.js":"hmeD","./inform7":"Ll1m","./inform7.js":"Ll1m","./ini":"KpOm","./ini.js":"KpOm","./irpf90":"B05S","./irpf90.js":"B05S","./isbl":"u0OR","./isbl.js":"u0OR","./java":"My+Z","./java.js":"My+Z","./javascript":"TdF3","./javascript.js":"TdF3","./jboss-cli":"BKhn","./jboss-cli.js":"BKhn","./json":"WtIr","./json.js":"WtIr","./julia":"ImXp","./julia-repl":"t6qC","./julia-repl.js":"t6qC","./julia.js":"ImXp","./kotlin":"qUGr","./kotlin.js":"qUGr","./lasso":"Jb18","./lasso.js":"Jb18","./latex":"FVXi","./latex.js":"FVXi","./ldif":"GgYO","./ldif.js":"GgYO","./leaf":"LptB","./leaf.js":"LptB","./less":"GEZ5","./less.js":"GEZ5","./lisp":"mzJY","./lisp.js":"mzJY","./livecodeserver":"G+vv","./livecodeserver.js":"G+vv","./livescript":"LhHj","./livescript.js":"LhHj","./llvm":"fDA8","./llvm.js":"fDA8","./lsl":"KK3C","./lsl.js":"KK3C","./lua":"7P7d","./lua.js":"7P7d","./makefile":"el66","./makefile.js":"el66","./markdown":"BLBw","./markdown.js":"BLBw","./mathematica":"73oX","./mathematica.js":"73oX","./matlab":"jKVu","./matlab.js":"jKVu","./maxima":"OZ3z","./maxima.js":"OZ3z","./mel":"u34i","./mel.js":"u34i","./mercury":"JCUK","./mercury.js":"JCUK","./mipsasm":"o0In","./mipsasm.js":"o0In","./mizar":"DxbC","./mizar.js":"DxbC","./mojolicious":"ZrqW","./mojolicious.js":"ZrqW","./monkey":"pxCe","./monkey.js":"pxCe","./moonscript":"sbla","./moonscript.js":"sbla","./n1ql":"9Mhc","./n1ql.js":"9Mhc","./nginx":"9U8A","./nginx.js":"9U8A","./nim":"hh0f","./nim.js":"hh0f","./nix":"Rq6a","./nix.js":"Rq6a","./node-repl":"ARiT","./node-repl.js":"ARiT","./nsis":"syIQ","./nsis.js":"syIQ","./objectivec":"m/If","./objectivec.js":"m/If","./ocaml":"7mzT","./ocaml.js":"7mzT","./openscad":"AsRY","./openscad.js":"AsRY","./oxygene":"beiO","./oxygene.js":"beiO","./parser3":"NyhX","./parser3.js":"NyhX","./perl":"alHH","./perl.js":"alHH","./pf":"dnrZ","./pf.js":"dnrZ","./pgsql":"+FGM","./pgsql.js":"+FGM","./php":"KQfT","./php-template":"4Fr3","./php-template.js":"4Fr3","./php.js":"KQfT","./plaintext":"ROUN","./plaintext.js":"ROUN","./pony":"ldBm","./pony.js":"ldBm","./powershell":"UI5O","./powershell.js":"UI5O","./processing":"r7oX","./processing.js":"r7oX","./profile":"uQpx","./profile.js":"uQpx","./prolog":"Q5ZB","./prolog.js":"Q5ZB","./properties":"VrLj","./properties.js":"VrLj","./protobuf":"Lo5G","./protobuf.js":"Lo5G","./puppet":"UCcd","./puppet.js":"UCcd","./purebasic":"GwJY","./purebasic.js":"GwJY","./python":"lRCX","./python-repl":"QWjE","./python-repl.js":"QWjE","./python.js":"lRCX","./q":"Xfvt","./q.js":"Xfvt","./qml":"YSo5","./qml.js":"YSo5","./r":"Jrxr","./r.js":"Jrxr","./reasonml":"6ZBy","./reasonml.js":"6ZBy","./rib":"D68y","./rib.js":"D68y","./roboconf":"9Q8I","./roboconf.js":"9Q8I","./routeros":"2Vkh","./routeros.js":"2Vkh","./rsl":"oKc0","./rsl.js":"oKc0","./ruby":"gst6","./ruby.js":"gst6","./ruleslanguage":"irpp","./ruleslanguage.js":"irpp","./rust":"LOdI","./rust.js":"LOdI","./sas":"QPTg","./sas.js":"QPTg","./scala":"n3/M","./scala.js":"n3/M","./scheme":"QQjU","./scheme.js":"QQjU","./scilab":"6k3J","./scilab.js":"6k3J","./scss":"YROV","./scss.js":"YROV","./shell":"tluB","./shell.js":"tluB","./smali":"Gxxu","./smali.js":"Gxxu","./smalltalk":"jU8F","./smalltalk.js":"jU8F","./sml":"3EHr","./sml.js":"3EHr","./sqf":"4qfg","./sqf.js":"4qfg","./sql":"3gkP","./sql.js":"3gkP","./sql_more":"92Fc","./sql_more.js":"92Fc","./stan":"iTGd","./stan.js":"iTGd","./stata":"1LUk","./stata.js":"1LUk","./step21":"AIHI","./step21.js":"AIHI","./stylus":"vYiF","./stylus.js":"vYiF","./subunit":"Aqyh","./subunit.js":"Aqyh","./swift":"Kjk6","./swift.js":"Kjk6","./taggerscript":"JGhL","./taggerscript.js":"JGhL","./tap":"BrQc","./tap.js":"BrQc","./tcl":"on2m","./tcl.js":"on2m","./thrift":"rfnV","./thrift.js":"rfnV","./tp":"phP4","./tp.js":"phP4","./twig":"9G73","./twig.js":"9G73","./typescript":"r0Rl","./typescript.js":"r0Rl","./vala":"8SK+","./vala.js":"8SK+","./vbnet":"ieeH","./vbnet.js":"ieeH","./vbscript":"Wj43","./vbscript-html":"9Fqr","./vbscript-html.js":"9Fqr","./vbscript.js":"Wj43","./verilog":"4Q+X","./verilog.js":"4Q+X","./vhdl":"MQ8/","./vhdl.js":"MQ8/","./vim":"PGlF","./vim.js":"PGlF","./x86asm":"oVRe","./x86asm.js":"oVRe","./xl":"Jjkb","./xl.js":"Jjkb","./xml":"jctj","./xml.js":"jctj","./xquery":"JopO","./xquery.js":"JopO","./yaml":"Lns6","./yaml.js":"Lns6","./zephir":"nwyE","./zephir.js":"nwyE"};function a(t){var e=s(t);return n(e)}function s(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=s,t.exports=a,a.id="8gVO"},"8ksY":function(t,e,n){"use strict";n("JdJU")},"8nzZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-fields-running"},[e("div",{key:t.routerKey,staticClass:"bk-field-contain"},[e("CW-"+t.item.type,{ref:"temp",tag:"component",attrs:{item:t.item,fields:t.fields,"is-current":!0}})],1),t._v(" "),e("div",{staticClass:"bk-save-cancel",class:{"bk-save-margin":t.marginTypeList.some(e=>e===t.item.type)}},[e("span",{staticClass:"bk-save-cancel-item",on:{click:function(e){return t.save(t.item)}}},[t._v(t._s(t.$t('m.systemConfig["保存"]')))]),t._v(" "),e("span",{staticClass:"bk-save-cancel-split"},[t._v("|")]),t._v(" "),e("span",{staticClass:"bk-save-cancel-item",on:{click:function(e){return t.cancel(t.item)}}},[t._v(t._s(t.$t("m.wiki['取消']")))])])])},a=[];i._withStripped=!0},"8xxm":function(t,e,n){"use strict";n("Ixqo")},"8zq1":function(t,e,n){"use strict";n.r(e);var i=n("eYYl"),a=n("0uNP");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("3nH4");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"5426a860",null);e.default=r.exports},"9BD6":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",[e("bk-sideslider",{attrs:{width:600,"is-show":t.show,"quick-close":!0,"before-close":()=>{t.$emit("close")}}},[t.logInfo?[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n        "+t._s(t.logInfo.from_state_name||t.logInfo.message)+"\n      ")]),t._v(" "),e("div",{staticClass:"p20",attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"bk-timeline-user-content"},[e("div",{staticClass:"bk-area-show-back"},[e("div",{staticClass:"bk-logs-basic"},[e("h3",{staticClass:"bk-basic-h3"},[t._v("\n                "+t._s(t.$t('m.newCommon["基本信息"]'))+"\n              ")]),t._v(" "),e("ul",t._l(t.basicList,(function(n,i){return e("li",{key:i},[e("span",{staticClass:"bk-basic-title"},[t._v(t._s(n.name)+"：")]),t._v(" "),e("span",{staticClass:"bk-basic-value",attrs:{title:t.logInfo[n.key]}},[t._v(t._s(t.logInfo[n.key]||"--"))])])})),0)]),t._v(" "),t.logInfo.form_data.length?["NORMAL"===t.logInfo.from_state_type?[e("h3",{staticClass:"bk-basic-h3"},[t._v("\n                  "+t._s(t.$t('m.newCommon["节点信息"]'))+"\n                ")]),t._v(" "),e("field-preview",{attrs:{"comment-id":"fields-view",fields:t.logInfo.form_data,"ticket-id":t.logInfo.ticket_id,"stated-id":t.logInfo.id}})]:"TASK-SOPS"===t.logInfo.from_state_type?e("sops-node-log",{attrs:{"sops-info":t.logInfo.form_data[0].value}}):"TASK-DEVOPS"===t.logInfo.from_state_type?e("devops-node-log",{attrs:{"node-info":t.logInfo.form_data[0].value}}):"TASK"===t.logInfo.from_state_type?e("auto-node-info",{attrs:{"node-info":{api_info:t.logInfo.form_data[0].value,name:t.logInfo.from_state_name,update_at:t.logInfo.operate_at}}}):[e("h3",{staticClass:"bk-basic-h3"},[t._v("\n                  "+t._s(t.$t('m.newCommon["节点信息"]'))+"\n                ")]),t._v(" "),t._l(t.logInfo.form_data,(function(t,n){return[e("fields-done",{key:n,attrs:{item:t,origin:"log"}})]}))]]:t._e(),t._v(" "),e("h3",{staticClass:"bk-basic-h3 mt25 mb20"},[t._v("\n              "+t._s(t.$t('m.systemConfig["日志详情"]'))+"\n            ")]),t._v(" "),e("p",{staticClass:"opt-info"},[t._v(t._s(t.logInfo.message))])],2)])])]:t._e()],2)],1)},a=[];i._withStripped=!0},"9MBU":function(t,e,n){"use strict";n.r(e);var i=n("k85c"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"9ZYk":function(t,e,n){"use strict";n.r(e);var i=n("e+8O"),a=n("EQfD");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("jeD0");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"06fcffc1",null);e.default=r.exports},"9buo":function(t,e,n){},"9eKm":function(t,e,n){"use strict";n.r(e);var i=n("0UPU"),a=n("lK1Q");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("msTu");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"63e2f73e",null);e.default=r.exports},"9g4e":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("bk-sideslider",{attrs:{"is-show":t.isShow,"quick-close":!0,title:t.title,width:t.width,"ext-cls":"ui-sideslider"},on:{"update:isShow":function(e){t.isShow=e},"update:is-show":function(e){t.isShow=e}}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("render-view",{attrs:{"form-data":t.formData,context:t.context}})],1)])},a=[];i._withStripped=!0},"9gVk":function(t,e,n){"use strict";n.r(e);var i=n("OTrV"),a=n("fDgU");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("/pAP");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"6dd39624",null);e.default=r.exports},"9iPB":function(t,e,n){},"9mEj":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("b60y"),s=(i=a)&&i.__esModule?i:{default:i},o=n("1R/T");e.default={name:"commentEditor",props:{editorId:String,commentType:String,commentTypeReply:String},data:function(){return{editor:null,editorData:"",left:"0px",top:"0px",showFlag:"none",list:[{key:1,name:"1"},{key:5,name:"2"},{key:2,name:"3"}],isInsideComment:!1}},watch:{editorData:function(){var t=this.editor.txt.html();if(this.$emit("changebuttonStatus",!!t),"@"===t.charAt(t.length-1)){this.showFlag="block";var e=this.editor.$textElem.elems[0],n=(0,o.position)(e),i=(0,o.offset)(e);console.log(n,i);var a=document.querySelector("#"+this.editorId).offsetHeight-e.offsetHeight;this.left=n.left,this.top=a+n.height+n.top;var s=document.getElementsByClassName("bullet-box")[0];console.log(s)}else this.showFlag="none"},commentType:function(t){this.isInsideComment="INSIDE"===t||!1},commentTypeReply:function(t){t&&(this.isInsideComment="INSIDE"===t||!1)}},mounted:function(){var t=this,e=new s.default("#"+this.editorId);e.config.onchange=function(e){t.editorData=e,t.$emit("editorContent",e)},e.config.placeholder=this.$t("m['请输入内容...']"),e.config.height=150,e.config.zIndex=400,e.config.excludeMenus=["emoticon","video","table","strikeThrough","indent","image","lineHeight","foreColor","backColor","link","list","quote"],e.create(),this.editor=e,("INSIDE"===this.commentType||this.commentTypeReply)&&(this.isInsideComment=!0)},methods:{selectLine:function(t){var e=this.editor.txt.html();this.editor.txt.html(e+'<span class="at-person">'+t.name+"<span>  ")},handleChangeType:function(){if(!(this.commentTypeReply||this.ticketInfo&&this.ticketInfo.is_over))if(this.$store.state.ticket.hasTicketNodeOptAuth){this.isInsideComment=!this.isInsideComment;var t=this.isInsideComment?"INSIDE":"PUBLIC";this.$emit("postComment",t)}else this.$bkMessage({message:this.$t("m['你当前无法发表内部评论']"),theme:"warning "})}}}},"9psX":function(t,e,n){"use strict";n.r(e);var i=n("ptjD"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"9qga":function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMTYgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT7lvaLnirY8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IuaVsOaNrui+g+WwkeeahOeKtuaAgSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTUyNS4wMDAwMDAsIC0xMzUuMDAwMDAwKSIgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPGcgaWQ9IuWKoOi9vSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTI1LjAwMDAwMCwgMTM1LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTEyLjA3NTkzNjMsMy40NjM2OTU4NyBDMTIuMDc1OTM2MywzLjkzMjcxNjM3IDEyLjQ1NjE1MjUsNC4zMTI5MzI2MSAxMi45MjUxNzMsNC4zMTI5MzI2MSBDMTMuMzk0MTkzNSw0LjMxMjkzMjYxIDEzLjc3NDQwOTgsMy45MzI3MTYzNyAxMy43NzQ0MDk4LDMuNDYzNjk1ODcgQzEzLjc3NDQwOTgsMi45OTQ2NzUzOCAxMy4zOTQxOTM1LDIuNjE0NDU5MTQgMTIuOTI1MTczLDIuNjE0NDU5MTQgQzEyLjQ1NjE1MjUsMi42MTQ0NTkxNCAxMi4wNzU5MzYzLDIuOTk0Njc1MzggMTIuMDc1OTM2MywzLjQ2MzY5NTg3IEwxMi4wNzU5MzYzLDMuNDYzNjk1ODcgWiBNMTMuNjUzNDExNyw4LjA1MzEyNDE3IEMxMy42NTMzNjU5LDguNDI3NjUyNDYgMTMuODUzMTQ4MSw4Ljc3Mzc1MDQzIDE0LjE3NzQ5MTUsOC45NjEwMjc3NyBDMTQuNTAxODM0OSw5LjE0ODMwNTExIDE0LjkwMTQ1NTcsOS4xNDgzMDUxMSAxNS4yMjU3OTksOC45NjEwMjc3NyBDMTUuNTUwMTQyNCw4Ljc3Mzc1MDQzIDE1Ljc0OTkyNDYsOC40Mjc2NTI0NiAxNS43NDk4Nzg5LDguMDUzMTI0MTcgQzE1Ljc0OTkyNDYsNy42Nzg1OTU4OSAxNS41NTAxNDI0LDcuMzMyNDk3OTIgMTUuMjI1Nzk5LDcuMTQ1MjIwNTggQzE0LjkwMTQ1NTcsNi45NTc5NDMyMyAxNC41MDE4MzQ5LDYuOTU3OTQzMjMgMTQuMTc3NDkxNSw3LjE0NTIyMDU4IEMxMy44NTMxNDgxLDcuMzMyNDk3OTIgMTMuNjUzMzY1OSw3LjY3ODU5NTg5IDEzLjY1MzQxMTcsOC4wNTMxMjQxNyBMMTMuNjUzNDExNyw4LjA1MzEyNDE3IFogTTExLjczMDk0MTcsMTIuNjY1NTUyMSBDMTEuNzMwOTQxNywxMy4zNDcwNjA4IDEyLjI4MzQxMzcsMTMuODk5NTMyOCAxMi45NjQ5MjI0LDEzLjg5OTUzMjggQzEzLjY0NjQzMTIsMTMuODk5NTMyOCAxNC4xOTg5MDMxLDEzLjM0NzA2MDggMTQuMTk4OTAzMSwxMi42NjU1NTIxIEMxNC4xOTg5MDMxLDEyLjIyNDY5MzIgMTMuOTYzNzA3OCwxMS44MTczMjI4IDEzLjU4MTkxMjgsMTEuNTk2ODkzNCBDMTMuMjAwMTE3OCwxMS4zNzY0NjQgMTIuNzI5NzI3LDExLjM3NjQ2NCAxMi4zNDc5MzIsMTEuNTk2ODkzNCBDMTEuOTY2MTM3MSwxMS44MTczMjI4IDExLjczMDk0MTcsMTIuMjI0NjkzMiAxMS43MzA5NDE3LDEyLjY2NTU1MjEgTDExLjczMDk0MTcsMTIuNjY1NTUyMSBaIE02LjkyNzI2Njc3LDE0LjUxMDAyMzMgQzYuOTI3MjEzMzcsMTUuMDIwNzYyMSA3LjE5OTY1ODU5LDE1LjQ5MjcyNyA3LjY0MTk2MjQ1LDE1Ljc0ODExMTggQzguMDg0MjY2MzEsMTYuMDAzNDk2NiA4LjYyOTIyMjU1LDE2LjAwMzQ5NjYgOS4wNzE1MjY0MSwxNS43NDgxMTE4IEM5LjUxMzgzMDI3LDE1LjQ5MjcyNyA5Ljc4NjI3NTQ5LDE1LjAyMDc2MjEgOS43ODYyMjIwOSwxNC41MTAwMjMzIEM5Ljc4NjI3NTQ5LDEzLjk5OTI4NDUgOS41MTM4MzAyNywxMy41MjczMTk2IDkuMDcxNTI2NDEsMTMuMjcxOTM0OCBDOC42MjkyMjI1NSwxMy4wMTY1NSA4LjA4NDI2NjMxLDEzLjAxNjU1IDcuNjQxOTYyNDUsMTMuMjcxOTM0OCBDNy4xOTk2NTg1OSwxMy41MjczMTk2IDYuOTI3MjEzMzcsMTMuOTk5Mjg0NSA2LjkyNzI2Njc3LDE0LjUxMDAyMzMgTDYuOTI3MjY2NzcsMTQuNTEwMDIzMyBaIE0yLjIxNjg0MDM2LDEyLjU5MzA1MzIgQzIuMjE2ODQwMzYsMTMuMTYxOTAwNSAyLjUyMDMxNjc0LDEzLjY4NzUzNyAzLjAxMjk1MjkyLDEzLjk3MTk2MDcgQzMuNTA1NTg5MDksMTQuMjU2Mzg0MyA0LjExMjU0MTg4LDE0LjI1NjM4NDMgNC42MDUxNzgwNSwxMy45NzE5NjA3IEM1LjA5NzgxNDIzLDEzLjY4NzUzNyA1LjQwMTI5MDYxLDEzLjE2MTkwMDUgNS40MDEyOTA2MSwxMi41OTMwNTMyIEM1LjQwMTI5MDYxLDExLjcxMzY5MTYgNC42ODg0MjcxNCwxMS4wMDA4MjgxIDMuODA5MDY1NDgsMTEuMDAwODI4MSBDMi45Mjk3MDM4MywxMS4wMDA4MjgxIDIuMjE2ODQwMzYsMTEuNzEzNjkxNiAyLjIxNjg0MDM2LDEyLjU5MzA1MzIgWiBNNi42OTk1MjAzMSwxLjY4NTQ3MzY3IEM2LjY5OTUyMDMxLDIuNjE2MTk3MDEgNy40NTQwMjA2NSwzLjM3MDY5NzM0IDguMzg0NzQzOTgsMy4zNzA2OTczNCBDOS4zMTU0NjczMiwzLjM3MDY5NzM0IDEwLjA2OTk2NzcsMi42MTYxOTcwMSAxMC4wNjk5Njc3LDEuNjg1NDczNjcgQzEwLjA2OTk2NzcsMS4wODM0MDEyMyA5Ljc0ODc2NTg1LDAuNTI3MDYzMzU0IDkuMjI3MzU1ODMsMC4yMjYwMjcxMzEgQzguNzA1OTQ1ODEsLTAuMDc1MDA5MDkxMSA4LjA2MzU0MjE2LC0wLjA3NTAwOTA5MTEgNy41NDIxMzIxNCwwLjIyNjAyNzEzMSBDNy4wMjA3MjIxMSwwLjUyNzA2MzM1NCA2LjY5OTUyMDMxLDEuMDgzNDAxMjMgNi42OTk1MjAzMSwxLjY4NTQ3MzY3IFogTTIuMTIzODQxODEsMy41MDM0NDUyNyBDMi4xMjM4NDE4MSw0LjEwNTUxNzcgMi40NDUwNDM2Miw0LjY2MTg1NTU4IDIuOTY2NDUzNjQsNC45NjI4OTE4IEMzLjQ4Nzg2MzY2LDUuMjYzOTI4MDIgNC4xMzAyNjczMSw1LjI2MzkyODAyIDQuNjUxNjc3MzMsNC45NjI4OTE4IEM1LjE3MzA4NzM1LDQuNjYxODU1NTggNS40OTQyODkxNiw0LjEwNTUxNzcgNS40OTQyODkxNiwzLjUwMzQ0NTI3IEM1LjQ5NDI4OTE2LDIuNTcyNzIxOTMgNC43Mzk3ODg4MiwxLjgxODIyMTU5IDMuODA5MDY1NDgsMS44MTgyMjE1OSBDMi44NzgzNDIxNSwxLjgxODIyMTU5IDIuMTIzODQxODEsMi41NzI3MjE5MyAyLjEyMzg0MTgxLDMuNTAzNDQ1MjcgTDIuMTIzODQxODEsMy41MDM0NDUyNyBaIE0wLjQxNjYxODQ4NCw4LjAwMDEyNSBDMC40MTY2MTg0ODQsOC41NzM3OTUyNiAwLjcyMjY2NzkxNCw5LjEwMzg4ODQ1IDEuMjE5NDgwOTMsOS4zOTA3MjM1OSBDMS43MTYyOTM5Niw5LjY3NzU1ODcyIDIuMzI4MzkyODQsOS42Nzc1NTg3MiAyLjgyNTIwNTg2LDkuMzkwNzIzNTkgQzMuMzIyMDE4ODgsOS4xMDM4ODg0NSAzLjYyODA2ODMxLDguNTczNzk1MjYgMy42MjgwNjgzMSw4LjAwMDEyNSBDMy42MjgwNjgzMSw3LjExMzMwNzYyIDIuOTA5MTYwNzgsNi4zOTQ0MDAwOSAyLjAyMjM0MzQsNi4zOTQ0MDAwOSBDMS4xMzU1MjYwMiw2LjM5NDQwMDA5IDAuNDE2NjE4NDg0LDcuMTEzMzA3NjIgMC40MTY2MTg0ODQsOC4wMDAxMjUgTDAuNDE2NjE4NDg0LDguMDAwMTI1IFoiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},"9ume":function(t,e,n){"use strict";n.r(e);var i=n("agSa"),a=n("Szq4");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("/6kH");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"a0138020",null);e.default=r.exports},A1Rv:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"all-task-list"},[e("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isListLoading},expression:"{ isLoading: isListLoading }"}],attrs:{data:t.taskList,size:"small"}},[e("bk-table-column",{attrs:{label:t.$t("m.task['顺序']"),width:60},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(n.row.order||"--"))])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['任务名称']"),"render-header":t.$renderHeader,"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:n.row.name,expression:"props.row.name",modifiers:{top:!0}}],staticClass:"task-name"},[t._v("\n          "+t._s(n.row.name||"--")+"\n        ")])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['处理人']"),"render-header":t.$renderHeader,"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:n.row.processor_users,expression:"props.row.processor_users",modifiers:{top:!0}}]},[t._v(t._s(n.row.processor_users||"--"))])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['任务类型']"),"render-header":t.$renderHeader,"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:n.row.processor_users,expression:"props.row.processor_users",modifiers:{top:!0}}]},[t._v(t._s(t.getTaskTypeName(n.row.component_type)||"--"))])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['状态']"),"render-header":t.$renderHeader,wdith:120,"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(t){return[e("task-status",{attrs:{status:t.row.status}})]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['操作']"),"min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("bk-button",{attrs:{theme:"primary",text:""},on:{click:function(e){return t.onViewTask(n.row)}}},[t._v("\n          "+t._s(t.$t("m.task['查看']"))+"\n        ")])]}}])}),t._v(" "),e("div",{staticClass:"empty",attrs:{slot:"empty"},slot:"empty"},[e("empty",{attrs:{"is-error":t.listError},on:{onRefresh:function(e){return t.getTaskList()}}})],1)],1),t._v(" "),e("bk-sideslider",{attrs:{"is-show":t.dealTaskInfo.show,"quick-close":!0,width:800},on:{"update:isShow":function(e){return t.$set(t.dealTaskInfo,"show",e)},"update:is-show":function(e){return t.$set(t.dealTaskInfo,"show",e)}}},[e("div",{attrs:{slot:"header"},slot:"header"},[t.dealTaskInfo.show?e("task-handle-trigger",{attrs:{"task-info":t.dealTaskInfo.itemContent,title:t.dealTaskInfo.title},on:{"close-slider":function(e){t.dealTaskInfo.show=!1}}}):t._e()],1),t._v(" "),e("div",{staticStyle:{"min-height":"300px"},attrs:{slot:"content"},slot:"content"},[t.dealTaskInfo.show?e("deal-task",{attrs:{"deal-type":t.dealTaskInfo.type,"task-info":t.dealTaskInfo.itemContent,"basic-infomation":t.ticketInfo},on:{close:function(e){t.dealTaskInfo.show=!1}}}):t._e()],1)])],1)},a=[];i._withStripped=!0},A4RE:function(t,e,n){"use strict";n.r(e);var i=n("mCpm"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},A7pL:function(t,e,n){"use strict";n("ZcAa")},ADLb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("Wgwc"),s=(i=a)&&i.__esModule?i:{default:i};var o=[{name:"Name",key:"name",value:""},{name:"Path",key:"path",value:""},{name:"Size",key:"size",value:""},{name:"Created",key:"createTime",value:"--"},{name:"Last Modified",key:"modifiedTime",value:""}];e.default={name:"BuildDetailInfo",props:{buildItem:{type:Object,default:function(){return{}}}},data:function(){return{infoList:[]}},mounted:function(){var t=this;this.infoList=o.map((function(e){switch(e.key){case"modifiedTime":e.value=(0,s.default)(1e3*t.buildItem.modifiedTime).format("YYYY-MM-DD hh:mm:ss");break;default:e.value=t.buildItem[e.key]||"--"}return e}))},methods:{}}},AKDS:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading},expression:"{ isLoading: loading }"}],staticClass:"bk-satisfact-info"},[t.ticketInfo.is_commented||t.ticketInfo.can_comment?[t.satisfactInfo.stars||t.satisfactInfo.has_invited||t.loading?[t.satisfactInfo.stars?[e("div",{staticClass:"bk-evaluation-cus"},[e("span",{staticClass:"bk-evaluation-label-cus"},[t._v(t._s(t.$t('m.newCommon["状态"]')))]),t._v(" "),e("span",{staticStyle:{float:"left"}},[t._v(t._s(t.$t('m.newCommon["："]')))]),t._v(" "),e("pre",{staticClass:"bk-evaluation-content"},[t._v(t._s(t.$t('m.newCommon["已评价"]')))])]),t._v(" "),e("div",{staticClass:"bk-evaluation-cus"},[e("div",{staticClass:"bk-evaluation-done"},[e("span",{staticClass:"bk-evaluation-label-cus"},[t._v(t._s(t.$t('m.newCommon["星级"]')))]),t._v(" "),e("span",{staticStyle:{float:"left"}},[t._v(t._s(t.$t('m.newCommon["："]')))]),t._v(" "),e("span",{staticClass:"label-new-content"},[t._l(t.scoreList,(function(i,a){return e("label",{key:a,staticClass:"bk-form-radio",staticStyle:{padding:"0"}},[a>=t.satisfactInfo.stars?e("img",{attrs:{src:n("Xi1y"),alt:"starfill",width:"16px"}}):e("img",{attrs:{src:n("gXL2"),alt:"starblank",width:"16px"}})])})),t._v(" "),t.satisfactInfo.stars>0?e("span",[t._v("\n                "+t._s(t.scoreList[t.satisfactInfo.stars-1].name)+"\n              ")]):t._e()],2)])]),t._v(" "),e("div",{staticClass:"bk-evaluation-cus"},[e("span",{staticClass:"bk-evaluation-label-cus"},[t._v(t._s(t.$t('m.newCommon["评论"]')))]),t._v(" "),e("span",{staticStyle:{float:"left"}},[t._v(t._s(t.$t('m.newCommon["："]')))]),t._v(" "),e("pre",{staticClass:"bk-evaluation-content"},[t._v(t._s(t.satisfactInfo.comments||t.$t('m.newCommon["这个朋友很懒，什么也没留下"]')))])]),t._v(" "),e("div",{staticClass:"bk-evaluation-cus"},[e("span",{staticClass:"bk-evaluation-label-cus"},[t._v(t._s(t.$t('m.newCommon["评价人"]')))]),t._v(" "),e("span",{staticStyle:{float:"left"}},[t._v(t._s(t.$t('m.newCommon["："]')))]),t._v(" "),e("span",{staticClass:"bk-evaluation-content"},[t._v(t._s(t.satisfactInfo.creator||"--"))])]),t._v(" "),e("div",{staticClass:"bk-evaluation-cus"},[e("span",{staticClass:"bk-evaluation-label-cus"},[t._v(t._s(t.$t('m.newCommon["评价时间"]')))]),t._v(" "),e("span",{staticStyle:{float:"left"}},[t._v(t._s(t.$t('m.newCommon["："]')))]),t._v(" "),e("span",{staticClass:"bk-evaluation-content"},[t._v(t._s(t.satisfactInfo.update_at||"--"))])])]:[e("div",{staticClass:"bk-satis-info",staticStyle:{"margin-top":"10px"}},[e("span",[t._v("\n            "+t._s(t.$t('m.newCommon["你已发送过满意度评价短信给"]'))+"\n            "),e("span",{staticStyle:{padding:"0 10px",color:"#3c96ff"}},[t._v(t._s(t.satisfactInfo.has_invited||"--"))])])])]]:e("evaluation-ticket-content",{attrs:{"satisfact-info":t.satisfactInfo,"ticket-info":t.ticketInfo},on:{submitSuccess:t.getEvaluation}})]:["REVOKED"===t.ticketInfo.current_status?e("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("\n      "+t._s(t.$t('m.tickets["单据已撤销，无需评价。"]'))+"\n    ")]):e("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("\n      "+t._s(t.$t('m.newCommon["单据处理未完成或没有评价权限，不能评价！"]'))+"\n    ")])]],2)},a=[];i._withStripped=!0},ASBv:function(t,e,n){"use strict";n("kVtS")},ATds:function(t,e,n){"use strict";n.r(e);var i=n("/VyA"),a=n("aB8q");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("ilzV");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"4f101342",null);e.default=r.exports},Abqk:function(t,e,n){"use strict";n.r(e);var i=n("25E2"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},AtYP:function(t,e,n){"use strict";n.r(e);var i=n("ghfZ"),a=n("wNCD");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("884s");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"3fda18fa",null);e.default=r.exports},Axd5:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},[e("bk-input",{class:{"bk-border-error":t.item.checkValue},attrs:{placeholder:t.item.desc,type:"textarea",rows:8,disabled:t.item.is_readonly&&!t.isCurrent||t.disabled},on:{focus:function(e){t.item.checkValue=!1}},model:{value:t.item.val,callback:function(e){t.$set(t.item,"val",e)},expression:"item.val"}}),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},B1hg:function(t,e,n){},B3GM:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-log-flow"},[e("bk-form",{attrs:{"label-width":200,"form-type":"vertical"}},[e("bk-form-item",{attrs:{label:t.$t("m.newCommon['收件人']"),required:!0}},[e("deal-person",{ref:"personSelect",staticClass:"recipient-person",attrs:{"form-type":"vertical",value:t.personSelectCheckValue,shortcut:!0,"show-role-type-list":t.includeTypes,"required-msg":t.$t("m.newCommon['请选择收件人']")}})],1),t._v(" "),e("bk-form-item",{attrs:{label:t.$t("m.newCommon['通知内容']"),required:!0}},[e("bk-input",{attrs:{placeholder:t.$t("m.newCommon['请输入通知内容，长度不能超过200']"),type:"textarea",rows:3,maxlength:200},model:{value:t.followers.comments,callback:function(e){t.$set(t.followers,"comments",e)},expression:"followers.comments"}})],1),t._v(" "),e("bk-form-item",[e("bk-button",{staticClass:"mr10 mt10",attrs:{theme:"primary",title:t.$t("m.newCommon['发送']"),disabled:t.followers.clickSecond},on:{click:t.postFollowlogs}},[t._v("\n        "+t._s(t.$t('m.newCommon["发送"]'))+"\n      ")])],1)],1),t._v(" "),t.flowList.length&&t.ticketInfo.can_invite_followers?[e("h3",{staticClass:"setion-title"},[t._v(t._s(t.$t('m.newCommon["发送历史"]')))])]:t._e(),t._v(" "),e("bk-timeline",{attrs:{"ext-cls":"log-time-line",list:t.flowList}})],2)},a=[];i._withStripped=!0},BFl6:function(t,e,n){"use strict";n.r(e);var i=n("ew6e"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},BKtx:function(t,e,n){"use strict";n.r(e);var i=n("zmPZ"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},BST3:function(t,e,n){},BWJp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=d(n("4d7F")),s=d(n("/f1G")),o=d(n("14Xm")),r=d(n("gDS+")),c=d(n("D3Ub")),l=d(n("sEfC")),u=n("CeR/");function d(t){return t&&t.__esModule?t:{default:t}}e.default={methods:{get_priority:function(t,e){var n=this;return(0,c.default)(o.default.mark((function i(){var a,s;return o.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if((a=JSON.parse((0,r.default)(t))).service_type=e.service,delete a.id,s={id:e.ticket_id},a.impact&&a.urgency){i.next=7;break}return i.next=7,n.$store.dispatch("change/getStepList",s).then((function(e){e.data.forEach((function(e){e.fields.forEach((function(e){"urgency"===e.key&&(a.urgency=t.urgency||e.value),"impact"===e.key&&(a.impact=t.impact||e.value)}))}))}),(function(t){(0,u.errorHandler)(t,n)}));case 7:n.$store.dispatch("apiRemote/get_priority",{data:a}).then((function(t){e.val=t.data})).catch((function(t){(0,u.errorHandler)(t,n)}));case 8:case"end":return i.stop()}}),i,n)})))()},get_data_by_key:function(t){var e=this;return(0,c.default)(o.default.mark((function n(){return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.$store.dispatch("datadict/get_data_by_key",{key:t.source_uri,field_key:t.key,service:t.service,current_status:t.ticket_status}).then((function(e){t.choice=e.data.map((function(t){return{key:t.key,name:t.name}}))})).catch((function(t){(0,u.errorHandler)(t,e)})));case 1:case"end":return n.stop()}}),n,e)})))()},apiRemoteGetData:function(t,e,n){var i=this,a=JSON.parse((0,r.default)(t)),s="apiRemote/get_data";return"workflow"===n&&(s="apiRemote/get_data_workflow"),"submit"===n&&(s="apiRemote/get_data_receipts",a={api_instance_id:e.api_instance_id,kv_relation:e.kv_relation,fields:a}),a.id=e.id,a.kv_relation=e.kv_relation,a.api_instance_id=e.api_instance_id,a.api_info=e.api_info,this.$store.dispatch(s,a).then((function(t){e.choice=[],t.data.map((function(t){return{key:t.key||t.id,name:t.name}})).forEach((function(t){e.choice.push(JSON.parse((0,r.default)(t)))}))})).catch((function(t){(0,u.errorHandler)(t,i)}))},debounce:(0,l.default)((i=(0,c.default)(o.default.mark((function t(e,n,i,a,s){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("priority"!==n.key){t.next=3;break}return i.get_priority(e,n,a),t.abrupt("return",!1);case 3:i.apiRemoteGetData(e,n,a,s);case 4:case"end":return t.stop()}}),t,void 0)}))),function(t,e,n,a,s){return i.apply(this,arguments)}),1e3,{leading:!0,trailing:!0,maxWait:2e3}),isNecessaryToWatch:function(t,e,n){var i=this;return(0,c.default)(o.default.mark((function r(){var l,u,d,f,m,p;return o.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l=[],t.fields.forEach((function(n){if("DATADICT"===n.type&&"TREESELECT"!==n.type&&l.push(i.get_data_by_key(n)),("API"===n.source_type||"priority"===n.key)&&!n.choice.some((function(t){return t.can_delete}))){var a={id:n.id,api_instance_id:n.api_instance_id,kv_relation:n.kv_relation};n.related_fields&&n.related_fields.rely_on&&n.related_fields.rely_on.forEach((function(e){var n=t.fields.find((function(t){return t.key===e}));n&&(a[e]=n.val||"")})),(0,s.default)(a).every((function(t){return!!t}))&&"priority"!==t.key&&l.push(i.apiRemoteGetData(a,n,e))}})),a.default.all(l).then((function(){n&&n()})),(u=t.fields.filter((function(t){return("API"===t.source_type||"priority"===t.key)&&t.related_fields&&t.related_fields.rely_on&&t.related_fields.rely_on.length}))).length){r.next=6;break}return r.abrupt("return");case 6:if(d=[],u.forEach((function(t){d=d.concat(t.related_fields.rely_on)})),(f=t.fields.filter((function(t){return t.related_fields&&t.related_fields.be_relied&&t.related_fields.be_relied.length}))).length){r.next=11;break}return r.abrupt("return");case 11:if((m=f.filter((function(t){return-1!==d.indexOf(t.key)}))).length){r.next=14;break}return r.abrupt("return");case 14:p=i,m.forEach((function(n){p.$watch((function(){return n.val}),(function(){var a;n.val&&u.filter((function(t){return-1!==t.related_fields.rely_on.indexOf(n.key)})).forEach((a=(0,c.default)(o.default.mark((function n(a){var s;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:m.filter((function(t){return-1!==a.related_fields.rely_on.indexOf(t.key)})).every((function(t){return t.val}))&&(s={id:a.id,api_instance_id:a.api_instance_id,kv_relation:a.kv_relation},a.related_fields&&a.related_fields.rely_on&&a.related_fields.rely_on.forEach((function(e){var n=m.find((function(t){return t.key===e}));t.fields.find((function(t){return t.key===e}))&&(s[e]=n.val||"")})),"priority"!==a.key&&(a.choice.splice(0,a.choice.length),a.val=""),p.debounce(s,a,p,e));case 3:case"end":return n.stop()}}),n,i)}))),function(t){return a.apply(this,arguments)}))}),{deep:!0})}));case 16:case"end":return r.stop()}}),r,i)})))()},freshApi:function(t,e,n){var i={},a=e.map((function(t){return t.key}));t.related_fields&&t.related_fields.rely_on&&t.related_fields.rely_on.forEach((function(t){var n=e.filter((function(e){return e.key===t}))[0];-1!==a.indexOf(t)&&(i[t]=n&&n.val||"")})),(0,s.default)(i).every((function(t){return!!t}))&&(t.choice.splice(0,t.choice.length),t.val="",this.debounce(i,t,this,n))}}}},Bi2R:function(t,e,n){},Br4l:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"devopsNodeLog",props:{nodeInfo:{type:Array,default:function(){return{}}}}}},Bzqh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"FullScreen",props:{isFull:{type:Boolean,default:!1},title:{type:String,default:""}},watch:{isFull:function(t){t&&(this.$bkMessage({message:this.$t('m.common["按 ESC 键退出全屏"]')}),document.addEventListener("keydown",this.handlerKeyDown))}},methods:{onClose:function(){this.$emit("onClose")},handlerKeyDown:function(t){27===t.keyCode&&(this.onClose(),document.removeEventListener("keydown",this.handlerKeyDown))}}}},"C/Jd":function(t,e,n){},C0K7:function(t,e,n){"use strict";n("8b61")},C4jB:function(t,e,n){"use strict";n("4uXh")},C65D:function(t,e,n){"use strict";n.r(e);var i=n("9g4e"),a=n("Vv2+");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("xgIe");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},C6tm:function(t,e,n){"use strict";n.r(e);var i=n("P+p4"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},CBo5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("efIh"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"TEXT",mixins:[s.default],props:{item:{type:Object,required:!0,default:function(){}},fields:{type:Array,default:function(){return[]}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{}},watch:{"item.val":function(){this.conditionField(this.item,this.fields)}},mounted:function(){this.conditionField(this.item,this.fields),this.item.value&&!this.item.val&&(this.item.val=this.item.value)},methods:{}}},CPxG:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-send-message"},[t.show?e("bk-tab",{attrs:{active:t.activeName},on:{"tab-change":t.changPanel}},t._l(t.itemInfo.sub_components,(function(n,i){return e("bk-tab-panel",t._b({key:i,attrs:{"test-posi-id":n.key}},"bk-tab-panel",n,!1),[e("template",{slot:"label"},[e("bk-checkbox",{staticStyle:{float:"left",margin:"0px 8px 0 0"},attrs:{"true-value":t.trueStatus,"false-value":t.falseStatus},model:{value:n.checked,callback:function(e){t.$set(n,"checked",e)},expression:"panel.checked"}}),t._v(" "),e("i",{staticClass:"bk-icon",class:[n.icon]}),t._v(" "),e("span",{staticClass:"panel-name"},[t._v(t._s(n.label))])],1),t._v(" "),t._l(n.field_schema,(function(a,s){return e("div",{key:a.key,staticClass:"mb20",attrs:{"test-posi-id":a.key}},[e("bk-form-item",{key:i,attrs:{label:a.name,required:a.required,desc:a.tips}},[e("change-conductor",{attrs:{index:i,"item-info":a,origin:"message","is-show-var":t.isShowVar},on:{"change-panel-status":function(e){return t.changePanelStatus(n,s)}}})],1)],1)}))],2)})),1):t._e()],1)},a=[];i._withStripped=!0},CQIX:function(t,e,n){"use strict";n("f9M4")},"CXV/":function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDI0IDEwMjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojNzM3OTg3O30KPC9zdHlsZT4KPGc+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNzA0LDY0TDcwNCw2NEgxMjh2ODk2aDc2OFYyNTZsMCwwTDcwNCw2NHogTTcwNCwxNTQuNUw4MDUuNSwyNTZINzA0VjE1NC41eiBNODMyLDg5NkgxOTJWMTI4aDQ0OHYxOTJoMTkyCgkJVjg5NnoiLz4KCTxyZWN0IHg9IjI4OCIgeT0iMzIwIiBjbGFzcz0ic3QwIiB3aWR0aD0iMjU2IiBoZWlnaHQ9IjY0Ii8+Cgk8cmVjdCB4PSIyODgiIHk9IjQ0OCIgY2xhc3M9InN0MCIgd2lkdGg9IjQ0OCIgaGVpZ2h0PSI2NCIvPgoJPHJlY3QgeD0iMjg4IiB5PSI1NzYiIGNsYXNzPSJzdDAiIHdpZHRoPSI0NDgiIGhlaWdodD0iNjQiLz4KCTxyZWN0IHg9IjI4OCIgeT0iNzA0IiBjbGFzcz0ic3QwIiB3aWR0aD0iNDQ4IiBoZWlnaHQ9IjY0Ii8+CjwvZz4KPC9zdmc+Cg=="},ChUp:function(t,e,n){"use strict";n.r(e);var i=n("mRFm"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},CjxG:function(t,e,n){"use strict";n.r(e);var i=n("mW7z"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},CtZk:function(t,e,n){"use strict";n.r(e);var i=n("XNWF"),a=n("ChUp");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("nI7W");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"3f041b38",null);e.default=r.exports},CyHO:function(t,e,n){"use strict";n.r(e);var i=n("HxM3"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},Cyyo:function(t,e,n){"use strict";n.r(e);var i=n("/BG8"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"D/nJ":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-current-node"},[e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading},expression:"{ isLoading: loading }"}],staticClass:"bk-current-info",class:{"bk-current-padding":t.openStatus}},[t.basicInfomation.is_over?[e("div",{staticClass:"bk-no-content bk-no-status"},["TERMINATED"===t.basicInfomation.current_status?[e("img",{attrs:{src:n("5AxX")}}),t._v(" "),e("p",[t._v(t._s(t.$t('m.newCommon["该单据已被终止"]')))])]:[e("img",{attrs:{src:n("iPSC")}}),t._v(" "),e("p",[t._v(t._s(t.$t('m.newCommon["该单据已结束"]')))])]],2)]:[0!==t.currentStepList.length?t._l(t.currentStepList,(function(n,i){return e("current-step-item",{key:i,attrs:{index:i,"node-info":n,"node-list":t.nodeList,"is-show-assgin":t.isShowAssgin,"ticket-info":t.basicInfomation,"all-groups":t.allGroups,"read-only":t.readOnly,"is-last-node":i===t.currentStepList.length-1,"node-trigger-list":t.nodeTriggerList,"all-field-list":t.allFieldList},on:{successFn:t.successFn}})})):[e("bk-exception",{staticClass:"ui-empty",attrs:{type:"empty",scene:"part"}},[t._v("\n          "+t._s(t.$t('m.newCommon["您暂无任务需要处理"]'))+"\n        ")])]]],2)])},a=[];i._withStripped=!0},D2Hv:function(t,e,n){"use strict";n("236k")},D6vF:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("span",{staticClass:"bk-status-color-info",class:t.extCls,attrs:{title:t.statusMap[t.status].name}},["text"===t.type?[e("span",{class:["status-text",t.statusMap[t.status].cls]},[t._v(t._s(t.statusMap[t.status].name))])]:"block"===t.type?e("span",{class:["status-block",t.statusMap[t.status].cls]},["loading"===t.statusIcon?e("i",{staticClass:"bk-itsm-icon icon-icon-loading"}):"success"===t.statusIcon?e("i",{staticClass:"bk-itsm-icon icon-icon-finish"}):"failed"===t.statusIcon?e("i",{staticClass:"bk-itsm-icon icon-itsm-icon-delete-fill"}):t._e(),t._v(" "),e("span",{class:["status-text",t.statusMap[t.status].cls]},[t._v(t._s(t.statusMap[t.status].name))])]):[["RUNNING","WAITING_FOR_BACKEND"].includes(t.status)?e("i",{staticClass:"bk-itsm-icon icon-icon-loading"}):e("span",{staticClass:"status-dot",class:t.statusMap[t.status].cls}),t._v("\n    "+t._s(t.statusMap[t.status].name)+"\n  ")]],2)},a=[];i._withStripped=!0},"Ddt+":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-data-content",on:{click:t.closeError}},["CUSTOM"===t.formInfo.source_type?t._l(t.fieldInfo.list,(function(n,i){return e("div",{key:i,staticClass:"bk-custom-line",class:{mb20:i!==t.fieldInfo.list.length-1}},[e("div",{staticClass:"bk-costom-form"},[e("bk-input",{attrs:{maxlength:120,"ext-cls":"bk-custom-input",clearable:!0,disabled:(t.changeInfo.is_builtin||"TABLE"===t.changeInfo.source)&&"bk_biz_id"!==t.formInfo.key,placeholder:t.$t("m.treeinfo['请输入选项名']")},on:{blur:function(e){return t.putChar(n,i)}},model:{value:n.name,callback:function(e){t.$set(n,"name",e)},expression:"item.name"}}),t._v(" "),"TABLE"===t.formInfo.type?[e("bk-checkbox",{staticStyle:{float:"left","margin-right":"10px","line-height":"32px"},attrs:{"true-value":t.trueStatus,"false-value":t.falseStatus},model:{value:n.required,callback:function(e){t.$set(n,"required",e)},expression:"item.required"}},[t._v("\n            "+t._s(t.$t("m.treeinfo['必填']"))+"\n          ")])]:t._e(),t._v(" "),e("bk-input",{attrs:{"ext-cls":"bk-custom-input",disabled:(t.changeInfo.is_builtin||"TABLE"===t.changeInfo.source||t.changeInfo.meta&&"APPROVE_RESULT"===t.changeInfo.meta.code)&&"bk_biz_id"!==t.formInfo.key,placeholder:t.$t("m.treeinfo['请输入选项ID']")},model:{value:n.key,callback:function(e){t.$set(n,"key",e)},expression:"item.key"}}),t._v(" "),e("div",{staticClass:"bk-custom-icon"},[e("i",{staticClass:"bk-itsm-icon icon-flow-add",class:{"bk-no-delete":t.changeInfo.meta&&"APPROVE_RESULT"===t.changeInfo.meta.code},on:{click:function(e){return t.addDataLine(n,i)}}}),t._v(" "),e("i",{staticClass:"bk-itsm-icon icon-flow-reduce",class:{"bk-no-delete":1===t.fieldInfo.list.length||t.changeInfo.meta&&"APPROVE_RESULT"===t.changeInfo.meta.code},on:{click:function(e){return t.deleteDataLine(n,i)}}})])],2),t._v(" "),e("div",{staticClass:"bk-field-error-tip"},[n.nameCheck?e("p",{staticClass:"bk-field-error"},[t._v(t._s(t.$t('m.deployPage["名称不能为空且不能重复"]')))]):[n.keyCheck?e("p",{staticClass:"bk-field-error"},[t._v(t._s(t.$t('m.deployPage["名称ID为英文数字及下划线且不能重复"]')))]):t._e()]],2)])})):t._e(),t._v(" "),"API"===t.formInfo.source_type?[t.apiInfo.remote_system_id&&t.apiInfo.remote_api_id?e("div",{staticClass:"bk-api-param"},[t.apiDetail.req_params&&t.apiDetail.req_params.length&&t.apiDetail.req_params[0].name?e("div",{staticClass:"bk-param"},[e("get-param",{ref:"getParam",attrs:{entry:"addField","form-info":t.formInfo,"change-info":t.changeInfo,"state-list":t.stateList,"api-detail":t.apiDetail}})],1):t._e(),t._v(" "),t.apiDetail.req_body&&Object.keys(t.apiDetail.req_body).length&&t.apiDetail.req_body.properties&&Object.keys(t.apiDetail.req_body.properties).length?e("div",{staticClass:"bk-param"},[e("post-param",{ref:"postParam",attrs:{entry:"addField","form-info":t.formInfo,"change-info":t.changeInfo,"state-list":t.stateList,"api-detail":t.apiDetail}})],1):t._e(),t._v(" "),t.apiDetail.rsp_data&&Object.keys(t.apiDetail.rsp_data).length&&t.apiDetail.rsp_data.properties&&Object.keys(t.apiDetail.rsp_data.properties).length?e("div",{staticClass:"bk-param"},[e("response-data",{ref:"responseData",attrs:{"remote-api-iid":t.apiInfo.remote_api_id,"change-info":t.changeInfo,"form-info":t.formInfo,"state-list":t.stateList,"api-detail":t.apiDetail}})],1):t._e()]):t._e()]:t._e(),t._v(" "),"RPC"===t.formInfo.source_type?[t.prcTable.length?e("div",{staticClass:"bk-api-param"},[e("div",{staticClass:"bk-param"},[e("get-rpc-param",{ref:"getRpcParam",attrs:{"form-info":t.formInfo,"change-info":t.changeInfo,"state-list":t.stateList,"prc-table":t.prcTable}})],1)]):t._e()]:t._e()],2)},a=[];i._withStripped=!0},DoRf:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("14Xm")),a=r(n("gDS+")),s=r(n("D3Ub")),o=r(n("TQwK"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"responseCondition",components:{responseContent:o.default},props:{responseWayList:{type:Array,default:function(){return[]}},responseList:{type:Array,default:function(){return[]}},signal:String},data:function(){return{wayList:[],apiList:[]}},created:function(){},methods:{addResponse:function(t,e){this.responseList.splice(e+1,0,{way:"",wayInfo:{},performData:{runMode:"BACKEND",displayName:"",repeat:"one"},isLoading:!1})},deleteResponse:function(t,e){1!==this.responseList.length&&this.responseList.splice(e,1)},selectedWay:function(){var t=arguments,e=this;return(0,s.default)(i.default.mark((function n(){return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t[2].wayStatus&&(t[2].wayStatus=!1),t[2].isLoading=!0,t[2].wayInfo=JSON.parse((0,a.default)(e.responseWayList.filter((function(e){return e.key===t[0]}))[0])),setTimeout((function(){t[2].isLoading=!1}),1e3);case 4:case"end":return n.stop()}}),n,e)})))()}}}},DtGf:function(t,e,n){"use strict";n("SJYp")},Du1T:function(t,e,n){"use strict";n.r(e);var i=n("429m"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},Dx75:function(t,e,n){},E84W:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this._self._c;return this.info?t("span",{staticClass:"node-status",class:this.info.cls},[t("i",{staticClass:"status-icon",class:this.info.icon}),this._v(" "),t("span",{staticClass:"node-status-text"},[this._v(this._s(this.info.text))])]):this._e()},a=[];i._withStripped=!0},EJGV:function(t,e,n){"use strict";n.r(e);var i=n("UFO8"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},EQfD:function(t,e,n){"use strict";n.r(e);var i=n("7XAC"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},EQpn:function(t,e,n){"use strict";n.r(e);var i=n("ofbo"),a=n("2Z9S");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("yeXF");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"67857da8",null);e.default=r.exports},ETop:function(t,e,n){"use strict";n.r(e);var i=n("7HxE"),a=n("+lzq");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("6txE");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"32f049c1",null);e.default=r.exports},EkYo:function(t,e,n){"use strict";n("up/p")},EqEr:function(t,e,n){},EtUq:function(t,e,n){"use strict";n.r(e);var i=n("jppy"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},FCVG:function(t,e,n){"use strict";n.r(e);var i=n("f5y/"),a=n("9MBU");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"4ffb4b8c",null);e.default=r.exports},FGMr:function(t,e,n){"use strict";n.r(e);var i=n("afA4"),a=n("Du1T");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"ec63f852",null);e.default=r.exports},FQeJ:function(t,e,n){"use strict";n.r(e);var i=n("k2IW"),a=n("/inP");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("vg5J");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"365bc3f0",null);e.default=r.exports},FXqT:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"right-content"},[e("bk-tab",{attrs:{"data-test-id":"ticket_tab_rightMenu",active:t.activeTab,type:"unborder-card","ext-cls":"right-tiket-tabs"},on:{"update:active":function(e){t.activeTab=e}}},[e("bk-tab-panel",{attrs:{name:"log",label:t.$t("m.newCommon['流水日志']")}},["log"===t.activeTab?e("log-tab",{attrs:{"ticket-info":t.ticketInfo,node:t.nodeList,"is-show-sla":t.isShowSla},on:{ticketFinishAppraise:function(e){return t.$emit("ticketFinishAppraise")},viewProcess:t.viewProcess}}):t._e()],1),t._v(" "),t.hasNodeOptAuth?[e("bk-tab-panel",{attrs:{name:"all-task",label:t.$t("m.newCommon['所有任务']")}},["all-task"===t.activeTab?e("all-task-tab",{attrs:{"ticket-info":t.ticketInfo}}):t._e()],1),t._v(" "),e("bk-tab-panel",{attrs:{name:"triggerLog",label:t.$t("m.task['触发器记录']")}},["triggerLog"===t.activeTab?e("task-history",{attrs:{"is-show-sla":t.isShowSla,"basic-infomation":t.ticketInfo,"node-list":t.nodeList}}):t._e()],1),t._v(" "),t.ticketInfo.can_invite_followers?e("bk-tab-panel",{attrs:{name:"email-notice",label:t.$t("m.newCommon['邮件通知']")}},["email-notice"===t.activeTab?e("email-notice-tab",{attrs:{"ticket-info":t.ticketInfo}}):t._e()],1):t._e(),t._v(" "),-1!==Number(t.ticketInfo.comment_id)?e("bk-tab-panel",{attrs:{name:"comment",label:t.$t("m.newCommon['评价']")}},["comment"===t.activeTab?e("comment-tab",{attrs:{"ticket-info":t.ticketInfo}}):t._e()],1):t._e(),t._v(" "),t.openFunction.CHILD_TICKET_SWITCH?e("bk-tab-panel",{attrs:{name:"mother-child",label:t.$t("m.newCommon['母子单']")}},["mother-child"===t.activeTab?e("div",{staticClass:"bk-log-flow"},[e("inherit-ticket",{attrs:{"ticket-info":t.ticketInfo}})],1):t._e()]):t._e(),t._v(" "),e("bk-tab-panel",{attrs:{name:"related-ticket",label:t.$t("m.newCommon['关联单']")}},["related-ticket"===t.activeTab?e("associated-tab",{attrs:{"ticket-info":t.ticketInfo}}):t._e()],1)]:t._e()],2)],1)},a=[];i._withStripped=!0},FbwU:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"NoData",props:{text:{type:String},fontSize:{type:[Number,String],default:16}},data:function(){return{imgUrl:n("tNV3")}}}},G4fa:function(t,e,n){},G6uA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("ybrk"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"RICHTEXT",components:{RichTextEditor:s.default},props:{item:{type:Object,required:!0,default:function(){}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},mounted:function(){this.item.value&&!this.item.val&&(this.item.val=this.item.value)}}},GHP1:function(t,e,n){"use strict";n("n43x")},GK9h:function(t,e,n){"use strict";n("wP/J")},GLbv:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(n("m1cH")),a=l(n("jWXv")),s=l(n("rfXi")),o=l(n("/14K")),r=l(n("Il08")),c=l(n("BWJp"));function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"tableFields",components:{fieldsDone:o.default,fieldsRunning:r.default},mixins:[c.default],props:{basicInfomation:{type:Object,default:function(){return{table_fields:[]}}},firstStateFields:{type:Array,default:function(){return[]}}},data:function(){return{showMore:!1,showInfo:!0,fieldList:[],basicInfoType:["STRING","TEXT","SELECT","INT","DATE","MULTISELECT","MEMBER"]}},computed:{profile:function(){if(this.basicInfomation)return{name:this.basicInfomation.profile.name,phone:this.basicInfomation.profile.phone,department:this.basicInfomation.profile.departments?this.basicInfomation.profile.departments:[]}},openFunction:function(){return this.$store.state.openFunction},tableFields:function(){var t=this,e=[];return this.basicInfomation.table_fields.forEach((function(n){t.basicInfoType.includes(n.type)?e.unshift(n):e.push(n)})),e}},watch:{"basicInfomation.table_fields":function(){this.initData()}},mouted:function(){this.initData()},methods:{initData:function(){var t=this;this.basicInfomation.table_fields.forEach((function(e){t.$set(e,"isEdit",!1),t.$set(e,"service",t.basicInfomation.service_type),t.$set(e,"val",e.value||""),t.$set(e,"showFeild",!0),"current_status"===e.key&&t.$set(e,"ticket_status",t.basicInfomation.current_status)})),this.isNecessaryToWatch({fields:this.basicInfomation.table_fields}),this.basicInfomation.table_fields.forEach((function(t){"TABLE"!==t.type&&"CUSTOMTABLE"!==t.type||t.value||(t.value=[])}))},processtrans:function(t){switch(t.current_status){case"DISTRIBUTING":return t.current_assignors;case"DISTRIBUTING-RECEIVING":return(0,s.default)(new a.default([].concat((0,i.default)(t.current_processors.split(",")),(0,i.default)(t.current_assignors.split(","))))).join().replace(/(^,*)|(,$)/g,"");default:return t.current_processors||"--"}},changeShow:function(){this.showMore=!this.showMore}}}},GZg8:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-dialog-form bk-dialog-up"},[e("bk-dialog",{attrs:{"render-directive":"if",title:t.dialogSetting.title,width:t.dialogSetting.width,"header-position":t.dialogSetting.headerPosition,loading:t.secondClick,"auto-close":t.dialogSetting.autoClose,"mask-close":t.dialogSetting.autoClose},on:{confirm:t.submitValidate,cancel:t.cancelForm},model:{value:t.dialogSetting.isShow,callback:function(e){t.$set(t.dialogSetting,"isShow",e)},expression:"dialogSetting.isShow"}},[e("bk-form",{ref:"ticketForm",attrs:{"label-width":200,"form-type":"vertical",model:t.formInfo,rules:t.rules}},["suspend"===t.ticketOperateType?[e("bk-form-item",{attrs:{label:t.$t("m.newCommon['挂起原因']"),desc:t.$t("m.slaContent['挂起后单据流程将停止运行']"),required:!0,property:"suspend_message"}},[e("bk-input",{attrs:{placeholder:t.$t("m.newCommon['请输入挂起原因']"),type:"textarea",rows:3},model:{value:t.formInfo.suspend_message,callback:function(e){t.$set(t.formInfo,"suspend_message",e)},expression:"formInfo.suspend_message"}})],1)]:t._e(),t._v(" "),"close"===t.ticketOperateType?[e("bk-form-item",{attrs:{label:t.$t("m.newCommon['关闭原因']"),required:!0,property:"close_message"}},[e("bk-input",{attrs:{placeholder:t.$t("m.newCommon['请输入关闭原因']"),type:"textarea",rows:3},model:{value:t.formInfo.close_message,callback:function(e){t.$set(t.formInfo,"close_message",e)},expression:"formInfo.close_message"}})],1)]:t._e()],2)],1)],1)},a=[];i._withStripped=!0},GauI:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",{staticClass:"member-field"},[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,"ext-cls":"bk-ext-item",desc:t.item.tips,"desc-type":"icon"}},[e("div",{staticClass:"member-form-item",on:{click:function(e){t.item.checkValue=!1}}},[e("member-select",{class:{"bk-border-error":t.item.checkValue},attrs:{multiple:!1,disabled:t.item.is_readonly},model:{value:t.selectedItems,callback:function(e){t.selectedItems=e},expression:"selectedItems"}}),t._v(" "),e("business-card",{staticStyle:{"margin-top":"3px"},attrs:{item:t.item}})],1),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},Gogv:function(t,e,n){},Gue3:function(t,e,n){"use strict";n("8LFY")},Gz9R:function(t,e,n){"use strict";n.r(e);var i=n("nrD6"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},H2GU:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=p(n("QbLZ")),a=p(n("m1cH")),s=p(n("jWXv")),o=p(n("rfXi")),r=p(n("14Xm")),c=p(n("D3Ub")),l=p(n("GQeE")),u=p(n("aNPh")),d=p(n("2eEL")),f=p(n("ibAw")),m=n("CeR/");function p(t){return t&&t.__esModule?t:{default:t}}e.default={name:"commonTriggerList",components:{addTrigger:u.default,collapseTransition:d.default},props:{sourceId:{type:[String,Number],default:""},stepSignal:{type:String,default:""},origin:{type:String,default:"task"},sender:{type:[Number,String],default:""},templateStage:{type:String,default:""},table:{type:[Number,String],default:""},nodeType:{type:String,default:""}},data:function(){return{boundTriggerList:[],boundListLoading:!1,showMoreConfig:!1,triggerDialogInfo:{isShow:!1,searchKey:"",list:[],listLoading:!1},triggerSliderInfo:{isShow:!1,title:this.$t("m.taskTemplate['创建触发器']"),width:950,addLoading:!1,item:{}},iconList:[{key:"icon-icon-notice-new",name:"",typeName:"message"},{key:"icon-icon-user-new",name:"",typeName:"user"},{key:"icon-icon-status-new",name:"",typeName:"status"},{key:"icon-icon-api-new",name:"",typeName:"api"}],originInfoToTrigger:{},stage:"",signal:"",type:"",sourceType:"",senderId:"",triggerEventListFilter:"",isFormChanged:!1}},computed:{citeList:function(){return this.triggerDialogInfo.list.filter((function(t){return t.checked}))},globalChoise:function(){return this.$store.state.common.configurInfo},openFunction:function(){return this.$store.state.openFunction},allSignal:function(){var t={state:"STATE",transition:"TRANSITION",workflow:"FLOW"};return this.stepSignal?this.stepSignal:t[this.origin]?(0,l.default)(this.globalChoise.trigger_signals[t[this.origin]]).join(","):""}},watch:{sourceId:function(t){t&&this.initData()},stepSignal:function(){this.initData()}},mounted:function(){var t=this;return(0,c.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:case"end":return e.stop()}}),e,t)})))()},methods:{initData:function(){var t=this;return(0,c.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.initParams(),t.setFilterSignal(),t.getPublicTriggerList(),e.next=5,t.getBoundTriggerList();case 5:case"end":return e.stop()}}),e,t)})))()},initParams:function(){if(this.senderId=this.sourceId,this.sourceType="workflow",this.stepSignal)return this.sourceType="task",this.triggerEventListFilter="TASK",this.type="task_schemas",void(this.stage=this.templateStage);"state"===this.origin&&(this.triggerEventListFilter="STATE",this.senderId=this.sender,this.type="states"),"transition"===this.origin&&(this.showMoreConfig=!0,this.triggerEventListFilter="TRANSITION",this.senderId=this.sender,this.type="transitions"),"workflow"===this.origin&&(this.showMoreConfig=!0,this.triggerEventListFilter="FLOW",this.type="templates")},setFilterSignal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t;["TASK","TASK-SOPS","SIGN"].indexOf(this.nodeType)>-1&&"state"===this.origin&&(e=(0,o.default)(new s.default(["CLAIM_STATE","DELIVER_STATE","DISTRIBUTE_STATE"].concat((0,a.default)(t)))));var n=this.allSignal.split(",");this.signal=n.filter((function(t){return-1===e.indexOf(t)})).join(",")},getBoundTriggerList:function(){var t=this;return(0,c.default)(r.default.mark((function e(){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.sourceId){e.next=2;break}return e.abrupt("return");case 2:return n={source_id:t.sourceId,source_type:t.sourceType,sender:t.senderId,signal__in:t.signal,project_key:t.$store.state.project.id},t.boundListLoading=!0,e.next=6,t.$store.dispatch("taskTemplate/getTemplateTriggers",n).then((function(e){t.boundTriggerList=e.data.map((function(e){return(0,i.default)({},e,{iconKey:t.iconList.find((function(t){return t.typeName===e.icon})).key})}))})).catch((function(e){(0,m.errorHandler)(e,t)})).finally((function(){t.showMoreConfig=Boolean(t.boundTriggerList.length)||"workflow"===t.origin||"transition"===t.origin,t.boundListLoading=!1}));case 6:case"end":return e.stop()}}),e,t)})))()},selectAllFn:function(){var t=this.triggerDialogInfo.list.length!==this.citeList.length;this.triggerDialogInfo.list.forEach((function(e){e.checked=t}))},openNew:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.originInfoToTrigger={id:this.sourceId,signal:this.signal,sender:this.senderId,filter:this.triggerEventListFilter,source:this.sourceType,type:this.type,stage:this.stage},"cite"===t?this.triggerDialogInfo.isShow=!0:(this.triggerSliderInfo.item=e,this.triggerSliderInfo.isShow=!0),this.isFormChanged=!1},citeTrigger:function(){var t=this,e={project_key:this.$store.state.project.id,src_trigger_ids:this.citeList.map((function(t){return t.id})),dst_source_id:this.sourceId,dst_source_type:this.sourceType,dst_sender:this.senderId};this.$store.dispatch("taskTemplate/patchCloneTriggers",e).then((function(){t.$bkMessage({message:t.$t("m.taskTemplate['引用成功']"),theme:"success"})})).catch((function(e){(0,m.errorHandler)(e,t)})).finally((function(){t.triggerDialogInfo.isShow=!1,t.getBoundTriggerList()}))},delTrigger:function(t){var e=this;this.$bkInfo({type:"warning",title:this.$t("m.taskTemplate['确认删除触发器？']"),subTitle:this.$t("m.taskTemplate['一旦删除，该触发器相关的动作将会一并删除。']"),confirmFn:function(){e.doDelTrigger(t)}})},doDelTrigger:function(t){var e=this;this.$store.dispatch("taskTemplate/deleteTrigger",t.id).then((function(){e.$bkMessage({message:e.$t("m.flowManager['删除成功']"),theme:"success"})})).catch((function(t){(0,m.errorHandler)(t,e)})).finally((function(){e.getBoundTriggerList()}))},getPublicTriggerList:function(){var t=this,e={source_id:0,source_type:"basic",sender:0,is_draft:!1,signal__in:this.signal,name__icontains:this.triggerDialogInfo.searchKey,project_key:this.$store.state.project.id};this.table&&(e.source_table_id=this.table),this.triggerDialogInfo.listLoading=!0,this.$store.dispatch("taskTemplate/getTemplateTriggers",e).then((function(e){t.triggerDialogInfo.list=e.data.map((function(e){return(0,i.default)({},e,{checked:!1,iconKey:t.iconList.find((function(t){return t.typeName===e.icon})).key})}))})).catch((function(e){(0,m.errorHandler)(e,t)})).finally((function(){t.triggerDialogInfo.listLoading=!1}))},newTrigger:function(){this.initDialogInfo(),this.$router.push({name:"projectTrigger",query:{project_id:this.$route.query.project_id}})},initDialogInfo:function(){this.triggerDialogInfo.isShow=!1,this.triggerDialogInfo.searchKey=""},searchInfo:function(){this.getPublicTriggerList()},clearSearch:function(){this.triggerDialogInfo.searchKey="",this.getPublicTriggerList()},handleBeforeClose:function(){var t=this;return(0,c.default)(r.default.mark((function e(){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isFormChanged){e.next=5;break}return e.next=3,(0,f.default)();case 3:return n=e.sent,e.abrupt("return",n);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e,t)})))()}}}},HH2K:function(t,e,n){},HOWN:function(t,e,n){"use strict";n.r(e);var i=n("lWSq"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"Ha+5":function(t,e,n){"use strict";n.r(e);var i=n("NLOC"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},HgU8:function(t,e,n){"use strict";n("aqZ4")},HtfW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(n("m1cH")),a=l(n("14Xm")),s=l(n("gDS+")),o=l(n("GQeE")),r=l(n("D3Ub")),c=l(n("VflG"));function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"responseDataNode",components:{},mixins:[c.default],props:{changeInfo:{type:Object,default:function(){return{}}},apiDetail:{type:Object,default:function(){}},stateList:{type:Array,default:function(){return[]}},isCustom:{type:Boolean,default:!1},isStatic:{type:Boolean,default:!1}},data:function(){return{trueStatus:!0,falseStatus:!1,cascaderData:[],organization:{processorPerson:[],processorTree:{},assignorPerson:[],assignorTree:{}},organizaInfo:{assignorShow:!1},bodyTableData:[],responseTableData:[],paramTableData:[],checkInfo:{name:"",road:""},sourceTypeList:[{id:1,key:"CUSTOM",name:this.$t('m.treeinfo["自定义"]')},{id:2,key:"FIELDS",name:this.$t('m.treeinfo["引用变量"]')}],paramTableInfo:{value:"",placeholder:this.$t('m.treeinfo["请选择数据来源"]')},selectInfo:{selectkeylist:[],selectkey:"",selectvaluelist:[],selectvalue:""},isShow:!1,objIsCanUse:!1}},computed:{tableList:function(){return this.responseTableData.filter((function(t){return t.isShow}))}},watch:{apiDetail:function(t,e){this.initData()}},mounted:function(){this.initData()},methods:{initData:function(){this.responseTableDataChange()},responseTableDataChange:function(){var t=this;return(0,r.default)(a.default.mark((function e(){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,o.default)(t.apiDetail.rsp_data).length){e.next=5;break}t.apiDetail.responseTreeDataList=[{has_children:!1,showChildren:!1,checkInfo:!1,key:"root",is_necessary:!0,type:"object",desc:t.$t('m.treeinfo["初始化数据"]'),parentInfo:"",children:[]}],t.apiDetail.responseTableData=[],e.next=11;break;case 5:return e.next=7,t.jsonschemaToList({root:JSON.parse((0,s.default)(t.apiDetail.rsp_data))});case 7:return t.apiDetail.responseTreeDataList=e.sent,e.next=10,t.treeToTableList(JSON.parse((0,s.default)(t.apiDetail.responseTreeDataList[0].children)));case 10:t.apiDetail.responseTableData=e.sent;case 11:return e.next=13,JSON.parse((0,s.default)(t.apiDetail.responseTableData));case 13:return n=e.sent,e.next=16,n.forEach((function(t){t.isCheck=!1,t.isSatisfied=!1,t.el=null,t.children=[],t.source_type="",t.customValue=t.value,t.value="",t.name=t.key,t.isSelectAbled=!1,t.isSelectedKey=!1,t.isSelectedValue="",t.isSelectedValueDisabled=!0}));case 16:return e.next=18,t.recordChildren(n);case 18:return e.next=20,t.recordParent(n);case 20:return e.next=22,t.showSelectAbled(n);case 22:return e.next=24,n.filter((function(t){return t.isSelectAbled})).forEach(function(){var e=(0,r.default)(a.default.mark((function e(n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.markCanUseArray(n);case 2:case"end":return e.stop()}}),e,t)})));return function(t){return e.apply(this,arguments)}}());case 24:return e.next=26,n;case 26:return t.responseTableData=e.sent,e.next=29,t.makeArrayTree(t.responseTableData.filter((function(t){return!t.level})));case 29:return t.cascaderData=e.sent,t.organization.assignorPerson=JSON.parse((0,s.default)(t.cascaderData)),e.next=33,t.organization.assignorPerson.forEach((function(e){t.treeData(e,"assignors")}));case 33:if(!t.isCustom){e.next=35;break}return e.abrupt("return");case 35:if(!t.changeInfo.api_info||t.changeInfo.api_info.remote_api_id!==t.apiDetail.id){e.next=39;break}return e.next=38,t.changeInfo.variables.outputs.filter((function(t){return"global"===t.source})).forEach(function(){var e=(0,r.default)(a.default.mark((function e(n){var i,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.ref_path.split(".");case 2:return i=e.sent,e.next=5,i.map((function(t,e){return t=e+"_"+t}));case 5:s=e.sent,t.responseTableData.filter((function(t){return t.ancestorsList_str===s.toString()})).forEach((function(t){t.isSelectedKey=!0,t.isSelectedValue=n.name,t.isSelectedValueDisabled=!1}));case 7:case"end":return e.stop()}}),e,t)})));return function(t){return e.apply(this,arguments)}}());case 38:t.$parent.$parent.lineInfo.between=t.changeInfo.api_info.succeed_conditions.type;case 39:if(!(t.changeInfo.api_info&&t.changeInfo.api_info.remote_api_id===t.apiDetail.id&&t.changeInfo.api_info.succeed_conditions&&t.changeInfo.api_info.succeed_conditions.expressions&&t.changeInfo.api_info.succeed_conditions.expressions.length)){e.next=45;break}return e.next=42,t.changeInfo.api_info.succeed_conditions.expressions.map((function(e){var n={type:e.type,expressions:[]};return n.expressions=e.expressions.map((function(e){var n=e.key.split(".").map((function(t,e){return t=e+"_"+t})).toString(),i=t.responseTableData.filter((function(t){return t.ancestorsList_str===n}))[0],a={condition:e.condition,key:n,name:"",choiceList:"",value:e.value,type:i?i.type:"string",organization:{assignorPerson:[],assignorTree:{}},organizaInfo:{assignorShow:!1}};return"boolean"===a.type&&(a.value=a.value?"1":"0"),a.organization.assignorPerson=JSON.parse((0,s.default)(t.cascaderData)),a.organization.assignorPerson.forEach((function(e){t.treeData(e,"assignors",a,n)})),a})),n}));case 42:t.$parent.$parent.lineInfo.expressions=e.sent,e.next=47;break;case 45:return e.next=47,t.$parent.$parent.lineInfo.expressions.forEach((function(e){var n;e.expressions.forEach((n=(0,r.default)(a.default.mark((function e(n){var i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=JSON.parse((0,s.default)(t.cascaderData)),e.next=3,i.forEach((function(e){t.treeData(e,"assignors")}));case 3:n.organization.assignorPerson=i;case 4:case"end":return e.stop()}}),e,t)}))),function(t){return n.apply(this,arguments)}))}));case 47:case"end":return e.stop()}}),e,t)})))()},treeData:function(t,e,n,i){var a=this;t.checkInfo=!1,t.has_children=!(!t.children||!t.children.length),t.showChildren=!1,i===String(t.ancestorsList_str)&&n&&i&&(t.checkInfo=!0,n.organization.assignorTree=t),t.has_children&&t.children.forEach((function(t){a.treeData(t,e,n,i)}))},recordChildren:function(t,e){for(var n=t.map((function(t){return t.level})),a=Math.max.apply(Math,(0,i.default)(n)),s=function(e){t.filter((function(t){return t.level===e})).forEach((function(e){!function(t,e){t.filter((function(t){return t.level===e.level-1&&t.primaryKey===e.parentPrimaryKey&&t.ancestorsList.toString()===e.ancestorsList.slice(0,-1).toString()}))[0].children.push(e)}(t,e)}))},o=a;o>(e||0);o--)s(o)},recordParent:function(t,e){for(var n=t.map((function(t){return t.level})),a=Math.max.apply(Math,(0,i.default)(n)),s=function(e){t.filter((function(t){return t.level===e})).forEach((function(e){!function(t,e){e.level?e.parentInfo=t.filter((function(t){return t.level===e.level-1&&t.primaryKey===e.parentPrimaryKey&&t.ancestorsList.toString()===e.ancestorsList.slice(0,-1).toString()}))[0]:e.parentInfo=""}(t,e)}))},o=0;o<=(e||a);o++)s(o)},markCanUseArray:function(t){t.isCanUseArray=!0,t.level&&this.markCanUseArray(t.parentInfo)},makeArrayTree:function(t,e){var n=[];return function t(n,i){i.forEach((function(i){if(i.isCanUseArray||e){var a={isCheck:!1,isShow:!1,isShowChildren:!1,isSelect:!1};a.name=i.name,a.type=i.type,a.isSelect=!1,a.ancestorsList_str=i.ancestorsList_str;var s=i.children;a.children=[],n.push(a),s&&s.length&&t(a.children,s)}}))}(n,t),n},changeState:function(t){t.showChildren=!t.showChildren,t.children.forEach((function(e){e.isShow=t.showChildren})),t.showChildren||this.closeChildren(t)},closeChildren:function(t){var e=this;t.children.forEach((function(t){t.isShow=!1,t.has_children&&(t.showChildren=!1,e.closeChildren(t))}))},selectOneKey:function(t){t.isSelectedValue=t.isSelectedValue||t.key,t.isSelectedValueDisabled=!t.isSelectedKey},countArrayAncestors:function(t){var e=[];return function t(n){"array"===n.parentInfo.type&&(e.push(n.parentInfo),t(n.parentInfo)),"object"===n.parentInfo.type&&t(n.parentInfo)}(t),e},showSelectAbled:function(t){var e=this;return(0,r.default)(a.default.mark((function n(){return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:[],(e.objIsCanUse?t.filter((function(t){return!e.countArrayAncestors(t).length})):t.filter((function(t){return!e.countArrayAncestors(t).length&&"object"!==t.type&&"array"!==t.type}))).forEach((function(t){t.isSelectAbled=!0}));case 3:case"end":return n.stop()}}),n,e)})))()}}}},HwhF:function(t,e,n){},HxM3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n("14Xm")),a=o(n("D3Ub")),s=o(n("efIh"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"MULTISELECT",mixins:[s.default],props:{item:{type:Object,required:!0,default:function(){}},fields:{type:Array,default:function(){return[]}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{options:[],selectedItems:[]}},watch:{"item.val":function(){this.selectedItems=""===this.item.val?[]:this.item.val.split(","),this.conditionField(this.item,this.fields)},"item.choice":function(t,e){"API"!==this.item.source_type&&"DATADICT"!==this.item.source_type&&"RPC"!==this.item.source_type||e.length===t.length||this.getOption()}},mounted:function(){var t=this;return(0,a.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.item.value&&!t.item.val&&(t.item.val=t.item.value),e.next=3,t.getOption();case 3:return e.next=5,t.judgeValue(t.item.val,t.item.choice);case 5:n=e.sent,t.item.val=n?t.item.val:"",t.selectedItems=""===t.item.val?[]:t.item.val.split(","),t.conditionField(t.item,t.fields);case 9:case"end":return e.stop()}}),e,t)})))()},methods:{getOption:function(){var t=this;return(0,a.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFieldOptions(t.item);case 2:t.item.choice=e.sent,t.options=t.item.choice;case 4:case"end":return e.stop()}}),e,t)})))()},selected:function(t){var e=this;this.item.val=t.join(","),this.item.related_fields&&this.item.related_fields.be_relied&&this.item.related_fields.be_relied.forEach((function(t){e.fields.forEach((function(e){t===e.key&&(e.value="",e.val=e.value)}))}))}}}},I1Ty:function(t,e,n){"use strict";n.r(e);var i=n("1w2S"),a=n("qgII");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("y5Cw");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"f0f1344a",null);e.default=r.exports},I34T:function(t,e,n){},IDfM:function(t,e,n){"use strict";n.r(e);var i=n("mVIP"),a=n("fkix");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},IJjc:function(t,e,n){"use strict";n.r(e);var i=n("R6jV"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},IJn9:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"field-view"},[t._l(t.cloneFields,(function(n,i){return["TABLE"===n.type?e("li",{key:i,staticStyle:{width:"100%","margin-bottom":"10px"}},[e("span",{staticClass:"bk-li-left"},[t._v(t._s(n.name)+"：")]),t._v(" "),e("div",{staticClass:"bk-form-content bk-over-more",staticStyle:{"margin-left":"0px",overflow:"hidden",width:"100%"}},[e("bk-table",{attrs:{data:n.value,size:"small"}},[t._l(n.choice,(function(n){return[e("bk-table-column",{key:n.key,attrs:{label:n.name},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row[n.key]}},[t._v(t._s(i.row[n.key]))])]}}],null,!0)})]}))],2)],1)]):"CUSTOMTABLE"===n.type?e("li",{key:i,staticStyle:{width:"100%","margin-bottom":"10px"}},[e("span",{staticClass:"bk-li-left"},[t._v(t._s(n.name)+"：")]),t._v(" "),e("div",{staticClass:"bk-form-content bk-over-more",staticStyle:{"margin-left":"0px",overflow:"hidden",width:"100%"}},[e("bk-table",{attrs:{data:n.value,size:"small"}},[t._l(n.meta.columns,(function(n){return[e("bk-table-column",{key:n.key,attrs:{label:n.name},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row[n.key]}},[t._v(t._s(t.getCustomTableDisplayValue(n,i.row)||"--"))])]}}],null,!0)})]}))],2)],1)]):"FILE"===n.type?e("li",{key:i,class:{"bk-big-width":"COL_12"===n.layout}},t._l(n.fileShow,(function(i,a){return e("div",{key:a},[e("p",{staticStyle:{"line-height":"30px"}},[e("span",{staticClass:"bk-li-left"},[0===a?e("span",[t._v(t._s(n.name)+"：")]):t._e()]),t._v(" "),e("span",{staticClass:"bk-li-right",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.downFile(i,n)}}},[""!==n.value?e("i",{staticClass:"bk-icon icon-download bk-tab-cursor",staticStyle:{color:"rgb(60, 150, 255)"}}):t._e(),t._v("\n            "+t._s(i.name)+"\n          ")])])])})),0):"RICHTEXT"===n.type?e("li",{key:i,class:{"bk-big-width":"COL_12"===n.layout}},[e("span",{staticClass:"bk-li-left",staticStyle:{float:"initial"}},[t._v(t._s(n.name)+"：")]),t._v(" "),e("span",{staticClass:"bk-li-right",domProps:{innerHTML:t._s(n.value)}})]):"TEXT"===n.type?e("li",{key:i,class:{"bk-big-width":"COL_12"===n.layout}},[e("span",{staticClass:"bk-li-left",staticStyle:{float:"initial"}},[t._v(t._s(n.name)+"：")]),t._v(" "),e("span",{staticClass:"bk-li-right",attrs:{title:n.display_value}},[e("pre",[t._v(t._s(n.display_value||n.value||"--"))])])]):"LINK"===n.type?e("li",{key:i,class:{"bk-big-width":"COL_12"===n.layout},attrs:{title:n.value}},[e("span",{staticClass:"bk-li-left"},[t._v(t._s(n.name)+"：")]),t._v(" "),e("span",{staticClass:"bk-pot-after bk-li-link",on:{click:function(e){return t.goToLink(n.value)}}},[t._v(t._s(t.$t('m.newCommon["点击查看"]')))])]):"CUSTOM-FORM"===n.type?e("li",{key:i,class:{"bk-big-width":"COL_12"===n.layout}},[e("div",{staticClass:"bk-li-left"},[t._v(t._s(n.name)+"：")]),t._v(" "),e("div",{staticStyle:{clear:"left"}},[e("render-view",{attrs:{"form-data":n.value.form_data,context:{schemes:n.value.schemes}}})],1)]):e("li",{key:i,class:{"bk-big-width":"COL_12"===n.layout}},[e("span",{staticClass:"bk-li-left"},[t._v(t._s(n.name)+"：")]),t._v(" "),e("span",{staticClass:"bk-li-right",attrs:{title:n.display_value}},[t._v(t._s(n.display_value||n.value||"--"))])])]}))],2)},a=[];i._withStripped=!0},ISfy:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-auto-node-content"},[e("div",{staticClass:"bk-page bk-auto-node-basic"},[e("p",{staticClass:"bk-header-bold"},[t._v(t._s(t.$t('m.newCommon["节点信息"]')))]),t._v(" "),e("div",{staticClass:"bk-main bk-flex"},[e("div",{staticClass:"bk-base-field"},[e("span",{staticClass:"bk-base-label"},[t._v("\n          "+t._s(t.$t('m.newCommon["节点名称"]'))+" :\n        ")]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.name||"--"))])]),t._v(" "),e("div",{staticClass:"bk-base-field"},[e("span",{staticClass:"bk-base-label"},[t._v("\n          "+t._s(t.$t('m.newCommon["API接口"]'))+" :\n        ")]),t._v(" "),e("span",[t._v(t._s(t.apiName||"--"))])]),t._v(" "),e("div",{staticClass:"bk-base-field"},[e("span",{staticClass:"bk-base-label"},[t._v("\n          "+t._s(t.$t('m.newCommon["处理时间"]'))+" :\n        ")]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.update_at||"--"))])])])]),t._v(" "),e("div",{staticClass:"bk-page bk-auto-node-basic"},[e("p",{staticClass:"bk-header-bold"},[e("span",{staticClass:"bk-label"},[t._v("\n        "+t._s(t.$t('m.newCommon["输入参数"]'))+"\n        "),e("a",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.right",value:t.$t("m.newCommon['调用该API传递的参数信息']"),expression:"\n            $t(`m.newCommon['调用该API传递的参数信息']`)\n          ",modifiers:{right:!0}}],staticClass:"bk-text-danger mr0"},[e("i",{staticClass:"bk-icon icon-question-circle"})])])]),t._v(" "),e("div",[e("div",[t.nodeInfo.api_info.remote_api_info.req_params&&t.nodeInfo.api_info.remote_api_info.req_params.length?e("div",{staticClass:"bk-param"},[e("get-param",{ref:"getParam",attrs:{"query-value":t.nodeInfo.api_info.req_params,"is-static":!0,"api-detail":t.nodeInfo.api_info.remote_api_info}})],1):t._e(),t._v(" "),t.nodeInfo.api_info.remote_api_info.req_body&&Object.keys(t.nodeInfo.api_info.remote_api_info.req_body).length&&t.nodeInfo.api_info.remote_api_info.req_body.properties&&Object.keys(t.nodeInfo.api_info.remote_api_info.req_body.properties).length?e("div",{staticClass:"bk-param"},[e("post-param",{ref:"postParam",attrs:{"body-value":t.nodeInfo.api_info.req_body,"is-static":!0,"api-detail":t.nodeInfo.api_info.remote_api_info}})],1):t._e()])]),t._v(" "),e("p",{staticClass:"bk-header-bold",staticStyle:{"margin-top":"10px"}},[e("span",{staticClass:"bk-label"},[t._v("\n        "+t._s(t.$t('m.newCommon["返回变量"]'))+"\n        "),e("a",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.right",value:t.$t("m.newCommon['调用成功后API将会返回的变量信息']"),expression:"\n            $t(`m.newCommon['调用成功后API将会返回的变量信息']`)\n          ",modifiers:{right:!0}}],staticClass:"bk-text-danger mr0"},[e("i",{staticClass:"bk-icon icon-question-circle"})])])]),t._v(" "),t.nodeInfo.api_info&&t.nodeInfo.api_info.output_variables&&t.nodeInfo.api_info.output_variables.length?[e("bk-table",{attrs:{data:t.nodeInfo.api_info.output_variables,size:"small"}},[e("bk-table-column",{attrs:{label:t.$t("m.newCommon['变量名']"),prop:"name"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.newCommon['变量值']"),prop:"value"}})],1)]:t._e(),t._v(" "),t.bodyDetailConfig.value?e("p",{staticClass:"bk-partition bk-selector bk-header-bold",class:{open:t.isShowAce},staticStyle:{"margin-top":"10px"}},[t.isShowAce?[e("i",{staticClass:"bk-icon bk-selector-icon icon-angle-down",class:{"icon-angle-down":t.isShowAce},staticStyle:{cursor:"pointer"},on:{click:function(e){t.isShowAce=!t.isShowAce}}})]:[e("i",{staticClass:"bk-icon icon-angle-right bk-selector-icon",staticStyle:{cursor:"pointer"},on:{click:function(e){t.isShowAce=!t.isShowAce}}})],t._v(" "),e("span",{staticClass:"bk-label"},[t._v("\n        "+t._s(t.$t('m.newCommon["接口返回"]'))+"\n        "),e("a",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.right",value:t.$t("m.newCommon['调用成功后API将会返回的数据信息']"),expression:"\n            $t(`m.newCommon['调用成功后API将会返回的数据信息']`)\n          ",modifiers:{right:!0}}],staticClass:"bk-text-danger mr0"},[e("i",{staticClass:"bk-icon icon-question-circle"})])])],2):t._e(),t._v(" "),t.isShowAce?e("div",{staticClass:"bk-ace"},[e("div",{staticClass:"bk-ace-full"},[e("span",{staticClass:"bk-font-icon",on:{click:function(e){t.isFull=!t.isFull}}},[e("i",{staticClass:"bk-itsm-icon icon-icon-full-srceen"})])]),t._v(" "),e("div",[e("ace",{attrs:{value:t.bodyDetailConfig.value,width:t.bodyDetailConfig.width,height:t.bodyDetailConfig.height,"read-only":t.bodyDetailConfig.readOnly,lang:t.bodyDetailConfig.lang,"full-screen":t.bodyDetailConfig.fullScreen,theme:"textmate"},on:{blur:t.blur,init:t.editorInitAfter}})],1),t._v(" "),t.isFull?e("div",{staticClass:"bk-ace-full-screen"},[e("div",{staticClass:"bk-ace-full-change",staticStyle:{width:"100%",height:"45px"}},[e("span",[t._v(t._s(t.$t('m.newCommon["接口返回"]')))]),t._v(" "),e("span",{staticClass:"bk-font-icon",on:{click:function(e){t.isFull=!t.isFull}}},[e("i",{staticClass:"bk-itsm-icon icon-icon-back-full"})])]),t._v(" "),e("div",{staticStyle:{width:"100%",height:"calc(100% - 45px)"}},[e("ace",{attrs:{value:t.bodyDetailConfig.value,width:"100%",height:"100%","read-only":t.bodyDetailConfig.readOnly,lang:t.bodyDetailConfig.lang,"full-screen":t.bodyDetailConfig.fullScreen,theme:"textmate"},on:{blur:t.blur,init:t.editorInitAfter}})],1)]):t._e()]):t._e()],2)])},a=[];i._withStripped=!0},IakJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=u(n("gDS+")),a=u(n("14Xm")),s=u(n("P2sY")),o=u(n("D3Ub")),r=n("CeR/"),c=n("ygAv"),l=u(n("iVi/"));function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"InheritTicketAddDialog",inject:["reloadTicket"],props:{ticketInfo:{type:Object,default:function(){return{}}},templateInfo:{type:Object,required:!1,default:function(){return{openShow:!1,options:[],inheritType:"chooseMother",currentInheritType:"chooseChild",otherTitle:(void 0).$t('m.newCommon["新建母子单"]')}}}},data:function(){return{secondClick:!1,tabInfoList:[],isDataLoading:!1,getUrlInfo:"",searchForm:{keyword:"",creator:[],levelService:"",service:"",current_status:0,processors:"",sn_title:"",view_type:""},versionStatus:!0,pagination:{current:1,count:10,limit:10},checkList:[],colorHexList:[],localeCookie:!1,initFormData:{}}},computed:{changeFields:function(){return this.fields},fileStatus:function(){return this.$store.state.fileStatus},allCheck:function(){var t=this;return this.tabInfoList.length&&this.tabInfoList.filter((function(e){return!t.getItemFlag(e)})).length&&this.tabInfoList.every((function(e){return e.check||t.getItemFlag(e)}))}},watch:{"templateInfo.inheritType":function(){this.getList()}},mounted:function(){var t=this;return(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"master"===t.ticketInfo.related_type&&(t.templateInfo.inheritType="chooseChild"),e.next=3,t.getTypeStatus();case 3:return e.next=5,t.getList();case 5:t.localeCookie="zh-cn"!==l.default.parse(document.cookie).blueking_language,t.initFormData=(0,c.deepClone)((0,s.default)({},{templateInfo:t.templateInfo},{checkList:t.checkList}));case 7:case"end":return e.stop()}}),e,t)})))()},methods:{getFlag:function(t,e){var n="chooseMother"===t&&("slave"===e.related_type||"master"===e.related_type),i="chooseChild"===t&&"slave"===e.related_type;return n||i},openNewPage:function(t){var e=t.id,n=this.$router.resolve({name:"commonInfo",params:{id:e},query:{id:""+e}}).href;window.open(n,"_blank")},changeRadio:function(){this.templateInfo.currentInheritType!==this.templateInfo.inheritType&&(this.templateInfo.currentInheritType=this.templateInfo.inheritType,this.tabInfoList.forEach((function(t){t.check=!1})))},getItemFlag:function(t){return"chooseMother"===this.templateInfo.inheritType&&t.chooseMotherDisabled||"chooseChild"===this.templateInfo.inheritType&&t.chooseChildDisabled||"slave"===this.ticketInfo.related_type},getButtonFlag:function(){return this.tabInfoList.find((function(t){return t.check}))},checkOne:function(t){var e=JSON.parse((0,i.default)(t.check));"chooseMother"===this.templateInfo.inheritType&&this.tabInfoList.forEach((function(t){t.check=!1})),t.check=!e,this.$forceUpdate()},getList:function(){var t=this;return(0,o.default)(a.default.mark((function e(){var n,i,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in n={page:t.pagination.current,page_size:t.pagination.limit,is_draft:0,keyword:t.searchForm.keyword?t.searchForm.keyword.replace(/(^\s*)|(\s*$)/g,"")||t.searchForm.sn_title.replace(/(^\s*)|(\s*$)/g,""):"",flow_id:t.ticketInfo.flow_id,exclude_ticket_id__in:t.ticketInfo.id,current_status__in:t.colorHexList.map((function(t){if(!t.is_over)return t.key})).join(",")},i="",t.getUrlInfo="",n)t.getUrlInfo+=s+"="+n[s],i+=s+"="+n[s];return t.isDataLoading=!0,e.next=7,t.$store.dispatch("change/getList",n).then((function(e){i===t.getUrlInfo&&(t.tabInfoList=e.data.items,t.pagination.current=e.data.page,t.pagination.count=e.data.count,t.tabInfoList.forEach((function(e){t.$set(e,"check",!1),t.$set(e,"chooseMotherDisabled","slave"===e.related_type),t.$set(e,"chooseChildDisabled","master"===e.related_type||"slave"===e.related_type)})))})).catch((function(e){(0,r.errorHandler)(e,t)})).finally((function(){t.isDataLoading=!1}));case 7:case"end":return e.stop()}}),e,t)})))()},handlePageLimitChange:function(){this.pagination.limit=arguments[0],this.getList()},handlePageChange:function(t){this.pagination.current=t,this.getList()},handleSelectAll:function(){var t=this;this.allCheck?this.tabInfoList.forEach((function(e){t.getItemFlag(e)||(e.check=!1)})):this.tabInfoList.forEach((function(e){t.getItemFlag(e)||(e.check=!0)})),this.$forceUpdate()},getstatusColor:function(t){var e=this.colorHexList.filter((function(e){return e.key===t.current_status}));return e.length?{color:e[0].color_hex,border:"1px solid "+e[0].color_hex}:{color:"#3c96ff",border:"1px solid #3c96ff"}},getTypeStatus:function(){var t=this;return(0,o.default)(a.default.mark((function e(){var n,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},i=t.ticketInfo.service_type,e.next=4,t.$store.dispatch("ticketStatus/getTypeStatus",{type:i,params:n}).then((function(e){t.colorHexList=e.data})).catch((function(e){(0,r.errorHandler)(e,t)}));case 4:case"end":return e.stop()}}),e,t)})))()},clearInfo:function(){this.searchForm.keyword="",this.getList()},closeShow:function(){this.$emit("close")},submitTemplate:function(){var t=this,e={};"chooseChild"===this.templateInfo.inheritType?(e.from_ticket_ids=this.tabInfoList.filter((function(t){return t.check})).map((function(t){return t.id})),e.to_ticket_id=this.ticketInfo.id):(e.from_ticket_ids=[this.ticketInfo.id],e.to_ticket_id=this.tabInfoList.filter((function(t){return t.check})).map((function(t){return t.id}))[0]),this.secondClick||(this.secondClick=!0,this.$store.dispatch("change/mergeTickets",e).then((function(){t.$bkMessage({message:t.$t('m.newCommon["关联成功"]'),theme:"success"})})).catch((function(e){(0,r.errorHandler)(e,t)})).finally((function(){t.secondClick=!1,t.checkList=[],t.closeShow(),t.reloadTicket()})))},closeVersion:function(){this.versionStatus=!1},renderRadio:function(t){var e=this;return"chooseMother"===this.templateInfo.inheritType?t("bk-radio",{props:{disabled:!0}}):t("bk-checkbox",{props:{value:this.allCheck,disabled:!this.tabInfoList.length||!this.tabInfoList.find((function(t){return!e.getItemFlag(t)}))},on:{change:this.handleSelectAll}})}}}},IcrL:function(t,e,n){"use strict";n("SqHb")},IfDs:function(t,e,n){"use strict";n("uzD8")},Il08:function(t,e,n){"use strict";n.r(e);var i=n("8nzZ"),a=n("R5w6");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("LSTB");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"7d4d69c6",null);e.default=r.exports},"Iu+4":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n("P2sY")),a=o(n("PaSM")),s=o(n("PIEm"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"NodeDealDialog",components:{DealPerson:s.default},mixins:[a.default],props:{openFormInfo:{type:Object,default:function(){return{}}},nodeInfo:{type:Object,default:function(){return{}}},submitting:{type:Boolean,default:!1},allGroups:{type:Array,default:function(){return[]}},ticketInfo:{type:Object,default:function(){return{}}}},data:function(){return{falseStatus:!1,formData:{terminate_message:"",suspend_message:"",deliverReason:""},rules:{},distribution:{excludeTypeList:[],includeTypeList:[],specifyIdList:[],type:"",value:""},deliverInfo:{excludeTypeList:[],includeTypeList:[],specifyIdList:[],type:"",value:""},excludeAssignList:["CMDB","VARIABLE","EMPTY","STARTER_LEADER","OPEN","STARTER","BY_ASSIGNOR","ASSIGN_LEADER","IAM","API","ORGANIZATION","SYSTEM"]}},computed:{type:function(){return"DELIVER"===this.openFormInfo.btnInfo.key?"转单":"分派"}},watch:{"openFormInfo.isShow":function(){this.clearFormData(),this.initData()}},methods:{initData:function(){this.rules.terminate_message=this.checkCommonRules("select").select,this.rules.suspend_message=this.checkCommonRules("select").select,this.rules.deliverReason=this.checkCommonRules("select").select;var t="DELIVER"===this.openFormInfo.btnInfo.key,e=this.nodeInfo,n=e.assignors,i=e.assignors_type,a=e.origin_assignors,s=e.delivers,o=e.delivers_type,r=e.origin_delivers,c=t?s:n,l=t?r:a,u=t?o:i,d=[],f=[];if(["OPEN","BY_ASSIGNOR"].includes(u))d=["PERSON","GENERAL","ORGANIZATION"],f=[],t||d.push("STARTER"),this.ticketInfo.is_biz_need&&d.push("CMDB");else if("PERSON"===u)d=["PERSON"],f=[{type:"PERSON",list:l.split(",").filter((function(t){return!!t}))}];else{d=["PERSON",u],f=[{type:"PERSON",list:c.split(",").map((function(t){return t.replace(/\(.+\)/g,"")}))},{type:u,list:l.split(",")}]}t?(this.deliverInfo.includeTypeList=d,this.deliverInfo.specifyIdList=f,1===d.length&&(this.deliverInfo.type=d[0])):(this.distribution.includeTypeList=d,this.distribution.specifyIdList=f,1===d.length&&(this.distribution.type=d[0]))},clearFormData:function(){this.deliverInfo={excludeTypeList:[],includeTypeList:[],specifyIdList:[],type:"",value:""},this.distribution={excludeTypeList:[],includeTypeList:[],specifyIdList:[],type:"",value:""},this.formData={terminate_message:"",suspend_message:"",deliverReason:""}},submitForm:function(){var t=this;this.$refs.dialogForm.validate().then((function(){var e={};if(t.$refs.personSelect){if(!t.$refs.personSelect.verifyValue())return!1;e=t.$refs.personSelect.getValue()}t.$emit("submitFormAjax",(0,i.default)(t.formData,{person:e}))}),(function(t){console.warn(t)}))},cancelForm:function(){this.openFormInfo.isShow=!1}}}},Ixqo:function(t,e,n){},"J/S9":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-get-param"},[t.isStatic?e("bk-table",{attrs:{data:t.sopsTableInfo,"ext-cls":"bk-editor-table"}},[e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['字段名']"),prop:"name"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['参数值']"),width:"400"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(n.row.value||"--"))])]}}],null,!1,3905507693)})],1):t._e(),t._v(" "),e("div",{staticClass:"sops-form"},[e("render-form",{key:t.renderKey,ref:"renderForm",attrs:{"form-option":t.formOptions,constants:t.constants,context:t.context,hooked:t.hookedVarList},on:{configLoadingChange:function(e){t.configLoading=e}},scopedSlots:t._u([{key:"tagHook",fn:function({scheme:n}){return[e("div",{staticClass:"hook-area"},[e("bk-checkbox",{attrs:{disabled:t.disabled||t.disabledRenderForm,value:!!t.hookedVarList[n.tag_code]},on:{change:function(e){return t.onHookChange(e,n)}}},[t._v("\n            "+t._s(t.$t('m.tickets["引用变量"]'))+"\n          ")]),t._v(" "),t.hookedVarList[n.tag_code]?e("div",{staticClass:"var-select"},[e("bk-select",{attrs:{disabled:t.disabled||t.disabledRenderForm,clearable:!1,searchable:"",value:t.formData[n.tag_code].replace(/^\$\{/,"").replace(/\}$/,"")},on:{selected:function(e){return t.onSelectVar(e,n)}}},t._l(t.stateList,(function(n){return e("bk-option",{key:n.key,attrs:{id:n.key,name:n.name}},[t._v("\n                "+t._s(n.name)+"\n              ")])})),1)],1):t._e()],1)]}}]),model:{value:t.formData,callback:function(e){t.formData=e},expression:"formData"}})],1),t._v(" "),t.sliderInfo.show&&!1===t.isStatic?e("div",{staticClass:"bk-add-slider"},[e("bk-sideslider",{attrs:{"is-show":t.sliderInfo.show,title:t.sliderInfo.title,width:t.sliderInfo.width},on:{"update:isShow":function(e){return t.$set(t.sliderInfo,"show",e)},"update:is-show":function(e){return t.$set(t.sliderInfo,"show",e)}}},[e("div",{staticClass:"p20",attrs:{slot:"content"},slot:"content"},[e("add-field",{attrs:{"change-info":t.changeInfo,"sosp-info":t.showTabData,workflow:t.flowInfo.id,state:t.configur.id},on:{closeShade:t.closeShade,getRelatedFields:t.getRelatedFields}})],1)])],1):t._e()],1)},a=[];i._withStripped=!0},JGQq:function(t,e,n){"use strict";n.r(e);var i=n("Ddt+"),a=n("qJoz");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("kvWR");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"028000e9",null);e.default=r.exports},JGWp:function(t,e,n){},JSRh:function(t,e,n){"use strict";n.r(e);var i=n("fd+i"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},JWjO:function(t,e,n){"use strict";n.r(e);var i=n("B3GM"),a=n("LRin");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("aoH+");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"042c1372",null);e.default=r.exports},JdJU:function(t,e,n){},Je9i:function(t,e,n){"use strict";n.r(e);var i=n("vvxu"),a=n("voeL");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("q090");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"fe007568",null);e.default=r.exports},Jje2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("efIh"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"STRING",mixins:[s.default],props:{item:{type:Object,default:function(){}},fields:{type:Array,default:function(){return[]}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{}},computed:{maxLength:function(){return"title"===this.item.key?120:"task_name"===this.item.key?50:null}},watch:{"item.val":function(){this.conditionField(this.item,this.fields)}},mounted:function(){this.conditionField(this.item,this.fields),this.item.value&&!this.item.val&&(this.item.val=this.item.value)}}},JtQW:function(t,e,n){"use strict";n("iYOz")},JvPE:function(t,e,n){"use strict";n.r(e);var i=n("n2nG"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},Jwqd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COMMON_ATTRS=void 0;var i,a=n("QbLZ"),s=(i=a)&&i.__esModule?i:{default:i};e.getFormMixins=function(t){var e={};for(var n in t)"value"!==n&&(e[n]=t[n]);return{props:(0,s.default)({},o,e),inject:["getContext"],data:function(){return{value:this.$attrs.value?this.$attrs.value:t.value.default}},methods:{getTopViewItem:function(){for(var t=this,e=!1;!e;)t.$parent&&t.$parent.isRootRenderView?e=!0:t=t.$parent;return t}}}};var o=e.COMMON_ATTRS={label:{type:String,required:!1},hiddenLabel:{type:Boolean,default:!1},form:{type:Object,default:function(){return{}}},children:{type:[String,Array],required:!1},desc:{type:String,required:!1}}},K6zZ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=d(n("P2sY")),a=d(n("/+rQ")),s=d(n("tQ05")),o=d(n("BWJp")),r=d(n("vDqi")),c=n("CeR/"),l=n("ygAv"),u=d(n("hztf"));function d(t){return t&&t.__esModule?t:{default:t}}e.default={name:"AssociatedDialog",components:{SelectService:a.default,fieldInfo:s.default,Empty:u.default},mixins:[o.default],props:{ticketInfo:{type:Object,default:function(){return{}}}},data:function(){return{typeSelectRadio:[{key:"associate",name:this.$t('m.manageCommon["关联到已有单据"]')},{key:"new",name:this.$t('m.manageCommon["创建新单"]')}],tabShowList:[],addAssociation:!0,isTableLoading:!1,pagination:{current:1,count:10,limit:10},checkList:[],colorHexList:[],customId:"all",isGetField:!0,showField:!1,fieldList:[],typeSelected:"associate",getUrlInfo:"",buttonDisabled:!1,searchInfo:{serviceType:[],keyword:""},listError:!1,initFormData:{}}},computed:{serviceTypeList:function(){return this.$store.state.choice_type_list}},mounted:function(){this.getList(),this.getTypeStatus(),this.cacheInitData()},methods:{cacheInitData:function(){this.initFormData=(0,l.deepClone)((0,i.default)({},{checkList:this.checkList},{typeSelected:this.typeSelected}))},clearFieldList:function(){this.fieldList=[]},checkOne:function(t){var e=t.id,n=this.$router.resolve({name:"commonInfo",params:{id:e},query:{id:""+e}}).href;window.open(n,"_blank")},getList:function(){var t=this,e={page:this.pagination.current,page_size:this.pagination.limit,is_draft:0,service_type__in:this.searchInfo.serviceType.join(","),keyword:this.searchInfo.keyword.replace(/(^\s*)|(\s*$)/g,""),access:"true",exclude_ticket_id__in:this.ticketInfo.id,project_key:this.ticketInfo.project_key},n="";for(var i in this.getUrlInfo="",e)this.getUrlInfo+=i+"="+e[i],n+=i+"="+e[i];this.isTableLoading=!0,this.listError=!1,this.$store.dispatch("change/getList",e).then((function(e){n===t.getUrlInfo&&(t.tabShowList=e.data.items,t.pagination.current=e.data.page,t.pagination.count=e.data.count)})).catch((function(e){t.listError=!0,(0,c.errorHandler)(e,t)})).finally((function(){t.isTableLoading=!1}))},handlePageLimitChange:function(){this.pagination.limit=arguments[0],this.getList()},handlePageChange:function(t){this.pagination.current=t,this.getList()},handleSelectAll:function(t){this.checkList=t},handleSelect:function(t){this.checkList=t},disabledFn:function(t){return!t.has_relationships},getstatusColor:function(t){var e=this.colorHexList.filter((function(e){return e.service_type===t.service_type&&e.key===t.current_status}));return e.length?{color:e[0].color_hex,border:"1px solid "+e[0].color_hex}:{color:"#3c96ff",border:"1px solid #3c96ff"}},getTypeStatus:function(){var t=this;this.$store.dispatch("ticketStatus/getTypeStatus",{type:"",params:{}}).then((function(e){t.colorHexList=e.data})).catch((function(e){(0,c.errorHandler)(e,t)}))},serviceSearch:function(t){!t&&this.searchInfo.serviceType.length&&this.getList()},clearSearch:function(){this.searchInfo.serviceType=[],this.getList()},clearInfo:function(){this.searchInfo.keyword="",this.getList()},getFieldList:function(){var t=this;if(this.showField=!0,this.$refs.SelectService.formData.service_id){var e={service_id:this.$refs.SelectService.formData.service_id};r.default.all([this.$store.dispatch("change/getSubmitFields",e),this.$store.dispatch("change/getAllFields",this.ticketInfo.id)]).then(r.default.spread((function(e,n){e.data.forEach((function(e){t.$set(e,"val",""),e.type="CASCADE"===e.type?"SELECT":e.type,t.$set(e,"showFeild",!0),t.$set(e,"service",t.$refs.SelectService.formData.key),n.data.forEach((function(t){e.key===t.key&&(e.val=t.value||"")}))})),t.fieldList=e.data,t.isNecessaryToWatch({fields:t.fieldList},"submit")}))).catch((function(e){(0,c.errorHandler)(e,t)})).finally((function(){t.showField=!1}))}else this.fieldList=[]},setFields:function(){var t=this;if(!this.disabled){var e={catalog_id:this.$refs.SelectService.formData.cascadeId,service_id:this.$refs.SelectService.formData.service_id,service_type:this.$refs.SelectService.formData.key},n={};n.from_ticket_id=1*this.ticketInfo.id,n.catalog_id=e.catalog_id,n.service_id=e.service_id,n.service_type=e.service_type,n.fields=[],this.$refs.fieldInfo.fieldChange(),this.fieldList.forEach((function(t){n.fields.push({type:t.type,id:t.id,key:t.key,value:t.showFeild?t.value:"",choice:t.choice})})),this.buttonDisabled=!0,this.$store.dispatch("change/submit",n).then((function(e){"OK"===e.code&&(t.$bkMessage({message:t.$t('m.common["提交成功！"]'),theme:"success"}),t.$emit("submitSuccess"))})).catch((function(e){(0,c.errorHandler)(e,t)})).finally((function(){t.buttonDisabled=!1}))}},closeOpen:function(){this.$emit("close")},bindTicket:function(){var t=this,e=this.checkList.map((function(t){return t.id})),n={from_ticket:this.ticketInfo.id,to_tickets:e};this.$store.dispatch("change/bindTicket",n).then((function(){t.$bkMessage({message:t.$t('m.manageCommon["关联成功"]'),theme:"success"})})).catch((function(e){(0,c.errorHandler)(e,t)})).finally((function(){t.checkList=[],t.$emit("submitSuccess")}))}}}},KHQS:function(t,e,n){"use strict";n.r(e);var i=n("rsoA"),a=n("NHI4");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("bmvC");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"9e51ec54",null);e.default=r.exports},KLeT:function(t,e,n){},KQMz:function(t,e,n){},KUbg:function(t,e,n){},KUmV:function(t,e,n){},"KW1/":function(t,e,n){"use strict";n.r(e);var i=n("LwjM"),a=n("f5Dy");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},KaYb:function(t,e,n){"use strict";n.r(e);var i=n("J/S9"),a=n("EtUq");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("jNP/");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"8f6e5740",null);e.default=r.exports},Kap0:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-library"},[e("bk-form",{attrs:{"label-width":200,"form-type":"vertical"}},[e("bk-form-item",{attrs:{label:t.$t("m.task['任务库']"),required:!0}},[e("bk-select",{attrs:{loading:t.templateListLoading,placeholder:t.$t("m.taskTemplate['请选择任务模板']"),searchable:""},on:{change:t.onTaskLibChange},model:{value:t.formData.templateId,callback:function(e){t.$set(t.formData,"templateId",e)},expression:"formData.templateId"}},t._l(t.templateList,(function(n){return e("bk-option",{key:n.id,attrs:{id:n.id,name:n.name}},[e("span",[t._v(t._s(n.name))]),t._v(" "),e("div",{staticClass:"del-lib-icon",on:{click:function(t){t.stopPropagation()}}},[e("bk-popconfirm",{staticClass:"del-lib-icon",attrs:{title:"确定删除该任务库？",trigger:"click"},on:{confirm:function(e){return t.handleDeleteTaskLib(n)}}},[e("i",{staticClass:"bk-icon icon-close"})])],1)])})),1)],1),t._v(" "),t.formData.templateId?e("bk-form-item",{attrs:{label:t.$t("m.tickets['请勾选任务']"),required:!0}},[e("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.taskListLoading},expression:"{ isLoading: taskListLoading }"}],attrs:{data:t.taskList},on:{"selection-change":t.handleSelectedTaskChange}},[e("bk-table-column",{attrs:{type:"selection",width:"60"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['任务名称']"),prop:"name"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticClass:"task-name",on:{click:function(e){return t.onTaskNameClick(n.row)}}},[t._v(t._s(n.row.name))])]}}],null,!1,3291795468)}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['处理人']"),prop:"processors"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(n.row.processors.replace(/^(,|，)+|(,|，)+$/g,"")))])]}}],null,!1,903288493)}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['任务类型']")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.getTaskZhName(e.row.component_type))+"\n          ")]}}],null,!1,1367431994)})],1)],1):t._e()],1),t._v(" "),e("div",{staticClass:"operation-btns mt20"},[e("bk-button",{staticClass:"mr10",attrs:{theme:"primary",type:"submit",loading:t.btnLoading},on:{click:t.handleSubmitClick}},[t._v("\n      "+t._s(t.$t("m.systemConfig['确认']"))+"\n    ")]),t._v(" "),e("bk-button",{staticClass:"mr10",on:{click:function(e){return t.$emit("close")}}},[t._v("\n      "+t._s(t.$t("m['取消']"))+"\n    ")])],1),t._v(" "),e("bk-sideslider",{attrs:{"is-show":t.viewTaskInfo.show,width:800,"quick-close":!0,title:t.$t("m.task['查看任务']")},on:{"update:isShow":function(e){return t.$set(t.viewTaskInfo,"show",e)},"update:is-show":function(e){return t.$set(t.viewTaskInfo,"show",e)}}},[e("div",{staticClass:"view-task-sideslider",attrs:{slot:"content"},slot:"content"},[e("bk-form",{attrs:{"ext-cls":"mb10","label-width":200,"form-type":"vertical"}},[e("bk-form-item",{attrs:{label:t.$t("m.task['处理人']"),required:!0}},[e("deal-person",{ref:"personSelect",staticClass:"deal-person",attrs:{shortcut:!0,value:t.viewTaskInfo.dealPerson}})],1)],1),t._v(" "),t.viewTaskInfo.show?e("field-info",{ref:"fieldInfo",attrs:{fields:t.viewTaskInfo.item.fields,"basic-infomation":t.ticketInfo}}):t._e(),t._v(" "),e("div",{staticClass:"bk-task-disabled"})],1)])],1)},a=[];i._withStripped=!0},KuoK:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("bk-dialog",{attrs:{"render-directive":"if",title:t.openFormInfo.title,width:t.openFormInfo.width,"header-position":t.openFormInfo.headerPosition,loading:t.submitting,"auto-close":t.openFormInfo.autoClose,"mask-close":t.openFormInfo.autoClose},on:{confirm:t.submitForm,cancel:t.cancelForm},model:{value:t.openFormInfo.isShow,callback:function(e){t.$set(t.openFormInfo,"isShow",e)},expression:"openFormInfo.isShow"}},["TERMINATE"===t.openFormInfo.btnInfo.key||"SUSPEND"===t.openFormInfo.btnInfo.key?[e("bk-form",{ref:"dialogForm",attrs:{"label-width":200,"form-type":"vertical",model:t.formData,rules:t.rules}},["TERMINATE"===t.openFormInfo.btnInfo.key?[e("bk-form-item",{attrs:{label:t.$t("m.newCommon['终止原因']"),required:!0,property:"terminate_message"}},[e("bk-input",{attrs:{placeholder:t.$t("m.newCommon['请输入终止原因']"),type:"textarea",rows:3},model:{value:t.formData.terminate_message,callback:function(e){t.$set(t.formData,"terminate_message",e)},expression:"formData.terminate_message"}})],1)]:t._e(),t._v(" "),"SUSPEND"===t.openFormInfo.btnInfo.key?[e("bk-form-item",{attrs:{label:t.$t("m.newCommon['挂起原因']"),required:!0,property:"suspend_message"}},[e("bk-input",{attrs:{placeholder:t.$t("m.newCommon['请输入挂起原因']"),type:"textarea",rows:3},model:{value:t.formData.suspend_message,callback:function(e){t.$set(t.formData,"suspend_message",e)},expression:"formData.suspend_message"}})],1)]:t._e()],2)]:t._e(),t._v(" "),"DISTRIBUTE"===t.openFormInfo.btnInfo.key?[e("bk-form",{ref:"dialogForm",attrs:{"label-width":200,rules:t.rules,"form-type":"vertical"}},[e("bk-form-item",{attrs:{label:t.$t("m.newCommon['指定处理人']"),required:!0}},[e("deal-person",{ref:"personSelect",staticClass:"deal-person",attrs:{"form-type":"vertical",shortcut:!0,value:{type:t.distribution.type,value:t.distribution.value},"specify-id-list":t.distribution.specifyIdList,"exclude-role-type-list":t.distribution.excludeTypeList,"show-role-type-list":t.distribution.includeTypeList,"required-msg":t.$t("m.treeinfo['派单人不能为空']")}})],1)],1)]:t._e(),t._v(" "),"DELIVER"===t.openFormInfo.btnInfo.key||"EXCEPTION_DISTRIBUTE"===t.openFormInfo.btnInfo.key?[e("bk-form",{ref:"dialogForm",attrs:{model:t.formData,rules:t.rules,"label-width":200,"form-type":"vertical"}},[e("bk-form-item",{attrs:{label:t.$t(`m.newCommon['${t.type}至：']`),required:!0}},[e("deal-person",{ref:"personSelect",staticClass:"deal-person",attrs:{"form-type":"vertical",shortcut:!0,value:{type:t.deliverInfo.type,value:t.deliverInfo.value},"specify-id-list":t.deliverInfo.specifyIdList,"exclude-role-type-list":"转单"===t.type?t.deliverInfo.excludeTypeList:t.excludeAssignList,"show-role-type-list":t.deliverInfo.includeTypeList,"required-msg":t.$t(`m.newCommon['${t.type}人不能为空']`)}})],1),t._v(" "),e("bk-form-item",{attrs:{label:t.$t(`m.newCommon['${t.type}原因']`),required:!0,property:"deliverReason"}},[e("bk-input",{attrs:{placeholder:t.$t(`m.newCommon['请输入${t.type}原因']`),type:"textarea",rows:3},model:{value:t.formData.deliverReason,callback:function(e){t.$set(t.formData,"deliverReason",e)},expression:"formData.deliverReason"}})],1)],1)]:t._e()],2)},a=[];i._withStripped=!0},KwT5:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-order-preview"},[e("div",{staticClass:"bk-basic-head bk-change"},[t._e(),t._v(" "),t._e(),t._v(" "),e("span",{staticClass:"bk-font-icon",attrs:{"data-test-id":"ticket_button_progressFullscreen",title:"全屏"},on:{click:t.openFull}},[e("i",{staticClass:"bk-itsm-icon icon-order-open cus-order-open"})])]),t._v(" "),e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isDataLoading},expression:"{ isLoading: isDataLoading }"}],staticClass:"bk-order-flow"},[t.isDataLoading||t.fullStatus?t._e():[e("preview",{ref:"preview",attrs:{"add-list":t.addList,"line-list":t.lineList,"preview-info":t.previewInfo}})]],2),t._v(" "),e("div",{staticClass:"bk-current-bottom"}),t._v(" "),t.fullStatus?e("div",{staticClass:"bk-preview-full"},[e("div",{staticClass:"bk-basic-head"},[e("span",{staticClass:"bk-head-icon"}),t._v(" "),e("span",[t._v(t._s(t.$t('m.newCommon["工单进度预览"]')))]),t._v(" "),e("span",{staticClass:"bk-font-icon",attrs:{title:"小屏"},on:{click:t.closeFull}},[e("i",{staticClass:"bk-itsm-icon icon-order-close cus-order-open",staticStyle:{"margin-right":"0"}})])]),t._v(" "),e("div",{staticClass:"bk-full-div"},[e("preview",{ref:"preview",attrs:{"add-list":t.addList,"line-list":t.lineList,"preview-info":t.previewInfo,"full-status":t.fullStatus}})],1)]):t._e(),t._v(" "),e("div",{staticClass:"bk-node-content"},[e("bk-sideslider",{attrs:{"show-mask":!1,"is-show":t.nodeContent.isShow,title:t.nodeContent.title,width:t.nodeContent.width,"quick-close":t.nodeContent.quick},on:{"update:isShow":function(e){return t.$set(t.nodeContent,"isShow",e)},"update:is-show":function(e){return t.$set(t.nodeContent,"isShow",e)}}},[t.nodeContent.isShow?e("div",{attrs:{slot:"content"},slot:"content"},[e("node-info",{attrs:{"node-list":t.nodeInfo,"read-only":t.nodeContent.isShow,"current-step-list":t.currentStepList,"basic-infomation":t.basicInfomation,"open-node-info":t.openNodeInfo,"is-loading":t.isNodeLoading},on:{initInfo:t.initInfo,closeSlider:t.closeNodeContent}})],1):t._e()])],1)])},a=[];i._withStripped=!0},Kwbh:function(t,e,n){},KyEO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=p(n("gDS+")),a=p(n("W/0y")),s=p(n("jRCg")),o=p(n("rrYd")),r=p(n("NInj")),c=p(n("TwjO")),l=p(n("QcAU")),u=p(n("LEFf")),d=p(n("wvg8")),f=p(n("o7Fe")),m=n("CeR/");function p(t){return t&&t.__esModule?t:{default:t}}e.default={name:"nodeContent",components:{CurrentSteps:a.default,fieldPreview:s.default,autoNodeInfo:o.default,sopsNodeInfo:r.default,signNodeInfo:l.default,approvalNodeInfo:u.default,devopsNodeInfo:c.default,webHookInfo:d.default,bkPluginInfo:f.default},props:{readOnly:Boolean,basicInfomation:{type:Object,default:function(){return{}}},openNodeInfo:{type:Object,default:function(){return{}}},nodeList:{type:Array,default:function(){return[]}},currentStepList:{type:Array,default:function(){return[]}}},data:function(){return{basicList:[{name:this.$t('m.newCommon["节点名称"]'),value:"",key:"name"},{name:this.$t('m.newCommon["处理人"]'),value:"",key:"processors"},{name:this.$t('m.newCommon["处理时间"]'),value:"",key:"update_at"}],openStatus:!0}},computed:{nodeListCurren:function(){var t=this,e=this.nodeList.filter((function(e){return e.state_id===t.openNodeInfo.id}));if(e[0])for(var n=0;n<this.basicList.length;n++){var a=this.basicList[n];a.value=JSON.parse((0,i.default)(e[0][a.key]||""))}return e}},mounted:function(){var t=this;setTimeout((function(){t.nodeList[0]&&"FINISHED"!==t.nodeList[0].status&&t&&!t._isDestroyed&&t.getTicketNodeInfo(t.openNodeInfo)}),1e4)},methods:{initInfo:function(){this.$emit("initInfo")},getTicketNodeInfo:function(t){var e=this,n=this.basicInfomation.id,i={state_id:t.id};this.$store.dispatch("deployOrder/getTicketNodeInfo",{params:i,id:n}).then((function(t){if("FINISHED"!==t.data.status&&e&&!e._isDestroyed&&!e.basicInfomation.is_over){e.nodeList[0].toString()!==t.data.toString()&&(e.nodeInfo[0]=t.data);var n=setTimeout((function(){e.getTicketNodeInfo(e.openNodeInfo)}),1e4);e.$once("hook:beforeDestroy",(function(){clearInterval(n)}))}})).catch((function(t){(0,m.errorHandler)(t,e)})).finally((function(){}))},closeSlider:function(){this.$emit("closeSlider")}}}},L2Eo:function(t,e,n){"use strict";n("8/xK")},LEFf:function(t,e,n){"use strict";n.r(e);var i=n("OuIK"),a=n("sdYe");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("NfJz");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"46373c55",null);e.default=r.exports},LJsK:function(t,e,n){"use strict";n.r(e);var i=n("z/kA"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},LREg:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"deal-task"},[e("div",{staticClass:"base-info"},[e("h3",{staticClass:"setion-title"},[t._v(t._s(t.$t("m.task['任务信息']")))]),t._v(" "),e("ul",{staticClass:"basic-list"},t._l(t.taskInfoList,(function(n,i){return e("li",{key:i,staticClass:"basic-item"},[e("span",{staticClass:"basic-name"},[t._v(t._s(n.name)+"：")]),t._v(" "),e("span",{staticClass:"basic-value"},["status"!==n.key?[t._v("\n            "+t._s(n.value)+"\n          ")]:[e("task-status",{attrs:{status:t.taskInfo[n.key],type:"text"}})]],2)])})),0)]),t._v(" "),t.isShowSopsExecInfo?e("div",{staticClass:"base-info mt30"},[e("h3",{staticClass:"setion-title"},[t._v(t._s(t.$t("m.task['标准运维信息']")))]),t._v(" "),e("ul",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.taskStatusInfoLoading},expression:"{ isLoading: taskStatusInfoLoading }"}],staticClass:"basic-list"},t._l(t.sopsBaseList,(function(n,i){return e("li",{key:i,staticClass:"basic-item"},[e("span",{staticClass:"basic-name"},[t._v(t._s(n.name)+"：")]),t._v(" "),e("span",{staticClass:"basic-value"},["task_name"===n.key?[e("a",{staticStyle:{color:"#3a84ff"},attrs:{href:t.taskStatusInfo.sops_task_url,target:"_blank"}},[t._v("\n              "+t._s(t.taskStatusInfo[n.key]||"--")+"\n            ")])]:"state"===n.key?[e("span",{class:t.getSopsStatusInfo(t.taskStatusInfo.state).color},[t._v("\n              "+t._s(t.getSopsStatusInfo(t.taskStatusInfo.state).name)+"\n            ")]),t._v(" "),"FINISHED"!==t.taskStatusInfo[n.key]?e("i",{staticClass:"bk-icon left-icon icon-refresh",staticStyle:{"margin-left":"5px",cursor:"pointer","font-size":"16px",color:"#3a84ff"},on:{click:t.getTaskStatusInfo}}):t._e()]:[t._v("\n            "+t._s(t.taskStatusInfo[n.key]||"--")+"\n          ")]],2)])})),0)]):t._e(),t._v(" "),e("div",{staticClass:"field-info"},[e("field-preview",{staticClass:"mb30",attrs:{fields:t.createFields}})],1),t._v(" "),e("div",{staticClass:"bk-field-info"},[t.createTaskTemplateFields.length?e("field-info",{attrs:{fields:t.createTaskTemplateFields,"basic-infomation":t.basicInfomation,disabled:!0,"type-info":t.dealType}}):t._e()],1),t._v(" "),"NEW"!==t.taskInfo.status&&"WAITING_FOR_OPERATE"!==t.taskInfo.status?e("div",{staticClass:"base-info"},[e("h3",{staticClass:"setion-title"},[t._v(t._s(t.$t("m.task['处理信息']")))]),t._v(" "),"WAITING_FOR_CONFIRM"===t.taskInfo.status||"FINISHED"===t.taskInfo.status?[e("ul",{staticClass:"basic-list"},[e("li",{staticClass:"basic-item"},[e("span",{staticClass:"basic-name"},[t._v("\n            "+t._s(t.$t("m.task['处理人：']"))+"\n          ")]),t._v(" "),e("span",{staticClass:"basic-value",attrs:{title:t.taskDetail.executor||t.taskDetail.processor_users}},[t._v("\n            "+t._s(t.taskDetail.executor||t.taskDetail.processor_users)+"\n          ")])]),t._v(" "),e("li",{staticClass:"basic-item"},[e("span",{staticClass:"basic-name"},[t._v("\n            "+t._s(t.$t("m.task['处理时间：']"))+"\n          ")]),t._v(" "),e("span",{staticClass:"basic-value",attrs:{title:t.taskDetail.start_at}},[t._v("\n            "+t._s(t.taskDetail.start_at||"--")+"\n          ")])])]),t._v(" "),e("field-preview",{attrs:{fields:t.dealFields}})]:[e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.taskDetailLoading},expression:"{ isLoading: taskDetailLoading }"}],staticClass:"bk-field-info mb30"},[t.taskDetailLoading?t._e():e("field-info",{ref:"fieldInfo",attrs:{fields:t.dealFields,disabled:"SEE"===t.dealType||"WAITING_FOR_CONFIRM"===t.taskInfo.status||"FINISHED"===t.taskInfo.status}})],1)]],2):t._e(),t._v(" "),"WAITING_FOR_CONFIRM"!==t.taskInfo.status&&"FINISHED"!==t.taskInfo.status||"DEVOPS"===t.taskType?t._e():e("div",{staticClass:"base-info mt30"},[e("h3",{staticClass:"setion-title"},[t._v(t._s(t.$t("m.task['总结信息']")))]),t._v(" "),"FINISHED"===t.taskInfo.status?[e("div",{staticClass:"bk-task-basic mb30"},[e("field-preview",{attrs:{fields:t.confirmList}}),t._v(" "),e("ul",{staticClass:"basic-list"},[e("li",{staticClass:"basic-item"},[e("span",{staticClass:"basic-name"},[t._v("\n              "+t._s(t.$t("m.task['总结人：']"))+"\n            ")]),t._v(" "),e("span",{staticClass:"basic-value",attrs:{title:t.taskDetail.confirmer||t.taskDetail.processor_users}},[t._v("\n              "+t._s(t.taskDetail.confirmer||t.taskDetail.processor_users)+"\n            ")])]),t._v(" "),e("li",{staticClass:"basic-item"},[e("span",{staticClass:"basic-name"},[t._v("\n              "+t._s(t.$t("m.task['总结时间：']"))+"\n            ")]),t._v(" "),e("span",{staticClass:"basic-value",attrs:{title:t.taskDetail.end_at}},[t._v("\n              "+t._s(t.taskDetail.end_at||"--")+"\n            ")])])]),t._v(" "),e("div",{staticClass:"bk-field-info"},[t.confirmTaskTemplateFields.length?e("field-info",{attrs:{fields:t.confirmTaskTemplateFields,disabled:!0}}):t._e()],1)],1)]:[e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.taskDetailLoading},expression:"{ isLoading: taskDetailLoading }"}],staticClass:"bk-field-info mb30"},[t.taskDetailLoading?t._e():e("field-info",{ref:"fieldInfo",attrs:{fields:t.confirmFields,disabled:"SEE"===t.dealType}})],1)]],2),t._v(" "),"SEE"!==t.dealType?e("div",{staticClass:"bk-submit-task"},[e("bk-button",{staticClass:"mr10",attrs:{theme:"primary",title:t.confirmText,disabled:t.btnLoading||t.taskDetailLoading},on:{click:t.submitDeal}},[t._v("\n      "+t._s(t.confirmText)+"\n    ")]),t._v(" "),"OPERATE"===t.dealType||"CONFIRM"===t.dealType?e("bk-button",{attrs:{theme:"default",disabled:t.btnLoading,title:t.$t("m.task['取消']")},on:{click:t.closeSideslider}},[t._v("\n      "+t._s(t.$t("m.task['取消']"))+"\n    ")]):t._e()],1):t._e()])},a=[];i._withStripped=!0},LRin:function(t,e,n){"use strict";n.r(e);var i=n("iU89"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},LSTB:function(t,e,n){"use strict";n("UeZN")},LVBE:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form",{ref:"taskForm",attrs:{model:t.item.sopsContent,rules:t.rules,"label-width":200,"form-type":"vertical"}},[t.editTask?t._e():[e("bk-form-item",{attrs:{label:t.$t("m.newCommon['创建方式']"),required:!0}},[e("bk-radio-group",{on:{change:t.handleCreateWayChange},model:{value:t.item.sopsContent.createWay,callback:function(e){t.$set(t.item.sopsContent,"createWay",e)},expression:"item.sopsContent.createWay"}},[e("bk-radio",{staticClass:"bk-form-radio",attrs:{disabled:t.disabled,value:"template"}},[t._v(t._s(t.$t('m.newCommon["手动创建"]')))]),t._v(" "),e("bk-radio",{staticClass:"bk-form-radio",attrs:{disabled:t.disabled,value:"task"}},[t._v(t._s(t.$t('m.newCommon["关联未执行的任务"]')))]),t._v(" "),e("bk-radio",{staticClass:"bk-form-radio",attrs:{disabled:t.disabled,value:"started_task"}},[t._v(t._s(t.$t('m.newCommon["关联已执行的任务"]')))])],1)],1),t._v(" "),"template"===t.item.sopsContent.createWay?e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"ext-cls":"bk-line-height",property:"id","error-display-type":"normal"}},[e("bk-select",{attrs:{searchable:"","ext-cls":"form-item-inline-width mr5",loading:t.loading.templateList,disabled:"RETRY"===t.typeInfo||t.disabled,clearable:!1},on:{selected:t.onSelectTpl},model:{value:t.item.sopsContent.id,callback:function(e){t.$set(t.item.sopsContent,"id",e)},expression:"item.sopsContent.id"}},t._l(t.templateList,(function(t,n){return e("bk-option",{key:n,attrs:{name:t.name,id:t.id}})})),1),t._v(" "),t.item.sopsContent.id?e("bk-select",{attrs:{loading:t.loading.plan,disabled:t.disabled,multiple:"","ext-cls":"form-item-inline-width mr0",placeholder:t.$t("m['选择执行方案，默认选择全部任务节点']")},on:{selected:t.onplanSelect},model:{value:t.item.sopsContent.planId,callback:function(e){t.$set(t.item.sopsContent,"planId",e)},expression:"item.sopsContent.planId"}},[t._l(t.planList,(function(n){return e("bk-option",{key:n.id,staticClass:"sops-plan-option",attrs:{id:n.id,name:n.name}},[e("span",[t._v(t._s(n.name))]),t._v(" "),e("span",{staticClass:"preview-sops-plan",on:{click:function(e){return e.stopPropagation(),t.jumpToSopsSelectSchemePage.apply(null,arguments)}}},[e("i",{staticClass:"bk-icon icon-eye"}),t._v("\n              "+t._s(t.$t('m.flowManager["预览"]'))+"\n            ")])])})),t._v(" "),e("div",{staticClass:"add-sops-scheme",attrs:{slot:"extension"},on:{click:t.jumpToSopsSelectSchemePage},slot:"extension"},[e("i",{staticClass:"bk-icon icon-plus"}),t._v("\n            "+t._s(t.$t("m.newCommon['创建执行方案']"))+"\n          ")])],2):t._e(),t._v(" "),t.item.sopsContent.id?e("div",{staticClass:"reload-template-plan",on:{click:t.onReloadPlanBtnClick}},[e("i",{staticClass:"bk-icon icon-refresh"}),t._v("\n          "+t._s(t.$t('m.newCommon["刷新"]'))+"\n        ")]):t._e()],1):e("bk-form-item",{attrs:{label:"标准运维的任务选择",required:!0,property:"sopsTaskId"}},[e("bk-select",{attrs:{loading:t.loading.sopsTaskList,disabled:t.disabled,searchable:""},on:{change:t.onSopsTaskChange},model:{value:t.item.sopsContent.sopsTask.id,callback:function(e){t.$set(t.item.sopsContent.sopsTask,"id",e)},expression:"item.sopsContent.sopsTask.id"}},t._l(t.sopsTaskList,(function(t){return e("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1),t._v(" "),t.item.sopsContent.sopsTask.id?e("div",{staticClass:"preview-sops-task",on:{click:function(e){return e.stopPropagation(),t.jumpToSops.apply(null,arguments)}}},[e("i",{staticClass:"bk-icon icon-eye"}),t._v("\n          "+t._s(t.$t('m.flowManager["预览"]'))+"\n        ")]):t._e()],1)]],2),t._v(" "),t.formLoading?t._e():e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.configLoading},expression:"{ isLoading: configLoading }"}],staticClass:"form-wrapper"},[e("h3",{staticClass:"setion-title"},[t._v(t._s(t.$t('m.newCommon["参数配置"]')))]),t._v(" "),t.showRenderForm?e("render-form",{ref:"renderForm",attrs:{"form-option":t.formOptions,constants:t.item.sopsContent.constants,context:t.item.sopsContent.context,hooked:t.hookedVarList},on:{configLoadingChange:function(e){t.configLoading=e}},scopedSlots:t._u([{key:"tagHook",fn:function({scheme:n}){return[e("div",{staticClass:"hook-area"},[e("bk-checkbox",{attrs:{disabled:t.disabled||t.disabledRenderForm,value:!!t.hookedVarList[n.tag_code]},on:{change:function(e){return t.onHookChange(e,n)}}},[t._v("\n            "+t._s(t.$t('m.tickets["引用变量"]'))+"\n          ")]),t._v(" "),t.hookedVarList[n.tag_code]?e("div",{staticClass:"var-select"},[e("bk-select",{class:{"quote-error":t.quoteErrors.includes(n.tag_code)},attrs:{disabled:t.disabled||t.disabledRenderForm,clearable:!1,value:t.item.sopsContent.formData[n.tag_code].replace(/^\$\{/,"").replace(/\}$/,"")},on:{selected:function(e){return t.onSelectVar(e,n)}}},t._l(t.quoteVars,(function(n){return e("bk-option",{key:n.key,attrs:{id:n.key,name:n.name}},[t._v("\n                "+t._s(n.name)+"\n              ")])})),1),t._v(" "),t.quoteErrors.includes(n.tag_code)?e("span",{staticClass:"quote-error-text"},[t._v(t._s(t.$t('m.tickets["请选择变量"]')))]):t._e(),t._v(" "),t.item.sopsContent.constants.find(t=>t.key===n.tag_code).changed?t._e():e("i",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:t.$t("m.tickets['配置有更新']"),expression:"$t(`m.tickets['配置有更新']`)",modifiers:{top:!0}}],staticClass:"bk-icon icon-info update-tips"})],1):t._e()],1)]}}],null,!1,2175907120),model:{value:t.item.sopsContent.formData,callback:function(e){t.$set(t.item.sopsContent,"formData",e)},expression:"item.sopsContent.formData"}}):e("no-data")],1),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2):t._e()},a=[];i._withStripped=!0},LaJ4:function(t,e,n){"use strict";n("Gogv")},LexG:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isLoading},expression:"{ isLoading: isLoading }"}],staticClass:"bk-hidden-conditions",on:{click:function(e){t.checkStatus=!1}}},[e("div",{staticClass:"bk-form-content",staticStyle:{"margin-left":"0"}},[e("p",{staticClass:"bk-form-p"},[t._v(t._s(t.$t("m.treeinfo['条件组间关系']")))]),t._v(" "),e("bk-radio-group",{model:{value:t.conditionType,callback:function(e){t.conditionType=e},expression:"conditionType"}},[e("bk-radio",{attrs:{value:"and","ext-cls":"mr20"}},[t._v(t._s(t.$t("m.treeinfo['且']")))]),t._v(" "),e("bk-radio",{attrs:{value:"or"}},[t._v(t._s(t.$t("m.treeinfo['或']")))])],1)],1),t._v(" "),t.checkStatus?e("p",{staticClass:"bk-error-msg"},[t._v(t._s(t.$t("m.treeinfo['关系名称，关系表达式，关系值不能为空']")))]):t._e(),t._v(" "),e("i",{staticClass:"bk-icon icon-close",on:{click:t.clearCondition}}),t._v(" "),t._l(t.listInfo,(function(n,i){return e("div",{key:i,staticClass:"bk-between-form",class:{mt20:i}},[e("bk-select",{staticStyle:{"min-width":"85px",float:"left","margin-right":"10px"},attrs:{searchable:""},on:{selected:function(e){return t.changeName(...arguments,n)}},model:{value:n.key,callback:function(e){t.$set(n,"key",e)},expression:"node.key"}},t._l(t.fieldList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1),t._v(" "),e("bk-select",{staticStyle:{"min-width":"60px",float:"left","margin-right":"10px"},attrs:{searchable:""},model:{value:n.condition,callback:function(e){t.$set(n,"condition",e)},expression:"node.condition"}},t._l(n.betweenList,(function(t){return e("bk-option",{key:t.typeName,attrs:{id:t.typeName,name:t.name}})})),1),t._v(" "),"SELECT"===n.type||"MULTISELECT"===n.type||"RADIO"===n.type||"CHECKBOX"===n.type||"MEMBERS"===n.type||"TREESELECT"===n.type?[n.choiceList.length?[e("bk-select",{staticStyle:{width:"80px"},attrs:{"ext-cls":"bk-form-style",searchable:"",multiple:n.multiSelect},model:{value:n.value,callback:function(e){t.$set(n,"value",e)},expression:"node.value"}},t._l(n.choiceList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)]:[e("bk-input",{attrs:{"ext-cls":"bk-form-style",type:"INT"===n.type?"number":"text",placeholder:t.$t("m.treeinfo['请输入关系值']")},model:{value:n.value,callback:function(e){t.$set(n,"value",e)},expression:"node.value"}})]]:"DATE"===n.type||"DATETIME"===n.type?[e("bk-date-picker",{attrs:{"ext-cls":"bk-form-style",type:"DATETIME"===n.type?"datetime":"date"},model:{value:n.value,callback:function(e){t.$set(n,"value",e)},expression:"node.value"}})]:[e("bk-input",{attrs:{"ext-cls":"bk-form-style",type:"INT"===n.type?"number":"text",placeholder:t.$t("m.treeinfo['请输入关系值']")},model:{value:n.value,callback:function(e){t.$set(n,"value",e)},expression:"node.value"}})],t._v(" "),e("div",{staticClass:"bk-between-operat"},[e("i",{staticClass:"bk-itsm-icon icon-flow-add",on:{click:function(e){return t.addNode(n,i)}}}),t._v(" "),e("i",{staticClass:"bk-itsm-icon icon-flow-reduce",class:{"bk-no-delete":1===t.listInfo.length},on:{click:function(e){return t.deleteNode(n,i)}}})])],2)}))],2)},a=[];i._withStripped=!0},LfIT:function(t,e,n){"use strict";n.r(e);var i=n("mCAA"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},Liz4:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this._self._c;return t("div",{staticClass:"bk-page bk-auto-node-basic"},[t("p",{staticClass:"bk-header-bold"},[this._v(this._s(this.$t('m.newCommon["任务参数"]')))]),this._v(" "),t("div",[t("div",{staticClass:"bk-param"},[t("get-param",{ref:"getParam",attrs:{"is-static":!0,"is-static-data":this.sopsInfo}})],1)])])},a=[];i._withStripped=!0},LkXx:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("m1cH")),a=r(n("jWXv")),s=r(n("rfXi")),o=r(n("9eKm"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"BasicInformation",components:{tableFields:o.default},props:{basicInfomation:{type:Object,default:function(){return{}}},firstStateFields:{type:Array,default:function(){return[]}}},data:function(){return{showMore:!1,showInfo:!0,displayMoreIcon:!0,basicInfomationList:[],basicInfoType:["STRING","TEXT","SELECT","INT","DATE"]}},computed:{profile:function(){if(this.basicInfomation)return{name:this.basicInfomation.profile.name,phone:this.basicInfomation.profile.phone,department:this.basicInfomation.profile.departments?this.basicInfomation.profile.departments:[]}}},mounted:function(){var t=this;this.tableFields(),setTimeout((function(){var e=document.querySelectorAll(".basic-info-wrap > .bk-basic-info > .bk-basic-form"),n=0;Array.prototype.forEach.call(e,(function(t){n+=t.offsetHeight})),t.displayMoreIcon=n>=300}),100)},methods:{processtrans:function(t){switch(t.current_status){case"DISTRIBUTING":return t.current_assignors;case"DISTRIBUTING-RECEIVING":return(0,s.default)(new a.default([].concat((0,i.default)(t.current_processors.split(",")),(0,i.default)(t.current_assignors.split(","))))).join().replace(/(^,*)|(,$)/g,"");default:return t.current_processors||"--"}},changeShow:function(){this.showMore=!this.showMore},tableFields:function(){var t=this,e=[],n=this.basicInfomation,i=n.service_type_name,a=n.sn,s=n.catalog_fullname,o=n.service_name,r=[{name:"标题",display_value:n.title,type:"STRING"},{name:"单号",display_value:a,type:"STRING"},{name:"工单类型",display_value:i,type:"STRING"},{name:"服务目录",display_value:s+">"+o,type:"STRING"},{name:"关联服务",display_value:o,type:"STRING"}];this.firstStateFields.map((function(t){return t})).forEach((function(n){t.basicInfoType.includes(n.type)?e.unshift(n):e.push(n)})),this.basicInfomationList=r.concat(e.filter((function(t){return"title"!==t.key})))}}}},LnbJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n("rfXi")),a=o(n("ATds")),s=o(n("zzpp"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"ticketComment",components:{commentItem:s.default,editor:a.default},props:{commentId:[Number,String],commentList:Array,ticketInfo:Object,ticketId:[Number,String],commentLoading:Boolean,moreLoading:Boolean,isPageOver:Boolean,hasNodeOptAuth:Boolean,isShowBasicInfo:Boolean,stepActiveTab:String},data:function(){return{curCommentId:"",commentListDom:"",commentType:"",isShowSelect:!0,isShowEditor:!1,isEditEditor:!1,selectPatternList:[{type:"INSIDE",icon:"bk-itsm-icon icon-suoding common-color",name:this.$t("m['内部评论']"),docs:this.$t("m['仅单据相关人员可发布的评论']")},{type:"PUBLIC",icon:"bk-itsm-icon icon-jiesuo common-color",name:this.$t("m['外部评论']"),docs:this.$t("m['发布的评论所有人可见']")}],editType:"",isEdit:!1,flash:{},imgUrl:n("tNV3"),isReplyComment:!1,replyCommnetId:"",replyContent:{creator:"",content:""},commentDomHeight:"",isShowCommentScroll:!1,basicInDomHeight:54}},watch:{stepActiveTab:function(t){"allComments"===t&&this.getCommentHeight()}},mounted:function(){this.commentListDom=document.querySelector(".comment-list"),this.getBasicHeight()},methods:{getCommentHeight:function(){var t=document.querySelector(".wang-editor-template");this.commentDomHeight=t.clientHeight,this.isShowCommentScroll=t.clientHeight>500},getBasicHeight:function(){var t=document.querySelector(".base-info-content");this.basicInDomHeight=t.clientHeight},editComment:function(t,e){var n=this.$refs.editorEdit.editor;n.txt.clear(),this.editType=e,this.curCommentId=t.id,"edit"===e&&n.txt.html(t.content),this.commentType=t.remark_type,this.isEdit=!0},replyComment:function(t){this.replyCommnetId=t.id,this.isReplyComment=!0,this.commentType=t.remark_type,this.postComment(t.remark_type),this.replyContent.creator=t.creator,this.replyContent.content=t.content,this.commentListDom.scrollTop=0},repealReply:function(){this.replyCommnetId="",this.isReplyComment=!1,this.isShowSelect=!0,this.isShowEditor=!1},changebuttonStatus:function(t){this.isEditEditor=t},submitEdit:function(){var t=this,e=this.$refs.editorEdit.editor,n=e.txt.html();this.editorEditData="",e.txt.clear();var i="",a={content:n,users:[],remark_type:this.commentType};"edit"===this.editType?(a.id=this.curCommentId,i="ticket/updateTicketComment"):(a.ticket_id=this.ticketId,a.parent__id=this.curCommentId,i="ticket/addTicketComment"),this.$store.dispatch(i,a).then((function(){t.refreshComment(),t.commentListDom.scrollTop=0}))},refreshComment:function(){this.isEditEditor=!1,this.$emit("refreshComment")},postComment:function(t){var e=this.ticketInfo.updated_by.split(",").includes(window.username),n=[];this.ticketInfo.current_processors.split(",").forEach((function(t){n.push(t.split("(")[0])}));var i=n.includes(window.username);this.hasNodeOptAuth&&(e||i)||"INSIDE"!==t?(this.commentType=t,this.isShowSelect=!1,this.isShowEditor=!0):this.$bkMessage({message:this.$t('m["你当前无法发表内部评论"]'),theme:"warning "})},jumpTargetComment:function(t){var e=this,n=this.commentList.indexOf(this.commentList.filter((function(e){return e.id===t.parent}))[0]);if(-1!==n){var a=document.querySelector(".ticket-container-left"),s=document.querySelector(".base-info-content"),o=(0,i.default)(a.childNodes).slice(0,n).map((function(t){return t.clientHeight})).reduce((function(t,e){return t+e}));this.$set(this.flash,t.parent__id,!0);var r=setTimeout((function(){e.$set(e.flash,t.parent__id,!1),clearTimeout(r)}),2e3);a.scrollTop=o+340+s.offsetHeight}else this.$emit("addTargetComment",t)},submit:function(){var t=this;if(this.isEditEditor){if(this.isShowEditor=!1,this.isReplyComment=!1,this.$refs.editorAdd){var e=this.$refs.editorAdd.editor,n=e.txt.html();this.editorData="",this.isShowSelect=!0,e.txt.clear();var i={content:n,ticket_id:this.ticketId,parent__id:this.replyCommnetId||this.commentId,remark_type:this.commentType,users:[]};if(n)try{this.$store.dispatch("ticket/addTicketComment",i).then((function(){t.replyCommnetId="",t.refreshComment(),t.commentListDom.scrollTop=0}))}catch(t){console.log(t)}finally{this.isReplyComment=!1}}}else this.repealReply()}}}},LtuE:function(t,e,n){"use strict";n.r(e);var i=n("PAS+"),a=n("0CIy");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("ab9X"),n("7sD+");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"bfa221ee",null);e.default=r.exports},LwjM:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-trigger-field"},["STRING"===t.item.type||"TEXT"===t.item.type?[e("bk-input",{attrs:{maxlength:120},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]:"INT"===t.item.type?[e("bk-input",{attrs:{clearable:!0,type:"number"},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]:"SELECT"===t.item.type||"RADIO"===t.item.type?[e("bk-select",{attrs:{searchable:"",loading:t.item.loading},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}},t._l(t.item.options,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)]:"CHECKBOX"===t.item.type||"MULTISELECT"===t.item.type?[e("bk-select",{attrs:{searchable:"",multiple:"",loading:t.item.loading},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}},t._l(t.item.options,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)]:"MEMBERS"===t.item.type||"MULTI_MEMBERS"===t.item.type||"MEMBER"===t.item.type?[e("member-select",{model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]:"DATE"===t.item.type?[e("bk-date-picker",{attrs:{placeholder:t.$t("m.newCommon['选择日期']")},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]:"DATETIME"===t.item.type?[e("bk-date-picker",{attrs:{type:"datetime",placeholder:t.$t("m.newCommon['选择日期时间']")},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]:[e("bk-input",{attrs:{maxlength:120},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]],2)},a=[];i._withStripped=!0},M84O:function(t,e,n){},MBfY:function(t,e,n){"use strict";n.r(e);var i=n("GauI"),a=n("T2YI");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("pLkd");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"6d0b7e2a",null);e.default=r.exports},MHZE:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",{staticClass:"ci-template"},[e("bk-form",{ref:"devopsForm",attrs:{model:t.item.devopsContent,rules:t.defaultRules,"label-width":200,"form-type":"vertical"}},[e("bk-form-item",{attrs:{label:t.$t("m.tickets['项目']"),required:!0,property:"project_id","error-display-type":"normal"}},[e("bk-select",{attrs:{loading:t.projectLoading,searchable:"",disabled:t.disabled},on:{selected:t.handleProjectChange},model:{value:t.item.devopsContent.project_id,callback:function(e){t.$set(t.item.devopsContent,"project_id",e)},expression:"item.devopsContent.project_id"}},t._l(t.projectList,(function(t){return e("bk-option",{key:t.projectCode,attrs:{id:t.projectCode,name:t.project_name}})})),1)],1),t._v(" "),e("bk-form-item",{attrs:{label:t.$t("m.tickets['流水线']"),required:!0,property:"pipeline_id","error-display-type":"normal"}},[e("bk-select",{attrs:{loading:t.pipelineLoading,searchable:"",disabled:t.disabled},on:{selected:t.handlePipelineChange},model:{value:t.item.devopsContent.pipeline_id,callback:function(e){t.$set(t.item.devopsContent,"pipeline_id",e)},expression:"item.devopsContent.pipeline_id"}},t._l(t.pipelineList,(function(t){return e("bk-option",{key:t.pipelineId,attrs:{id:t.pipelineId,name:t.pipelineName}})})),1)],1)],1),t._v(" "),e("h3",{staticClass:"setion-title"},[e("span",{staticClass:"setion-title-icon",on:{click:function(e){e.stopPropagation(),t.showPipelineVariable=!t.showPipelineVariable}}},[t.showPipelineVariable?e("i",{staticClass:"bk-icon icon-angle-down"}):e("i",{staticClass:"bk-icon icon-angle-right"})]),t._v("\n    "+t._s(t.$t("m.tickets['流水线变量']"))+"\n  ")]),t._v(" "),e("bk-form",{directives:[{name:"show",rawName:"v-show",value:t.showPipelineVariable,expression:"showPipelineVariable"},{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.pipelineStartLoading},expression:"{ isLoading: pipelineStartLoading }"}],ref:"devopsVariable",attrs:{model:t.item.devopsContent.variables,"label-width":200,"form-type":"vertical"}},t._l(t.pipelineVariableList,(function(n){return e("bk-form-item",{key:n.id,staticClass:"half-width-item",attrs:{label:n.id,required:!0,property:n.id,rules:t.rules[n.id],"error-display-type":"normal"}},[e("bk-input",{attrs:{disabled:t.disabled,clearable:!0},model:{value:t.item.devopsContent.variables[n.id],callback:function(e){t.$set(t.item.devopsContent.variables,n.id,e)},expression:"item.devopsContent.variables[variable.id]"}})],1)})),1),t._v(" "),e("h3",{staticClass:"setion-title border-none"},[e("span",{staticClass:"setion-title-icon",on:{click:function(e){e.stopPropagation(),t.showPipelineStages=!t.showPipelineStages}}},[t.showPipelineStages?e("i",{staticClass:"bk-icon icon-angle-down"}):e("i",{staticClass:"bk-icon icon-angle-right"})]),t._v("\n    "+t._s(t.$t("m.tickets['插件预览']"))+"\n  ")]),t._v(" "),e("devops-preview",{directives:[{name:"show",rawName:"v-show",value:t.showPipelineStages,expression:"showPipelineStages"}],attrs:{stages:t.pipelineStages,loading:t.pipelineDetailLoading}})],1):t._e()},a=[];i._withStripped=!0},MI7q:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("GQeE")),a=r(n("gDS+")),s=r(n("14Xm")),o=r(n("D3Ub"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"getParam",components:{},props:{changeInfo:{type:Object,default:function(){return{}}},apiDetail:{type:Object,default:function(){}},stateList:{type:Array,default:function(){return[]}},isStatic:{type:Boolean,default:function(){return!1}},isCustom:{type:Boolean,default:function(){return!1}},queryValue:{type:Object,default:function(){return{}}},entry:{type:String,default:function(){return""}},formInfo:{type:Object,default:function(){return{}}}},data:function(){return{paramTableData:[],checkInfo:{name:"",road:""},sourceTypeList:[{id:1,key:"CUSTOM",name:this.$t('m.treeinfo["自定义"]')},{id:2,key:"FIELDS",name:this.$t('m.treeinfo["引用变量"]')}],paramTableInfo:{value:"",placeholder:this.$t('m.treeinfo["请选择数据来源"]')}}},computed:{},watch:{apiDetail:function(){this.initData()}},mounted:function(){var t=this;return(0,o.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.changeInfo;case 2:return e.next=4,t.isStatic;case 4:return e.next=6,t.queryValue;case 6:return e.next=8,t.initData();case 8:case"end":return e.stop()}}),e,t)})))()},methods:{initData:function(){var t=this;return(0,o.default)(s.default.mark((function e(){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSON.parse((0,a.default)(t.apiDetail.req_params));case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return n=e.t0,e.next=8,n.forEach((function(e){if(e.isCheck=!1,e.isSatisfied=!1,e.el=null,e.customValue=e.value||"",e.source_type="CUSTOM",e.value_key="",t.isStatic)e.value=t.queryValue[e.name]||"";else if(t.changeInfo.api_info&&(0,i.default)(t.changeInfo.api_info.req_params).length&&t.changeInfo.api_info.remote_api_id===t.apiDetail.id)if(/^\$\{params_.*\}$/.test(t.changeInfo.api_info.req_params[e.name]))e.source_type="FIELDS",e.value_key=t.changeInfo.api_info.req_params[e.name]?JSON.parse((0,a.default)(t.changeInfo.api_info.req_params[e.name])).replace(/^\$\{params_/,"").replace(/\}$/,""):"";else{var n=t.changeInfo.api_info.req_params[e.name];e.source_type="CUSTOM",e.value=n}}));case 8:return e.next=10,JSON.parse((0,a.default)(n));case 10:t.paramTableData=e.sent;case 11:case"end":return e.stop()}}),e,t)})))()},addNewItem:function(t){this.$emit("addNewItem",t)}}}},MTdN:function(t,e,n){},"MX/Q":function(t,e,n){},MaN0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"NodeTemplate",props:{node:{type:Object,default:function(){return{}}},previewInfo:{type:Object,default:function(){return{}}},normalColor:{type:Boolean,default:!1}},data:function(){return{moveFlag:!1,typeList:[{type:"NORMAL",iconStyle:"icon-icon-person"},{type:"ROUTER",iconStyle:"icon-icon-person"},{type:"TASK",iconStyle:"icon-api-icon"},{type:"TASK-SOPS",iconStyle:"icon-task-node"},{type:"TASK-DEVOPS",iconStyle:"icon-devops-task-icon"},{type:"SIGN",iconStyle:"icon-sign-node-white"},{type:"WEBHOOK",iconStyle:"icon-webhook-icon"},{type:"BK-PLUGIN",iconStyle:"icon-chajian-icon"},{type:"APPROVAL",iconStyle:"icon-approval-node"}]}},mounted:function(){},methods:{movdeDoneFn:function(){this.moveFlag=!1},moveFn:function(){this.moveFlag=!0},onNodeClick:function(t){if(this.moveFlag)this.$emit("submitNodeValue",t);else{if("START"===t.type||"END"===t.type||"ROUTER-P"===t.type||"COVERAGE"===t.type)return;this.$emit("clickNodeInfo",t)}this.moveFlag=!1}}}},Mf0c:function(t,e,n){"use strict";n.r(e);var i=n("G6uA"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},N5hH:function(t,e,n){"use strict";n.r(e);var i=n("K6zZ"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},N8nL:function(t,e,n){"use strict";n("G4fa")},NFkJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("ukIK"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"sendMessage",components:{changeConductor:s.default},props:{itemInfo:{type:Object,default:function(){return{}}},isShowVar:{type:Boolean,default:function(){return!0}}},data:function(){return{trueStatus:!0,falseStatus:!1,activeName:"send_email_message",show:!0}},computed:{},created:function(){var t=this;this.itemInfo.sub_components.forEach((function(e){switch(t.$set(e,"checked",e.checked||!1),e.checked&&(t.activeName=e.name),t.$set(e,"label",e.name),t.$set(e,"icon",""),e.key){case"send_email_message":e.icon="icon-email";break;case"send_sms_message":e.icon="icon-mobile";break;case"send_wechat_message":e.icon="icon-weixin"}}))},mounted:function(){},methods:{changPanel:function(t){this.activeName=t},changePanelStatus:function(t,e){console.log(t,e)}}}},NGZu:function(t,e,n){"use strict";n.r(e);var i=n("+KRo"),a=n("VtRw");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("N8nL");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"60ae7397",null);e.default=r.exports},NHI4:function(t,e,n){"use strict";n.r(e);var i=n("68Tg"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},NInj:function(t,e,n){"use strict";n.r(e);var i=n("ZhbF"),a=n("JvPE");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("xEUG");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"8c60ada8",null);e.default=r.exports},NLOC:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("efIh"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"DATE",mixins:[s.default],props:{item:{type:Object,required:!0,default:function(){}},fields:{type:Array,default:function(){return[]}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{}},watch:{"item.val":function(){this.conditionField(this.item,this.fields)}},mounted:function(){if(this.conditionField(this.item,this.fields),this.item.value&&!this.item.val&&(this.item.val=this.item.value),!this.item.val){var t=new Date;this.item.val=t,this.item.value=t}},methods:{}}},NPk7:function(t,e,n){"use strict";n.r(e);var i=n("q4Iw"),a=n("Cyyo");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("qkdU");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"21fd4902",null);e.default=r.exports},NXOa:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(n("efIh")),a=s(n("FCVG"));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"CUSTOM-FORM",components:{RenderView:a.default},mixins:[i.default],props:{item:{type:Object,default:function(){}},fields:{type:Array,default:function(){return[]}}},data:function(){return{formData:[],context:{},errMessage:""}},watch:{"item.val":{handler:function(){this.conditionField(this.item,this.fields),this.initRenderView()},immediate:!0}},mounted:function(){this.item.value&&!this.item.val&&(this.item.val=this.item.value)},methods:{initRenderView:function(){this.errMessage="";try{var t="string"==typeof this.item.val?JSON.parse(this.item.val):this.item.val,e=t.form_data,n=t.schemes,i=t.config;this.formData=e,this.context={schemes:n,config:i}}catch(t){this.errMessage=t,this.formData=[]}}}}},NabY:function(t,e,n){},Ncax:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,"ext-cls":"bk-ext-item",desc:t.item.tips,"desc-type":"icon"}},[e("div",{staticClass:"member-form-item",on:{click:function(e){t.item.checkValue=!1}}},[e("member-select",{class:{"bk-border-error":t.item.checkValue},attrs:{disabled:t.item.is_readonly&&!t.isCurrent||t.item.evaluDisable||t.disabled,placeholder:t.item.desc},on:{change:t.onMemberSelectChange},model:{value:t.selectedItems,callback:function(e){t.selectedItems=e},expression:"selectedItems"}}),t._v(" "),e("business-card",{attrs:{item:t.item}})],1),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},NesJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("efIh"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"DATETIME",mixins:[s.default],props:{item:{type:Object,default:function(){return{}}},fields:{type:Array,default:function(){return[]}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{}},watch:{"item.val":function(){this.conditionField(this.item,this.fields)}},mounted:function(){if(this.conditionField(this.item,this.fields),this.item.value&&!this.item.val&&(this.item.val=this.item.value),!this.item.val){var t=new Date;this.item.val=t,this.item.value=t}},methods:{}}},NfJz:function(t,e,n){"use strict";n("tMBJ")},NzWO:function(t,e,n){},O213:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",[e("bk-form",{ref:"form",attrs:{"label-width":200,model:t.formData,"form-type":"vertical",rules:t.rules}},t._l(t.constantList,(function(n){return e("bk-form-item",{key:n.key,attrs:{label:n.name,required:!0,property:n.key}},[e("bk-input",{attrs:{disabled:t.disable},model:{value:t.formData[n.key],callback:function(e){t.$set(t.formData,n.key,e)},expression:"formData[item.key]"}})],1)})),1),t._v(" "),"FAILED"===t.nodeInfo.status?e("div",{staticClass:"submit-btn"},[t.changeBtn?e("bk-button",{attrs:{theme:"primary"},on:{click:t.submit}},[t._v(t._s(t.$t('m["提交"]')))]):t._e(),t._v(" "),e("bk-button",{attrs:{theme:"primary"},on:{click:t.reSetSopTask}},[t._v(t._s(t.changeBtn?t.$t('m["返回"]'):t.$t('m["重做"]')))]),t._v(" "),e("bk-button",{on:{click:t.ignore}},[t._v(t._s(t.$t('m["忽略"]')))])],1):t._e()],1)},a=[];i._withStripped=!0},O4pD:function(t,e,n){"use strict";n.r(e);var i=n("RnPO"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},ODc7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("CeR/"),a=r(n("efIh")),s=r(n("BWJp")),o=r(n("LtuE"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"CurrentSteps",components:{CurrentStepItem:o.default},mixins:[a.default,s.default],props:{basicInfomation:{type:Object,default:function(){return{}}},currentStepList:{type:Array,default:function(){return[]}},nodeList:{type:Array,default:function(){return[]}},openStatus:{type:Boolean,default:!1},nodeTriggerList:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},isShowBasicInfo:Boolean,readOnly:Boolean,isShowAssgin:Boolean},data:function(){return{allGroups:[],allFieldList:[],organizationList:[],updateDate:+new Date,tooltipConfig:{allowHtml:!0,trigger:"click",theme:"light",content:"#tooltipHtml",placement:"top",extCls:"bk-processor-wrapper"},isDropdownShow:!1,basicInDomHeight:54}},watch:{isShowBasicInfo:function(){this.getBasicHeight()}},mounted:function(){this.getBasicHeight()},methods:{loadData:function(){this.getAllGroups()},getAllGroups:function(){var t=this;this.$store.dispatch("deployCommon/getUser",{params:"is_processor=true"}).then((function(e){var n=["VARIABLE","STARTER_LEADER","IAM"];t.allGroups=e.data.filter((function(t){return!n.includes(t.type)}))})).catch((function(e){(0,i.errorHandler)(e,t)}))},getBasicHeight:function(){var t=document.querySelector(".base-info-content");this.basicInDomHeight=t.clientHeight},successFn:function(){this.$emit("handlerSubmitSuccess")}}}},OE89:function(t,e,n){"use strict";n.r(e);var i=n("n5mh"),a=n("O4pD");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("1h6V");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"55a2ec1b",null);e.default=r.exports},OTrV:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"trigger-handle"},[e("div",{staticClass:"left-content"},[e("span",{staticClass:"handle-title mr10"},[t._v(t._s(t.title))]),t._v(" "),t.showStatus?e("task-status",{attrs:{"ext-cls":"mr30",status:t.taskInfo.status,type:"block"}}):t._e(),t._v(" "),t.triggerList.length?e("bk-dropdown-menu",{on:{show:function(e){t.dropdownShow=!0},hide:function(e){t.dropdownShow=!1}}},[e("bk-button",{attrs:{slot:"dropdown-trigger",loading:t.gettingTriggers},slot:"dropdown-trigger"},[e("span",[t._v(t._s(t.$t('m.newCommon["更多操作"]')))]),t._v(" "),e("i",{class:["bk-icon icon-angle-down",{"icon-flip":t.dropdownShow}]})]),t._v(" "),e("ul",{staticClass:"bk-dropdown-list trigger-ul",attrs:{slot:"dropdown-content"},slot:"dropdown-content"},t._l(t.triggerList,(function(n,i){return e("li",{key:i},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.openTriggerDialog(n)}}},[t._v(t._s(n.display_name))])])})),0)],1):t._e()],1),t._v(" "),e("div",{staticClass:"right-content"},[t._t("right-content")],2),t._v(" "),e("ticket-trigger-dialog",{ref:"triggerDialog",on:{"init-info":t.refreshTicket}})],1)},a=[];i._withStripped=!0},OV2Y:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-input-params"},[e("bk-table",{attrs:{data:t.paramTableData,size:"small"}},[e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['名称']"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("div",{staticClass:"bk-more"},[e("span",{style:{paddingLeft:20*n.row.level+"px"}},[n.row.has_children?e("span",{class:["bk-icon","tree-expanded-icon",n.row.showChildren?"icon-down-shape":"icon-right-shape"],on:{click:function(e){return t.changeState(n.row)}}}):e("span",{staticClass:"bk-icon bk-more-icon"}),t._v(" "),e("span",[t._v(t._s(n.row.key||"--"))])])])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['必选']"),width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.is_necessary?t.$t('m.treeinfo["是"]'):t.$t('m.treeinfo["否"]'))+"\n      ")]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['备注']"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{attrs:{title:n.row.desc}},[t._v(t._s(n.row.desc||"--"))])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['参数值']"),width:"280"},scopedSlots:t._u([{key:"default",fn:function(n){return["object"!==n.row.type&&"array"!==n.row.type?[e("div",{staticStyle:{width:"120px",position:"absolute",top:"5px",left:"10px"}},[e("bk-select",{attrs:{clearable:!1,searchable:""},model:{value:n.row.source_type,callback:function(e){t.$set(n.row,"source_type",e)},expression:"props.row.source_type"}},t._l(t.sourceTypeList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)],1),t._v(" "),n.row.source_type&&"CUSTOM"!==n.row.source_type?e("div",{staticStyle:{width:"120px",position:"absolute",top:"5px",right:"10px"}},[e("bk-select",{attrs:{clearable:!1,searchable:""},model:{value:n.row.value_key,callback:function(e){t.$set(n.row,"value_key",e)},expression:"props.row.value_key"}},t._l(t.variableList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)],1):e("div",{staticStyle:{width:"120px",position:"absolute",top:"4px",right:"10px"}},["string"===n.row.type||"number"===n.row.type?[e("bk-input",{attrs:{type:"string"===n.row.type?"text":"number",placeholder:t.$t("m.treeinfo['请输入参数值']")},model:{value:n.row.value,callback:function(e){t.$set(n.row,"value",e)},expression:"props.row.value"}})]:t._e(),t._v(" "),"boolean"===n.row.type?[e("bk-radio-group",{model:{value:n.row.value,callback:function(e){t.$set(n.row,"value",e)},expression:"props.row.value"}},[e("bk-radio",{attrs:{value:t.trueSatatus}},[t._v("true")]),t._v(" "),e("bk-radio",{attrs:{value:t.falseSatatus}},[t._v("false")])],1)]:t._e()],2)]:t._e()]}}])}),t._v(" "),e("bk-table-column",{attrs:{width:"60","class-name":"last-add-row-column"},scopedSlots:t._u([{key:"default",fn:function(n){return["array"===n.row.lastType?e("div",{staticClass:"bk-between-operat"},[e("i",{staticClass:"bk-itsm-icon icon-flow-add",on:{click:function(e){return t.addChildren(n.row)}}}),t._v(" "),"array"===n.row.lastType?e("i",{staticClass:"bk-itsm-icon icon-flow-reduce",class:{"bk-no-delete":t.countSon(n.row)},on:{click:function(e){return t.deletChildren(n.row)}}}):t._e()]):t._e()]}}])})],1)],1)},a=[];i._withStripped=!0},OcdN:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-flowlog-inherit"},[e("div",{staticClass:"mb20"},[e("bk-button",{staticClass:"mr10",attrs:{theme:"default","data-test-id":"ticket_button_createInheritTicket",title:t.ticketInfo.is_over||!t.ticketInfo.can_operate?t.$t("m.newCommon['暂无权限或单据已结束']"):t.$t("m.newCommon['新建']"),disabled:t.ticketInfo.is_over||!t.ticketInfo.can_operate},on:{click:t.openAddInheritSlider}},[t._v("\n      "+t._s(t.$t('m.newCommon["新建"]'))+"\n    ")]),t._v(" "),e("bk-button",{staticClass:"icon-cus",attrs:{theme:"default","data-test-id":"ticket_button_InheritTicketBindingHistory",title:t.historyList.length?t.$t("m.newCommon['绑定历史']"):t.$t("m.newCommon['暂无关联历史']"),icon:" bk-itsm-icon icon-history",disabled:!t.historyList.length},on:{click:t.showHistory}})],1),t._v(" "),"slave"!==t.masterOrSlave&&t.inheritStateList.length?t._e():e("div",{staticClass:"mb20"},[e("p",{staticClass:"inherit-table-tittle"},[t._v(t._s(t.$t('m.newCommon["母单"]')))]),t._v(" "),e("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.tableLoading},expression:"{ isLoading: tableLoading }"}],attrs:{data:t.inheritStateList,size:"small"}},[e("bk-table-column",{attrs:{label:t.$t("m.newCommon['单号']"),"min-width":"140","show-overflow-tooltip":!0,"render-header":t.$renderHeader},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticClass:"bk-lable-primary",attrs:{title:n.row.sn},on:{click:function(e){return t.checkOne(n.row)}}},[t._v("\n            "+t._s(n.row.sn)+"\n          ")])]}}],null,!1,3689745542)}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.newCommon['绑定时间']"),"render-header":t.$renderHeader,"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(n){return["UNBIND_FAILED"===n.row.related_status?e("span",{staticClass:"bk-failed-status"}):t._e(),t._v(" "),"RUNNING"===n.row.related_status?e("i",{staticClass:"bk-itsm-icon icon-inherit-loading bk-running-status"}):t._e(),t._v(" "),"UNBIND_FAILED"===n.row.related_status||"RUNNING"===n.row.related_status?e("span",[t._v(t._s(n.row.status))]):e("span",[t._v(t._s(n.row.bind_at))])]}}],null,!1,3573012165)}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.newCommon['操作']"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("bk-button",{attrs:{theme:"primary",text:"",disabled:"RUNNING"===n.row.related_status},on:{click:function(e){return t.giveUnbindInfo("one",n.row)}}},[t._v("\n            "+t._s(t.$t('m.newCommon["取消关联"]'))+"\n          ")])]}}],null,!1,623600814)}),t._v(" "),e("div",{staticClass:"empty",attrs:{slot:"empty"},slot:"empty"},[e("empty",{attrs:{"is-error":t.listError},on:{onRefresh:function(e){return t.getInheritStateList()}}})],1)],1)],1),t._v(" "),"master"!==t.masterOrSlave&&t.inheritStateList.length?t._e():e("div",{staticClass:"mb20"},[e("p",{staticClass:"inherit-table-tittle"},[t._v(t._s(t.$t('m.newCommon["子单"]')))]),t._v(" "),e("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.tableLoading},expression:"{ isLoading: tableLoading }"}],attrs:{data:t.inheritStateList,size:"small"},on:{"select-all":t.handleSelectAll,select:t.handleSelect}},[e("bk-table-column",{attrs:{type:"selection",width:"60",align:"center",selectable:t.disabledFn}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.newCommon['单号']"),"min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticClass:"bk-lable-primary",attrs:{title:n.row.sn},on:{click:function(e){return t.checkOne(n.row)}}},[t._v("\n            "+t._s(n.row.sn)+"\n          ")])]}}],null,!1,3689745542)}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.newCommon['绑定时间']")},scopedSlots:t._u([{key:"default",fn:function(n){return["UNBIND_FAILED"===n.row.related_status?e("span",{staticClass:"bk-failed-status"}):t._e(),t._v(" "),"RUNNING"===n.row.related_status?e("i",{staticClass:"bk-itsm-icon icon-inherit-loading bk-running-status loading"}):t._e(),t._v(" "),"UNBIND_FAILED"===n.row.related_status||"RUNNING"===n.row.related_status?e("span",[t._v(t._s(n.row.status))]):e("span",[t._v(t._s(n.row.bind_at))])]}}],null,!1,2708366755)})],1)],1),t._v(" "),e("div",{staticClass:"inherit-bottom-button"},[e("bk-button",{attrs:{"data-test-id":"ticket_button_batchUnbind",theme:"default",title:t.$t("m.newCommon['批量解绑']"),disabled:!t.checkList.length},on:{click:function(e){return t.giveUnbindInfo("batch")}}},[t._v("\n      "+t._s(t.$t('m.newCommon["批量解绑"]'))+"\n    ")])],1),t._v(" "),e("bk-dialog",{attrs:{"render-directive":"if",title:t.historyInfo.title,width:t.historyInfo.width,"header-position":t.historyInfo.headerPosition,loading:t.secondClick,"auto-close":t.historyInfo.autoClose,"mask-close":t.historyInfo.autoClose},model:{value:t.historyInfo.isShow,callback:function(e){t.$set(t.historyInfo,"isShow",e)},expression:"historyInfo.isShow"}},[e("div",{staticStyle:{width:"100%","max-height":"347px"}},[e("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.historyTableLoading},expression:"{ isLoading: historyTableLoading }"}],attrs:{data:t.historyList,size:"small"}},[e("bk-table-column",{attrs:{label:t.$t("m.newCommon['单号']"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticClass:"bk-lable-primary",attrs:{title:n.row.sn},on:{click:function(e){return t.checkOne(n.row)}}},[t._v("\n              "+t._s(n.row.sn)+"\n            ")])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.newCommon['状态']"),width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s("master"===e.row.related_type?t.$t('m.newCommon["母单"]'):t.$t('m.newCommon["子单"]'))+"\n          ")]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.newCommon['绑定时间']"),prop:"create_at"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.newCommon['解绑时间']"),prop:"end_at"}})],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("bk-button",{attrs:{theme:"default"},on:{click:t.closeHistory}},[t._v("\n        "+t._s(t.$t('m.home["取消"]'))+"\n      ")])],1)]),t._v(" "),e("bk-sideslider",{attrs:{"is-show":t.isShowAddInheritTicket,"quick-close":!0,title:t.$t("m.newCommon['新建母子单']"),"before-close":t.closeSideslider,width:750},on:{"update:isShow":function(e){t.isShowAddInheritTicket=e},"update:is-show":function(e){t.isShowAddInheritTicket=e}}},[e("div",{staticClass:"p20",attrs:{slot:"content"},slot:"content"},[t.isShowAddInheritTicket?e("inherit-ticket-add-dialog",{ref:"addInheritTicket",attrs:{"template-info":t.inheritStateInfo,"ticket-info":t.ticketInfo},on:{close:function(e){t.isShowAddInheritTicket=!1}}}):t._e()],1)])],1)},a=[];i._withStripped=!0},OeTS:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.getLogFlag},expression:"{ isLoading: getLogFlag }"}],staticClass:"bk-sign-node-content"},[e("div",{staticClass:"bk-log-flow"},[t.logs.length?[e("time-line",{attrs:{"line-list":t.logs,parent:"sign"},scopedSlots:t._u([{key:"header",fn:function({item:n}){return[e("div",{staticClass:"bk-timeline-user-header"},[e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:n.message,expression:"item.message",modifiers:{top:!0}}],staticClass:"bk-inline-block bk-default-width"},[t._v(t._s(n.message))]),t._v(" "),"processors"!==n.tag?e("span",{staticClass:"bk-inline-block button"},[n.showMore?e("span",{staticClass:"bk-inline-block isOff auto",on:{click:function(t){n.showMore=!n.showMore}}},[t._v(t._s(t.$t('m.newCommon["收起"]'))),e("i",{staticClass:"bk-icon icon-angle-up bk-selector-icon ml5"})]):e("span",{staticClass:"bk-inline-block isOn auto",on:{click:function(t){n.showMore=!n.showMore}}},[t._v(t._s(t.$t('m.newCommon["展开"]'))+"\n                "),e("i",{staticClass:"bk-icon icon-angle-down bk-selector-icon ml5"})])]):t._e()])]}},{key:"content",fn:function({item:n}){return[e("div",{staticClass:"bk-timeline-user-content"},[n.showMore?e("div",{staticClass:"bk-area-show-back"},[t._l(n.form_data,(function(t,n){return[e("fields-done",{key:n,attrs:{item:t,origin:"log"}})]}))],2):t._e(),t._v(" "),e("div",{staticClass:"bk-timeline-user-footer"},[t._v("\n              "+t._s(n.operate_at)+"\n            ")])])]}}],null,!1,2956140056)})]:[e("p",{staticClass:"no-data"},[t._v(t._s(t.$t("m.newCommon['暂无信息']")))])]],2)])},a=[];i._withStripped=!0},OjKp:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-webhook-node-content"},[e("div",{staticClass:"bk-page bk-auto-node-basic"},[e("p",{staticClass:"bk-header-bold"},[t._v(t._s(t.$t('m.newCommon["基本信息"]')))]),t._v(" "),e("div",{staticClass:"bk-main bk-flex"},[e("div",{staticClass:"bk-node-name"},[e("span",[t._v(t._s(t.$t('m.newCommon["节点名称"]'))+" : ")]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.name||"--"))])])])]),t._v(" "),e("div",{staticClass:"bk-page bk-auto-node-basic"},[e("p",{staticClass:"bk-header-bold"},[t._v(t._s(t.$t('m.newCommon["任务参数"]')))]),t._v(" "),e("div",{staticClass:"bk-param"},[e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v("Url:")]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.api_info.webhook_info.url||"--"))])]),t._v(" "),e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v("Method:")]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.api_info.webhook_info.method||"--"))])]),t._v(" "),e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v("Query:")]),t._v(" "),0===t.queryList.length?e("span",[t._v("--")]):t._e()]),t._v(" "),0!==t.queryList.length?e("bk-table",{attrs:{data:t.queryList,"ext-cls":"bk-editor-table"}},[e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['字段名']"),prop:"key"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['参数值']"),width:"400"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(n.row.value||"--"))])]}}],null,!1,3905507693)})],1):t._e(),t._v(" "),e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v("Body:")]),t._v(" "),e("span",[t._v(t._s(t.bodyParams.raw||"--"))])]),t._v(" "),0!==t.bodyParams.form.length?e("bk-table",{attrs:{data:t.bodyParams.form,"ext-cls":"bk-editor-table"}},[e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['字段名']"),prop:"key"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['参数值']"),width:"400"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(n.row.value||"--"))])]}}],null,!1,3905507693)})],1):t._e(),t._v(" "),t._m(0),t._v(" "),e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t("m.treeinfo['请求超时']"))+":")]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.api_info.webhook_info.timeout||"--"))])]),t._v(" "),e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t("m.treeinfo['返回变量']"))+":")]),t._v(" "),0===t.variableList.length?e("span",[t._v("--")]):t._e()]),t._v(" "),0!==t.variableList.length?e("bk-table",{attrs:{data:t.variableList,"ext-cls":"bk-editor-table"}},[e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['字段名']"),prop:"name"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['参数值']")},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(t.convertValue(n.row.value)))])]}}],null,!1,3915158224)}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['路径']"),prop:"ref_path"}})],1):t._e()],1)]),t._v(" "),e("div",{staticClass:"bk-page bk-auto-node-basic"},[e("p",{staticClass:"bk-header-bold"},[t._v(t._s(t.$t('m.taskTemplate["执行详情"]')))]),t._v(" "),e("div",[e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.taskTemplate["执行状态："]')))]),t._v(" "),e("span",{class:{statusShow:!0,statusSuccess:"FINISHED"===t.status,statusRunning:"RUNNING"===t.status,statusFailed:"FAILED"===t.status}},[t._v("\n          "+t._s(t.status||"--"))])]),t._v(" "),e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.common["开始时间："]')))]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.create_at))])]),t._v(" "),e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.common["结束时间："]')))]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.end_at||t.$t('m.taskTemplate["尚未结束"]'))+"\n        ")])]),t._v(" "),e("div",{staticClass:"bk-partition errorDiv"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.taskTemplate["错误信息："]')))])]),t._v(" "),e("div",{staticClass:"langError"},[t._v(t._s(t.nodeInfo.api_info.error_message||"--"))])])])])},a=[function(){var t=this._self._c;return t("p",{staticClass:"bk-partition"},[t("b",{staticClass:"bk-base-label"},[this._v("Settings:")])])}];i._withStripped=!0},OkDz:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Jwqd"),a={column:{type:Array,default:function(){return[{name:"操作",type:"text",key:"column1"},{name:"关联相关内容",key:"column2",scheme:"table_text_scheme",attrs:{}},{name:"申请期限",type:"text",key:"column3",attrs:{sort:!0}}]}},value:{type:Array,default:function(){return[]}}};e.default={name:"TagTable",components:{ViewItem:function(){return Promise.resolve().then(n.bind(null,"UsFA"))}},mixins:[(0,i.getFormMixins)(a)],methods:{getScheme:function(t,e){var n=this.getContext().schemes;return e&&e.scheme&&n[e.scheme]?n[e.scheme]:t.scheme?n[t.scheme]:e&&e.type?{type:e.type}:{type:t.type}}}}},"Om//":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isDataLoading},expression:"{ isLoading: isDataLoading }"}],staticClass:"bk-add-field"},[e("bk-form",{ref:"fieldForm",staticClass:"bk-add-field bk-form-vertical",attrs:{"label-width":200,"form-type":t.formAlign,model:t.formInfo,rules:t.rules}},[Object.keys(t.sospInfo).length?[e("bk-form-item",{style:{marginTop:"vertical"===t.formAlign?0:"20px"},attrs:{label:t.$t("m.treeinfo['前置节点']"),required:!0,property:"prevId","error-display-type":"normal","ext-cls":"bk-mt0-item"}},[e("bk-select",{attrs:{searchable:""},on:{change:function(e){return t.$emit("change")}},model:{value:t.formInfo.prevId,callback:function(e){t.$set(t.formInfo,"prevId",e)},expression:"formInfo.prevId"}},t._l(t.prevNodeList,(function(t){return e("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1)],1)]:t._e(),t._v(" "),e("bk-form-item",{style:{marginTop:"vertical"===t.formAlign?0:"20px"},attrs:{"data-test-id":"field-input-fieldName",label:t.$t("m.treeinfo['字段名']"),required:!0,property:"name","error-display-type":"normal","ext-cls":"bk-halfline-item bk-halfline-margin"}},[e("bk-input",{attrs:{maxlength:"120",disabled:"TABLE"===t.changeInfo.source&&"bk_biz_id"!==t.formInfo.key,placeholder:t.$t("m.treeinfo['请输入字段显示名']")},on:{change:t.fieldNameChange,input:t.putKey},model:{value:t.formInfo.name,callback:function(e){t.$set(t.formInfo,"name",e)},expression:"formInfo.name"}})],1),t._v(" "),e("bk-form-item",{style:{marginTop:"vertical"===t.formAlign?0:"20px"},attrs:{label:t.$t("m.treeinfo['唯一标识']"),required:!0,property:"key","error-display-type":"normal","ext-cls":"bk-halfline-item"}},[e("bk-input",{attrs:{placeholder:t.$t("m.treeinfo['请输入唯一标识']"),disabled:"number"==typeof t.changeInfo.id||t.changeInfo.is_builtin||"TABLE"===t.changeInfo.source},on:{change:function(e){return t.$emit("change")}},model:{value:t.formInfo.key,callback:function(e){t.$set(t.formInfo,"key",e)},expression:"formInfo.key"}})],1),t._v(" "),e("bk-form-item",{attrs:{"data-test-id":"field-select-fieldType",label:t.$t("m.treeinfo['字段类型']"),required:!0,property:"type","error-display-type":"normal","ext-cls":"bk-halfline-item bk-halfline-margin bk-mt20-item"}},[e("bk-select",{attrs:{clearable:!1,disabled:(t.changeInfo.is_builtin||"TABLE"===t.changeInfo.source||t.changeInfo.meta&&"APPROVE_RESULT"===t.changeInfo.meta.code)&&"bk_biz_id"!==t.formInfo.key,searchable:""},on:{selected:t.changeType},model:{value:t.formInfo.type,callback:function(e){t.$set(t.formInfo,"type",e)},expression:"formInfo.type"}},t._l(t.fieldTypeList,(function(t){return e("bk-option",{key:t.typeName,attrs:{id:t.typeName,name:t.name}})})),1)],1),t._v(" "),e("bk-form-item",{attrs:{label:t.$t("m.treeinfo['校验方式']"),required:!0,"error-display-type":"normal","ext-cls":"bk-halfline-item bk-mt20-item"}},[e("bk-select",{attrs:{clearable:!1,disabled:(t.changeInfo.is_builtin||"TABLE"===t.changeInfo.source||t.changeInfo.meta&&"APPROVE_RESULT"===t.changeInfo.meta.code)&&"bk_biz_id"!==t.formInfo.key,searchable:""},on:{selected:t.changeRegex},model:{value:t.formInfo.regex,callback:function(e){t.$set(t.formInfo,"regex",e)},expression:"formInfo.regex"}},t._l(t.regexList,(function(t){return e("bk-option",{key:t.typeName,attrs:{id:t.typeName,name:t.name}})})),1)],1),t._v(" "),"ASSOCIATED_FIELD_VALIDATION"!==t.formInfo.regex||t.isEditPublic?t._e():e("div",{staticClass:"bk-form-item bk-relate-conditions",staticStyle:{width:"100%"}},[e("div",{staticClass:"bk-form-content",staticStyle:{"margin-left":"0"}},[e("p",{staticClass:"bk-form-p"},[t._v(t._s(t.$t('m.newCommon["字段间关系"]')))]),t._v(" "),e("bk-radio-group",{on:{change:function(e){return t.$emit("change")}},model:{value:t.formInfo.regex_config.rule.type,callback:function(e){t.$set(t.formInfo.regex_config.rule,"type",e)},expression:"formInfo.regex_config.rule.type"}},[e("bk-radio",{attrs:{value:"and","ext-cls":"mr20"}},[t._v(t._s(t.$t("m.treeinfo['且']")))]),t._v(" "),e("bk-radio",{attrs:{value:"or"}},[t._v(t._s(t.$t("m.treeinfo['或']")))])],1)],1),t._v(" "),t._l(t.formInfo.regex_config.rule.expressions,(function(n,i){return e("div",{key:i,staticClass:"bk-between-form"},[e("p",{staticClass:"current-field"},[t._v(t._s(t.$t('m.newCommon["当前字段"]')))]),t._v(" "),e("bk-select",{staticStyle:{width:"120px"},attrs:{"ext-cls":"field-valid-select",clearable:!1},on:{change:function(e){return t.$emit("change")}},model:{value:n.condition,callback:function(e){t.$set(n,"condition",e)},expression:"expression.condition"}},t._l(t.betweenList,(function(t){return e("bk-option",{key:t.id,attrs:{id:t.typeName,name:t.name}})})),1),t._v(" "),e("bk-select",{staticStyle:{width:"210px"},attrs:{"ext-cls":"field-valid-select",clearable:!1},on:{change:function(e){return t.onRegexFieldChange(e,n)}},model:{value:n.key,callback:function(e){t.$set(n,"key",e)},expression:"expression.key"}},t._l(t.regexFieldList,(function(t){return e("bk-option",{key:t.id,attrs:{id:t.key,name:t.name}})})),1),t._v(" "),e("div",{staticClass:"bk-between-operate"},[e("i",{staticClass:"bk-itsm-icon icon-flow-add",on:{click:function(e){return t.addExpression()}}}),t._v(" "),e("i",{staticClass:"bk-itsm-icon icon-flow-reduce",class:{"bk-no-delete":1===t.formInfo.regex_config.rule.expressions.length},on:{click:function(e){return t.deleteExpression(i)}}})])],1)}))],2),t._v(" "),"CUSTOM"===t.formInfo.regex?[e("bk-form-item",{attrs:{label:t.$t("m.treeinfo['正则规则']"),required:!0,property:"key","error-display-type":"normal","ext-cls":"bk-halfline-item bk-halfline-margin bk-mt20-item"}},[e("bk-input",{attrs:{disabled:(t.changeInfo.is_builtin||"TABLE"===t.changeInfo.source)&&"bk_biz_id"!==t.formInfo.key,placeholder:t.$t("m.treeinfo['请输入正则规则']")},on:{change:function(e){return t.$emit("change")}},model:{value:t.formInfo.customRegex,callback:function(e){t.$set(t.formInfo,"customRegex",e)},expression:"formInfo.customRegex"}})],1)]:t._e()],2),t._v(" "),e("bk-form",{ref:"dataForm",staticClass:"bk-form-vertical",attrs:{"label-width":200,"form-type":t.formAlign,model:t.formInfo}},[t.showType.sourceList.some(e=>e===t.formInfo.type)?[e("bk-form-item",{attrs:{label:t.$t("m.treeinfo['数据源']"),required:!0,"ext-cls":"bk-mt20-item"}},[e("data-source",{ref:"dataSource",attrs:{"form-info":t.formInfo,"prc-data":t.prcData,"change-info":t.assignValue,"api-info":t.apiInfo.api_info,"dictionary-data":t.dictionaryData},on:{changeApiInfo:t.changeApiInfo,getRpcData:t.getRpcData}})],1),t._v(" "),"DATADICT"!==t.formInfo.source_type&&"RPC"!==t.formInfo.source_type||"RPC"===t.formInfo.source_type&&t.prcTable.length?[t._l(t.globalChoise.source_type,(function(n,i){return[n.typeName===t.formInfo.source_type?e("bk-form-item",{key:i,attrs:{label:n.name,desc:n.desc,required:!0,"ext-cls":"bk-mt20-item"}},[t.isShowDataSourcebtn?e("bk-button",{staticClass:"configuration-data-source",attrs:{disabled:t.isDisabled,theme:"primary",title:t.$t("m['配置数据源']"),outline:!0},on:{click:t.openDataSource}},[t._v(t._s(t.$t("m['配置数据源']")))]):t._e(),t._v(" "),e("bk-dialog",{attrs:{width:"960",title:"API"===t.formInfo.source_type?t.$t("m['配置接口数据']"):t.$t("m['配置自定义数据']"),theme:"primary","auto-close":!1,"mask-close":!1},on:{confirm:t.validateContent},model:{value:t.isShowDataSource,callback:function(e){t.isShowDataSource=e},expression:"isShowDataSource"}},[e("data-content",{ref:"dataContent",refInFor:!0,attrs:{"form-info":t.formInfo,workflow:t.workflow,state:t.state,"change-info":t.assignValue,"api-detail":t.apiDetail,"api-info":t.apiInfo.api_info,"kv-relation":t.apiInfo.kv_relation,"prc-table":t.prcTable,"field-info":t.fieldInfo}})],1)],1):t._e()]}))]:t._e()]:t._e(),t._v(" "),"CUSTOMTABLE"===t.formInfo.type?[e("bk-form-item",{attrs:{"data-test-id":"field_form_custom",label:t.$t("m.treeinfo['自定义数据']"),required:!0,"ext-cls":"bk-mt20-item"}},[e("div",{on:{click:function(e){t.checkStatus.customTableStatus=!1}}},[e("custom-table-data",{attrs:{"custom-table-info":t.customTableInfo}}),t._v(" "),t.checkStatus.customTableStatus?e("p",{staticClass:"bk-field-error"},[t._v(t._s(t.$t('m.treeinfo["请填写正确格式的自定义数据"]')))]):t._e()],1),t._v(" "),(t.changeInfo.is_builtin||"TABLE"===t.changeInfo.source||t.changeInfo.meta&&"APPROVE_RESULT"===t.changeInfo.meta.code)&&"bk_biz_id"!==t.formInfo.key?e("div",{staticClass:"bk-form-disabled"}):t._e()])]:t._e(),t._v(" "),"FILE"===t.formInfo.type?[e("bk-form-item",{attrs:{"ext-cls":"bk-input-position bk-mt20-item",label:t.$t("m.treeinfo['上传附件模板']")}},[e("bk-button",{attrs:{theme:"default",title:t.$t("m.treeinfo['点击上传']")}},[t._v("\n          "+t._s(t.$t("m.treeinfo['点击上传']"))+"\n        ")]),t._v(" "),e("input",{staticClass:"bk-input-file",attrs:{type:"file"},domProps:{value:t.fileVal},on:{change:t.handleFile}}),t._v(" "),e("ul",{staticClass:"bk-file-list"},t._l(t.fileList,(function(n,i){return e("li",{key:i},[e("span",{staticClass:"bk-file-success"},[e("i",{staticClass:"bk-icon icon-check-1"})]),t._v(" "),e("span",[t._v(t._s(n.name))]),t._v(" "),e("span",{staticClass:"bk-file-delete",on:{click:function(e){return t.deleteFile(n,i)}}},[t._v("×")])])})),0),t._v(" "),!t.changeInfo.is_builtin&&"TABLE"!==t.changeInfo.source||"bk_biz_id"===t.formInfo.key?t._e():e("div",{staticClass:"bk-form-disabled"})],1)]:t._e(),t._v(" "),t.showType.belongDefaultList.some(e=>t.formInfo.type===e)?[e("bk-form-item",{attrs:{label:t.$t("m.treeinfo['默认值']"),"ext-cls":"bk-mt20-item"}},[e("default-value",{attrs:{"form-info":t.formInfo,"field-info":t.fieldInfo,"dictionary-data":t.dictionaryData,"change-info":t.changeInfo,"api-info":t.apiInfo,"check-status":t.checkStatus,label:t.$t("m.treeinfo['默认值']")}})],1)]:t._e(),t._v(" "),t.addOrigin.isOther&&"publicField"===t.addOrigin.addOriginInfo.type?t._e():[e("bk-form-item",{attrs:{"ext-cls":"bk-halfline-item bk-halfline-margin bk-mt20-item",label:t.$t("m.treeinfo['布局要求']"),required:!0}},[e("bk-radio-group",{on:{change:function(e){return t.$emit("change")}},model:{value:t.formInfo.layout,callback:function(e){t.$set(t.formInfo,"layout",e)},expression:"formInfo.layout"}},[t._l(t.globalChoise.layout_type,(function(n,i){return[e("bk-radio",{key:i,attrs:{"ext-cls":"mr20",value:n.typeName,disabled:t.showType.layoutList.some(e=>e===t.formInfo.type)}},[t._v("\n              "+t._s(n.name)+"\n            ")])]}))],2)],1),t._v(" "),e("bk-form-item",{attrs:{"ext-cls":"bk-halfline-item bk-mt20-item",label:t.$t("m.treeinfo['字段必填']"),required:!0}},[e("bk-radio-group",{on:{change:function(e){return t.$emit("change")}},model:{value:t.formInfo.validate,callback:function(e){t.$set(t.formInfo,"validate",e)},expression:"formInfo.validate"}},[t._l(t.globalChoise.validate_type,(function(n,i){return[e("bk-radio",{key:i,attrs:{"ext-cls":"mr20",value:n.typeName,disabled:"title"===t.changeInfo.key||t.changeInfo.is_builtin||"bk_biz_id"===t.formInfo.key}},[t._v("\n              "+t._s(n.name)+"\n            ")])]}))],2)],1)],t._v(" "),e("bk-form-item",{attrs:{"ext-cls":"bk-tanble-height bk-mt20-item",label:t.$t("m.treeinfo['填写说明']")}},[e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.formInfo.desc,expression:"formInfo.desc",modifiers:{trim:!0}}],staticClass:"bk-form-textarea bk-textarea-tanble bk-halfline-item bk-halfline-margin field-input-tips",attrs:{placeholder:t.$t("m.treeinfo['请输入字段填写说明']")},domProps:{value:t.formInfo.desc},on:{change:function(e){return t.$emit("change")},input:function(e){e.target.composing||t.$set(t.formInfo,"desc",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),e("p",{staticClass:"field-tips-checkbox",staticStyle:{"margin-left":"335px"}},[e("bk-checkbox",{attrs:{"true-value":t.trueStatus,"false-value":t.falseStatus},on:{change:function(e){return t.$emit("change")}},model:{value:t.formInfo.is_tips,callback:function(e){t.$set(t.formInfo,"is_tips",e)},expression:"formInfo.is_tips"}},[t._v("\n          "+t._s(t.$t('m.treeinfo["添加额外提示说明"]'))+"\n        ")])],1)]),t._v(" "),t.formInfo.is_tips?[e("bk-form-item",{attrs:{label:t.$t("m.treeinfo['字段释疑']"),required:!0,"ext-cls":"bk-mt20-item"}},[e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.formInfo.tips,expression:"formInfo.tips",modifiers:{trim:!0}}],staticClass:"bk-form-textarea bk-textarea-tanble bk-halfline-item bk-halfline-margin",attrs:{placeholder:t.$t("m.treeinfo['请输入，用于鼠标经过提示']")},domProps:{value:t.formInfo.tips},on:{change:function(e){return t.$emit("change")},input:function(e){e.target.composing||t.$set(t.formInfo,"tips",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),e("p",{staticClass:"bk-label-tips"},[e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:t.formInfo.tips||t.$t("m.treeinfo['字段释疑填填看哦']"),expression:"(formInfo.tips || $t(`m.treeinfo['字段释疑填填看哦']`))",modifiers:{top:!0}}]},[t._v("\n            "+t._s(t.$t('m.treeinfo["效果预览"]'))+"\n          ")])])])]:t._e(),t._v(" "),t.addOrigin.isOther&&"publicField"===t.addOrigin.addOriginInfo.type||!t.changeInfo.meta||"APPROVE_RESULT"===t.changeInfo.meta.code?t._e():[e("bk-form-item",{attrs:{label:t.$t("m.treeinfo['是否设置字段隐藏条件']"),"ext-cls":"bk-mt20-item"}},[e("bk-switcher",{attrs:{size:"small",disabled:"title"===t.changeInfo.key},on:{change:function(e){return t.$emit("change")}},model:{value:t.formInfo.show_type,callback:function(e){t.$set(t.formInfo,"show_type",e)},expression:"formInfo.show_type"}})],1),t._v(" "),t.formInfo.show_type?[e("bk-form-item",{attrs:{label:t.$t("m.treeinfo['隐藏条件']"),desc:t.$t("m.treeinfo['字段默认为显示。当满足以下配置条件时，该字段将会被隐藏。']"),"ext-cls":"bk-mt20-item"}},[e("hidden-conditions",{ref:"hiddenConditions",attrs:{"template-info":t.templateInfo,"template-stage":t.templateStage,"add-origin":t.addOrigin,workflow:t.workflow,state:t.state,"form-info":t.formInfo}})],1)]:t._e()]],2),t._v(" "),e("div",{staticClass:"operate-btns mt20"},[e("bk-button",{staticClass:"mr10",attrs:{theme:"primary","data-test-id":"field_button_submit",title:t.$t("m.treeinfo['提交']"),loading:t.secondClick},on:{click:t.checkInfo}},[t._v("\n      "+t._s(t.$t("m.treeinfo['提交']"))+"\n    ")]),t._v(" "),e("bk-button",{staticClass:"mr10",attrs:{theme:"default","data-test-id":"field_button_cancel",title:t.$t("m.treeinfo['取消']"),disabled:t.secondClick},on:{click:t.onCancelClick}},[t._v("\n      "+t._s(t.$t("m.treeinfo['取消']"))+"\n    ")])],1)],1)},a=[];i._withStripped=!0},OuIK:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this._self._c;return t("div",{staticClass:"bk-approval-node-content"},[t("h3",{staticClass:"bk-basic-h3"},[this._v(this._s(this.$t('m.newCommon["节点信息"]')))]),this._v(" "),this._l(this.nodeInfo.fields,(function(e,n){return[t("fields-done",{key:n,attrs:{item:e,origin:"notLog"}})]}))],2)},a=[];i._withStripped=!0},OzIr:function(t,e,n){},Ozxi:function(t,e,n){"use strict";n.r(e);var i=n("f3l7"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"P+p4":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("P2sY"),s=(i=a)&&i.__esModule?i:{default:i},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("wsa1"));var r={language:"javascript",theme:"vs-dark",automaticLayout:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"same"};e.default={name:"CodeEditor",props:{value:{type:String,default:""},options:{type:Object,default:function(){return{}}}},data:function(){return{editorOptions:(0,s.default)({},r,this.options,{value:this.value}),monacoInstance:null}},watch:{value:function(t){t!==this.monacoInstance.getValue()&&this.monacoInstance.setValue(t)},options:{deep:!0,handler:function(t){this.editorOptions=(0,s.default)({},r,t,{value:this.value}),this.updateOptions()}}},mounted:function(){this.initIntance()},beforeDestroy:function(){this.monacoInstance&&this.monacoInstance.dispose()},methods:{initIntance:function(){var t=this;this.monacoInstance=o.editor.create(this.$el,this.editorOptions);var e=this.monacoInstance.getModel();if(e.setEOL(0),this.value.indexOf("\r\n")>-1){var n=document.createElement("textarea");n.value=this.value,this.$emit("input",n.value)}e.onDidChangeContent((function(){var e=t.monacoInstance.getValue();t.$emit("input",e)})),this.monacoInstance.addCommand(o.KeyMod.CtrlCmd|o.KeyCode.KEY_S,(function(){var e=t.monacoInstance.getValue();t.$emit("saveContent",e)}))},updateOptions:function(){this.monacoInstance.updateOptions(this.editorOptions)}}}},P0kt:function(t,e,n){"use strict";n.r(e);var i=n("/5i8"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},P2aA:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"devops-preview",class:{"full-screen":t.isFullScreen}},[e("header",{staticClass:"devops-header"},[t.isFullScreen?e("span",{staticClass:"exit-full-screen",on:{click:function(e){return e.stopPropagation(),t.onCloseFullScreen.apply(null,arguments)}}},[e("i",{staticClass:"bk-itsm-icon icon-order-close"}),t._v(" "),e("span",{staticClass:"exit-text"},[t._v(t._s(t.$t("m.common['退出全屏']")))])]):e("i",{staticClass:"bk-itsm-icon icon-order-open",on:{click:function(e){return e.stopPropagation(),t.openFullScreen()}}})]),t._v(" "),e("section",{staticClass:"devops-preview-wrap"},[e("div",{staticClass:"devops-preview-body"},t._l(t.stages,(function(n,i){return e("div",{key:n.id,staticClass:"stage"},[e("span",{staticClass:"stage-connect-line"}),t._v(" "),e("h4",{staticClass:"stage-name"},[t._v(t._s(n.name))]),t._v(" "),t._l(n.containers,(function(a,s){return e("ul",{key:a.id,staticClass:"containers"},[0!==i?e("svg",{staticClass:"container-connect-line left",style:t.getSvgStyle(n,s),attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"60",height:0===s?70:56*(n.containers[s-1].elements.length+1)}},[e("path",{attrs:{d:t.getPath(n,s)}})]):t._e(),t._v(" "),e("svg",{staticClass:"container-connect-line",style:t.getSvgStyle(n,s),attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"60",height:0===s?70:56*(n.containers[s-1].elements.length+1)}},[e("path",{attrs:{d:t.getPath(n,s)}})]),t._v(" "),e("li",{staticClass:"element container-title"},[t._v("\n            "+t._s(a.name)+"\n            "),0!==i?e("span",{staticClass:"semicircle"}):t._e(),t._v(" "),0!==i?e("span",{staticClass:"triangle"}):t._e()]),t._v(" "),t._l(a.elements,(function(n){return e("li",{key:n.id,class:["element",{"not-execute":!t.isElementCanExecute(n)}]},[t._v("\n            "+t._s(n.name)+"\n          ")])}))],2)}))],2)})),0),t._v(" "),t.loading?e("div",{staticClass:"loading"},[e("i",{staticClass:"bk-itsm-icon icon-icon-loading"}),t._v(" "),e("span",[t._v(t._s(t.$t("m.tickets['预览正在加载中']")))])]):t._e()])])},a=[];i._withStripped=!0},"PAS+":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{class:["bk-content-node","state_id_"+t.nodeInfo.state_id]},[t.isLastNode?t._e():e("div",{staticClass:"bk-content-line"}),t._v(" "),e("div",{class:["bk-node-info",{"full-screen":t.isFullScreen}]},[e("div",{staticClass:"bk-node-header"},[2===t.nodeInfo.sla_task_status?e("p",{staticClass:"sla-time-info",style:{background:t.slaInfo.isTimeOut?"#ffeded":"#fafbfd"}},[e("span",{staticClass:"bk-operation-timeout",style:"color: "+t.slaInfo.color},[e("i",{class:["bk-itsm-icon",t.slaInfo.isTimeOut?"icon-itsm-icon-mark-eight":"icon-clock-new"]}),t._v(" "),e("span",{staticStyle:{"margin-left":"8px"}},[t._v("\n            "+t._s(t.slaInfo.isTimeOut?t.$t('m.newCommon["超时："]'):t.$t('m.newCommon["剩余："]'))+t._s(t.nodeInfo.sla_timeout)+"\n          ")]),t._v(" "),e("span",{staticStyle:{"margin-left":"5px"}},[t._v("\n            "+t._s(t.$t('m.newCommon["计划完成时间："]'))+t._s(t.nodeInfo.sla_deadline||"--")+"\n          ")])])]):t._e(),t._v(" "),e("p",{staticClass:"bk-node-title"},[e("span",{staticClass:"node-name"},[t._v(t._s(t.nodeAutoPass()?`(${t.nodeInfo.name})`+t.$t("m['审批节点已自动处理']"):t.nodeInfo.name))]),t._v(" "),e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips",value:{allowHtml:!0,theme:"light",content:"#processor-tips-content",placement:"top",duration:300},expression:"{\n            allowHtml: true,\n            theme: 'light',\n            content: '#processor-tips-content',\n            placement: 'top',\n            duration: 300\n          }"}],ref:"processorsSpan"+t.index,staticClass:"node-title-processor"},[t._v("\n          "+t._s(t.$t("m.newCommon['处理人：']"))+t._s(t.currSignProcessorInfo?t.signProcessors:t.nodeInfo.processors)+"\n        ")]),t._v(" "),e("bk-popover",{attrs:{placement:"top",theme:"light",trigger:"click"}},["SIGN"===t.nodeInfo.type?e("span",{staticClass:"bk-processor-check"},[t._v("\n            "+t._s(t.nodeInfo.is_sequential?t.$t("m.newCommon['点击查看']"):t.$t("m.newCommon['查看会签顺序']"))+"\n          ")]):t._e(),t._v(" "),e("div",{staticClass:"bk-processor-content",attrs:{slot:"content"},slot:"content"},t._l(t.nodeInfo.tasks,(function(n,i){return e("div",{key:i,staticClass:"bk-processor-one"},[t.nodeInfo.is_sequential&&i?e("div",{staticClass:"bk-arrow"},[e("i",{staticClass:"bk-itsm-icon icon-arrow-long arrow-cus"})]):t._e(),t._v(" "),e("div",{staticClass:"bk-processor-span"},[e("span",{staticClass:"mr5 ml5"},[t._v(t._s(n.processor))]),t._v(" "),e("span",["FINISHED"===n.status?e("i",{staticClass:"bk-itsm-icon icon-icon-finish icon-icon-finish-cus"}):t._e(),t._v(" "),t.nodeInfo.is_sequential&&"WAIT"===n.status&&(t.nodeInfo.tasks[i-1]&&"FINISHED"===t.nodeInfo.tasks[i-1].status||!i)?e("span",{staticClass:"loading"},[e("i",{staticClass:"bk-itsm-icon icon-icon-loading icon-icon-loading-cus"})]):t._e()])])])})),0)]),t._v(" "),e("task-status",{attrs:{status:t.nodeInfo.status,"node-type":t.nodeInfo.type}})],1),t._v(" "),t.nodeInfo.desc?e("p",{staticClass:"bk-node-desc"},[e("i",{staticClass:"bk-itsm-icon icon-itsm-icon-speak",staticStyle:{"margin-right":"6px","padding-top":"2px"}}),e("span",[t._v(t._s(t.nodeInfo.desc))])]):t._e(),t._v(" "),e("span",{staticClass:"right-float"},[t.nodeInfo.is_reply_need?e("bk-button",{staticClass:"bk-sla-respons mr10",attrs:{disabled:t.nodeInfo.is_replied,icon:t.nodeInfo.is_replied?"bk-icon icon-check-1":"",loading:t.replyBtnLoading},on:{click:function(e){return t.replyAssignDeliver()}}},[t._v("\n          "+t._s(t.$t("m['响应']"))+"\n        ")]):t._e(),t._v(" "),e("span",{staticClass:"full-screen-wrap"},[t.isFullScreen?e("span",{staticClass:"exit-full-screen",on:{click:function(e){return e.stopPropagation(),t.onCloseFullScreen.apply(null,arguments)}}},[e("i",{staticClass:"bk-itsm-icon icon-order-close"}),t._v(" "),e("span",{staticClass:"exit-text"},[t._v(t._s(t.$t("m.common['退出全屏']")))])]):e("i",{staticClass:"bk-itsm-icon icon-order-open",on:{click:function(e){return e.stopPropagation(),t.openFullScreen(t.nodeInfo)}}})])],1)]),t._v(" "),t.readOnly?t._e():e("collapse-transition",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.unfold,expression:"unfold"}],staticClass:"bk-node-form"},["SUSPEND"===t.nodeInfo.status?e("div",{staticClass:"bk-node-disabled"}):t._e(),t._v(" "),t.hasNodeOptAuth?e("div",{staticClass:"bk-form bk-form-vertical"},[t.nodeInfo.can_create_task||t.nodeInfo.can_execute_task?e("node-task-list",{attrs:{"node-info":t.nodeInfo,"ticket-info":t.ticketInfo},on:{updateCurrentStep:t.successFn}}):t._e(),t._v(" "),"FAILED"!==t.nodeInfo.status||"TASK-SOPS"!==t.nodeInfo.type&&"TASK-DEVOPS"!==t.nodeInfo.type&&"WEBHOOK"!==t.nodeInfo.type?t._e():e("sops-and-devops-task",{attrs:{constants:t.constants,"hooked-var-list":t.hookedVarList,"node-info":t.nodeInfo,"pipeline-list":t.pipelineList,"constant-default-value":t.constantDefaultValue,"ticket-info":t.ticketInfo,workflow:t.workflow,"pipeline-constants":t.pipelineConstants,"pipeline-stages":t.pipelineStages,"pipeline-rules":t.pipelineRules},on:{reloadTicket:t.reloadTicket,onChangeHook:t.onChangeHook}}),t._v(" "),"BK-PLUGIN"===t.nodeInfo.type&&"FAILED"===t.nodeInfo.status?e("bkPluginTask",{attrs:{"ticket-info":t.ticketInfo,"node-info":t.nodeInfo,workflow:t.workflow},on:{reloadTicket:t.reloadTicket,onChangeHook:t.onChangeHook}}):t._e(),t._v(" "),"TASK"===t.nodeInfo.type?e("api-node-handle-body",{attrs:{"node-info":t.nodeInfo,"basic-infomation":t.ticketInfo},on:{updateOrderStatus:t.successFn},scopedSlots:t._u([t.triggers&&t.triggers.length&&t.nodeInfo.can_operate?{key:"button-extend",fn:function(){return[e("bk-dropdown-menu",{ref:"dropdown",staticClass:"bk-node-trigger",attrs:{align:"right","font-size":"medium"},on:{show:function(e){t.isDropdownShow=!0},hide:function(e){t.isDropdownShow=!1}}},[e("bk-button",{staticClass:"node-trigger-btn",staticStyle:{width:"auto"},attrs:{slot:"dropdown-trigger"},slot:"dropdown-trigger"},[e("span",[t._v(t._s(t.$t('m.newCommon["更多操作"]')))]),t._v(" "),e("i",{class:["bk-icon icon-angle-down",{"icon-flip":t.isDropdownShow}]})]),t._v(" "),e("ul",{staticClass:"bk-dropdown-list",attrs:{slot:"dropdown-content"},slot:"dropdown-content"},t._l(t.triggers,(function(n,i){return e("li",{key:i},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.openTriggerDialog(n)}}},[t._v(t._s(n.display_name))])])})),0)],1)]},proxy:!0}:null],null,!0)}):t.currSignProcessorInfo?e("div",{staticClass:"bk-area-show-back"},[t._l(t.currSignProcessorInfo.fields,(function(t,n){return[e("fields-done",{key:n,attrs:{item:t,origin:"log"}})]}))],2):e("field-info",{ref:"fieldInfo",attrs:{fields:t.nodeInfo.fields,"all-field-list":t.allFieldList}})],1):t._e(),t._v(" "),"TASK"!==t.nodeInfo.type?e("div",{staticClass:"bk-form-btn"},[t.isShowDealBtns?[t._l(t.nodeInfo.operations,(function(n,i){return[-1===t.ignoreOperations.indexOf(n.key)?e("bk-button",{key:n.key,staticClass:"mr10",attrs:{theme:0===i?"primary":"default",title:n.name,disabled:!n.can_operate||!t.nodeInfo.is_schedule_ready,loading:t.isBtnLoading(t.nodeInfo)||t.submitting},on:{click:function(e){return t.clickBtn(n)}}},[t.nodeInfo.is_schedule_ready?[t._v("\n                  "+t._s(n.name)+"\n                ")]:[e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:"请将任务列表中的任务全部处理完成之后再进行处理提交",expression:"'请将任务列表中的任务全部处理完成之后再进行处理提交'",modifiers:{top:!0}}]},[t._v(t._s(n.name))])]],2):t._e()]})),t._v(" "),t.isShowExceptionDistribute?e("bk-button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){t.clickBtn({can_operate:!0,key:"EXCEPTION_DISTRIBUTE",name:t.$t("m['异常分派']")})}}},[t._v(t._s(t.$t("m['异常分派']")))]):t._e()]:t._e(),t._v(" "),t.triggers&&t.triggers.length&&t.nodeInfo.can_operate?e("bk-dropdown-menu",{ref:"dropdown",staticClass:"bk-node-trigger",attrs:{align:"right","font-size":"medium"},on:{show:function(e){t.isDropdownShow=!0},hide:function(e){t.isDropdownShow=!1}}},[e("bk-button",{staticClass:"node-trigger-btn",staticStyle:{width:"auto"},attrs:{slot:"dropdown-trigger"},slot:"dropdown-trigger"},[e("span",[t._v(t._s(t.$t('m.newCommon["更多操作"]')))]),t._v(" "),e("i",{class:["bk-icon icon-angle-down",{"icon-flip":t.isDropdownShow}]})]),t._v(" "),e("ul",{staticClass:"bk-dropdown-list",attrs:{slot:"dropdown-content"},slot:"dropdown-content"},t._l(t.triggers,(function(n,i){return e("li",{key:i},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.openTriggerDialog(n)}}},[t._v(t._s(n.display_name))])])})),0)],1):t._e()],2):t._e()])])],1),t._v(" "),e("div",{staticClass:"bk-processor-content",attrs:{id:"processor-tips-content"}},[t._l(t.tipsProcessorsInfo.list,(function(n){return e("div",{key:n,staticClass:"bk-processor-one"},[e("div",{staticClass:"bk-processor-span"},[t._v(t._s(n))])])})),t._v(" "),t.tipsProcessorsInfo.extend?e("div",{staticClass:"bk-processor-one"},[e("div",{staticClass:"bk-processor-span",staticStyle:{background:"none"}},[t._v(t._s(t.tipsProcessorsInfo.extend))])]):t._e()],2),t._v(" "),e("ticket-trigger-dialog",{ref:"triggerDialog",attrs:{item:t.triggerInfo},on:{"init-info":t.reloadTicket}}),t._v(" "),e("node-deal-dialog",{attrs:{"node-info":t.nodeInfo,submitting:t.submitting,"open-form-info":t.openFormInfo,"all-groups":t.allGroups,"ticket-info":t.ticketInfo},on:{submitFormAjax:t.submitFormAjax}})],1)},a=[];i._withStripped=!0},PAo4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n("QbLZ")),a=o(n("tQ05")),s=n("L2JU");function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"modifyFields",components:{fieldInfo:a.default},props:{fieldSchema:{type:Array,default:function(){return[]}}},data:function(){return{fieldKeyItem:"",fieldValueItem:"",fieldValue:"",show:!0,sourceTypeList:[{id:1,key:"custom",name:this.$t('m.treeinfo["自定义"]')},{id:2,key:"reference",name:this.$t('m.treeinfo["引用变量"]')}],variableList:[]}},computed:(0,i.default)({globalChoise:function(){return this.$store.state.common.configurInfo}},(0,s.mapState)("trigger",{triggerVariables:function(t){return t.triggerVariables}})),watch:{triggerVariables:function(t){this.variableList=t}},mounted:function(){this.variableList=this.triggerVariables,this.initData()},methods:{initData:function(){var t=this;if(this.fieldSchema.forEach((function(e){t.$set(e,"referenceType",e.ref_type||"custom")})),this.fieldKeyItem=this.fieldSchema[0],this.fieldValueItem=this.fieldSchema[1],this.$set(this.fieldValueItem,"itemInfo",[]),this.fieldKeyItem.value){var e=this.fieldKeyItem.choice.filter((function(e){return e.key===t.fieldKeyItem.value}));e[0].val=this.fieldValueItem.value,e[0].value=e[0].val,this.fieldValueItem.itemInfo=e,this.show=!0}},selectedFieldKey:function(t){var e=this;this.fieldValueItem.itemInfo.splice(0,this.fieldValueItem.itemInfo.length),this.show=!1,this.$nextTick((function(){var n=e.fieldKeyItem.choice.find((function(e){return e.key===t}));n.showFeild=!0,e.fieldValueItem.itemInfo.push(n),e.show=!0}))},selectedReference:function(){this.fieldValueItem.itemInfo[0].value=""}}}},PCdW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{key:t.routerKey,class:{"bk-fields-done":!0,"bk-fields-log":"log"===t.origin}},["TABLE"===t.item.type?e("div",{staticClass:"bk-fields-done-item",staticStyle:{width:"100%","max-width":"100%"}},[e("span",{staticClass:"bk-li-left",attrs:{title:t.item.name}},[t._v(t._s(t.item.name)+"：")]),t._v(" "),t.item.can_edit&&!t.basicInfomation.is_over&&"notLog"===t.origin?e("div",{staticClass:"bk-fields-done-edit",on:{click:function(e){return t.edit(t.item)}}},[e("span",{staticClass:"bk-itsm-icon icon-edit-bold isOn"})]):t._e(),t._v(" "),t.item.value?e("div",{staticClass:"bk-form-content bk-over-more",staticStyle:{"margin-left":"0px"}},[e("bk-table",{attrs:{data:t.getParseValue(t.item.value),size:"small"}},[t._l(t.item.choice,(function(n){return[e("bk-table-column",{key:n.key,attrs:{label:n.name},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row[n.key]}},[t._v(t._s(i.row[n.key]))])]}}],null,!0)})]}))],2)],1):t._e()]):"CUSTOMTABLE"===t.item.type?e("div",{staticClass:"bk-fields-done-item",staticStyle:{width:"100%","max-width":"100%"}},[t.isShowName?e("span",{staticClass:"bk-li-left",attrs:{title:t.item.name}},[t._v(t._s(t.item.name)+"：")]):t._e(),t._v(" "),t.item.can_edit&&!t.basicInfomation.is_over&&"notLog"===t.origin?e("div",{staticClass:"bk-fields-done-edit",on:{click:function(e){return t.edit(t.item)}}},[e("span",{staticClass:"bk-itsm-icon icon-edit-bold isOn"})]):t._e(),t._v(" "),t.item.value?e("div",{staticClass:"bk-form-content bk-over-more",staticStyle:{"margin-left":"0px",width:"100%"}},[e("bk-table",{attrs:{data:t.item.value,size:"small"}},[t._l(t.item.meta.columns,(function(n){return[e("bk-table-column",{key:n.key,attrs:{label:n.name},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row[n.key]}},[t._v(t._s(t.getCustomTableDisplayValue(n,i.row)||"--"))])]}}],null,!0)})]}))],2)],1):t._e()]):"SELECT"===t.item.type?e("div",{staticClass:"bk-fields-done-item"},[t.isShowName?e("span",{staticClass:"bk-li-left",attrs:{title:t.item.name}},[t._v(t._s(t.item.name)+"：")]):t._e(),t._v(" "),e("span",{staticClass:"bk-li-right",attrs:{title:t.item.display_value}},[e("span",{staticClass:"bk-pot-after"},[t._v(t._s(t.item.display_value||"--"))])])]):"FILE"===t.item.type?e("div",{staticClass:"bk-fields-done-item"},[t.isShowName?e("span",{staticClass:"bk-li-left",attrs:{title:t.item.name}},[t._v(t._s(t.item.name)+"：")]):t._e(),t._v(" "),t._l(t.fileList,(function(n,i){return e("span",{key:i,staticClass:"bk-li-right",style:t.cursorStyle,on:{click:function(e){return t.downFile(n)}}},[""!==t.item.value?e("i",{staticClass:"bk-icon icon-download bk-tab-cursor",staticStyle:{color:"rgb(60, 150, 255)"}}):t._e(),t._v("\n      "+t._s(n.name)+"\n    ")])}))],2):"RICHTEXT"===t.item.type?e("div",{staticClass:"bk-fields-done-item"},[t.isShowName?e("span",{staticClass:"bk-li-left",staticStyle:{float:"initial"},attrs:{title:t.item.name}},[t._v(t._s(t.item.name)+"：")]):t._e(),t._v(" "),e("div",{staticClass:"bk-li-right bk-fields-richtext tui-editor-contents",domProps:{innerHTML:t._s(t.item.value)}}),t._v(" "),e("bk-popover",{attrs:{theme:"light"}},[e("div",{staticClass:"bk-itsm-icon icon-icon-info bk-text-primary f12 rich-show"}),t._v(" "),e("div",{staticStyle:{"white-space":"normal",cursor:"pointer"},attrs:{slot:"content"},slot:"content"},[e("div",{directives:[{name:"bk-copy",rawName:"v-bk-copy",value:t.item.value.replace(/<[^>]+>/g,""),expression:"item.value.replace(/<[^>]+>/g, '')"}],staticClass:"bk-li-right bk-fields-richtext tui-editor-contents",attrs:{title:"点击复制"},domProps:{innerHTML:t._s(t.item.value)}})])])],1):"TEXT"===t.item.type?e("div",{staticClass:"bk-fields-done-item"},[t.isShowName?e("span",{staticClass:"bk-li-left",attrs:{title:t.item.name}},[t._v(t._s(t.item.name)+"：")]):t._e(),t._v(" "),e("span",{staticClass:"bk-li-right",attrs:{title:t.item.display_value}},[e("pre",{staticClass:"bk-pre"},[t._v(t._s(t.item.display_value||t.item.value||"--"))])])]):"LINK"===t.item.type?e("div",{staticClass:"bk-fields-done-item"},[e("span",{staticClass:"bk-li-left",attrs:{title:t.item.name}},[t._v(t._s(t.item.name)+"：")]),t._v(" "),e("span",{staticClass:"bk-li-right bk-li-right-link"},[e("span",{staticClass:"bk-pot-after bk-li-link",attrs:{title:t.item.value},on:{click:function(e){return t.goToLink(t.item.value)}}},[t._v(t._s(t.item.value))]),t._v(" "),e("i",{staticClass:"bk-itsm-icon commonicon-icon icon-itsm-icon-three link-view",on:{click:function(e){return t.openLickInIframe(t.item)}}}),t._v(" "),e("i",{directives:[{name:"bk-copy",rawName:"v-bk-copy",value:t.item.value,expression:"item.value"}],staticClass:"bk-itsm-icon commonicon-icon icon-itsm-icon-copy link-copy"})])]):"CUSTOM-FORM"===t.item.type?e("div",{staticClass:"bk-fields-done-item"},[t.isShowName?e("span",{staticClass:"bk-li-left",staticStyle:{float:"initial"},attrs:{title:t.item.name}},[t._v(t._s(t.item.name))]):t._e(),t._v(" "),e("render-view",{staticStyle:{width:"calc(100% - 140px)"},attrs:{"form-data":t.customForm.formData,context:t.customForm.context}})],1):e("div",{staticClass:"bk-fields-done-item"},[t.isShowName?e("span",{staticClass:"bk-li-left",attrs:{title:t.item.name}},[t._v(t._s(t.item.name)+"：")]):t._e(),t._v(" "),"MEMBERS"!==t.item.type&&"MEMBER"!==t.item.type||"notLog"!==t.origin?t._e():e("business-card",{staticStyle:{"margin-top":"3px"},attrs:{item:t.item}}),t._v(" "),e("span",{staticClass:"bk-li-right",class:{pl5:("MEMBERS"===t.item.type||"MEMBER"===t.item.type)&&"notLog"===t.origin},attrs:{title:t.item.display_value}},[t._v(t._s(t.item.display_value||t.item.value||"--")+"\n    ")])],1),t._v(" "),!t.item.can_edit||t.basicInfomation.is_over||["TABLE","CUSTOMTABLE"].includes(t.item.type)?t._e():e("div",{staticClass:"bk-fields-done-edit",class:{"bk-member-edit":("MEMBERS"===t.item.type||"MEMBER"===t.item.type)&&"notLog"===t.origin},on:{click:function(e){return t.edit(t.item)}}},[e("span",{staticClass:"bk-itsm-icon icon-edit-bold isOn"})]),t._v(" "),e("bk-dialog",{attrs:{width:"1200",theme:"primary","show-footer":!1,"mask-close":!1},on:{cancel:t.closeLinkIframe},model:{value:t.iframeInfo.show,callback:function(e){t.$set(t.iframeInfo,"show",e)},expression:"iframeInfo.show"}},[e("p",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[t._v(t._s(t.iframeInfo.title))]),t._v(" "),e("div",{staticClass:"iframe",staticStyle:{width:"100%",height:"600px"}},[e("iframe",{attrs:{src:t.iframeInfo.url,width:"100%",height:"100%",frameborder:"0"}})])])],1)},a=[];i._withStripped=!0},PGA1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=f(n("GQeE")),a=f(n("P2sY")),s=f(n("14Xm")),o=f(n("D3Ub")),r=f(n("I1Ty")),c=n("CeR/"),l=n("ygAv"),u=f(n("efIh")),d=f(n("PaSM"));function f(t){return t&&t.__esModule?t:{default:t}}e.default={name:"SOPS_TEMPLATE",components:{NoData:r.default},mixins:[u.default,d.default],props:{item:{type:Object,required:!0,default:function(){}},fields:{type:Array,default:function(){return[]}},isCurrent:{type:Boolean,default:!1},basicInfomation:{type:Object,default:function(){return{}}},typeInfo:{type:String,default:function(){return""}},disabled:{type:Boolean,default:!1}},data:function(){return{disabledRenderForm:!1,editTask:!0,constantDefaultValue:{},templateList:[],planList:[],sopsTaskList:[],optionalNodeIdList:[],hookedVarList:{},quoteVars:[],quoteVarsLoading:!1,quoteErrors:[],configLoading:!1,formLoading:!1,loading:{templateList:!1,sopsTaskList:!1,plan:!1},lastEditTaskName:"",rules:{},previewSopsTaskUrl:""}},computed:{bkBizId:function(){return this.basicInfomation&&-1!==this.basicInfomation.bk_biz_id?this.basicInfomation.bk_biz_id:""},showRenderForm:function(){return this.item.sopsContent.constants.filter((function(t){return"show"===t.show_type})).length>0},formOptions:function(){return{showRequired:!0,showGroup:!0,showLabel:!0,showHook:!0,showDesc:!0,formEdit:!this.disabled&&!this.disabledRenderForm}}},created:function(){this.item.sopsContent||this.$set(this.item,"sopsContent",{id:"",sopsTask:{id:"",template_id:""},planId:"",createWay:"template",exclude_task_nodes_id:[],formData:{},context:{project:{id:"",bk_biz_id:"",name:"",from_cmdb:!0},bk_biz_id:"",site_url:window.SITE_URL_SOPS+window.PREFIX_SOPS},constants:[]}),this.rules.id=this.checkCommonRules("select").select,this.rules.sopsTaskId=this.checkCommonRules("select").select},mounted:function(){var t=this;return(0,o.default)(s.default.mark((function e(){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.item.value&&(t.item.sopsContent.id=t.item.value.id,(n=t.templateList.find((function(e){return e.id===t.item.sopsContent.id})))&&void 0!==n.bk_biz_id&&(t.item.sopsContent.context.project.bk_biz_id=n.bk_biz_id,t.item.sopsContent.context.project.id=t.item.sopsContent.id,t.item.sopsContent.context.project.name=t.item.name),t.item.sopsContent.constants=t.item.value.constants,t.item.value.constants.forEach((function(e){e.value&&(t.item.sopsContent.formData[e.key]=(0,l.deepClone)(e.value)),e.is_quoted&&(t.hookedVarList[e.key]=!0)}))),t.editTask=!!t.item.value,t.editTask&&t.item.value.id&&t.getTemplateDetail(t.item.value.bk_biz_id,t.item.value.id),t.basicInfomation.id&&t.getTicketOutput(),t.getTemplateList();case 5:case"end":return e.stop()}}),e,t)})))()},methods:{getTicketOutput:function(){var t=this;return(0,o.default)(s.default.mark((function e(){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.quoteVarsLoading=!0,e.next=4,t.$store.dispatch("ticket/getTicketOutput",t.basicInfomation.id);case 4:n=e.sent,t.quoteVars=n.data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:return e.prev=11,t.quoteVarsLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,t,[[0,8,11,14]])})))()},onSelectTpl:function(t){var e=this;this.item.sopsContent.id=t;var n=this.templateList.find((function(t){return t.id===e.item.sopsContent.id}));n&&void 0!==n.bk_biz_id&&(this.item.sopsContent.context.project.bk_biz_id=n.bk_biz_id,this.item.sopsContent.context.project.id=n.project_id,this.item.sopsContent.context.project.name=n.project_name),this.hookedVarList={},this.quoteErrors=[],this.getTempaltePlanList(),this.getTemplateDetail(n.bk_biz_id,this.item.sopsContent.id)},onSopsTaskChange:function(t){if(!t)return!1;this.hookedVarList={},this.quoteErrors=[],this.setTaskNameAndDisable(t),this.getSopsTaskDetail(t)},setTaskNameAndDisable:function(t){var e=this.fields.find((function(t){return"task_name"===t.key})),n=this.sopsTaskList.find((function(e){return e.id===t}));e&&(this.lastEditTaskName=e.val||e.value,e.val=n.name,e.value=n.name,e.is_readonly=!0),this.disabledRenderForm="started_task"===this.item.sopsContent.createWay},clearTaskNameAndDisable:function(){if(this.item.sopsContent.sopsTask.id){var t=this.fields.find((function(t){return"task_name"===t.key}));t&&(t.val=this.lastEditTaskName,t.value=this.lastEditTaskName,t.is_readonly=!1)}},getSopsTaskDetail:function(t){var e=this;return(0,o.default)(s.default.mark((function n(){var i;return s.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.configLoading=!0,i={bk_biz_id:e.bkBizId,task_id:t},n.next=4,e.$store.dispatch("taskFlow/getSopsTaskDetail",i).then((function(t){e.previewSopsTaskUrl=t.data.task_url;var n=[];for(var i in t.data.constants)"show"===t.data.constants[i].show_type&&n.push(t.data.constants[i]);n.sort((function(t,e){return t-e})),e.item.sopsContent.constants=n,e.item.sopsContent.sopsTask.template_id=t.data.template_id})).catch((function(t){(0,c.errorHandler)(t,e)})).finally((function(){e.configLoading=!1}));case 4:case"end":return n.stop()}}),n,e)})))()},getTemplateDetail:function(t,e){var n=this;this.formLoading=!0;var i={template_id:e,bk_biz_id:t||""};this.$store.dispatch("getTemplateDetail",i).then((function(t){var e=[];t.data.constants.forEach((function(t){var i=n.item.sopsContent.constants.find((function(e){return e.key===t.key}));n.editTask&&!i||(i&&(t=(0,a.default)(i,t)),t.is_meta&&(t.meta=(0,l.deepClone)(t)),n.item.value&&(t.value=(0,l.deepClone)(n.item.sopsContent.formData[t.key])),n.constantDefaultValue[t.key]=(0,l.deepClone)(t.value),"show"===t.show_type&&e.push(t))})),n.item.sopsContent.constants=e,n.optionalNodeIdList=t.data.optional_ids})).catch((function(t){(0,c.errorHandler)(t,n)})).finally((function(){n.formLoading=!1}))},getTemplateList:function(){var t=this;return(0,o.default)(s.default.mark((function e(){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading.templateList=!0,n={bk_biz_id:t.bkBizId,with_common:!0},e.next=4,t.$store.dispatch("getTemplateList",n).then((function(e){t.templateList=e.data})).catch((function(e){(0,c.errorHandler)(e,t)})).finally((function(){t.loading.templateList=!1}));case 4:case"end":return e.stop()}}),e,t)})))()},getSopsTaskList:function(){var t=this;return(0,o.default)(s.default.mark((function e(){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading.sopsTaskList=!0,n={bk_biz_id:t.bkBizId,is_started:"started_task"===t.item.sopsContent.createWay},e.next=4,t.$store.dispatch("taskFlow/getSopsTask",n).then((function(e){t.sopsTaskList=e.data})).catch((function(e){(0,c.errorHandler)(e,t)})).finally((function(){t.loading.sopsTaskList=!1}));case 4:case"end":return e.stop()}}),e,t)})))()},getTempaltePlanList:function(){var t=this;return(0,o.default)(s.default.mark((function e(){var n,i,a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.item.sopsContent.id,i=t.templateList.find((function(t){return t.id===n})),t.planList=[],t.loading.plan=!0,a={bk_biz_id:i.bk_biz_id,template_id:i.id},e.next=7,t.$store.dispatch("getTemplatePlanList",a).then((function(e){t.planList=e.data})).catch((function(e){(0,c.errorHandler)(e,t)})).finally((function(){t.loading.plan=!1}));case 7:case"end":return e.stop()}}),e,t)})))()},onplanSelect:function(t){var e=this;return(0,o.default)(s.default.mark((function n(){var i,a,o,r,c;return s.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=[],t.length>0?(t.forEach((function(t){var n=e.planList.find((function(e){return e.id===t}));if(n.data)for(var a=JSON.parse(n.data),s=0;s<a.length;s++)-1===i.indexOf(a[s])&&i.push(a[s])})),e.item.sopsContent.exclude_task_nodes_id=e.optionalNodeIdList.filter((function(t){return!i.includes(t)}))):e.item.sopsContent.exclude_task_nodes_id=[],a=e.templateList.find((function(t){return t.id===e.item.sopsContent.id})),n.prev=3,e.formLoading=!0,n.next=7,e.$store.dispatch("taskFlow/getSopsPreview",{bk_biz_id:a.bk_biz_id,template_id:a.id,exclude_task_nodes_id:e.item.sopsContent.exclude_task_nodes_id});case 7:for(c in o=n.sent,r=[],o.data.pipeline_tree.constants)"show"===o.data.pipeline_tree.constants[c].show_type&&r.push(o.data.pipeline_tree.constants[c]);r.sort((function(t,e){return t.index-e.index})),e.item.sopsContent.constants=r,n.next=17;break;case 14:n.prev=14,n.t0=n.catch(3),console.error(n.t0);case 17:return n.prev=17,e.formLoading=!1,n.finish(17);case 20:case"end":return n.stop()}}),n,e,[[3,14,17,20]])})))()},jumpToSops:function(){window.open(this.previewSopsTaskUrl)},handleCreateWayChange:function(t){this.clearTaskNameAndDisable(),this.item.sopsContent.id="",this.item.sopsContent.planId="",this.item.sopsContent.constants=[],this.item.sopsContent.sopsTask.id="","task"===t||"started_task"===t?this.getSopsTaskList():this.getTemplateList()},onReloadPlanBtnClick:function(){this.item.sopsContent.id&&this.getTempaltePlanList()},validate:function(){var t=this;this.$refs.taskForm.validate();var e=!0;this.disabled||this.disabledRenderForm?e=!0:this.$refs.renderForm&&(e=this.$refs.renderForm.validate());var n="template"===this.item.sopsContent.createWay?!!this.item.sopsContent.id:!!this.item.sopsContent.sopsTask.id,a=(0,i.default)(this.hookedVarList).every((function(e){return!t.hookedVarList[e]||""!==t.item.sopsContent.formData[e]||(t.quoteErrors.push(e),!1)}));return e&&n&&a},jumpToSopsSelectSchemePage:function(){var t=this.item.sopsContent.id,e="taskflow/newtask/"+this.templateList.find((function(e){return e.id===t})).project_id+"/selectnode/?template_id="+t+"&entrance=templateEdit";window.open(window.SOPS_URL+e,"__blank")},onHookChange:function(t,e){this.$set(this.hookedVarList,e.tag_code,t);var n=this.item.sopsContent.constants.find((function(t){return t.key===e.tag_code}));if(n.is_quoted=t,t)this.item.sopsContent.formData[e.tag_code]="";else{this.item.sopsContent.formData[e.tag_code]=n?(0,l.deepClone)(this.constantDefaultValue[e.tag_code]):"";var i=this.quoteErrors.findIndex((function(t){return t===e.tag_code}));i>-1&&this.quoteErrors.splice(i,1)}},onSelectVar:function(t,e){this.item.sopsContent.formData[e.tag_code]="${"+t+"}";var n=this.quoteErrors.findIndex((function(t){return t===e.tag_code}));n>-1&&this.quoteErrors.splice(n,1)}}}},PIEm:function(t,e,n){"use strict";n.r(e);var i=n("6Mdl"),a=n("BKtx");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("jIqJ");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"5c3adbce",null);e.default=r.exports},PLXv:function(t,e,n){},PSjz:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-response-content"},[e("div",{on:{click:function(e){t.item.contentStatus=!1}}},[e("bk-form",{ref:"conductorForm",attrs:{"form-type":"horizontal","label-width":200}},["api"===t.item.wayInfo.key?[e("api-call",{attrs:{item:t.item}})]:"modify_field"===t.item.wayInfo.key||"modify_first_state_field"===t.item.wayInfo.key?[e("modify-field",{attrs:{"field-schema":t.item.wayInfo.field_schema}})]:[t._l(t.item.wayInfo.field_schema,(function(t,n){return["SUBCOMPONENT"===t.type?[e("send-message",{key:n,attrs:{"item-info":t}})]:[e("bk-form-item",{key:n,attrs:{"ext-cls":t.required?"bk-field-schema mb20":"bk-field-schema no-require-item mb20",label:t.name,required:t.required,desc:t.tips}},[e("change-conductor",{attrs:{"item-info":t}})],1)]]}))],t._v(" "),e("bk-form-item",{attrs:{label:t.$t("m.trigger['执行方式']"),required:!0,"ext-cls":"bk-field-schema mb20"}},[e("bk-radio-group",{model:{value:t.item.performData.runMode,callback:function(e){t.$set(t.item.performData,"runMode",e)},expression:"item.performData.runMode"}},[e("bk-radio",{attrs:{value:"BACKEND","ext-cls":"mr50 pr10"}},[t._v(t._s(t.$t("m.trigger['后台自动执行']")))]),t._v(" "),t.isShowFrontendTrigger?e("bk-radio",{attrs:{value:"MANUAL"}},[t._v(t._s(t.$t("m.trigger['按钮触发']")))]):t._e()],1)],1),t._v(" "),"MANUAL"===t.item.performData.runMode?[e("bk-form-item",{attrs:{required:!0,label:t.$t("m.trigger['按钮名称']"),"ext-cls":"bk-field-schema mb20"}},[e("bk-input",{staticStyle:{width:"260px"},attrs:{clearable:!0},model:{value:t.item.performData.displayName,callback:function(e){t.$set(t.item.performData,"displayName",e)},expression:"item.performData.displayName"}})],1)]:t._e(),t._v(" "),e("bk-form-item",{attrs:{required:!0,label:t.$t("m.trigger['触发次数']"),"ext-cls":"bk-field-schema"}},[e("bk-radio-group",{model:{value:t.item.performData.repeat,callback:function(e){t.$set(t.item.performData,"repeat",e)},expression:"item.performData.repeat"}},[e("bk-radio",{attrs:{value:"one",disabled:t.disableRepeat,"ext-cls":"mr50 pr10"}},[t._v(t._s(t.$t("m.trigger['一次']")))]),t._v(" "),e("bk-radio",{attrs:{value:"more"}},[t._v(t._s(t.$t("m.trigger['不限']")))])],1)],1)],2),t._v(" "),t.item.contentStatus?e("p",{staticClass:"bk-error-info"},[t._v(t._s(t.$t("m.trigger['您还有内容未填写，请确认。']")))]):t._e()],1)])},a=[];i._withStripped=!0},PbHM:function(t,e,n){"use strict";n.r(e);var i=n("Br4l"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},Potf:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-second-flow bk-preview-flow"},[e("js-flow",{ref:"previewFlow",attrs:{selector:"entry-item","endpoint-options":t.endpointOptions,"connector-options":t.connectorOptions,"node-options":t.nodeOptions,"show-palette":!1},on:{onNodeMoveStop:t.onNodeMoveStop},scopedSlots:t._u([{key:"nodeTemplate",fn:function({node:n}){return[e("node-template",{ref:"templateNode",attrs:{node:n,"canvas-data":t.canvasData,"preview-info":t.previewInfo,"normal-color":t.normalColor},on:{clickNodeInfo:t.clickNodeInfo,submitNodeValue:t.submitNodeValue}})]}}]),model:{value:t.canvasData,callback:function(e){t.canvasData=e},expression:"canvasData"}},[e("template",{slot:"toolPanel"},[e("tool-panel",{attrs:{"full-status":t.fullStatus},on:{onZoomIn:t.onZoomIn,onZoomOut:t.onZoomOut,onResetPosition:t.onResetPosition}})],1)],2)],1)},a=[];i._withStripped=!0},Q3ZP:function(t,e,n){"use strict";n.r(e);var i=n("g2DR"),a=n("ymPp");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},Q7OQ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"NoTicketContent",props:{message:{type:String,default:function(){return this.$t('m.wiki["您没有权限访问"]')}}},data:function(){return{}}}},QYLf:function(t,e,n){"use strict";n.r(e);var i=n("/LTZ"),a=n("4K4u");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"2f5580e0",null);e.default=r.exports},QcAU:function(t,e,n){"use strict";n.r(e);var i=n("OeTS"),a=n("rW75");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("4zXE");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"7456c3b9",null);e.default=r.exports},R5iJ:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDI0IDEwMjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojNzM3OTg3O30KPC9zdHlsZT4KPGc+Cgk8cmVjdCB4PSI1MTIiIHk9IjIyNCIgY2xhc3M9InN0MCIgd2lkdGg9Ijk2IiBoZWlnaHQ9IjY0Ii8+Cgk8cmVjdCB4PSI0MTYiIHk9IjI4OCIgY2xhc3M9InN0MCIgd2lkdGg9Ijk2IiBoZWlnaHQ9IjY0Ii8+Cgk8cmVjdCB4PSI1MTIiIHk9IjM1MiIgY2xhc3M9InN0MCIgd2lkdGg9Ijk2IiBoZWlnaHQ9IjY0Ii8+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDE2LDY0MGgxOTJWNDgwaC05NnYtNjRoLTk2VjY0MHogTTQ2NCw1MjhoOTZ2NjRoLTk2VjUyOHoiLz4KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik05Niw5NnY4MzJoODMyVjk2SDk2eiBNODY0LDg2NEgxNjBWMTYwaDI1NnY2NGg5NnYtNjRoMzUyVjg2NHoiLz4KPC9nPgo8L3N2Zz4K"},R5w6:function(t,e,n){"use strict";n.r(e);var i=n("nd0Z"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},R6jV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n("14Xm")),a=c(n("D3Ub")),s=c(n("QRXk")),o=n("CeR/"),r=n("rbQ3");function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"CommentTab",components:{EvaluationTicketContent:s.default},props:{ticketInfo:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,picked:"One",satisfactInfo:{},scoreList:r.SCORE_LIST}},mounted:function(){this.getEvaluation()},methods:{getEvaluation:function(){var t=this;return(0,a.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,n={id:t.ticketInfo.comment_id},t.$route.query.token&&(n.token=t.$route.query.token),e.next=5,t.$store.dispatch("evaluation/getEvaluation",n).then((function(e){t.satisfactInfo=e.data})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.loading=!1}));case 5:case"end":return e.stop()}}),e,t)})))()}}}},RnPO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("2eEL"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"exportTree",components:{collapseTransition:s.default},props:{treeDataList:{type:Array,default:[]},treeIndex:{type:Number,default:0}},data:function(){return{pLeft:"padding-left:"+15*(this.treeIndex+1)+"px; padding-right: 10px;"}},methods:{toggleChildren:function(t){this.$emit("toggleChildren",t)},toggle:function(t){this.$emit("toggle",t)},selectItem:function(t){this.$emit("selectItem",t)}}}},Rs9T:function(t,e,n){},RyoZ:function(t,e,n){},S5n2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=f(n("GQeE")),a=f(n("14Xm")),s=f(n("D3Ub")),o=f(n("Wgwc")),r=f(n("EstQ")),c=f(n("vkdF")),l=f(n("1GPn")),u=n("CeR/"),d=n("ygAv");function f(t){return t&&t.__esModule?t:{default:t}}var m=[{key:"component_type",name:r.default.t("m.task['任务类型']"),value:r.default.t("m.tickets['蓝盾任务']")},{key:"task_schema_id",name:r.default.t("m.task['任务模板']"),value:""},{key:"name",name:r.default.t("m.task['任务名称']"),value:""},{key:"sub_pipeline_id",name:r.default.t("m.tickets['流水线']"),value:""},{key:"processor_users",name:r.default.t("m.task['处理人']"),value:""},{key:"status",name:r.default.t("m.task['状态']"),value:""}],p=[{key:"buildNum",name:r.default.t("m.tickets['构建号']"),value:""},{key:"buildNum",name:r.default.t("m.tickets['源材料']"),value:""},{key:"startTime",name:r.default.t("m.tickets['开始于']"),value:""},{key:"trigger",name:r.default.t("m.tickets['触发方式']"),value:""},{key:"endTime",name:r.default.t("m.tickets['完成于']"),value:""},{key:"executeTime",name:r.default.t("m.systemConfig['耗时']"),value:""},{key:"pipelineVersion",name:r.default.t("m.tickets['编排版本号']"),value:""}];e.default={name:"DevopsExecutInfo",components:{taskStatus:c.default,BuildDetailInfo:l.default},props:{taskInfo:{type:Object,default:function(){return{}}}},data:function(){return{baseTaskInfoList:m,executInfoList:p,convertMStoString:d.convertMStoString,taskStatusInfoLoading:!1,isShowBuildDetailDialog:!1,buildStatusLoading:!1,taskStatusInfo:{},buildStatusInfo:{},buildList:[],outputVariableList:[],openBuildInfo:{}}},computed:{status:function(){return this.taskInfo.status},taskInfoList:function(){var t=this,e=this.taskStatusInfo;return this.baseTaskInfoList.map((function(n){return"component_type"===n.key?n:"task_schema_id"===n.key||"sub_pipeline_id"===n.key?(n.value=e[n.key],n):(n.value=t.taskInfo[n.key],n)}))},displayExecutInfoList:function(){var t=this.buildStatusInfo;return this.executInfoList.forEach((function(e){switch(e.key){case"startTime":case"endTime":e.value=(0,o.default)(t[e.key]).format("YYYY-MM-DD hh:mm:ss");break;case"executeTime":e.value=(0,d.convertMStoString)(1e3*t.executeTime);break;default:e.value=t[e.key]}})),this.executInfoList}},created:function(){},mounted:function(){var t=this;return(0,s.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTaskStatusInfo();case 2:t.getDevopsBuildStatus();case 3:case"end":return e.stop()}}),e,t)})))()},methods:{getTaskStatusInfo:function(){var t=this;this.taskStatusInfoLoading=!0;var e=this.taskInfo.id;return this.$store.dispatch("taskFlow/getTaskStatusInfo",e).then((function(e){t.taskStatusInfo=e.data})).catch((function(e){(0,u.errorHandler)(e,t)})).finally((function(){t.taskStatusInfoLoading=!1}))},getDevopsBuildStatus:function(){var t=this;this.buildStatusLoading=!0;var e=this.taskStatusInfo,n={project_id:e.project_id,pipeline_id:e.sub_pipeline_id,build_id:e.sub_task_id};this.$store.dispatch("ticket/getDevopsBuildStatus",n).then((function(e){t.buildStatusInfo=e.data,t.buildList=(e.data.artifactList||[]).map((function(t){return t.size=(0,d.convertByteToSize)(t.size),t})),t.outputVariableList=(0,i.default)(e.data.variables).map((function(t){return{key:t,value:e.data.variables[t]}}))})).catch((function(e){(0,u.errorHandler)(e,t)})).finally((function(){t.buildStatusLoading=!1}))},openBuildDetail:function(t){this.isShowBuildDetailDialog=!0,this.openBuildInfo=t}}}},S6UB:function(t,e,n){"use strict";n.r(e);var i=n("AKDS"),a=n("IJjc");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("26lR");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"e82c7b1e",null);e.default=r.exports},SDDO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=u(n("m1cH")),a=u(n("P2sY")),s=u(n("gDS+")),o=u(n("14Xm")),r=u(n("D3Ub")),c=n("CeR/"),l=u(n("VflG"));function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"taskHistoryDetail",mixins:[l.default],props:{historyId:{type:[String,Number],default:""},basicInfomation:{type:Object,default:function(){return{}}},nodeList:{type:Array,default:function(){return[]}},nodeIdMap:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,historyInfo:"",activeName:"send_email_message"}},computed:{apiTableData:function(){var t=[];return this.historyInfo.fields[1]&&"req_params"===this.historyInfo.fields[1].key&&this.historyInfo.fields[1].apiContent&&(t=this.historyInfo.fields[1].apiContent.bodyTableData.filter((function(t){return t.isShow}))),t}},watch:{historyId:function(){this.getDetail()}},created:function(){var t=this;return(0,r.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDetail();case 2:case"end":return e.stop()}}),e,t)})))()},methods:{getDetail:function(){var t=this;this.historyId&&(this.loading=!0,this.$store.dispatch("taskFlow/getHistoryDetail",this.historyId).then((function(e){var n;t.historyInfo=e.data,t.giveSignalInfo(),t.historyInfo.fields.forEach((n=(0,r.default)(o.default.mark((function e(n){var i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("sub_message_component"===n.key&&t.giveMessageData(),"api_source"!==n.key){e.next=4;break}return e.next=4,t.giveApiData();case 4:"states"===n.key&&(n.value=t.nodeList.find((function(t){return Number(t.state_id)===Number(n.value)})).name),"field_key"===n.key&&(i=[],t.nodeList.forEach((function(t){i=i.concat(t.fields)})),n.value=i.find((function(t){return t.key===n.value})).name),"processors"===n.key&&Object.prototype.hasOwnProperty.call(n.value,"members")&&(n.value=JSON.parse((0,s.default)(n.value)).members.replace(/^(\s|,)+|(\s|,)+$/g,""));case 7:case"end":return e.stop()}}),e,t)}))),function(t){return n.apply(this,arguments)}))})).catch((function(e){(0,c.errorHandler)(e,t)})).finally((function(){t.loading=!1})))},giveSignalInfo:function(){var t="";t="STATE"===this.historyInfo.signal_type?this.nodeIdMap[this.historyInfo.sender]:this.basicInfomation.title,this.historyInfo.signal_name+=this.$t('m.task["["]')+t+this.$t('m.task["]"]')},giveMessageData:function(){var t=this;this.historyInfo.fields[0].value.forEach((function(e){switch(t.$set(e,"checked",e.checked||!1),t.$set(e,"label",e.name),t.$set(e,"icon",""),e.code){case"send_email_message":e.icon="icon-email";break;case"send_sms_message":e.icon="icon-mobile";break;case"send_wechat_message":e.icon="icon-weixin"}e.name=e.code}))},giveApiData:function(){var t=this,e={id:this.historyInfo.fields[0].value};this.$store.dispatch("apiRemote/get_remote_api_detail",e).then((function(e){var n,i=e.data;t.historyInfo.fields.forEach((n=(0,r.default)(o.default.mark((function e(n){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("api_source"!==n.key){e.next=4;break}n.value=i.remote_system_name+"/"+i.name,e.next=20;break;case 4:return t.$set(n,"apiContent",i),t.$set(n.apiContent,"bodyTableData",[]),t.$set(n.apiContent,"treeDataList",{}),e.next=9,t.jsonschemaToList({root:JSON.parse((0,s.default)(n.apiContent.req_body))});case 9:return n.apiContent.treeDataList=e.sent,n.value&&(n.apiContent.treeDataList=t.jsonValueTreeList(n.value,JSON.parse((0,s.default)(n.apiContent.treeDataList)))),e.next=13,t.treeToTableList(JSON.parse((0,s.default)(n.apiContent.treeDataList[0].children)));case 13:return n.apiContent.bodyTableData=e.sent,(a=JSON.parse((0,s.default)(n.apiContent.bodyTableData))).forEach((function(t){t.name=t.key||"",t.children=[],t.value=void 0!==t.value?t.value:""})),t.recordChildren(a),e.next=19,a;case 19:n.apiContent.bodyTableData=e.sent;case 20:case"end":return e.stop()}}),e,t)}))),function(t){return n.apply(this,arguments)}))})).catch((function(e){(0,c.errorHandler)(e,t)}))},jsonValueTreeList:function(t,e){var n=function t(e,n,i,o,r){if("object"===r){var c=n.filter((function(t){return t.key===i}));if(!c.length)return;if("array"===o.constructor.name.toLowerCase()){if(!c[0].children||!c[0].children.length)return;for(var l=JSON.parse((0,s.default)((0,a.default)({parentInfo:""},c[0].children[0]))),u=1;u<o.length;u++)c[0].children.push(l);for(var d in o)t(c[0].children,c[0].children[d],"items",o[d],"array")}else if("object"===o.constructor.name.toLowerCase())for(var f in o)t(c[0],c[0].children,f,o[f],"object");else c[0].value=o}else if("array"===r)if("array"===o.constructor.name.toLowerCase()){var m=n.filter((function(t){return t.key===i}));if(!m.length)return;if(!m[0].children||!m[0].children.length)return;for(var p=JSON.parse((0,s.default)(n.children[0])),h=1;h<o.length;h++)n.children.push(p);for(var v in o)t(n.children,n.children[v],"items",o[v],"array")}else if("object"===o.constructor.name.toLowerCase())for(var b in o)t(n,n.children,b,o[b],"object");else n.value=o};for(var i in t)n(e[0],e[0].children,i,t[i],"object");return e},recordChildren:function(t,e){for(var n=t.map((function(t){return t.level})),a=Math.max.apply(Math,(0,i.default)(n)),s=function(e){t.filter((function(t){return t.level===e})).forEach((function(e){!function(t,e){t.filter((function(t){return t.level===e.level-1&&t.primaryKey===e.parentPrimaryKey&&t.ancestorsList.toString()===e.ancestorsList.slice(0,-1).toString()}))[0].children.push(e)}(t,e)}))},o=a;o>(e||0);o--)s(o)},changeState:function(t){t.showChildren=!t.showChildren,t.children.forEach((function(e){e.isShow=t.showChildren})),t.showChildren||this.closeChildren(t)},closeChildren:function(t){var e=this;t.children.forEach((function(t){t.isShow=!1,t.has_children&&(t.showChildren=!1,e.closeChildren(t))}))},changPanel:function(t){this.activeName=t}}}},SJYp:function(t,e,n){},SLTv:function(t,e,n){"use strict";n("1TTJ")},SO4U:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"CUSTOMTABLE",props:{item:{type:Object,required:!0,default:function(){}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{multiSelect:!0}},watch:{"item.val":function(){if(""===this.item.val){this.item.val=[];for(var t={},e=0;e<this.item.meta.columns.length;e++){t[this.item.meta.columns[e].key]=""}this.item.val.push(t)}"function"==typeof this.$parent.refresh&&this.$parent.refresh()}},created:function(){var t=this;if(""===this.item.val||Array.isArray(this.item.val)&&!this.item.val.length){this.item.val=[];for(var e={},n=0;n<this.item.meta.columns.length;n++){e[this.item.meta.columns[n].key]=""}this.item.val.push(e)}this.item.val.forEach((function(e){t.item.meta.columns.forEach((function(t){if(("multiselect"===t.display||"select"===t.display)&&!("string"==typeof e[t.key]?[e[t.key]]:e[t.key]).every((function(e){return t.choice.find((function(t){return t.key===e}))}))){var n=t.choice.find((function(n){return n.name===e[t.key]}));e[t.key]=n?n.key:""}}))}))},methods:{addOne:function(){for(var t={},e=0;e<this.item.meta.columns.length;e++){t[this.item.meta.columns[e].key]=""}this.item.val.push(t)},deleteOne:function(t){var e=this;1===this.item.val.length?this.$bkMessage({message:"默认行不能删除",theme:"warning"}):this.$bkInfo({title:"确认要删除此条数据？",confirmFn:function(){e.item.val.splice(t.$index,1)}})}}}},SUIt:function(t,e,n){"use strict";n.r(e);var i=n("MHZE"),a=n("gr+U");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("DtGf");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"3c746b04",null);e.default=r.exports},"SW+1":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=y(n("m1cH")),a=y(n("14Xm")),s=y(n("D3Ub")),o=y(n("P2sY")),r=y(n("GQeE")),c=y(n("QbLZ")),l=y(n("borX")),u=y(n("veXO")),d=y(n("tT7i")),f=y(n("UvLR")),m=y(n("PaSM")),p=y(n("BWJp")),h=y(n("efIh")),v=n("L2JU"),b=n("CeR/"),k=n("ygAv"),g=y(n("CtZk")),_=y(n("2K1W"));function y(t){return t&&t.__esModule?t:{default:t}}e.default={name:"TicketDetail",components:{NoTicketContent:d.default,leftTicketContent:g.default,TicketHeader:u.default,SlaRecordTab:l.default,RightTicketTabs:f.default},inject:["reload"],provide:function(){return{reloadTicket:this.reloadTicket}},mixins:[h.default,m.default,p.default],data:function(){return{moreLoading:!1,leftTicketDom:"",isPageOver:!1,isThrottled:!1,isRequsetComment:!1,curCommentLength:10,totalPages:0,page:1,page_size:10,commentCount:0,isShowSla:!0,showRightTabs:!0,processedUser:"",commentLoading:!1,ticketTimer:null,containerLeftWidth:0,ticketId:"",ticketErrorMessage:"",noPermitResp:{},dragLine:{base:0,move:0,startX:null,maxLength:0,canMove:!1},ticketInfo:{},headerInfo:{statusColor:""},isShowDialog:!1,noticeInfo:{is_processed:!1,processed_user:""},loading:{ticketLoading:!0,nodeInfoLoading:!1},nodeList:[],ticketTriggerList:[],nodeTriggerList:[],firstStateFields:[],allFieldList:[],commentList:[],commentId:"",threshold:[],hasNodeOptAuth:!1,isShowAssgin:!1,basicStatus:!0,approveDict:{"审批意见":this.$t('m.managePage["审批意见"]'),"通过":this.$t('m.managePage["通过"]'),"拒绝":this.$t('m.manageCommon["拒绝"]'),"备注":this.$t('m["备注"]')},processedInfo:{}}},computed:(0,c.default)({},(0,v.mapState)({openFunction:function(t){return t.openFunction}}),{token:function(){return this.$route.query.token}}),watch:{isShowSla:function(t){if(t){var e=this.ticketInfo.sla.Length;document.querySelector(".sla-information").style.height=134*e+"px"}},commentList:function(t){t.length>0&&(this.curCommentLength=t.length)},ticketInfo:{handler:function(t){if(0!==(0,r.default)(t).length){var e=t.current_steps.map((function(t){return t.id}));0!==e.length&&this.$router.replace({path:this.$route.path,query:(0,o.default)({},this.$route.query,{step_id:e.toString()})})}else this.initData()},immediate:!0}},created:function(){var t=this;_.default.$on("getIsProcessStatus",(function(e){t.noPermitResp=(0,k.deepClone)(e);var n=e.config.params,i={id:n.id,step_id:n.step_id};t.$store.dispatch("ticket/getStepProcessInfo",{params:i}).then((function(e){e.data.is_processor?(e.data.detail.fields.forEach((function(t){"CUSTOM-FORM"===t.type&&(t.tables=(0,k.transCustomFormToTable)(t.value))})),t.processedUser=e.data.processed_user,t.processedInfo=e.data.detail,t.isShowDialog=!0):_.default.$emit("processData",t.noPermitResp)}))}))},mounted:function(){var t=this;return(0,s.default)(a.default.mark((function e(){var n,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,i=!1,e.next=4,t.initData();case 4:t.getProtocolsList(),t.$nextTick((function(){this.leftTicketDom=document.querySelector(".comment-list"),this.leftTicketDom.addEventListener("scroll",this.handleTicketScroll)})),t.$refs.leftTicketContent&&t.$refs.leftTicketContent.currentStepList[0]&&(n=t.$refs.leftTicketContent.currentStepList.some((function(t){return t.can_operate}))),i=t.ticketInfo.updated_by.split(",").includes(window.username),t.hasNodeOptAuth=n||i,t.$store.commit("ticket/setHasTicketNodeOptAuth",t.hasNodeOptAuth),t.ticketInfo&&t.ticketInfo.auth_actions&&(t.isShowAssgin=t.ticketInfo.auth_actions.includes("ticket_management")),t.$store.commit("project/setProjectId",t.ticketInfo.project_key);case 12:case"end":return e.stop()}}),e,t)})))()},beforeDestroy:function(){this.clearTicketTimer(),this.$store.commit("project/setProjectId",window.DEFAULT_PROJECT)},methods:{initData:function(){var t=this;return(0,s.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ticketId=t.$route.query.id,e.next=3,t.getTicketDetailInfo();case 3:if(!t.ticketErrorMessage){e.next=6;break}return t.clearTicketTimer(),e.abrupt("return",!1);case 6:return t.getTriggers(),e.next=9,t.getNodeList();case 9:t.getCurrTickeStatusColor(),t.initCurrentStepData(),t.initTicketTimer(),t.initComments();case 13:case"end":return e.stop()}}),e,t)})))()},handleClickShowSla:function(){this.isShowSla=!this.isShowSla},viewSlaRule:function(){this.$router.push({name:"slaAgreement",query:{project_id:this.$route.query.project_id||0}})},initComments:function(){var t=this;return(0,s.default)(a.default.mark((function e(){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.commentLoading=!0,e.next=4,t.$store.dispatch("ticket/getTicketAllComments",{ticket_id:t.ticketId,show_type:""});case 4:return n=e.sent,t.commentId=n.data.items.find((function(t){return"ROOT"===t.remark_type})).id,e.next=8,t.getComments(1,10);case 8:t.commentList=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:return e.prev=14,t.commentLoading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,t,[[0,11,14,17]])})))()},getBacicInfoStatus:function(t){this.basicStatus=t},getComments:function(t,e){var n=this;return(0,s.default)(a.default.mark((function s(){var o,r,c,l,u;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.commentLoading=!0,o=[],r=n.ticketInfo.updated_by.split(",").includes(window.username),c=[],n.ticketInfo.current_processors.split(",").forEach((function(t){c.push(t.split("(")[0])})),l=c.includes(window.username),a.next=8,n.$store.dispatch("ticket/getTicketAllComments",{ticket_id:n.ticketId,show_type:l||r?"ALL":"PUBLIC",page:t,page_size:e});case 8:return(u=a.sent).data.items.forEach((function(t,e){t.parent__id!==n.commentId&&n.getReplyCommet(t.parent__id,e)})),n.commentCount=u.data.count,n.totalPages=Math.ceil((u.data.count-1)/e)||1,o.push.apply(o,(0,i.default)(u.data.items)),o.sort((function(t,e){return e.id-t.id})),n.commentLoading=!1,a.abrupt("return",o.filter((function(t){return"ROOT"!==t.remark_type})));case 16:case"end":return a.stop()}}),s,n)})))()},getReplyCommet:function(t,e){var n=this;return(0,s.default)(a.default.mark((function i(){var s;return a.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!t){i.next=6;break}return i.next=3,n.$store.dispatch("ticket/getReplyComment",{ticket_id:n.ticketId,id:t});case 3:s=i.sent,n.$set(n.commentList[e],"parent_creator",s.data.creator),n.$set(n.commentList[e],"parent_content",s.data.content);case 6:case"end":return i.stop()}}),i,n)})))()},addTargetComment:function(t){var e=this;return(0,s.default)(a.default.mark((function n(){var i;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.commentId===t.parent__id){n.next=6;break}return n.next=3,e.$store.dispatch("ticket/getReplyComment",{ticket_id:e.ticketId,id:t.parent__id});case 3:i=n.sent,e.commentList.push(i.data),e.$refs.leftTicketContent.$refs.comment.jumpTargetComment(t);case 6:case"end":return n.stop()}}),n,e)})))()},handleTicketScroll:function(){var t=this;if(1!==this.totalPages&&!this.isPageOver&&!this.isThrottled&&"allComments"===this.$refs.leftTicketContent.stepActiveTab){this.isThrottled=!0;var e=setTimeout((0,s.default)(a.default.mark((function n(){var s,o,r;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.isThrottled=!1,!((s=t.leftTicketDom).scrollHeight-s.offsetHeight-s.scrollTop<10)){n.next=12;break}return t.moreLoading=!0,t.page+=1,clearTimeout(e),n.next=8,t.getComments(t.page,t.page_size);case 8:r=n.sent,(o=t.commentList).push.apply(o,(0,i.default)(r)),t.isPageOver=t.page===t.totalPages,t.moreLoading=!1;case 12:case"end":return n.stop()}}),n,t)}))),500)}},refreshComment:function(){var t=this;return(0,s.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getComments(1,t.curCommentLength+1);case 2:t.commentList=e.sent,t.page=1;case 4:case"end":return e.stop()}}),e,t)})))()},getProtocolsList:function(){var t=this,e={project_id:this.ticketInfo.project_key};this.$store.dispatch("slaManagement/getProtocolsList",e).then((function(e){var n=e.data.filter((function(e){return t.ticketInfo.sla.includes(e.name)})).map((function(t){var e=t.action_policies.map((function(t){var e={};return e[t.type]=t.condition.expressions[0].value,e}));return 0===t.action_policies.length?{sla_name:t.name,rWarningThreshold:1,pWarningThreshold:1,rTimeOutThreshold:1,pTimeOutThreshold:1}:{sla_name:t.name,rWarningThreshold:e[0][1]/100||1,pWarningThreshold:e[1][3]/100||1,rTimeOutThreshold:Object.prototype.hasOwnProperty.call(e[2],2)?e[2][2]/100:1,pTimeOutThreshold:Object.prototype.hasOwnProperty.call(e[2],2)?e[3][4]/100:e[2][4]/100}}));t.threshold=[].concat((0,i.default)(n))}))},viewProcess:function(t){this.$refs.leftTicketContent.changeDialogStatus(t)},ticketFinishAppraise:function(){this.$refs.ticketHeader.onTicketBtnClick("comment")},isNeedToLoop:function(){return this.nodeList.some((function(t){if(["TASK","TASK-SOPS"].includes(t.type)&&"RUNNING"===t.status)return!0;if("QUEUEING"===t.status)return!0;if(!1===t.is_schedule_ready)return!0;var e=t.tasks&&t.tasks.find((function(t){return t.processor.replace(/\((.?)\)/,"")===window.username}))||{};return!(!["SIGN","APPROVAL"].includes(t.type)||!["RUNNING","EXECUTED"].includes(e.status))}))},initTicketTimer:function(){var t=this;this.ticketTimer=setInterval((function(){t.isNeedToLoop()&&"FINISHED"!==t.ticketInfo.current_status?t.startTicketTimer():t.clearTicketTimer()}),5e3)},clearTicketTimer:function(){clearInterval(this.ticketTimer),this.ticketTimer=null},startTicketTimer:function(){var t,e=this,n={id:this.ticketId,token:this.token||void 0};this.$store.dispatch("deployOrder/getOnlyTicketNodeInfo",n).then((t=(0,s.default)(a.default.mark((function t(n){var i,s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n.data,s=e.nodeList,!i.some((function(t){return!s.find((function(n){return e.isSameStatusNode(t,n)}))}))){t.next=12;break}return e.nodeList=i,e.updateNodeList(i),e.getTriggers(),t.next=9,e.getTicketDetailInfo();case 9:return e.initCurrentStepData(),t.next=12,e.getCurrTickeStatusColor();case 12:case"end":return t.stop()}}),t,e)}))),function(e){return t.apply(this,arguments)}))},getTicketDetailInfo:function(){var t=this;return(0,s.default)(a.default.mark((function e(){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading.ticketLoading=!0,n={id:t.ticketId,step_id:t.$route.query.step_id||void 0,token:t.token||void 0},e.next=4,t.$store.dispatch("change/getOrderDetails",n).then((function(e){t.ticketInfo=e.data})).catch((function(e){t.ticketErrorMessage="OBJECT_NOT_EXIST"===e.data.code?t.$t('m.wiki["单据不存在或已被撤销"]'):t.$t('m.wiki["您没有权限访问"]')})).finally((function(){t.loading.ticketLoading=!1}));case 4:case"end":return e.stop()}}),e,t)})))()},getNodeList:function(){var t=this;this.loading.nodeInfoLoading=!0;var e={id:this.ticketId,token:this.token||void 0};return this.$store.dispatch("deployOrder/getOnlyTicketNodeInfo",e).then((function(e){t.updateNodeList(e.data)})).catch((function(e){(0,b.errorHandler)(e,t)})).finally((function(){t.loading.nodeInfoLoading=!1}))},updateNodeList:function(t){var e=this,n=(0,k.deepClone)(t);this.openFunction.FIRST_STATE_SWITCH&&(this.firstStateFields=n.find((function(t){return t.state_id===Number(e.ticketInfo.first_state_id)})).fields,this.firstStateFields.forEach((function(t){e.$set(t,"showFeild",!!t.show_type),e.$set(t,"val",t.value||""),e.conditionField(t,e.firstStateFields)}))),n.forEach((function(t){"AUTO_SUCCESS"===t.status&&(t.status="FINISHED"),"APPROVAL"===t.type&&t.fields.forEach((function(t){t.name=e.approveDict[t.name]||t.name,t.choice.forEach((function(t){t.name=e.approveDict[t.name]||t.name}))}))})),this.nodeList=n,this.$store.commit("deployOrder/setNodeList",this.nodeList),this.initCurrentStepData()},getCurrTickeStatusColor:function(){var t=this,e=this.ticketInfo.current_status,n=this.ticketInfo.service_type;this.$store.dispatch("ticketStatus/getTypeStatus",{type:n}).then((function(n){var i=n.data.find((function(t){return t.key===e}));t.$set(t.headerInfo,"statusColor",i?i.color_hex:"")})).catch((function(e){(0,b.errorHandler)(e,t)}))},getTriggers:function(){var t=this;this.$store.dispatch("trigger/getTicketHandleTriggers",{id:this.ticketId}).then((function(e){t.nodeTriggerList=e.data.filter((function(t){return"STATE"===t.signal_type})),t.ticketTriggerList=e.data.filter((function(t){return"FLOW"===t.signal_type}))})).catch((function(e){(0,b.errorHandler)(e,t)}))},initCurrentStepData:function(){this.$refs.leftTicketContent&&this.$refs.leftTicketContent.initCurrentStepData()},reloadTicket:function(){this.reload()},handleLineMouseDown:function(t){document.addEventListener("mouseup",this.handleMouseUp,!1),document.addEventListener("mousemove",this.handleLineMouseMove,!1);var e=document.querySelector(".ticket-container-right .bk-tab-header .bk-tab-label-wrapper .bk-tab-label-list").clientWidth,n=document.querySelector(".ticket-container-right .bk-tab-header").clientWidth;if(!this.dragLine.maxLength){this.dragLine.maxLength=n-e-4}this.dragLine.startX=t.pageX,this.dragLine.canMove=!0},handleMouseUp:function(){document.removeEventListener("mouseup",this.handleMouseUp,!1),document.removeEventListener("mousemove",this.handleLineMouseMove,!1),this.dragLine.base=this.dragLine.move,this.dragLine.canMove=!1},handleLineMouseMove:function(t){var e=this;if(this.dragLine.canMove){var n=document.getElementById("ticketContainerRight"),i=this.dragLine,a=i.startX,s=i.base,o=i.maxLength,r=t.pageX-a,c=s+r;if(r>0&&o-c<=0)return this.showRightTabs=!1,this.dragLine.move=o,void(n.style.display="none");window.requestAnimationFrame((function(){e.dragLine.move=c,n.style.width="calc(320px - "+c+"px)"}))}},onShowRightContent:function(){var t=this;this.showRightTabs=!0,this.$nextTick((function(){document.getElementById("ticketContainerRight").style.width="calc(320px - "+t.dragLine.base+"px)"}))},goToHome:function(){this.$router.push({name:"home"}),location.reload()}}}},SioU:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=h(n("14Xm")),a=h(n("gDS+")),s=h(n("m1cH")),o=h(n("D3Ub")),r=h(n("2Vgw")),c=h(n("NGZu")),l=h(n("c6Q5")),u=h(n("hA3y")),d=h(n("FGMr")),f=h(n("VflG")),m=n("CeR/"),p=n("ygAv");function h(t){return t&&t.__esModule?t:{default:t}}e.default={name:"dataContent",components:{getParam:c.default,postParam:l.default,responseData:u.default,getRpcParam:d.default},mixins:[f.default],props:{formInfo:{type:Object,default:function(){return{}}},changeInfo:{type:Object,default:function(){return{}}},apiDetail:{type:Object,default:function(){return{}}},workflow:{type:[String,Number],default:function(){return""}},state:{type:[String,Number],default:function(){return""}},apiInfo:{type:Object,default:function(){return{remote_system_id:"",remote_api_id:"",req_params:{},req_body:{},rsp_data:""}}},fieldInfo:{type:Object,default:function(){return{}}},kvRelation:{type:Object,default:function(){return{}}},prcTable:{type:Array,default:function(){return[]}}},data:function(){return{stateList:[],trueStatus:!0,falseStatus:!1,initDataContent:{}}},computed:{globalChoise:function(){return this.$store.state.common.configurInfo}},mounted:function(){this.getRelatedFields(),this.initDataContent=(0,p.deepClone)(this.apiDetail)},methods:{addDataLine:function(t,e){if(!this.changeInfo.meta||"APPROVE_RESULT"!==this.changeInfo.meta.code){this.fieldInfo.list.splice(e+1,0,{name:"",key:"",required:!1,nameCheck:!1,keyCheck:!1})}},deleteDataLine:function(t,e){1===this.fieldInfo.list.length||this.changeInfo.meta&&"APPROVE_RESULT"===this.changeInfo.meta.code||this.fieldInfo.list.splice(e,1)},closeError:function(){this.fieldInfo.list.forEach((function(t){t.nameCheck=!1,t.keyCheck=!1}))},getRelatedFields:function(){var t=this;if(this.state){var e={workflow:this.workflow,state:this.state,field:""};this.$store.dispatch("apiRemote/get_related_fields",e).then((function(e){t.stateList=e.data})).catch((function(e){(0,m.errorHandler)(e,t)})).finally((function(){}))}},countArrayAncestors:function(t){var e=[];return function t(n){"array"===n.parentInfo.type&&(e.push(n),t(n.parentInfo)),"object"===n.parentInfo.type&&t(n.parentInfo)}(t),e},listTojson:function(t){var e={};return t.length&&t.forEach((function(t){e[t.name]="CUSTOM"===t.source_type?t.value:"${params_"+t.value_key+"}"})),e},apiFz:function(){var t=this;return(0,o.default)(i.default.mark((function e(){var n,o,r,c,l,u,d,f,m,p,h,v,b;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$refs.getParam){e.next=4;break}e.t0={},e.next=7;break;case 4:return e.next=6,t.listTojson(t.$refs.getParam.paramTableData);case 6:e.t0=e.sent;case 7:if(t.apiInfo.req_params=e.t0,t.$refs.postParam){e.next=12;break}e.t1={},e.next=15;break;case 12:return e.next=14,t.treeToJson(t.$refs.postParam.bodyTableData.filter((function(t){return!t.level})));case 14:e.t1=e.sent;case 15:if(t.apiInfo.req_body=e.t1,n=!1,!t.$refs.getParam){e.next=25;break}if((o=t.$refs.getParam.paramTableData.filter((function(t){return t.is_necessary}))).forEach((function(t){t.isCheck=!0,t.isSatisfied="CUSTOM"===t.source_type?!!t.value:!!t.value_key})),!(r=o.filter((function(t){return!t.isSatisfied}))[0])){e.next=25;break}return t.$bkMessage({message:t.$t('m.treeinfo["请输入GET参数！"]'),theme:"error"}),n||(r.el.scrollIntoView(!0),n=!0),e.abrupt("return",!1);case 25:if(!t.$refs.postParam){e.next=34;break}if((c=t.$refs.postParam.bodyTableData.filter((function(t){return t.is_necessary&&"object"!==t.type&&"array"!==t.type}))).forEach((function(t){t.isCheck=!0,t.isSatisfied="CUSTOM"===t.source_type?t.value.toString():!!t.value_key})),!(l=c.filter((function(t){return!t.isSatisfied}))[0])){e.next=34;break}return t.$refs.postParam.bodyTableData.forEach((function(t){t.showChildren=!0,t.isShow=!0})),t.$bkMessage({message:t.$t('m.treeinfo["请输入POST参数！"]'),theme:"error"}),n||(l.el.scrollIntoView(!0),n=!0),e.abrupt("return",!1);case 34:if(t.$refs.responseData){e.next=37;break}return t.$bkMessage({message:t.$t('m.treeinfo["数据为空，请联系管理员"]'),theme:"error"}),e.abrupt("return",!1);case 37:if(u=t.$refs.responseData.responseTableData.filter((function(t){return t.isSelectedKey}))[0],d=t.$refs.responseData.responseTableData.filter((function(t){return t.isSelectedValue}))[0],u&&d){e.next=43;break}return t.$bkMessage({message:t.$t('m.treeinfo["请选择返回数据"]'),theme:"error"}),t.$refs.responseData.isCheck=!0,e.abrupt("return",!1);case 43:return f=[].concat((0,s.default)(JSON.parse((0,a.default)(u.ancestorsList))),[u.primaryKey]),m=[].concat((0,s.default)(JSON.parse((0,a.default)(d.ancestorsList))),[d.primaryKey]),e.next=47,t.countArrayAncestors(u);case 47:return p=e.sent,e.next=50,t.countArrayAncestors(d);case 50:if(h=e.sent,v=f.indexOf(p[0].primaryKey),b=m.indexOf(h[0].primaryKey),1===p.length&&1===h.length){e.next=55;break}return e.abrupt("return",!1);case 55:return t.apiInfo.rsp_data=f.slice(0,v).map((function(t){return t=t.replace(/^\d+\_/,"")})).join("."),t.kvRelation.key=f.slice(v+1).map((function(t){return t=t.replace(/^\d+\_/,"")})).join("."),t.kvRelation.name=m.slice(b+1).map((function(t){return t=t.replace(/^\d+\_/,"")})).join("."),e.abrupt("return",!0);case 59:case"end":return e.stop()}}),e,t)})))()},putChar:function(t,e){var n=this;t.key||(this.fieldInfo.list[e].key="",(0,r.default)(this.fieldInfo.list[e].name,{style:r.default.STYLE_NORMAL,heteronym:!1}).forEach((function(t){n.fieldInfo.list[e].key=""+n.fieldInfo.list[e].key+t})),this.fieldInfo.list[e].key=this.fieldInfo.list[e].key.toUpperCase(),this.fieldInfo.list[e].key=this.fieldInfo.list[e].key.replace(/\ /g,"_"),this.fieldInfo.list[e].key.length>=32&&(this.fieldInfo.list[e].key=this.fieldInfo.list[e].key.substr(0,32)))}}}},Souk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n("ga4Z")),a=n("CeR/"),s=o(n("vkdF"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"taskHandleTrigger",components:{TicketTriggerDialog:i.default,taskStatus:s.default},inject:["reloadTicket"],props:{taskInfo:{type:Object,default:function(){return{}}},title:{type:String,default:""},showStatus:{type:Boolean,default:!1}},data:function(){return{dropdownShow:!1,gettingTriggers:!0,triggerList:[]}},mounted:function(){this.getHandleList()},methods:{getHandleList:function(){var t=this,e={source_id:this.taskInfo.id,source_type:"task",operate_type:"MANUAL"};this.$store.dispatch("trigger/getTaskHandleTriggers",e).then((function(e){t.triggerList=e.data})).catch((function(e){(0,a.errorHandler)(e,t)})).finally((function(){t.gettingTriggers=!1}))},openTriggerDialog:function(t){this.$refs.triggerDialog.openDialog(t)},refreshTicket:function(){this.$emit("close-slider"),this.reloadTicket()}}}},SqHb:function(t,e,n){},Sy6k:function(t,e,n){},Szq4:function(t,e,n){"use strict";n.r(e);var i=n("serL"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"T+BV":function(t,e,n){"use strict";n.r(e);var i=n("LREg"),a=n("fBJX");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("2ICV");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"6bb2131c",null);e.default=r.exports},T2YI:function(t,e,n){"use strict";n.r(e);var i=n("o1/R"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},T3vI:function(t,e,n){"use strict";n.r(e);var i=n("VwbA"),a=n("VhbG");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("IcrL");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"2993b5be",null);e.default=r.exports},TNjk:function(t,e,n){"use strict";n.r(e);var i=n("dm0o"),a=n("Gz9R");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},TOmV:function(t,e,n){"use strict";n.r(e);var i=n("Vj9y"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},TQwK:function(t,e,n){"use strict";n.r(e);var i=n("PSjz"),a=n("P0kt");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("Udb1");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"37bd3d27",null);e.default=r.exports},TRMT:function(t,e,n){},TakZ:function(t,e,n){"use strict";n("d0m8")},TlPd:function(t,e,n){},TwjO:function(t,e,n){"use strict";n.r(e);var i=n("tudf"),a=n("LfIT");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("Z4tE");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"2f58d53e",null);e.default=r.exports},U2ju:function(t,e,n){"use strict";n.r(e);var i=n("ZFc0"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},U7zB:function(t,e,n){"use strict";n.r(e);var i=n("X1+z"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},UCAk:function(t,e,n){"use strict";n("MTdN")},UFO8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"descInfo",props:{value:{type:String,default:function(){return""}}},data:function(){return{isEdit:!1,desc:this.value}},watch:{value:function(t){this.desc=t}},mounted:function(){},methods:{edit:function(){this.isEdit=!0,this.$nextTick((function(){this.$refs.input.focus()}))},change:function(t){this.isEdit=!1,this.$emit("input",t)}}}},UHza:function(t,e,n){"use strict";n.r(e);var i=n("SW+1"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"UL6+":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{staticStyle:{"font-size":"0"},attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},[e("rich-text-editor",{attrs:{"full-title":t.item.name,id:t.item.key,"is-preview":t.disabled},model:{value:t.item.val,callback:function(e){t.$set(t.item,"val",e)},expression:"item.val"}}),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},UQsz:function(t,e,n){},Udb1:function(t,e,n){"use strict";n("Bi2R")},UeZN:function(t,e,n){},UftK:function(t,e,n){},UljE:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"member-content"},[e("bk-select",{class:{"member-select":!0,"half-member-select":t.recipientItem.key},attrs:{searchable:""},on:{selected:t.getSecondLevelList},model:{value:t.recipientItem.key,callback:function(e){t.$set(t.recipientItem,"key",e)},expression:"recipientItem.key"}},t._l(t.recipientKeyList,(function(t){return e("bk-option",{key:t.typeName,attrs:{id:t.typeName,name:t.name}})})),1),t._v(" "),"ORGANIZATION"!==t.recipientItem.key?["VARIABLE"===t.recipientItem.key?[e("bk-select",{staticStyle:{float:"left",width:"50%","margin-right":"6px"},attrs:{searchable:""},model:{value:t.recipientItem.value,callback:function(e){t.$set(t.recipientItem,"value",e)},expression:"recipientItem.value"}},t._l(t.variableList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)]:"PERSON"===t.recipientItem.key&&Array.isArray(t.recipientItem.value)?[e("member-select",{staticStyle:{float:"left",width:"50%","margin-right":"6px"},model:{value:t.recipientItem.value,callback:function(e){t.$set(t.recipientItem,"value",e)},expression:"recipientItem.value"}})]:"GENERAL"!==t.recipientItem.key&&"CMDB"!==t.recipientItem.key&&"IAM"!==t.recipientItem.key||!Array.isArray(t.recipientItem.value)?t._e():[e("bk-select",{staticStyle:{float:"left",width:"50%","margin-right":"6px"},attrs:{loading:t.recipientItem.isLoading,"show-select-all":"",multiple:"",searchable:""},model:{value:t.recipientItem.value,callback:function(e){t.$set(t.recipientItem,"value",e)},expression:"recipientItem.value"}},t._l(t.recipientItem.secondLevelList,(function(t){return e("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1)]]:t._e(),t._v(" "),"ORGANIZATION"===t.recipientItem.key?[e("div",{directives:[{name:"bk-clickoutside",rawName:"v-bk-clickoutside",value:t.closeTree,expression:"closeTree"}],staticClass:"bk-search-tree",staticStyle:{float:"left",width:"50%","margin-right":"6px"}},[e("div",{staticClass:"bk-search-tree-wrapper",on:{click:function(e){return e.stopPropagation(),t.showTree("view")}}},[e("span",{class:{"bk-color-tree":t.roles.viewtree.name}},[t._v("\n          "+t._s(t.roles.viewtree.showName||t.$t('m.serviceConfig["请选择"]'))+"\n        ")]),t._v(" "),e("i",{staticClass:"bk-select-angle bk-icon icon-framework"})]),t._v(" "),e("transition",{attrs:{name:"common-fade"}},[t.roles.viewTreeOpen?e("div",{staticClass:"bk-search-tree-content"},[e("export-tree",{attrs:{"tree-data-list":t.roles.viewTreeDataList},on:{toggle:t.toggleInfo,toggleChildren:function(e){return t.toggleChildren(...arguments,"view")}}})],1):t._e()])],1)]:t._e(),t._v(" "),"MULTI_MEMBERS"===t.itemInfo.type?e("div",{staticClass:"bk-between-operat"},[e("i",{staticClass:"bk-itsm-icon icon-flow-add",on:{click:t.addRecipient}}),t._v(" "),e("i",{staticClass:"bk-itsm-icon icon-flow-reduce",class:{"bk-no-delete":1===t.itemInfo.value.length},on:{click:t.deleteRecipient}})]):t._e()],2)},a=[];i._withStripped=!0},UsFA:function(t,e,n){"use strict";n.r(e);var i=n("XClk"),a=n("nVin");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("mOxC");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"27b534c8",null);e.default=r.exports},Utxi:function(t,e,n){},UvLR:function(t,e,n){"use strict";n.r(e);var i=n("FXqT"),a=n("wHqx");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("TakZ");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"b00a4b5c",null);e.default=r.exports},V77z:function(t,e,n){"use strict";n.r(e);var i=n("nMdP"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},VFWN:function(t,e,n){},VGC8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"timeLine",props:{lineList:{type:[Array,Object],default:function(){return[]}},parent:{type:String,default:"normal"}},data:function(){return{}}}},VSrL:function(t,e,n){},VTYh:function(t,e,n){"use strict";n.r(e);var i=n("8YqZ"),a=n("PbHM");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("q//X");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"49f5fbef",null);e.default=r.exports},Vbtg:function(t,e,n){"use strict";n("wHkh")},VflG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n("m1cH")),a=c(n("P2sY")),s=c(n("GQeE")),o=n("Zw8t"),r=n("ygAv");function c(t){return t&&t.__esModule?t:{default:t}}e.default={props:{},data:function(){},created:function(){},watch:{},methods:{jsonschemaToList:function(t){var e=[],n=function t(e,n,i,a,o){var r={showChildren:!0,checkInfo:!1,key:n,type:i.type||"",desc:i.description.toString(),default:void 0!==i.default&&i.default.toString()?i.default:"",is_necessary:!a||!!o&&!!o.length&&-1!==o.indexOf(n),children:[],value:void 0!==i.default?i.default:""};if("object"===r.type&&(r.has_children=!(!i.properties||!(0,s.default)(i.properties).length)),"array"===r.type&&(r.has_children=i.items,r.showChildren=!0),e.push(r),"object"===r.type)for(var c in i.properties)t(r.children,c,i.properties[c],1,i.required||[]);"array"===r.type&&i.items&&t(r.children,"items",i.items,1,i.required||[])};for(var i in t)n(e,i,t[i],0,["root"]);return e},listToJsonschema:function(t,e){var n={},i=function t(n,i,s,o){if(i.key&&i.type){var r={};if(r[i.key]={type:i.type,description:i.desc.toString(),required:i.children&&i.children.length?i.children.filter((function(t){return t.is_necessary})).map((function(t){return t.key})):[]},r[i.key].required.length||delete r[i.key].required,s||(r[i.key].$schema="http://json-schema.org/draft-04/schema#"),"array"===i.type){if(i.children.length&&(r[i.key].items={}),"array"===o)for(var c in(0,a.default)(n,r[i.key]),i.children)t(n.items,i.children[c],1,"array");if("object"===o)for(var l in(0,a.default)(n,r),i.children)t(n[i.key].items,i.children[l],1,"array")}else if("object"===i.type){if(r[i.key].properties={},"array"===o)for(var u in(0,a.default)(n,r[i.key]),i.children)t(n.properties,i.children[u],1,"object");if("object"===o)for(var d in(0,a.default)(n,r),i.children)t(n[i.key].properties,i.children[d],1,"object")}else void 0!==i.default&&i.default.toString()&&("number"===i.type&&(i.default=Number(i.default)),"boolean"===i.type&&(i.default=!!i.default),"string"===i.type&&(i.default=i.default.toString())),r[i.key].default=i.default.toString()?i.default:"",void 0!==i.default_temp&&i.default_temp.toString()&&("number"===i.type&&(i.default_temp=Number(i.default_temp)),"boolean"===i.type&&(i.default_temp=!!i.default_temp),"string"===i.type&&(i.default_temp=i.default_temp.toString())),"update"===e&&(r[i.key].default=i.default_temp.toString()?i.default_temp:""),"array"===o&&(0,a.default)(n,r[i.key]),"object"===o&&(0,a.default)(n,r)}};for(var s in t)i(n,t[s],0,"object");return n},jsonschemaToJson:function(t){var e={},n=function t(e,n,i,s,o){var r={};if("object"===i.type){if(r[n]={},"object"===o)for(var c in(0,a.default)(e,r),i.properties)t(e[n],c,i.properties[c],1,"object");else if("array"===o)for(var l in e.push(r[n]),i.properties)t(e[0],l,i.properties[l],1,"object")}else if("array"===i.type)r[n]=[],"object"===o?((0,a.default)(e,r),i.children&&i.children.length&&t(e[n],"items",i.items,1,"array")):"array"===o&&(e.push(r[n]),i.children&&i.children.length&&t(e[0],n,i.items,1,"array"));else{switch(i.type){case"boolean":r[n]=!!i.default;break;case"number":r[n]=Number(i.default);break;case"string":r[n]=i.default.toString()||""}"object"===o?(0,a.default)(e,r):"array"===o&&e.push(r[n])}};for(var i in t)n(e,i,t[i],0,"object");return e},jsonToJsonschema:function(t){var e={root:{$schema:"http://json-schema.org/draft-04/schema#",type:"object",description:this.$t('m.systemConfig["初始化数据"]'),required:[],properties:{}}},n=function t(e,n,i,o,r){if(i&&null!=o){"array"!==e.type&&e.required.push(i);var c={};if(c[i]={type:o.constructor.name.toLowerCase(),description:"",required:[]},"array"===o.constructor.name.toLowerCase()){if(o.length&&(c[i].items={}),"array"===r)for(var l in(0,a.default)(n,c[i]),o)t(n,n.items,"items",o[l],"array");if("object"===r)for(var u in(0,a.default)(n,c),o)t(n[i],n[i].items,"items",o[u],"array")}else if("object"===o.constructor.name.toLowerCase()){if(c[i].properties={},"array"===r)for(var d in(0,a.default)(n,c[i]),o)t(n,n.properties,d,o[d],"object");if("object"===r&&((0,a.default)(n,c),(0,s.default)(o).length))for(var f in o)t(n[i],n[i].properties,f,o[f],"object")}else void 0!==o&&o.toString()&&("number"===o.constructor.name.toLowerCase()&&(o=Number(o)),"boolean"===o.constructor.name.toLowerCase()&&(o=!!o),"string"===o.constructor.name.toLowerCase()&&(o=o.toString())),c[i].default=o,"array"===r&&(0,a.default)(n,c[i]),"object"===r&&(0,a.default)(n,c)}};for(var i in t)n(e.root,e.root.properties,i,t[i],"object");return e},treeToTableList:function(t,e,n,a,s){var o=[];return function t(e,n,a,s,o,r){for(var c=0;c<n.length;c++){n[c].lastType=o,n[c].level=a,n[c].isShow=!0,n[c].showChildren=!0,n[c].primaryKey=a+"_"+n[c].key,"array"===o&&(n[c].primaryKey+="_"+c),n[c].parentPrimaryKey=s,n[c].ancestorsList=r;var l=[].concat((0,i.default)(r),[n[c].primaryKey]);n[c].ancestorsList_str=l.toString(),e.push(n[c]),n[c].children&&n[c].children.length&&t(e,n[c].children,a+1,n[c].primaryKey,n[c].type,l)}}(o,t,e||0,n||"",a||"object",s&&s.length?s:[]),o},treeToJson:function(t){var e={},n=function t(e,n,i,s){if(n.key)if("array"===n.type){if("array"===s)for(var o in e.push([]),n.children)t(e[e.length-1],n.children[o],1,"array");if("object"===s){var r={};for(var c in r[n.key]=[],(0,a.default)(e,r),n.children)t(e[n.key],n.children[c],1,"array")}}else if("object"===n.type){var l={};if("array"===s)for(var u in e.push(l),n.children)t(e[e.length-1],n.children[u],1,"object");if("object"===s)for(var d in l[n.key]={},(0,a.default)(e,l),n.children)t(e[n.key],n.children[d],1,"object")}else{if("number"===n.type&&(n.value=Number(n.value)),"array"===s){var f="CUSTOM"===n.source_type?n.value:"${params_"+n.value_key+"}";e.push(f)}if("object"===s){var m={};m[n.key]="CUSTOM"===n.source_type?n.value:"${params_"+n.value_key+"}",(0,a.default)(e,m)}}};for(var i in t)n(e,t[i],0,"object");return e},jsonValueToTree:function(t,e){var n=(0,r.deepClone)(e),i=function t(e,n,i,s){var c=(0,o.checkDataType)(i);if("object"===s){var l=e.find((function(t){return t.key===n}));if(!l)return;if("Array"===c){if(!l.children||!l.children.length)return;for(var u=(0,a.default)({parentInfo:""},l.children[0]),d=1;d<i.length;d++)l.children.push((0,r.deepClone)(u));for(var f in i)t(l.children[f],"items",i[f],"array")}else if("Object"===c)for(var m in i)t(l.children,m,i[m],"object");else/^\$\{params_.*\}$/.test(i)?(l.source_type="FIELDS",l.value_key=i?(0,r.deepClone)(i).replace(/^\$\{params_/,"").replace(/\}$/,""):"",l.value=void 0!==i&&i.toString()?(0,r.deepClone)(i):""):(l.source_type="CUSTOM",l.value=void 0!==i&&i.toString()?(0,r.deepClone)(i):"",l.value_key="",l.default_temp=l.value)}else if("array"===s)if("Array"===c){var p=e.find((function(t){return t.key===n}));if(!p)return;if(!p.children||!p.children.length)return;for(var h=e.children[0],v=1;v<i.length;v++)e.children.push((0,r.deepClone)(h));for(var b in i)t(e.children[b],"items",i[b],"array")}else if("Object"===c)for(var k in i)t(e.children,k,i[k],"object");else/^\$\{params_.*\}$/.test(i)?(e.source_type="FIELDS",e.value_key=i?(0,r.deepClone)(i).replace(/^\$\{params_/,"").replace(/\}$/,""):""):(e.source_type="CUSTOM",e.value=void 0!==i&&i.toString()?(0,r.deepClone)(i):"",e.default_temp=e.value)};for(var s in t)i(n[0].children,s,t[s],"object");return n}}}},VhbG:function(t,e,n){"use strict";n.r(e);var i=n("/9eO"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},Vj9y:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=f(n("m1cH")),a=f(n("P2sY")),s=f(n("14Xm")),o=f(n("gDS+")),r=f(n("D3Ub")),c=f(n("QbLZ")),l=f(n("VflG")),u=n("ygAv"),d=n("L2JU");function f(t){return t&&t.__esModule?t:{default:t}}e.default={name:"inputParams",mixins:[l.default],props:{itemInfo:{type:Object,default:function(){return{}}}},data:function(){return{sourceTypeList:[{id:1,key:"CUSTOM",name:this.$t('m.treeinfo["自定义"]')},{id:2,key:"FIELDS",name:this.$t('m.treeinfo["引用变量"]')}],variableList:[]}},computed:(0,c.default)({paramTableData:function(){return this.itemInfo.apiContent.bodyTableData.filter((function(t){return t.isShow}))},globalChoise:function(){return this.$store.state.common.configurInfo}},(0,d.mapState)("trigger",{triggerVariables:function(t){return t.triggerVariables}})),watch:{triggerVariables:function(t){this.variableList=t}},created:function(){this.initData()},mounted:function(){this.variableList=this.triggerVariables},methods:{initData:function(){var t=this;return(0,r.default)(s.default.mark((function e(){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$set(t.itemInfo.apiContent,"treeDataList",{}),e.next=3,t.jsonschemaToList({root:JSON.parse((0,o.default)(t.itemInfo.apiContent.req_body))});case 3:return t.itemInfo.apiContent.treeDataList=e.sent,t.itemInfo.value&&(t.itemInfo.apiContent.treeDataList=t.jsonValueTreeList(t.itemInfo.value,JSON.parse((0,o.default)(t.itemInfo.apiContent.treeDataList)))),e.next=7,t.treeToTableList(JSON.parse((0,o.default)(t.itemInfo.apiContent.treeDataList[0].children)));case 7:return t.itemInfo.apiContent.bodyTableData=e.sent,(n=JSON.parse((0,o.default)(t.itemInfo.apiContent.bodyTableData))).forEach((function(t){t.name=t.key||"",t.children=[],t.source_type=t.source_type||"CUSTOM",t.value=void 0!==t.value?t.value:"",t.value_key=void 0!==t.value_key&&t.value_key.toString()?t.value_key:""})),t.recordChildren(n),e.next=13,n;case 13:t.itemInfo.apiContent.bodyTableData=e.sent;case 14:case"end":return e.stop()}}),e,t)})))()},jsonValueTreeList:function(t,e){var n=function t(e,n,i,s,r){if("object"===r){var c=n.filter((function(t){return t.key===i}));if(!c.length)return;if("array"===s.constructor.name.toLowerCase()){if(!c[0].children||!c[0].children.length)return;for(var l=JSON.parse((0,o.default)((0,a.default)({parentInfo:""},c[0].children[0]))),d=1;d<s.length;d++)c[0].children.push((0,u.deepClone)(l));for(var f in s)t(c[0].children,c[0].children[f],"items",s[f],"array")}else if("object"===s.constructor.name.toLowerCase())if(s.ref_type)"reference"===s.ref_type?(c[0].source_type="FIELDS",c[0].value_key=s.value,c[0].value=s.value):(c[0].source_type="CUSTOM",c[0].value=s.value,c[0].value_key="",c[0].default_temp=c[0].value);else for(var m in s)t(c[0],c[0].children,m,s[m],"object");else"reference"===s.ref_type?(c[0].source_type="FIELDS",c[0].value_key=s.value,c[0].value=s.value):(c[0].source_type="CUSTOM",c[0].value=s.value,c[0].value_key="",c[0].default_temp=c[0].value)}else if("array"===r)if("array"===s.constructor.name.toLowerCase()){var p=n.filter((function(t){return t.key===i}));if(!p.length)return;if(!p[0].children||!p[0].children.length)return;for(var h=JSON.parse((0,o.default)(n.children[0])),v=1;v<s.length;v++)n.children.push(h);for(var b in s)t(n.children,n.children[b],"items",s[b],"array")}else if("object"===s.constructor.name.toLowerCase())if(s.ref_type)"reference"===s.ref_type?(n.source_type="FIELDS",n.value_key=s.value):(n.source_type="CUSTOM",n.value=s.value,n.default_temp=n.value);else for(var k in s)t(n,n.children,k,s[k],"object");else"reference"===s.ref_type?(n.source_type="FIELDS",n.value_key=s.value):(n.source_type="CUSTOM",n.value=s.value,n.default_temp=n.value)};for(var i in t)n(e[0],e[0].children,i,t[i],"object");return e},recordChildren:function(t,e){for(var n=t.map((function(t){return t.level})),a=Math.max.apply(Math,(0,i.default)(n)),s=function(e){t.filter((function(t){return t.level===e})).forEach((function(e){!function(t,e){t.filter((function(t){return t.level===e.level-1&&t.primaryKey===e.parentPrimaryKey&&t.ancestorsList.toString()===e.ancestorsList.slice(0,-1).toString()}))[0].children.push(e)}(t,e)}))},o=a;o>(e||0);o--)s(o)},changeState:function(t){t.showChildren=!t.showChildren,t.children.forEach((function(e){e.isShow=t.showChildren})),t.showChildren||this.closeChildren(t)},closeChildren:function(t){var e=this;t.children.forEach((function(t){t.isShow=!1,t.has_children&&(t.showChildren=!1,e.closeChildren(t))}))},countSon:function(t){return 1===this.itemInfo.apiContent.bodyTableData.filter((function(e){return e.level===t.level-1&&e.primaryKey===t.parentPrimaryKey&&e.ancestorsList.toString()===t.ancestorsList.slice(0,-1).toString()}))[0].children.length},countChildren:function(t){var e=this;return(0,r.default)(s.default.mark((function n(){var i,a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=0,a=function t(e){if(e.children&&e.children.length)for(var n=0;n<e.children.length;n++)i+=1,t(e.children[n])},e.next=4,a(t);case 4:return e.abrupt("return",i);case 5:case"end":return e.stop()}}),n,e)})))()},cleanValue:function(t){var e=this;return(0,r.default)(s.default.mark((function n(){var i,a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=JSON.parse((0,o.default)(t)),a=function t(e){if(e.value="",e.source_type="CUSTOM",e.children&&e.children.length)for(var n=0;n<e.children.length;n++)t(e.children[n])},e.next=4,a(i);case 4:return e.abrupt("return",i);case 5:case"end":return e.stop()}}),n,e)})))()},addChildren:function(t){var e=this;return(0,r.default)(s.default.mark((function n(){var a,r,c,l,u,d;return s.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.itemInfo.apiContent.bodyTableData.filter((function(e){return e.level===t.level-1&&e.primaryKey===t.parentPrimaryKey&&e.ancestorsList.toString()===t.ancestorsList.slice(0,-1).toString()}))[0],c=e.itemInfo.apiContent.bodyTableData.indexOf(r)+1,n.next=4,e.countChildren(r);case 4:return l=n.sent,n.next=7,e.cleanValue(r.children[0]);case 7:return u=n.sent,n.next=10,e.treeToTableList(JSON.parse((0,o.default)([].concat((0,i.default)(r.children),[u]))),r.level+1,r.primaryKey,"array",r.ancestorsList);case 10:return d=n.sent,n.next=13,d.forEach((function(t){t.children=[]}));case 13:return r.children=d.filter((function(t){return t.level===r.level+1})),n.next=16,e.recordChildren(d,r.level+1);case 16:(a=e.itemInfo.apiContent.bodyTableData).splice.apply(a,[c,l].concat((0,i.default)(d)));case 17:case"end":return n.stop()}}),n,e)})))()},deletChildren:function(t){var e=this;return(0,r.default)(s.default.mark((function n(){var i,a,o;return s.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.countSon(t)){n.next=2;break}return n.abrupt("return");case 2:if(!((i=e.itemInfo.apiContent.bodyTableData.filter((function(e){return e.level===t.level-1&&e.primaryKey===t.parentPrimaryKey&&e.ancestorsList.toString()===t.ancestorsList.slice(0,-1).toString()}))[0].children).length<=1)){n.next=5;break}return n.abrupt("return");case 5:return i.splice(i.indexOf(t),1),a=e.itemInfo.apiContent.bodyTableData.indexOf(t),n.next=9,e.countChildren(t);case 9:o=n.sent,e.itemInfo.apiContent.bodyTableData.splice(a,o+1);case 11:case"end":return n.stop()}}),n,e)})))()}}}},Vmvk:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-sops-node-content"},[e("div",{staticClass:"bk-page bk-auto-node-basic"},[e("p",{staticClass:"bk-header-bold"},[t._v(t._s(t.$t('m.newCommon["基本信息"]')))]),t._v(" "),e("div",{staticClass:"bk-main bk-flex"},[e("div",{staticClass:"bk-node-name"},[e("span",[t._v(t._s(t.$t('m.newCommon["节点名称"]'))+" : ")]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.name||"--"))])])])]),t._v(" "),e("div",{staticClass:"bk-page bk-auto-node-basic"},[e("p",{staticClass:"bk-header-bold"},[t._v(t._s(t.$t('m.newCommon["任务参数"]')))]),t._v(" "),e("div",[e("div",{staticClass:"bk-param"},[e("bk-table",{attrs:{data:t.tableData,"ext-cls":"bk-editor-table"}},[e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['字段名']"),prop:"name"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['参数值']"),width:"400"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(n.row.value||"--"))])]}}],null,!1,3905507693)})],1)],1)])]),t._v(" "),e("div",{staticClass:"bk-page bk-auto-node-basic"},[e("p",{staticClass:"bk-header-bold"},[t._v(t._s(t.$t('m.taskTemplate["执行详情"]')))]),t._v(" "),e("div",[e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.taskTemplate["执行状态："]')))]),t._v(" "),e("span",{class:{statusShow:!0,statusSuccess:"SUCCESS"===t.status,statusRunning:"RUNNING"===t.status,statusFailed:"FAILED"===t.status}},[t._v("\n          "+t._s(t.status||"--"))])]),t._v(" "),e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.common["开始时间："]')))]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.create_at))])]),t._v(" "),e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.common["结束时间："]')))]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.end_at||t.$t('m.taskTemplate["尚未结束"]'))+"\n        ")])]),t._v(" "),e("div",{staticClass:"bk-partition errorDiv"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.taskTemplate["错误信息："]')))])]),t._v(" "),e("div",{staticClass:"langError"},[t._v(t._s(t.nodeInfo.error_message||"--"))])])])])},a=[];i._withStripped=!0},VrAx:function(t,e,n){"use strict";n.r(e);var i=n("sHh5"),a=n("3jvg");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("XEYe");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"5ecc5a94",null);e.default=r.exports},VtRw:function(t,e,n){"use strict";n.r(e);var i=n("MI7q"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"Vv2+":function(t,e,n){"use strict";n.r(e);var i=n("fOTe"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},VwbA:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-api-call"},[t._l(t.item.wayInfo.field_schema,(function(n,i){return[e("bk-form-item",{key:i,attrs:{"ext-cls":"bk-field-schema mb20",label:n.name,required:n.required,desc:n.tips}},["api_source"===n.key?[e("bk-select",{attrs:{"ext-cls":"bk-form-display",clearable:!1,placeholder:t.$t("m.treeinfo['请选择接入系统']"),searchable:""},on:{selected:function(e){return t.changeCode(...arguments,n)}},model:{value:n.systemId,callback:function(e){t.$set(n,"systemId",e)},expression:"itemInfo.systemId"}},t._l(t.apiSysList,(function(t){return e("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1),t._v(" "),n.systemId?[e("bk-select",{attrs:{"ext-cls":"bk-form-display",clearable:!1,searchable:""},on:{selected:function(e){return t.changeApi(...arguments,n)}},model:{value:n.apiId,callback:function(e){t.$set(n,"apiId",e)},expression:"itemInfo.apiId"}},t._l(t.apiList,(function(t){return e("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1)]:t._e()]:t._e(),t._v(" "),"API_INFO"===n.type&&t.apiId?[e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isLoading},expression:"{ isLoading: isLoading }"}],staticStyle:{"min-height":"100px"}},[t.isLoading?t._e():e("input-params",{attrs:{"item-info":n}})],1)]:t._e()],2)]}))],2)},a=[];i._withStripped=!0},"W/0y":function(t,e,n){"use strict";n.r(e);var i=n("D/nJ"),a=n("1exa");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("IfDs");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"2f4347da",null);e.default=r.exports},"W3y+":function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8yIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDI0IDEwMjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojYzNjZGQ3O30KPC9zdHlsZT4KPGcgaWQ9IuS4iuS8oCI+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODk3LDQyMi45Yy0yOC40LTI4LjQtNjMuMy00Ny44LTEwMS4zLTU3Yy0xMC4xLTU3LjktMzcuNi0xMTEuMi04MC0xNTMuNkM2NjEuMywxNTgsNTg4LjksMTI4LDUxMiwxMjgKCQlzLTE0OS4zLDMwLTIwMy42LDg0LjRjLTQyLjQsNDIuNC02OS45LDk1LjctODAsMTUzLjZjLTM4LjEsOS4yLTczLDI4LjYtMTAxLjMsNTdjLTQwLjYsNDAuNi02Myw5NC42LTYzLDE1MnYxMAoJCWMwLDU3LjQsMjIuNCwxMTEuNCw2MywxNTJzOTQuNiw2MywxNTIsNjNoNDF2LTY0aC00MWMtODMuMywwLTE1MS02Ny43LTE1MS0xNTF2LTEwYzAtODMuMyw2Ny43LTE1MSwxNTEtMTUxaDkuMgoJCWMtMC4xLTIuNi0wLjItNS4zLTAuMi03LjlsMCwwbDAsMGMwLTEuNywwLTMuMywwLjEtNC45YzAtMC40LDAtMC44LDAtMS4zYzAtMS42LDAuMS0zLjIsMC4yLTQuN2MwLTAuNCwwLTAuNywwLjEtMS4xCgkJYzAuMS0xLjIsMC4xLTIuNSwwLjItMy43YzAtMC42LDAuMS0xLjIsMC4xLTEuOGMwLjEtMS40LDAuMi0yLjcsMC4zLTQuMWMwLjEtMC44LDAuMi0xLjYsMC4zLTIuNWMwLjEtMC42LDAuMS0xLjIsMC4yLTEuOQoJCWMxLjItMTAuMywzLjEtMjAuNCw1LjYtMzAuMmwwLDBjOS44LTM4LjQsMjkuOC03My42LDU4LjYtMTAyLjNDMzk1LjksMjE1LjMsNDUyLjIsMTkyLDUxMiwxOTJzMTE2LjEsMjMuMywxNTguNCw2NS42CgkJYzI4LjcsMjguNyw0OC43LDYzLjksNTguNiwxMDIuM2wwLDBjMi41LDkuOCw0LjQsMTkuOSw1LjYsMzAuMmMwLjEsMC42LDAuMSwxLjIsMC4yLDEuOWMwLjEsMC44LDAuMiwxLjYsMC4zLDIuNQoJCWMwLjEsMS40LDAuMiwyLjcsMC4zLDQuMWMwLDAuNiwwLjEsMS4yLDAuMSwxLjhjMC4xLDEuMiwwLjIsMi41LDAuMiwzLjdjMCwwLjQsMCwwLjcsMC4xLDEuMWMwLjEsMS42LDAuMSwzLjIsMC4yLDQuNwoJCWMwLDAuNCwwLDAuOCwwLDEuM2MwLDEuNiwwLjEsMy4zLDAuMSw0LjlsMCwwbDAsMGMwLDIuNy0wLjEsNS4zLTAuMiw3LjloOS4yYzgzLjMsMCwxNTEsNjcuNywxNTEsMTUxdjEwYzAsODMuMy02Ny43LDE1MS0xNTEsMTUxCgkJaC00MXY2NGg0MWM1Ny40LDAsMTExLjQtMjIuNCwxNTItNjNzNjMtOTQuNiw2My0xNTJ2LTEwQzk2MCw1MTcuNSw5MzcuNiw0NjMuNSw4OTcsNDIyLjl6Ii8+Cgk8cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjM3Ni4yLDYwMi45IDQyMS41LDY0OC4xIDQ4MCw1ODkuNiA0ODAsODk2IDU0NCw4OTYgNTQ0LDU4OS42IDYwMi41LDY0OC4xIDY0Ny44LDYwMi45IDUxMiw0NjcuMSAJIi8+CjwvZz4KPC9zdmc+Cgo="},WOBF:function(t,e,n){"use strict";n("utoA")},WP3n:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("CeR/"),s=n("BWJp"),o=(i=s)&&i.__esModule?i:{default:i};e.default={name:"hiddenConditions",mixins:[o.default],props:{workflow:{type:[String,Number],default:function(){return""}},state:{type:[String,Number],default:function(){return""}},formInfo:{type:Object,default:function(){return{}}},templateStage:{type:String,default:""},templateInfo:{type:Object,default:function(){return{}}},addOrigin:{type:Object,default:function(){return{isOther:!1,addOriginInfo:{}}}}},data:function(){return{isLoading:!1,listInfo:[],conditionType:"and",fieldList:[],checkStatus:!1}},computed:{globalChoise:function(){return this.$store.state.common.configurInfo}},mounted:function(){this.getFrontNodesList()},methods:{getFrontNodesList:function(){var t=this;if(this.state||this.templateInfo.id){var e="",n={};this.state&&(e="apiRemote/get_related_fields",n.workflow=this.workflow,n.state=this.state),this.templateInfo.id&&(e="taskTemplate/getFrontFieldsList",n.id=this.templateInfo.id,n.stage=this.templateStage),this.isLoading=!0,this.$store.dispatch(e,n).then((function(e){t.frontNodesList=e.data,t.initData()})).catch((function(e){(0,a.errorHandler)(e,t)})).finally((function(){t.isLoading=!1}))}},initData:function(){var t=this;this.listInfo=[],this.formInfo.show_conditions.expressions&&this.formInfo.show_conditions.expressions.length?(this.formInfo.show_conditions.expressions.forEach((function(e){t.frontNodesList.forEach((function(n){if(n.key===e.key){var i="MULTISELECT"===n.type||"CHECKBOX"===n.type||"MEMBERS"===n.type||"TREESELECT"===n.type,a=t.checkBetweenList(n.type);t.listInfo.push({condition:e.condition,key:e.key,value:i?e.value.split(","):e.value,choiceList:n.choice,type:e.type,multiSelect:i,betweenList:a})}}))})),this.conditionType=this.formInfo.show_conditions.type):(this.listInfo=[{condition:"",key:"",value:"",choiceList:"",type:"STRING",multiSelect:!1,betweenList:this.checkBetweenList("STRING")}],this.conditionType="and"),this.fieldList=[],this.frontNodesList.forEach((function(e){e.key===t.formInfo.key||["CUSTOMTABLE","FILE","RICHTEXT","TABLE","DATETIMERANGE","MEMBERS"].some((function(t){return t===e.type}))||t.fieldList.push(e)})),this.fieldList.forEach((function(e){"RPC"===e.source_type&&t.getRpcData(e)})),this.isNecessaryToWatch({fields:this.fieldList},"workflow")},getRpcData:function(t){var e=this;this.$store.dispatch("apiRemote/getRpcData",t).then((function(e){t.choice=e.data})).catch((function(t){(0,a.errorHandler)(t,e)}))},checkBetweenList:function(t){return["MULTISELECT","CHECKBOX","MEMBERS","TREESELECT"].some((function(e){return e===t}))?this.globalChoise.methods.filter((function(t){return"issuperset"===t.typeName||"notissuperset"===t.typeName})):["DATE","DATETIME","DATETIMERANGE","INT"].some((function(e){return e===t}))?this.globalChoise.methods.filter((function(t){return"issuperset"!==t.typeName&&"notissuperset"!==t.typeName})):this.globalChoise.methods.filter((function(t){return"=="===t.typeName||"!="===t.typeName}))},clearCondition:function(){this.listInfo=[{condition:"",key:"",value:"",choiceList:"",type:"STRING",multiSelect:!1,betweenList:this.checkBetweenList("STRING")}]},changeName:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=this.fieldList.filter((function(t){return t.key===e[0]}))[0],a="MULTISELECT"===i.type||"CHECKBOX"===i.type||"MEMBERS"===i.type||"TREESELECT"===i.type,s=this.checkBetweenList(i.type);e[2].type=i.type,e[2].value=a?[]:"",e[2].betweenList=s,e[2].condition="","SELECT"===i.type||"MULTISELECT"===i.type||"RADIO"===i.type||"CHECKBOX"===i.type||"MEMBERS"===i.type||"TREESELECT"===i.type?(e[2].choiceList=[],i.choice.forEach((function(t){e[2].choiceList.push({key:t.key,name:t.name})})),e[2].multiSelect=a):e[2].choiceList=""},addNode:function(t,e){var n={condition:"",key:"",value:"",choiceList:"",type:"STRING",multiSelect:!1,betweenList:this.checkBetweenList("STRING")};this.listInfo.splice(e+1,0,n)},deleteNode:function(t,e){1!==this.listInfo.length&&this.listInfo.splice(e,1)},checkList:function(){return this.checkStatus=this.listInfo.some((function(t){return!(t.key&&t.condition&&(Array.isArray(t.value)?t.value.length:t.value))})),this.checkStatus}}}},WSG0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(n("oCYn")),a=s(n("C65D"));function s(t){return t&&t.__esModule?t:{default:t}}var o=i.default.extend(a.default);e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"title",formData:[],context:{schemes:{}}},e=new o({el:document.createElement("div"),propsData:{isShow:!1,title:t.title,formData:t.formData,context:t.context},data:{isShow:!1}});e.viewmodel=e.$mount();var n=document.body;return n.appendChild(e.viewmodel.$el),e.isShow=!0,e.$on("update:isShow",(function(t){t||(e.isShow=!1)})),e.viewmodel}},WenH:function(t,e,n){},Wew5:function(t,e,n){},Wl5c:function(t,e,n){"use strict";n.r(e);var i=n("lpJK"),a=n("b0Dy");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},WmCl:function(t,e,n){"use strict";n("cOQe")},WnJQ:function(t,e,n){"use strict";n.r(e);var i=n("6i3v"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},Wz47:function(t,e,n){},WzOL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("QbLZ")),a=r(n("u8Ap")),s=n("L2JU"),o=n("CeR/");function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"triggerFields",components:{memberSelect:a.default},props:{item:{type:Object,default:function(){return{}}}},data:function(){return{keyList:[]}},computed:(0,i.default)({globalChoise:function(){return this.$store.state.common.configurInfo}},(0,s.mapState)("trigger",{triggerVariables:function(t){return t.triggerVariables}})),watch:{triggerVariables:function(t){this.keyList=t}},created:function(){this.item.value&&(this.keyList=this.triggerVariables,this.getConditionList())},methods:{getConditionList:function(){var t=this,e=this.keyList.filter((function(e){return e.key===t.item.key}))[0];["SELECT","RADIO","MULTISELECT","CHECKBOX"].some((function(t){return t===e.type}))&&(this.$set(this.item,"loading",!0),this.$set(this.item,"options",[]),"DATADICT"===e.source_type?this.$store.dispatch("datadict/get_data_by_key",{key:e.source_uri,field_key:e.key}).then((function(e){t.item.options=e.data.map((function(t){return{key:t.key,name:t.name}}))})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.item.loading=!1})):"API"===e.source_type?this.$store.dispatch("apiRemote/get_data_workflow",{kv_relation:e.kv_relation,api_instance_id:e.api_instance_id}).then((function(e){t.item.options=e.data.map((function(t){return{key:t.key,name:t.name}}))})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.item.loading=!1})):"RPC"===e.source_type?this.$store.dispatch("apiRemote/getRpcData",{meta:e.meta,source_uri:e.source_uri}).then((function(e){t.item.options=e.data.map((function(t){return{key:t.key,name:t.name}}))})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.item.loading=!1})):(this.item.options=e.choice.map((function(t){return{key:t.key,name:t.name}})),this.item.loading=!1))}}}},"X1+z":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("GQeE"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"TaskStatus",props:{status:{type:String},extCls:{type:String,default:""},type:{type:String,default:""}},data:function(){return{statusMap:{NEW:{name:this.$t("m.task['新']")},QUEUE:{name:this.$t("m.task['待处理']")},WAITING_FOR_OPERATE:{name:this.$t("m.task['待处理']"),cls:"blue"},WAITING_FOR_BACKEND:{name:this.$t("m.task['后台处理中']")},RUNNING:{name:this.$t("m.task['执行中']"),cls:"blue"},WAITING_FOR_CONFIRM:{name:this.$t("m.task['待总结']"),cls:"blue"},FINISHED:{name:this.$t("m.task['已完成']"),cls:"green"},FAILED:{name:this.$t("m.deployPage['失败']"),cls:"red"},DELETED:{name:this.$t("m.task['已删除']")},REVOKED:{name:this.$t("m.task['已撤销']"),cls:"red"},SUSPENDED:{name:this.$t("m.task['已暂停']"),cls:"blue"}},statusIconMap:{loading:["QUEUE","WAITING_FOR_OPERATE","WAITING_FOR_BACKEND","RUNNING","WAITING_FOR_CONFIRM"],success:["FINISHED"],failed:["FAILED","DELETED","REVOKED","SUSPENDED"],default:[]}}},computed:{statusIcon:function(){for(var t=(0,s.default)(this.statusIconMap),e=0;e<t.length;e++){if(this.statusIconMap[t[e]].includes(this.status))return t[e]}return""}}}},XClk:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view-item"},[t.crumbsList.length>1?e("div",{staticClass:"bread-crumbs"},t._l(t.crumbsList,(function(n,i){return e("span",{key:i,staticClass:"crumbs-item",on:{click:function(e){return e.stopPropagation(),t.onCrumbsClick(i)}}},[t._v("\n      "+t._s(n.label)+"\n    ")])})),0):t._e(),t._v(" "),t.crumbsList.length<=1?e(t.componentType,t._b({tag:"component",attrs:{form:t.form}},"component",t.getAttrs(t.form),!1)):e("render-view",{ref:"childrenView",attrs:{"hidden-label":!0,"form-data":t.childrenViewConfig.form_data,context:t.getContext()}})],1)},a=[];i._withStripped=!0},XDfz:function(t,e,n){"use strict";n.r(e);var i=n("LexG"),a=n("c6BP");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("L2Eo");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"7a97f3de",null);e.default=r.exports},XEYe:function(t,e,n){"use strict";n("alFg")},XNWF:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"left-ticket"},[e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading.nodeInfoLoading},expression:"{ isLoading: loading.nodeInfoLoading }"}],staticClass:"base-info-content"},[e("div",{staticClass:"ticket-base-info"},[e("div",{staticClass:"ticket-creator",on:{click:function(e){t.isShowBasicInfo=!t.isShowBasicInfo}}},[e("i",{class:["bk-itsm-icon",t.isShowBasicInfo?"icon-xiangxia":"icon-xiangyou"]}),t._v(" "),e("span",{staticClass:"ticket-title"},[t._v(t._s(t.$t("m['单据信息']")))]),t._v(" "),e("span",[t._v(t._s(t.$t("m['提单人']"))+": "+t._s(t.ticketInfo.creator))]),t._v(" "),e("span",[t._v(t._s(t.$t("m['提单时间']"))+": "+t._s(t.ticketInfo.create_at))])]),t._v(" "),e("div",{class:["basic-content",t.isShowBasicInfo?"":"hide"]},[!t.ticketId||t.loading.ticketLoading||t.loading.nodeInfoLoading?t._e():e("basic-information",{ref:"basicInfo",attrs:{"basic-infomation":t.ticketInfo,"first-state-fields":t.firstStateFields}})],1)])]),t._v(" "),e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.currentStepLoading},expression:"{ isLoading: currentStepLoading }"}],staticClass:"current-step-content"},[t.currentStepLoading?t._e():e("bk-tab",{attrs:{active:t.stepActiveTab,type:"unborder-card","validate-active":!0},on:{"update:active":function(e){t.stepActiveTab=e}}},[t.hasNodeOptAuth||t.isShowAssgin||t.currSetpIsIframe?e("bk-tab-panel",{attrs:{name:"currentStep",label:t.$t("m['单据处理']")}},[e("template",{slot:"label"},[e("span",{staticClass:"panel-name"},[t._v(t._s(t.$t("m['单据处理']")))]),t._v(" "),e("i",{staticClass:"panel-count"},[t._v(t._s(t.currStepNodeNum))])]),t._v(" "),t.loading.ticketLoading||t.loading.nodeInfoLoading?t._e():e("current-steps",{ref:"currentNode",attrs:{"is-show-basic-info":t.isShowBasicInfo,loading:t.loading.ticketLoading,"basic-infomation":t.ticketInfo,"node-list":t.nodeList,"is-show-assgin":t.isShowAssgin,"current-step-list":t.currentStepList,"node-trigger-list":t.nodeTriggerList},on:{handlerSubmitSuccess:t.reloadTicket}})],2):t._e(),t._v(" "),t.isShowComment?e("bk-tab-panel",{attrs:{name:"allComments",label:t.$t("m.newCommon['所有评论']")},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"panel-name"},[t._v(t._s(t.$t("m.newCommon['所有评论']")))]),t._v(" "),e("i",{staticClass:"panel-count"},[t._v(t._s(t.commentList.length))])]},proxy:!0}],null,!1,837393867)},[t._v(" "),e("wang-editor",{ref:"comment",attrs:{"is-show-basic-info":t.isShowBasicInfo,"comment-list":t.commentList,"comment-id":t.commentId,"ticket-info":t.ticketInfo,"ticket-id":t.ticketId,"is-page-over":t.isPageOver,"step-active-tab":t.stepActiveTab,"has-node-opt-auth":t.hasNodeOptAuth,"comment-loading":t.commentLoading,"more-loading":t.moreLoading},on:{addTargetComment:t.addTargetComment,refreshComment:t.refreshComment}})],1):t._e()],1)],1),t._v(" "),e("bk-dialog",{attrs:{width:"1280","mask-close":!1,"close-icon":!0,"show-footer":!1,title:t.$t("m['查看完整流程']")},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[t.isShow?e("order-preview",{attrs:{"basic-infomation":t.ticketInfo,"current-step-list":t.currentStepList},on:{reloadTicket:t.reloadTicket}}):t._e()],1)],1)},a=[];i._withStripped=!0},XTEZ:function(t,e,n){"use strict";n.r(e);var i=n("p3oz"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},XUL0:function(t,e,n){"use strict";n.r(e);var i=n("kSST"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},Xi1y:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNXB4IiB2aWV3Qm94PSIwIDAgMTYgMTUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUxLjMgKDU3NTQ0KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5TdGFyPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IummlumhtSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IuW+heivhOS7t+mhtemdoi1jb3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTEyMC4wMDAwMDAsIC0yNTQuMDAwMDAwKSIgZmlsbD0iI0RGRTVFQiI+CiAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJTdGFyIiBwb2ludHM9IjExMjggMjY2IDExMjMuMjk3NzIgMjY4LjQ3MjEzNiAxMTI0LjE5NTc3IDI2My4yMzYwNjggMTEyMC4zOTE1NSAyNTkuNTI3ODY0IDExMjUuNjQ4ODYgMjU4Ljc2MzkzMiAxMTI4IDI1NCAxMTMwLjM1MTE0IDI1OC43NjM5MzIgMTEzNS42MDg0NSAyNTkuNTI3ODY0IDExMzEuODA0MjMgMjYzLjIzNjA2OCAxMTMyLjcwMjI4IDI2OC40NzIxMzYiPjwvcG9seWdvbj4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},XiH4:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},[e("bk-date-picker",{class:{"bk-border-error":t.item.checkValue},attrs:{type:"datetime",disabled:t.item.is_readonly&&!t.isCurrent||t.disabled,placeholder:t.$t("m.newCommon['选择日期时间']")},on:{"open-change":function(e){t.item.checkValue=!1}},model:{value:t.item.val,callback:function(e){t.$set(t.item,"val",e)},expression:"item.val"}}),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},XsWr:function(t,e,n){"use strict";n("JGWp")},"Y6/M":function(t,e,n){"use strict";n.r(e);var i=n("vlfB"),a=n("CjxG");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("3Xpq");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"23a8f17e",null);e.default=r.exports},"Y7d/":function(t,e,n){"use strict";n.r(e);var i=n("tM7y"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},Y9oG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(n("gDS+")),a=l(n("14Xm")),s=l(n("D3Ub")),o=l(n("OE89")),r=l(n("efIh")),c=n("CeR/");function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"TREESELECT",components:{exportTree:o.default},mixins:[r.default],props:{item:{type:Object,required:!0,default:function(){}},fields:{type:Array,required:!0,default:function(){return[]}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{options:[],treeSlectInfo:{show:!1,treeDataList:[],info:{}}}},computed:{},watch:{"item.val":function(){var t=this;this.treeSlectInfo.treeDataList.forEach((function(e){t.treeData(e)})),this.conditionField(this.item,this.fields)}},mounted:function(){var t=this;return(0,s.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$nextTick((function(){t.getTreeInfo(),t.conditionField(t.item,t.fields)}));case 1:case"end":return e.stop()}}),e,t)})))()},methods:{getTreeInfo:function(){var t=this,e={},n="";"RPC"===this.item.source_type?(n="apiRemote/getRpcData",e={source_uri:this.item.source_uri}):"DATADICT"===this.item.source_type&&(n="dictdata/getTreeInfo",e={key:this.item.source_uri,view_type:"tree"}),this.$store.dispatch(n,e).then((function(e){t.treeSlectInfo.treeDataList=e.data,t.item.choice=e.data,t.treeSlectInfo.treeDataList.forEach((function(e){t.treeData(e)}))})).catch((function(e){(0,c.errorHandler)(e,t)}))},showTree:function(){var t=this;if(!this.disabled){this.item.checkValue=!1,this.treeSlectInfo.show=!this.treeSlectInfo.show;var e="";this.fields.forEach((function(n,i){n.id===t.item.id&&(e=i)})),e===this.fields.length-1&&document.getElementById("bkPreview")&&setTimeout((function(){document.getElementById("bkPreview").scrollTop+=100}),100)}},closeTree:function(){this.treeSlectInfo.show=!1},toggleInfo:function(t){var e=this;this.treeSlectInfo.treeDataList.forEach((function(t){e.recordCheckFn(t)})),t.checkInfo=!0,this.treeSlectInfo.treeDataList=JSON.parse((0,i.default)(this.treeSlectInfo.treeDataList)),this.treeSlectInfo.info=t,this.item.val=this.treeSlectInfo.info.id,this.closeTree()},treeData:function(t){var e=this;if(t.showChildren=!1,t.checkInfo=!1,t.has_children=!!t.children.length,String(this.item.val)===String(t.id)){t.checkInfo=!0,this.treeSlectInfo.info=t;var n=[];this.treeSlectInfo.info.route&&this.treeSlectInfo.info.route.length&&this.treeSlectInfo.info.route.forEach((function(t){n.push(t.name)})),n.push(this.treeSlectInfo.info.name),this.treeSlectInfo.info.showName=n.join(" / ")}t.has_children&&t.children.length&&t.children.forEach((function(n){n.parent_id===t.id&&(t.showChildren=!0),e.treeData(n)}))},recordCheckFn:function(t){var e=this;t.checkInfo=!1,t.children&&t.children.length&&t.children.forEach((function(t){e.recordCheckFn(t)}))},toggleChildren:function(t){t.showChildren=!t.showChildren,this.treeSlectInfo.treeDataList=JSON.parse((0,i.default)(this.treeSlectInfo.treeDataList))}}}},YOvt:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this._self._c;return this.fullStatus?t("div",{staticClass:"tools-wrapper"},[t("div",{staticClass:"tool-item",attrs:{"data-test-id":"tools-warpper-ZoomIn",title:this.$t("m.treeinfo['放大']")},on:{click:this.onZoomIn}},[t("i",{staticClass:"bk-itsm-icon icon-order-add icon-cus"})]),this._v(" "),t("div",{staticClass:"tool-item",attrs:{"data-test-id":"tools-warpper-ZoomOut",title:this.$t("m.treeinfo['缩小']")},on:{click:this.onZoomOut}},[t("i",{staticClass:"bk-itsm-icon icon-order-reduce icon-cus"})])]):this._e()},a=[];i._withStripped=!0},YQTg:function(t,e,n){},YWQd:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{staticClass:"bk-form-int",attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},[e("bk-input",{class:{"bk-border-error":t.item.checkValue},attrs:{clearable:!0,type:"number",disabled:t.item.is_readonly&&!t.isCurrent||t.disabled},on:{focus:function(e){t.item.checkValue=!1}},model:{value:t.item.val,callback:function(e){t.$set(t.item,"val",t._n(e))},expression:"item.val"}}),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):t.isErrMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["已超出最大值!"]')))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},"Ykh+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n("14Xm")),a=c(n("D3Ub")),s=c(n("q+Zq")),o=c(n("/14K")),r=n("CeR/");function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"signNodeInfo",components:{timeLine:s.default,fieldsDone:o.default},props:{nodeInfo:{type:Object,default:function(){return{}}}},data:function(){return{logs:{},getLogFlag:!1}},mounted:function(){var t=this;return(0,a.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.nodeInfo;case 2:return e.next=4,t.initData();case 4:case"end":return e.stop()}}),e,t)})))()},methods:{initData:function(){var t=this;return(0,a.default)(i.default.mark((function e(){var n,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.getLogFlag=!0,e.next=3,t.getLogs();case 3:n=[],t.nodeInfo.tasks.forEach((function(t){"WAIT"===t.status&&n.push(t.processor)})),(a={message:n.length+t.$t("m.newCommon['人待处理']"),operate_at:t.getFormatDate(),tag:"processors"}).message+=n.length?t.$t("m.newCommon['：']")+n.join(","):"",t.logs.unshift(a),t.getLogFlag=!1;case 9:case"end":return e.stop()}}),e,t)})))()},getFormatDate:function(){var t=new Date,e=t.getMonth()+1,n=t.getDate();return e>=1&&e<=9&&(e="0"+e),n>=0&&n<=9&&(n="0"+n),t.getFullYear()+"-"+e+"-"+n+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},getLogs:function(){var t=this;return(0,a.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={ticket:t.nodeInfo.ticket_id,status:t.nodeInfo.id,type:"SIGN"},e.next=3,t.$store.dispatch("apiRemote/get_sign_logs",n).then((function(e){e.data.forEach((function(e){t.$set(e,"showMore",!1)})),t.logs=e.data,t.logs.reverse()})).catch((function(e){(0,r.errorHandler)(e,t)}));case 3:case"end":return e.stop()}}),e,t)})))()}}}},YwU9:function(t,e,n){"use strict";n("kcaP")},"Z/e7":function(t,e,n){},Z4tE:function(t,e,n){"use strict";n("8b3x")},ZFc0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(n("FyfS")),a=l(n("c6Q5")),s=l(n("NGZu")),o=l(n("uK6t")),r=n("ygAv"),c=n("CeR/");function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"apiNodeHandleBody",components:{getParam:s.default,postParam:a.default,responseDataNode:o.default},props:{nodeInfo:{type:Object,default:function(){return{}}},basicInfomation:{type:Object,default:function(){return{}}}},data:function(){return{isShowSubmitBtns:!1,reloadParams:!1,operationType:"",reason:"",readyTips:this.$t('m.task["请将任务列表中的任务全部处理完成之后再进行处理提交"]'),buttons:[{name:this.$t('m.task["重试"]'),theme:"primary",key:"retry",notice:this.$t('m.task["将会以当前的填写的参数进行重试"]')},{name:this.$t('m.task["手动修改"]'),theme:"default",key:"hand",notice:this.$t('m.task["系统将以修改后的结果为节点的最终完成结果"]')},{name:this.$t('m.task["忽略"]'),theme:"default",key:"ignore",notice:this.$t('m.task["执行忽略，将会以当前输出的信息为完成结果，继续后续流程"]')}]}},computed:{inputs:function(){if(this.nodeInfo.query_params)return this.nodeInfo.query_params;var t=this.nodeInfo.api_info;return("POST"===t.method?t.req_body:t.req_params).data||[]},apiDetail:function(){return this.nodeInfo.api_info.remote_api_info},operationTips:function(){return{retry:this.$t('m.newCommon["请重新修改以下参数后再重试："]'),hand:this.$t('m.newCommon["执行手动修改，需要根据接口要求填写相应参数信息（若无参数要求，可留空或忽略）："]')}[this.operationType]||""}},watch:{reason:function(){var t=this;this.$nextTick((function(){t.addTruncatedAttr()}))}},mounted:function(){this.getNodeLog()},beforeDestroy:function(){},methods:{getNodeLog:function(){var t=this,e={ticket:this.basicInfomation.id,from_state_id:this.nodeInfo.state_id};this.$store.dispatch("deployOrder/getNodeLog",{params:e}).then((function(e){var n=e.data.pop();t.reason=n?n.message:""})).catch((function(e){(0,c.errorHandler)(e,t)}))},addTruncatedAttr:function(){var t=document.querySelector(".fail-reason .describe-"+this.nodeInfo.state_id),e=new ResizeObserver((function(t){var e=!0,n=!1,a=void 0;try{for(var s,o=(0,i.default)(t);!(e=(s=o.next()).done);e=!0){var r=s.value;r.target.classList[r.target.scrollHeight>r.contentRect.height?"add":"remove"]("truncated")}}catch(t){n=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw a}}}));t&&e.observe(t)},clickBtn:function(t){var e=this;"ignore"!==t?(this.operationType=t,this.reloadParamsComponents(),this.$nextTick((function(){var t=document.querySelector(".current-step-content").offsetTop,n=document.querySelector(".bk-content-node.state_id_"+e.nodeInfo.state_id).offsetTop;document.body.querySelector(".ticket-container-left").scrollTo({top:t+n-70})}))):this.showConfirmDialog("ignore")},contentScroll:function(){var t=document.querySelector(".bk-content-node.state_id_"+this.nodeInfo.state_id).getBoundingClientRect(),e=document.body.clientHeight;t.y+t.height>e&&t.y+60<e?this.$el.classList.add("float-btn"):this.$el.classList.remove("float-btn")},reloadParamsComponents:function(){var t=this;this.reloadParams=!0,this.$nextTick((function(){t.reloadParams=!1}))},onSubmit:function(){this.checkSubmitParams()&&this.showConfirmDialog(this.operationType)},onCancel:function(){this.operationType="",this.reloadParamsComponents()},checkSubmitParams:function(){if(this.$refs.postParam){var t=this.$refs.postParam.tableList.find((function(t){return t.is_necessary&&(0,r.isEmpty)(t.customValue)&&!t.children.length}));if(t)return this.$bkMessage({message:t.key+this.$t('m.newCommon["为必填项！"]'),theme:"warning"}),!1}if(this.$refs.getParam){var e=this.$refs.getParam.paramTableData.find((function(t){return t.is_necessary&&(0,r.isEmpty)(t.customValue)&&!t.children.length}));if(e)return this.$bkMessage({message:e.key+this.$t('m.newCommon["为必填项！"]'),theme:"warning"}),!1}if(this.$refs.responseDataNode){var n=this.$refs.responseDataNode.tableList.find((function(t){return t.is_necessary&&(0,r.isEmpty)(t.customValue)&&!t.children.length}));if(n)return this.$bkMessage({message:n.key+this.$t('m.newCommon["为必填项！"]'),theme:"warning"}),!1}return!0},showConfirmDialog:function(t){var e=this,n=this.buttons.find((function(e){return e.key===t}));this.$bkInfo({type:"warning",title:""+this.$t('m.task["确认"]')+n.name+"？",subTitle:n.notice,confirmFn:function(){"retry"===t&&e.onRetryNode(),"hand"!==t&&"ignore"!==t||e.onIgnoreNode("hand"===e.operationType)}})},onRetryNode:function(){var t=this,e=[];"POST"===this.nodeInfo.api_info.method&&this.$refs.postParam?e=this.$refs.postParam.tableList:this.$refs.getParam&&(e=this.$refs.getParam.paramTableData);var n={inputs:this.getInputsParams(e),state_id:this.nodeInfo.state_id};this.$store.dispatch("deployOrder/retryNode",{params:n,ticketId:this.basicInfomation.id}).then((function(){t.$bkMessage({message:t.$t('m.newCommon["提交成功"]'),theme:"success"}),t.$emit("updateOrderStatus"),t.onCancel()})).catch((function(e){(0,c.errorHandler)(e,t)}))},onIgnoreNode:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n={};if(e){var i=this.$refs.responseDataNode&&this.$refs.responseDataNode.tableList||[];n=this.getInputsParams(i)}var a={inputs:n,state_id:this.nodeInfo.state_id,is_direct:!e};this.$store.dispatch("deployOrder/ignoreNode",{params:a,ticketId:this.basicInfomation.id}).then((function(){t.$bkMessage({message:t.$t('m.newCommon["提交成功"]'),theme:"success"}),t.$emit("updateOrderStatus"),t.onCancel()})).catch((function(e){(0,c.errorHandler)(e,t)}))},getInputsParams:function(t){var e=this,n={};return t.forEach((function(i,a){var s=e.getParentKeyPath(t,i,a),o=i.name,r=t,c=s.reduce((function(t,e){var n=r.find((function(t){return t.primaryKey===e}));return r=n.children,Array.isArray(t)?t[t.length>0?t.length-1:0]:t[n.name]}),n);s.length>0&&Array.isArray(c)&&(o=c.length),"array"===i.type?c[o]=[]:"object"===i.type?c[o]={}:c[o]=i.customValue})),n},getParentKeyPath:function(t,e,n){var i=[];if(e.parentPrimaryKey){var a=void 0,s=void 0;if(i.push(e.parentPrimaryKey),t.slice(0,n).forEach((function(t,n){t.primaryKey===e.parentPrimaryKey&&(a=t,s=n)})),a.parentPrimaryKey)return this.getParentKeyPath(t,a,s).concat(i)}return i}}}},ZGum:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(n("Wgwc")),a=s(n("QgiU"));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"commentItem",props:{curComment:Object,commentList:Array},data:function(){return{isEditComment:!1,deleteCommentDialog:!1,isAgree:!1,timeFormat:{"seconds ago":this.$t("m['秒钟前']"),"minutes ago":this.$t("m['分钟前']"),"minute ago":this.$t("m['分钟前']"),"hours ago":this.$t("m['小时前']"),"hour ago":this.$t("m['小时前']"),"days ago":this.$t("m['天前']"),"day ago":this.$t("m['天前']"),"months ago":this.$t("m['月前']"),"month ago":this.$t("m['月前']"),"years ago":this.$t("m['年前']"),"year ago":this.$t("m['年前']")}}},computed:{createTime:function(){i.default.extend(a.default);var t=1e3*(0,i.default)(this.curComment.create_at).unix(),e=(0,i.default)(t).fromNow(),n=e.split(" ")[1],s=e.split(" ").slice(1,3).join(" ");return"few"===n?this.$t("m['刚刚']"):"an"===e.split(" ")[0]||e.split("a"===" "[0])?"1 "+this.timeFormat[s]:e.split(" ")[0]+" "+this.timeFormat[s]}},methods:{randomHex:function(){var t=void 0;do{t="#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0")}while("#ffffff"===t);return t},avatar:function(t){return t.substr(0,1).toLocaleUpperCase()},deleteComment:function(t){var e=this;this.$store.dispatch("ticket/deleteTicketComment",t).then((function(){e.$emit("refreshComment"),e.deleteCommentDialog=!1}))},endorse:function(){this.isAgree=!this.isAgree,console.log("agree","暂不支持")},handleDeleteDialogShow:function(t){this.deleteCommentDialog=t},jumpTargetComment:function(t){this.$emit("jumpTargetComment",t)}}}},"ZI3/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n("0nTK")),a=o(n("4nBA")),s=o(n("4HBs"));function o(t){return t&&t.__esModule?t:{default:t}}var r={endpoint:"Dot",connector:["Flowchart",{stub:[10,16],alwaysRespectStub:!0,gap:2,cornerRadius:10}],connectorOverlays:[["PlainArrow",{width:8,length:6,location:1,id:"arrow"}]],paintStyle:{fill:"rgba(0, 0, 0, 0)",stroke:"",strokeWidth:1,radius:6},hoverPaintStyle:{fill:"#EE8F62",stroke:"#EE8F62",radius:8},cssClass:"template-canvas-endpoint",hoverClass:"template-canvas-endpoint-hover",isSource:!0,isTarget:!0,maxConnections:-1},c={grid:[5,5]},l={paintStyle:{fill:"transparent",stroke:"#a9adb6",strokeWidth:1},hoverPaintStyle:{fill:"transparent",stroke:"#3a84ff",strokeWidth:2},cssClass:"bk-sops-connector",hoverClass:"bk-sops-connector-hover",detachable:!0};e.default={components:{JsFlow:i.default,NodeTemplate:a.default,toolPanel:s.default},props:{addList:{type:Array,default:function(){return[]}},lineList:{type:Array,default:function(){return[]}},previewInfo:{type:Object,default:function(){return{}}},fullStatus:{type:Boolean,default:function(){return!1}},normalColor:{type:Boolean,default:!1}},data:function(){return{endpointOptions:r,connectorOptions:l,nodeOptions:c,canvasData:{nodes:[],lines:[]},nodeInfo:{},toolLimit:4,currentNode:{}}},computed:{nodeStatus:function(){return this.$store.state.deployCommon.nodeStatus}},created:function(){this.initDate()},mounted:function(){this.addLineOverlay(),this.$refs.previewFlow.zoomOut(this.previewInfo.narrowSize)},methods:{initDate:function(){var t=this;this.addList.forEach((function(e,n){var i=e.axis.x?e.axis.x:165+250*n,a=e.axis.y?e.axis.y:195+(n%2==1?5:0);t.canvasData.nodes.push({id:"node_"+e.id,x:i,y:a,type:e.type,name:e.name,showMore:!1,nodeInfo:e}),t.$set(t.nodeInfo,"node_"+e.id,e)})),this.lineList.forEach((function(e){t.canvasData.lines.push({source:{arrow:e.axis.start||"Right",id:"node_"+e.from_state},target:{arrow:e.axis.end||"Left",id:"node_"+e.to_state},lineInfo:e,options:{paintStyle:{fill:"transparent",stroke:"SUCCESS"===e.lineStatus?"#2DCB56":"#a9adb6",strokeWidth:1}}})}))},changeDataStatus:function(){var t=this;this.canvasData.nodes.forEach((function(e){t.addList.forEach((function(t){e.nodeInfo.id===t.id&&(e.nodeInfo=t)}))}))},addLineOverlay:function(){var t=this;this.canvasData.lines.forEach((function(e){var n={id:"label_"+e.lineInfo.id,type:"Label",name:'<span class="bk-label-test-name">'+(e.lineInfo.name||t.$t('m.treeinfo["默认"]'))+"</span>",cls:"label-test",location:.5};"默认"!==e.lineInfo.name&&"Default"!==e.lineInfo.name&&e.lineInfo.name&&t.$refs.previewFlow.addLineOverlay(e,n)}))},onZoomIn:function(){this.toolLimit>9||(this.toolLimit+=1,this.$refs.previewFlow&&this.$refs.previewFlow.zoomIn())},onZoomOut:function(){0!==this.toolLimit&&(this.toolLimit-=1,this.$refs.previewFlow&&this.$refs.previewFlow.zoomOut())},onResetPosition:function(){this.$refs.jsFlow.resetPosition()},handleScroll:function(t){t.deltaY>0?this.onZoomOut():this.onZoomIn()},clickNodeInfo:function(t){this.previewInfo.canClick&&this.$parent.openNodeContent(t)},submitNodeValue:function(t){this.currentNode=t},onNodeMoveStop:function(t){t.x===this.currentNode.x&&t.y===this.currentNode.y&&this.$parent.openNodeContent(t)}}}},ZQWa:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",["TASK-SOPS"===t.nodeInfo.type?e("sops-get-param",{key:(new Date).getTime(),ref:"sopsGetParam",staticClass:"sops-form",attrs:{"hooked-var-list":t.hookedVarList,constants:t.constants,context:t.context,"is-hook":t.isHook,"is-edit":t.isEdit,"state-list":t.stateList,"is-static":t.isStatic,"constant-default-value":t.constantDefaultValue},on:{onChangeHook:t.onChangeHook}}):t._e(),t._v(" "),"TASK-DEVOPS"===t.nodeInfo.type?e("bk-form",{ref:"devopsVariable",attrs:{"ext-cls":"pipelineForm","form-type":"vertical",model:t.pipelineData,rules:t.pipelineRules,"label-width":200}},t._l(t.pipelineList,(function(n){return e("bk-form-item",{key:n.id,attrs:{label:n.id,property:n.id,rules:t.pipelineRules[n.id],required:n.required}},[e("bk-input",{attrs:{disabled:!t.changeBtn,clearable:!0},model:{value:t.pipelineData[n.id],callback:function(e){t.$set(t.pipelineData,n.id,e)},expression:"pipelineData[pipeline.id]"}})],1)})),1):t._e(),t._v(" "),"TASK-DEVOPS"===t.nodeInfo.type?e("devops-preview",{attrs:{stages:t.pipelineStages}}):t._e(),t._v(" "),"WEBHOOK"===t.nodeInfo.type?e("div",[e("web-hook",{ref:"webhook",attrs:{configur:t.nodeInfo,"task-error-tip":t.errorTip,disable:t.disable,"is-status":!1}})],1):t._e(),t._v(" "),e("div",{staticClass:"submit-btn"},[t.changeBtn?e("bk-button",{attrs:{theme:"primary"},on:{click:t.submit}},[t._v(t._s(t.$t('m["提交"]')))]):t._e(),t._v(" "),e("bk-button",{attrs:{theme:"primary"},on:{click:t.reSetSopTask}},[t._v(t._s(t.changeBtn?t.$t('m["返回"]'):t.$t('m["重做"]')))]),t._v(" "),e("bk-button",{on:{click:t.ignore}},[t._v(t._s(t.$t('m["忽略"]')))])],1)],1)},a=[];i._withStripped=!0},ZTv3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("vDqi")),a=r(n("i8o3")),s=r(n("2bRs")),o=n("CeR/");function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"OrderPreview",components:{preview:a.default,NodeInfo:s.default},props:{basicInfomation:{type:Object,default:function(){return{}}},currentStepList:{type:Array,default:function(){return[]}},loadingInfo:{type:Object,default:function(){return{}}}},data:function(){return{clickSecond:!1,addList:[],lineList:[],nodeList:[],isDataLoading:!0,fullStatus:!1,previewInfo:{canClick:!0,narrowSize:.7},nodeContent:{isShow:!1,title:"",width:600,quick:!1},openNodeInfo:{},nodeInfo:[],isNodeLoading:!0}},computed:{},watch:{"basicInfomation.id":function(){this.getFlowInfo()}},mounted:function(){var t=this;this.getFlowInfo(),this.getStateStatus(),clearInterval(this.$store.state.deployOrder.intervalInfo.lines),this.$store.state.deployOrder.intervalInfo.lines=setInterval((function(){t.intervalLines()}),2e3)},methods:{initInfo:function(){this.$emit("reloadTicket")},getFlowInfo:function(){var t=this;this.isDataLoading=!0;var e=this.basicInfomation.flow_id;i.default.all([this.$store.dispatch("deployCommon/getNodeVersion",{id:e}),this.$store.dispatch("deployCommon/getLineVersion",{id:e})]).then(i.default.spread((function(e,n){t.addList=e.data,t.addList.forEach((function(e,n){t.$set(e,"indexInfo",n),t.$set(e,"statusInfo","WAIT"),t.nodeList.forEach((function(t){e.id===t.state_id&&(e.statusInfo=t.status)}))})),t.lineList=n.data.items,t.setLineStatus()}))).catch((function(t){console.log(t)})).finally((function(){t.isDataLoading=!1}))},getStateStatus:function(){var t=this,e=this.basicInfomation.id;this.$store.dispatch("deployOrder/getOnlyStateStatus",{params:{},id:e}).then((function(e){t.nodeList=e.data})).catch((function(e){(0,o.errorHandler)(e,t)}))},setLineStatus:function(){var t=this,e=this.addList.find((function(t){return"START"===t.type})).id;this.lineList.forEach((function(n){t.nodeList.find((function(t){return Number(t.from_transition_id)===n.id}))&&(n.lineStatus="SUCCESS"),n.id===Number(t.basicInfomation.last_transition_id)&&(n.lineStatus="SUCCESS"),n.from_state===e&&(n.lineStatus="SUCCESS")}))},intervalLines:function(){var t=this;this.addList.forEach((function(e,n){t.$set(e,"indexInfo",n),t.$set(e,"statusInfo","WAIT"),t.nodeList.forEach((function(t){e.id===t.state_id&&(e.statusInfo=t.status)}))})),this.$refs.preview&&this.$refs.preview.changeDataStatus()},openFull:function(){this.previewInfo.narrowSize=1.1,this.fullStatus=!0},closeFull:function(){this.previewInfo.narrowSize=.7,this.fullStatus=!1},openNodeContent:function(t){"WAIT"!==t.nodeInfo.statusInfo&&(this.isNodeLoading=!0,this.openNodeInfo=t.nodeInfo,this.nodeContent.isShow=!0,this.nodeContent.title=t.nodeInfo.name,this.getTicketNodeInfo(t))},closeNodeContent:function(){this.nodeContent.isShow=!1},getTicketNodeInfo:function(t){var e=this,n=this.basicInfomation.id,i={state_id:t.nodeInfo.id};this.$route.query.token&&(i.token=this.$route.query.token),this.clickSecond=!1,this.$store.dispatch("deployOrder/getTicketNodeInfo",{params:i,id:n}).then((function(t){e.nodeInfo=[t.data],e.nodeContent.quick="FINISHED"===t.data.status||!t.data.can_operate})).catch((function(t){(0,o.errorHandler)(t,e)})).finally((function(){e.isNodeLoading=!1,e.clickSecond=!1}))}}}},"Za/z":function(t,e,n){"use strict";n.r(e);var i=n("YWQd"),a=n("34/K");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},ZcAa:function(t,e,n){},Zeye:function(t,e,n){"use strict";n("Rs9T")},ZhbF:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-sops-node-content"},[e("div",{staticClass:"bk-page bk-auto-node-basic"},[e("p",{staticClass:"bk-header-bold"},[t._v(t._s(t.$t('m.newCommon["基本信息"]')))]),t._v(" "),e("div",{staticClass:"bk-main bk-flex"},[e("div",{staticClass:"bk-node-name"},[e("span",[t._v(t._s(t.$t('m.newCommon["节点名称"]'))+" : ")]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.name||"--"))])])])]),t._v(" "),e("div",{staticClass:"bk-page bk-auto-node-basic"},[e("p",{staticClass:"bk-header-bold"},[t._v(t._s(t.$t('m.newCommon["任务参数"]')))]),t._v(" "),e("div",[e("div",{staticClass:"bk-param"},[e("get-param",{ref:"getParam",attrs:{"is-static":!0,"is-static-data":t.nodeInfo.api_info.sops_info}})],1)])]),t._v(" "),e("div",{staticClass:"bk-page bk-auto-node-basic"},[e("p",{staticClass:"bk-header-bold"},[t._v(t._s(t.$t('m.taskTemplate["执行详情"]')))]),t._v(" "),e("div",[e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.taskTemplate["执行状态："]')))]),t._v(" "),e("span",{class:{statusShow:!0,statusSuccess:"执行成功"===t.status,statusRunning:"执行中"===t.status,statusFailed:"执行失败"===t.status}},[t._v("\n          "+t._s(t.status||"--"))])]),t._v(" "),e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.taskTemplate["任务详情："]')))]),t._v(" "),t.nodeInfo.api_info.sops_task_url?[e("a",{staticStyle:{color:"#5482F4"},attrs:{href:t.nodeInfo.api_info.sops_task_url,target:"_blank"}},[t._v("\n            "+t._s(t.$t('m.taskTemplate["跳转标准运维查看"]'))+"\n          ")])]:[e("span",{staticStyle:{color:"#DC5D5D"}},[t._v(t._s(t.$t('m.taskTemplate["任务创建失败"]')))])]],2),t._v(" "),e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.common["开始时间："]')))]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.create_at))])]),t._v(" "),e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.common["结束时间："]')))]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.end_at||t.$t('m.taskTemplate["尚未结束"]'))+"\n        ")])]),t._v(" "),e("div",{staticClass:"bk-partition errorDiv"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.taskTemplate["错误信息："]')))])]),t._v(" "),e("div",{staticClass:"langError"},[t._v(t._s(t.nodeInfo.api_info.error_message||"--"))])])])])},a=[];i._withStripped=!0},Zicn:function(t,e,n){},ZmkU:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("PaSM"),s=(i=a)&&i.__esModule?i:{default:i},o=n("CeR/");e.default={name:"StepSubmitDialog",mixins:[s.default],props:{ticketInfo:{type:Object,default:function(){return{}}},ticketOperateType:{type:String,default:"close"}},data:function(){return{secondClick:!1,falseStatus:!1,dialogSetting:{isAdd:!0,isShow:!1,width:700,headerPosition:"left",autoClose:!1,precision:0,content:"",title:""},formInfo:{suspend_message:"",closeState:"TERMINATED",close_message:""},endList:[],isDataLoading:!1,checkInfo:{suspendFlag:!1,closeFlag:!1,closeReasonFlag:!1},rules:{}}},mounted:function(){this.rules.suspend_message=this.checkCommonRules("select").select,this.rules.closeState=this.checkCommonRules("select").select,this.rules.close_message=this.checkCommonRules("select").select},methods:{openCel:function(){var t=this;"close"===this.ticketOperateType?this.dialogSetting.title=this.$t('m.newCommon["关单"]'):"suspend"===this.ticketOperateType?this.dialogSetting.title=this.$t('m.newCommon["挂起"]'):(this.dialogSetting.title=this.$t('m.newCommon["是否恢复此单据？"]'),this.dialogSetting.content=this.$t('m.newCommon["单据将恢复至【"]')+this.ticketInfo.pre_status_display+this.$t('m.newCommon["】"]'),this.$bkInfo({type:"warning",title:this.dialogSetting.title,subTitle:this.dialogSetting.content,confirmFn:function(){t.submitRestore()}})),"close"!==this.ticketOperateType&&"suspend"!==this.ticketOperateType||(this.dialogSetting.isShow=!0,this.$nextTick((function(){t.getTypeStatus()})))},getTypeStatus:function(){var t=this;if("close"===this.ticketOperateType){this.isDataLoading=!0;var e=this.ticketInfo.service_type,n=this.ticketInfo.current_status;this.$store.dispatch("deployOrder/getEndStatus",{type:e,key:n}).then((function(e){t.endList=e.data.filter((function(t){return"TERMINATED"===t.key}))})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.isDataLoading=!1}))}},initFormInfo:function(){this.formInfo.suspend_message="",this.formInfo.closeState="",this.formInfo.close_message=""},submitValidate:function(){var t=this;this.$refs.ticketForm.validate().then((function(){t.submitForm()}),(function(t){console.warn(t)}))},submitForm:function(){var t=this;if("close"===this.ticketOperateType){var e={current_status:this.formInfo.closeState,desc:this.formInfo.close_message},n=this.ticketInfo.id;this.$store.dispatch("deployOrder/closeTickets",{id:n,params:e}).then((function(){t.$bkMessage({message:t.$t('m.newCommon["关单成功"]'),theme:"success"})})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.dialogSetting.isShow=!1,t.endList.splice(0,t.endList.length),t.initFormInfo(),t.$emit("submitSuccess")}))}else if("suspend"===this.ticketOperateType){var i={desc:this.formInfo.suspend_message},a=this.ticketInfo.id;this.$store.dispatch("deployOrder/suspendTickets",{id:a,params:i}).then((function(){t.$bkMessage({message:t.$t('m.newCommon["挂起成功"]'),theme:"success"})})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.dialogSetting.isShow=!1,t.initFormInfo(),t.$emit("submitSuccess")}))}else"restore"===this.ticketOperateType&&this.submitRestore()},cancelForm:function(){this.dialogSetting.isShow=!1},submitRestore:function(){var t=this,e=this.ticketInfo.id;this.$store.dispatch("deployOrder/restoreTickets",e).then((function(){t.$bkMessage({message:t.$t('m.newCommon["恢复成功"]'),theme:"success"})})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.initFormInfo(),t.$emit("submitSuccess")}))}}}},ZsJz:function(t,e,n){"use strict";n.r(e);var i=n("H2GU"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},Zt4X:function(t,e,n){"use strict";n.r(e);var i=n("ZI3/"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},aB8q:function(t,e,n){"use strict";n.r(e);var i=n("9mEj"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},aDD8:function(t,e,n){"use strict";n.r(e);var i=n("PAo4"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},aNPh:function(t,e,n){"use strict";n.r(e);var i=n("x9y/"),a=n("BFl6");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("lVyC");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"85bababe",null);e.default=r.exports},aNt4:function(t,e,n){},aRCN:function(t,e,n){},aYIO:function(t,e,n){"use strict";n.r(e);var i=n("LVBE"),a=n("sshH");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("WOBF");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"aad0502a",null);e.default=r.exports},ab9X:function(t,e,n){"use strict";n("KUbg")},afA4:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-get-param"},[e("bk-table",{attrs:{data:t.prcTable,size:"small"}},[e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['名称']"),prop:"name"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['必选']")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.is_necessary?t.$t('m.treeinfo["是"]'):t.$t('m.treeinfo["否"]'))+"\n      ")]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['备注']"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{attrs:{title:n.row.desc}},[t._v(t._s(n.row.desc||"--"))])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['参数值']"),width:"300"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("div",{staticStyle:{width:"120px",position:"absolute",top:"5px",left:"15px"}},[e("bk-select",{attrs:{clearable:!1,searchable:""},model:{value:n.row.source_type,callback:function(e){t.$set(n.row,"source_type",e)},expression:"props.row.source_type"}},t._l(t.sourceTypeList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)],1),t._v(" "),"CUSTOM"===n.row.source_type?e("div",{staticStyle:{width:"140px",position:"absolute",top:"4px",right:"15px"}},[e("bk-input",{attrs:{clearable:!0,placeholder:t.$t("m.treeinfo['请输入参数值']")},model:{value:n.row.value,callback:function(e){t.$set(n.row,"value",e)},expression:"props.row.value"}})],1):e("div",{staticStyle:{width:"140px",position:"absolute",top:"4px",right:"15px"}},[e("bk-select",{attrs:{clearable:!1,searchable:""},model:{value:n.row.value_key,callback:function(e){t.$set(n.row,"value_key",e)},expression:"props.row.value_key"}},t._l(t.stateList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)],1)]}}])})],1)],1)},a=[];i._withStripped=!0},agSa:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",[e("bk-table",{attrs:{data:t.list,disabled:!0}},[e("bk-table-column",{attrs:{width:"40"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("bk-checkbox",{attrs:{disabled:t.disable},model:{value:n.row.select,callback:function(e){t.$set(n.row,"select",e)},expression:"props.row.select"}})]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m['字段名']"),"render-header":t.$renderHeader},scopedSlots:t._u([{key:"default",fn:function(n){return[e("bk-input",{attrs:{behavior:"simplicity",disabled:t.disable},on:{change:function(e){return t.changeInput(n.row,n.$index)}},model:{value:n.row.key,callback:function(e){t.$set(n.row,"key",e)},expression:"props.row.key"}})]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m['值']"),"render-header":t.$renderHeader},scopedSlots:t._u([{key:"default",fn:function(n){return[e("bk-input",{staticStyle:{"z-index":"101"},attrs:{behavior:"simplicity",disabled:t.disable,placeholder:t.isStatus?t.$t("m['输入“{{”可选择引用变量']"):t.$t("m['请输入']")},on:{change:function(e){return t.changeInput(n.row,n.$index)}},model:{value:n.row.value,callback:function(e){t.$set(n.row,"value",e)},expression:"props.row.value"}}),t._v(" "),t.isStatus?e("bk-popover",{ref:"inputParam"+n.$index,attrs:{placement:"bottom",theme:"light",arrow:!1,always:!n.row.value,disabled:!n.row.value,"ext-cls":n.row.value?"show-tippy":"",transfer:!0}},[e("div",{staticClass:"params-select-value",attrs:{slot:"content"},slot:"content"},[e("ul",{staticClass:"params-select"},t._l(t.wwwFormData,(function(n,i){return e("li",{key:i,on:{click:function(e){return t.handleSelectContent(n)}}},[t._v("\n                "+t._s(n.name)+"\n                "),e("span",{staticClass:"variable-key"},[t._v("("+t._s(n.key)+")")])])})),0)])]):t._e()]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m['描述']"),"render-header":t.$renderHeader},scopedSlots:t._u([{key:"default",fn:function(n){return[e("bk-input",{attrs:{behavior:"simplicity",disabled:t.disable},on:{change:function(e){return t.changeInput(n.row,n.$index)}},model:{value:n.row.desc,callback:function(e){t.$set(n.row,"desc",e)},expression:"props.row.desc"}})]}}])}),t._v(" "),e("bk-table-column",{attrs:{width:"40"},scopedSlots:t._u([{key:"default",fn:function(n){return t.isShowDelete!==t.list.indexOf(n.row)?[t.disable?t._e():e("i",{staticClass:"bk-itsm-icon icon-itsm-icon-three-one",on:{click:function(e){return t.handleDelete(n.row)}}})]:void 0}}],null,!0)})],1)],1)},a=[];i._withStripped=!0},alFg:function(t,e,n){},"aoH+":function(t,e,n){"use strict";n("I34T")},aqZ4:function(t,e,n){},"b/Aw":function(t,e,n){"use strict";n.r(e);var i=n("nuXq"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},b0Dy:function(t,e,n){"use strict";n.r(e);var i=n("SO4U"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"b1K/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,i,a){var s=sessionStorage.getItem("cursorIndex"),o=s&&JSON.parse(s);if(!t||!t.selectionStart&&0!==t.selectionStart||o.name!==e)return n+i;var r=o.start,c=o.end,l=t.scrollTop;return a.$nextTick((function(){t.selectionStart=r+i.length,t.selectionEnd=r+i.length,t.scrollTop=l,t.focus()})),n.substr(0,r)+i+n.substr(c)}},bcjM:function(t,e,n){"use strict";n.r(e);var i=n("11RT"),a=n("ZsJz");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("r/L1");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"00c1c6e8",null);e.default=r.exports},bddw:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(n("FQeJ")),a=n("ygAv"),s=n("CeR/");n("p77/"),n("9RMS"),n("/l/C"),n("LEOp");var o=l(n("v/C2")),r=l(n("FIf5")),c=n("Tt5C");function l(t){return t&&t.__esModule?t:{default:t}}n("9MOC");["javascript","java","python","shell","powershell","markdown"].forEach((function(t){r.default.registerLanguage(t,n("8gVO")("./"+t))})),e.default={name:"RichTextEditor",components:{FullScreen:i.default,Editor:c.Editor,viewer:c.Viewer},model:{prop:"value",event:"change"},props:{value:{type:String,default:""},options:{type:Object,default:function(){}},id:{type:[String,Number],required:!0},fullTitle:{type:String,default:""},isPreview:{type:Boolean,default:!1}},data:function(){return{isFull:!1,height:250,editorOptions:{viewer:!0,hideModeSwitch:!1,usageStatistics:!1,language:"zh-CN",plugins:[[o.default,{hljs:r.default}]]}}},watch:{value:function(t){var e=this.$refs.toastuiEditor&&this.$refs.toastuiEditor.editor;e&&e.setHtml(t,!0)}},mounted:function(){window.addEventListener("resize",this.handleScreenChange)},beforeDestroy:function(){window.removeEventListener("resize",this.handleScreenChange)},methods:{getHtml:function(){return this.$refs.toastuiEditor.invoke("getHtml")},onEditorLoad:function(){try{var t=this.$refs.toastuiEditor.getRootElement().querySelector(".te-mode-switch-section");t.classList.add("cus-change-mode"),t.querySelector(".te-switch-button.markdown").innerText=this.$t('m.common["Markdown模式"]'),t.querySelector(".te-switch-button.wysiwyg").innerText=this.$t('m.common["富文本模式"]')}catch(t){(0,s.errorHandler)(t)}},onEditorBlur:function(){var t=this.getHtml(),e=(0,a.appendTargetAttrToHtml)(t);this.$emit("change",e)},setHeight:function(t){this.height=t},getFullScreenContentHeight:function(){return document.body.clientHeight-50},handleScreenChange:function(){if(this.isFull){var t=this.getFullScreenContentHeight();this.setHeight(t)}},openFullScreen:function(){this.isFull=!0,this.handleScreenChange()},closeFullSreen:function(){this.isFull=!1,this.setHeight(250)}}}},bmvC:function(t,e,n){"use strict";n("RyoZ")},borX:function(t,e,n){"use strict";n.r(e);var i=n("6IIS"),a=n("h5om");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("781l");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"8c1fdf02",null);e.default=r.exports},"bpA+":function(t,e,n){"use strict";n.r(e);var i=n("IakJ"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"c/a9":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("GQeE"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"bkPluginInfo",props:{nodeInfo:{type:Object,default:function(){return{}}},apiInfo:{type:Object,default:function(){return{}}}},data:function(){return{status:"",tableData:[]}},mounted:function(){var t=this;this.status=this.nodeInfo.status,"inputs"in this.nodeInfo.contexts.build_params&&(this.tableData=(0,s.default)(this.nodeInfo.contexts.build_params.inputs).map((function(e){return{name:e,value:t.nodeInfo.contexts.build_params.inputs[e]}})))}}},c5gA:function(t,e,n){"use strict";n.r(e);var i=n("O213"),a=n("005i");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("tsYB");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"3b0c88fa",null);e.default=r.exports},c6BP:function(t,e,n){"use strict";n.r(e);var i=n("WP3n"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},c6Q5:function(t,e,n){"use strict";n.r(e);var i=n("wA6F"),a=n("qCK4");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("7LjQ");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"725441f0",null);e.default=r.exports},cOQe:function(t,e,n){},cqwU:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading.ticketLoading},expression:"{ isLoading: loading.ticketLoading }"}],staticClass:"ticket-detail-panel"},[t.ticketErrorMessage?e("no-ticket-content",{attrs:{message:t.ticketErrorMessage}}):[t.loading.ticketLoading?t._e():e("ticket-header",{ref:"ticketHeader",attrs:{"header-info":t.headerInfo,"ticket-info":t.ticketInfo,"ticket-trigger-list":t.ticketTriggerList},on:{reloadTicket:t.reloadTicket}}),t._v(" "),e("div",{staticClass:"ticket-container"},[e("div",{staticClass:"ticket-container-left"},[e("left-ticket-content",{ref:"leftTicketContent",attrs:{"comment-list":t.commentList,"comment-id":t.commentId,loading:t.loading,"ticket-info":t.ticketInfo,"node-list":t.nodeList,"first-state-fields":t.firstStateFields,"node-trigger-list":t.nodeTriggerList,"ticket-id":t.ticketId,"is-page-over":t.isPageOver,"has-node-opt-auth":t.hasNodeOptAuth,"is-show-assgin":t.isShowAssgin,"comment-loading":t.commentLoading,"more-loading":t.moreLoading},on:{addTargetComment:t.addTargetComment,refreshComment:t.refreshComment,getBacicInfoStatus:t.getBacicInfoStatus}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showRightTabs,expression:"showRightTabs"}],staticClass:"drag-line",attrs:{"data-test-id":"ticket_line_screen_drag"},on:{mousedown:t.handleLineMouseDown}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.showRightTabs,expression:"!showRightTabs"}],staticClass:"show-right-icon",on:{click:t.onShowRightContent}},[e("i",{staticClass:"bk-icon icon-angle-left",attrs:{"data-v-639c8670":""}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showRightTabs,expression:"showRightTabs"}],staticClass:"ticket-container-right",attrs:{id:"ticketContainerRight"}},[t.openFunction.SLA_SWITCH&&t.hasNodeOptAuth?e("div",{class:["sla-information",t.isShowSla?"hide":""]},[e("div",{staticClass:"sla-view"},[e("div",{staticClass:"sla-title",on:{click:t.handleClickShowSla}},[e("i",{class:["bk-itsm-icon",t.isShowSla?"icon-xiangyou":"icon-xiangxia"]}),t._v(" "),e("span",[t._v(t._s(t.$t('m["SLA信息"]')))])]),t._v(" "),e("span",{staticClass:"view-sla-rule",on:{click:t.viewSlaRule}},[t._v(t._s(t.$t('m["规则查看"]')))])]),t._v(" "),t.isShowSla?t._e():e("sla-record-tab",{attrs:{threshold:t.threshold,"ticket-id":t.ticketId,"basic-infomation":t.ticketInfo,"node-list":t.nodeList}})],1):t._e(),t._v(" "),t.loading.ticketLoading?t._e():e("right-ticket-tabs",{staticClass:"right-ticket-tabs",attrs:{"is-show-sla":t.isShowSla,"ticket-info":t.ticketInfo,"has-node-opt-auth":t.hasNodeOptAuth,"node-list":t.nodeList},on:{ticketFinishAppraise:t.ticketFinishAppraise,viewProcess:t.viewProcess}})],1)])],t._v(" "),e("bk-dialog",{attrs:{"ext-cls":"processed-info-dialog",width:800,"show-header":!1,"show-footer":!1,"mask-close":!1},on:{cancel:t.goToHome},model:{value:t.isShowDialog,callback:function(e){t.isShowDialog=e},expression:"isShowDialog"}},[e("div",{staticClass:"processed-info-content"},[e("div",{staticClass:"header-area"},[e("bk-icon",{staticClass:"info-icon",attrs:{type:"info-circle-shape"}}),t._v(" "),e("span",{staticClass:"tips"},[t._v(t._s(t.$t('m["单据已由processor处理,您无需操作"]',{processor:t.processedUser})))])],1),t._v(" "),e("p",{staticClass:"section-title"},[t._v(t._s(t.$t('m["单据基本信息"]')))]),t._v(" "),e("div",{staticClass:"ticket-detail"},[e("div",{staticClass:"form-item"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t('m.tickets["标题"]')))]),t._v(t._s(t.$t('m[":"]'))+"\n          "),e("div",{staticClass:"value-content"},[e("span",[t._v(t._s(t.processedInfo.title))])])]),t._v(" "),e("div",{staticClass:"form-item"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t('m.tickets["单号"]')))]),t._v(t._s(t.$t('m[":"]'))+"\n          "),e("div",{staticClass:"value-content"},[e("span",[t._v(t._s(t.processedInfo.sn))])])]),t._v(" "),e("div",{staticClass:"form-item"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t('m.tickets["提单人"]')))]),t._v(t._s(t.$t('m[":"]'))+"\n          "),e("div",{staticClass:"value-content"},[e("span",[t._v(t._s(t.processedInfo.creator))])])]),t._v(" "),t._l(t.processedInfo.fields,(function(n){return e("div",{key:n.id,staticClass:"form-item"},[e("div",{staticClass:"label"},[t._v(t._s(n.name))]),t._v(t._s(t.$t('m[":"]'))+"\n          "),e("div",{staticClass:"value-content"},["TABLE"===n.type?e("bk-table",{attrs:{data:n.display_value}},t._l(n.choice,(function(t){return e("bk-table-column",{key:t.key,attrs:{label:t.name,prop:t.key}})})),1):"CUSTOM-FORM"===n.type?e("div",{staticClass:"custom-form-wrapper"},t._l(n.tables,(function(n,i){return e("div",{key:i,staticClass:"table-item"},[n.label?e("p",{staticClass:"table-label"},[t._v(t._s(n.label))]):t._e(),t._v(" "),e("bk-table",{attrs:{data:n.values}},t._l(n.cols,(function(t){return e("bk-table-column",{key:t.key,attrs:{label:t.name,prop:t.key}})})),1)],1)})),0):e("span",[t._v(t._s(n.display_value))])],1)])}))],2),t._v(" "),e("div",{staticClass:"action-btn"},[e("bk-button",{attrs:{theme:"primary"},on:{click:t.goToHome}},[t._v(t._s(t.$t('m["我知道了"]')))])],1)])])],2)},a=[];i._withStripped=!0},d0m8:function(t,e,n){},d88Z:function(t,e,n){"use strict";n.r(e);var i=n("/xVU"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},d8St:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("KaYb"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"sopsNodeLog",components:{getParam:s.default},props:{sopsInfo:{type:Array,default:function(){return{}}}}}},dCU7:function(t,e,n){"use strict";n("UQsz")},dD0k:function(t,e,n){"use strict";n("hF++")},dGg1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.CUSTOM_FORM_TEMPLATE={config:{mode:"sideslider"},schemes:{base_text_scheme:{type:"text",attrs:{styles:{label:["border"],value:["highlight","border"]},desc:"通用描述文字"}},table_text_scheme:{type:"text",attrs:{styles:{label:["border"],value:["highlight","border"]}}},base_table_scheme:{type:"table",attrs:{column:[{name:"操作",type:"text",key:"column1"},{name:"关联相关内容",key:"column2",scheme:"table_text_scheme",attrs:{}},{name:"申请期限",type:"text",key:"column3",attrs:{sort:!0}}]}},sub_table_scheme:{type:"table",attrs:{column:[{name:"关联内容-类型",key:"column1",scheme:"base_text_scheme"},{name:"类型值",key:"column2",scheme:"table_text_scheme"}]}},sub2_table_scheme:{type:"table",attrs:{column:[{name:"主机",key:"column1",scheme:"base_text_scheme"}]}}},form_data:[{label:"业务：",scheme:"base_text_scheme",value:"蓝鲸",desc:"覆盖 scheme 中通用描述文字",children:[{label:"子业务1：",scheme:"base_text_scheme",value:"test1"},{label:"子业务2：",scheme:"base_text_scheme",value:"test2"}]},{label:"提单人：",scheme:"base_text_scheme",value:""},{label:"提单时间：",scheme:"base_text_scheme",value:""}]}},dU2m:function(t,e,n){"use strict";n.r(e);var i=n("0vGa"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},dbNl:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"build-detail-info"},[e("div",{staticClass:"base-info"},[e("h3",{staticClass:"setion-title"},[t._v("Info")]),t._v(" "),e("ul",{staticClass:"basic-list block"},t._l(t.infoList,(function(n,i){return e("li",{key:i,staticClass:"basic-item"},[e("span",{staticClass:"basic-name",staticStyle:{width:"100px"}},[t._v(t._s(n.name)+"：")]),t._v(" "),e("span",{staticClass:"basic-value"},[t._v("\n          "+t._s(n.value)+"\n        ")])])})),0)]),t._v(" "),e("div",{staticClass:"base-info mt30"},[e("bk-table",{attrs:{data:t.buildItem.properties}},[e("bk-table-column",{attrs:{label:"键",prop:"key",width:"180"}}),t._v(" "),e("bk-table-column",{attrs:{label:"值",prop:"value"}})],1)],1)])},a=[];i._withStripped=!0},djBg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=y(n("4d7F")),a=y(n("14Xm")),s=y(n("GQeE")),o=y(n("D3Ub")),r=y(n("c5gA")),c=y(n("2eEL")),l=y(n("tQ05")),u=y(n("/14K")),d=y(n("4DVm")),f=y(n("fpRC")),m=y(n("ga4Z")),p=y(n("gw7P")),h=y(n("kOIM")),v=y(n("0mGZ")),b=y(n("PaSM")),k=n("CeR/"),g=n("ygAv"),_=y(n("EstQ"));function y(t){return t&&t.__esModule?t:{default:t}}e.default={name:"CurrentStepItem",components:{fieldsDone:u.default,fieldInfo:l.default,collapseTransition:c.default,TaskStatus:d.default,apiNodeHandleBody:f.default,TicketTriggerDialog:m.default,NodeDealDialog:p.default,NodeTaskList:h.default,sopsAndDevopsTask:v.default,bkPluginTask:r.default},mixins:[b.default],inject:["reload"],props:{ticketInfo:{type:Object,default:function(){return{}}},nodeInfo:{type:Object,default:function(){return{}}},index:{type:Number},nodeList:{type:Array,default:function(){return[]}},allFieldList:{type:Array,default:function(){return[]}},allGroups:{type:Array,default:function(){return[]}},nodeTriggerList:{type:Array,default:function(){return[]}},isLastNode:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},isShowAssgin:Boolean},data:function(){return{constants:[],hookedVarList:{},pipelineList:[],pipelineRules:{},pipelineStages:[],pipelineConstants:[],constantDefaultValue:{},convertTimeArrToString:g.convertTimeArrToString,replyBtnLoading:!1,unfold:!1,isFullScreen:!1,submitting:!1,isDropdownShow:!1,ignoreOperations:["SUSPEND","TERMINATE"],validatePopInfo:{openShow:!1,content:"",title:this.$t('m.newCommon["缺少必填信息"]')},openFormInfo:{isShow:!1,title:"",width:700,headerPosition:"left",autoClose:!1,precision:0,btnInfo:{}},openSubmitInfo:{openShow:!1,content:""},slaInfo:{color:"",isTimeOut:!1},workflow:"",triggerInfo:{}}},computed:{currSignProcessorInfo:function(){if(!this.nodeInfo.can_operate&&"SIGN"===this.nodeInfo.type)return this.nodeInfo.tasks.find((function(t){return t.can_view}))},tipsProcessorsInfo:function(){var t="",e=("ORGANIZATION"===this.nodeInfo.processors_type?this.nodeInfo.members:this.nodeInfo.processors).replace(/ \(共\d+人, 已处理\d+人\)/,(function(e){return t=e,""})).split(",").filter((function(t){return!!t}));return e.length>=30&&"ORGANIZATION"===this.nodeInfo.processors_type&&e.push("..."),{list:e,extend:t}},signProcessors:function(){var t=this.nodeInfo.tasks;return this.currSignProcessorInfo?this.currSignProcessorInfo.processor+this.$t('m.newCommon["(共"]')+t.length+this.$t('m.newCommon["人，已处理"]')+t.filter((function(t){return"FINISHED"===t.status})).length+this.$t('m.newCommon["人)"]'):""},triggers:function(){var t=this;return this.nodeTriggerList.filter((function(e){return Number(e.sender)===Number(t.nodeInfo.state_id)}))},hasNodeOptAuth:function(){return this.nodeInfo.can_operate||!!this.currSignProcessorInfo||this.nodeInfo.can_execute_task},isShowDealBtns:function(){if("FAILED"===this.nodeInfo.status)return!1;if(2===this.nodeInfo.sla_task_status&&!0===this.nodeInfo.is_reply_need)return!1;return!["TASK-SOPS","TASK-DEVOPS","BK-PLUGIN","WEBHOOK"].includes(this.nodeInfo.type)||"RUNNING"!==this.nodeInfo.status},isShowExceptionDistribute:function(){return!(!this.isShowAssgin||this.nodeAutoPass())&&(("APPROVAL"===this.nodeInfo.type||"NORMAL"===this.nodeInfo.type)&&"SUSPENDED"!==this.ticketInfo.current_status)}},created:function(){this.initData(),this.$store.commit("ticket/setHasTicketNodeOptAuth",this.hasNodeOptAuth)},methods:{initData:function(){this.unfold=!this.nodeAutoPass();var t=this.nodeInfo;2===t.sla_task_status&&(2===t.sla_status&&(this.slaInfo.color="#FE9C00"),4===t.sla_status&&(this.slaInfo.color="#EA3536",this.slaInfo.isTimeOut=!0),this.runTime()),this.workflow=this.ticketInfo.table_fields[0].workflow_id,this.getSopsPreview(),this.getpipelineDetail()},reloadTicket:function(){this.reload()},getSopsPreview:function(){var t=this;return(0,o.default)(a.default.mark((function e(){var n,i,o,r,c,l,u,d,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object.prototype.hasOwnProperty.call(t.nodeInfo.contexts,"task_params")){e.next=9;break}return n=t.nodeInfo.contexts.task_params,i=n.bk_biz_id,o=n.template_id,r=n.exclude_task_nodes_id,c=n.template_source,l={bk_biz_id:i,template_id:o,exclude_task_nodes_id:r},u="common"===c?"taskFlow/getSopsCommonPreview":"taskFlow/getSopsPreview",e.next=6,t.$store.dispatch(u,l);case 6:d=e.sent,f=(0,s.default)(d.data.pipeline_tree.constants).map((function(e){return t.$set(t.hookedVarList,e,!1),t.constantDefaultValue[e]=t.nodeInfo.contexts.task_params.constants[e],d.data.pipeline_tree.constants[e].value=t.nodeInfo.contexts.task_params.constants[e],d.data.pipeline_tree.constants[e]})),t.constants=f;case 9:case"end":return e.stop()}}),e,t)})))()},onChangeHook:function(t,e){this.hookedVarList[t]=e},getpipelineDetail:function(){var t=this;if(Object.prototype.hasOwnProperty.call(this.nodeInfo,"api_info")&&"TASK-DEVOPS"===this.nodeInfo.type){var e=this.nodeInfo.api_info.devops_info.find((function(t){return"project_id"===t.key})),n=this.nodeInfo.api_info.devops_info.find((function(t){return"pipeline_id"===t.key}));this.$store.dispatch("ticket/getDevopsPipelineStartInfo",{project_id:e.value,pipeline_id:n.value}).then((function(e){t.pipelineList=e.data.properties,t.pipelineConstants=e.data.properties.map((function(e){var n={key:"",value:""},i=t.nodeInfo.api_info.devops_info.find((function(t){return t.key===e.id}));return i&&(n.key=i.key,n.value=i.value),n})),e.data.properties.forEach((function(e){t.pipelineRules[e.id]=[{required:e.required,message:_.default.t('m.treeinfo["字段必填"]'),trigger:"blur"}]}))})),this.$store.dispatch("ticket/getDevopsPipelineDetail",{project_id:e.value,pipeline_id:n.value}).then((function(e){t.pipelineStages=e.data.stages}))}},nodeAutoPass:function(){var t=this;return!(!Object.prototype.hasOwnProperty.call(this.ticketInfo,"is_auto_approve")||"APPROVAL"!==this.nodeInfo.type)&&(this.ticketInfo.is_auto_approve&&window.username===this.ticketInfo.creator.split("(")[0]&&this.nodeInfo.tasks.some((function(e){return e.processor===t.ticketInfo.creator})))},clickBtn:function(t){var e=this;if("TRANSITION"!==t.key||!this.$refs.fieldInfo||this.$refs.fieldInfo.checkValue())if(this.openFormInfo.btnInfo=t,this.openFormInfo.title=t.name,["TRANSITION","CLAIM","UNSUSPEND"].includes(this.openFormInfo.btnInfo.key)){var n={TRANSITION:this.$t('m.newCommon["提交后，流程将转入下一环节，当前提交的部分内容将无法修改"]'),CLAIM:this.$t('m.newCommon["执行认领操作后，单据将流入我的待办"]'),UNSUSPEND:this.$t('m.newCommon["执行恢复操作后，单据将可以继续处理"]')};this.openSubmitInfo.content=n[this.openFormInfo.btnInfo.key],this.$bkInfo({type:"warning",title:"TRANSITION"===t.key?this.$t('m.memberSelect["是否"]')+this.openFormInfo.title:this.openFormInfo.title,subTitle:this.openSubmitInfo.content,confirmFn:function(){e.submitFormAjax()}})}else this.openFormInfo.isShow=!0,this.openFormInfo.title=t.name},submitFormAjax:function(t){var e=this.nodeInfo.ticket_id;if("TERMINATE"===this.openFormInfo.btnInfo.key){var n={state_id:this.nodeInfo.state_id,terminate_message:t.terminate_message};this.submitAjax("terminableOrder",n,e)}if("TRANSITION"===this.openFormInfo.btnInfo.key){this.fieldFormatting(this.nodeInfo.fields);var i={state_id:this.nodeInfo.state_id,fields:this.nodeInfo.fields.filter((function(t){return!t.is_readonly&&t.showFeild})).map((function(t){return"FILE"===t.type&&(t.value=t.value.toString()),{id:t.id,key:t.key,type:t.type,choice:t.choice,value:t.showFeild?t.value:""}}))};this.submitAjax("proceedOrder",i,e)}if("SUSPEND"===this.openFormInfo.btnInfo.key||"UNSUSPEND"===this.openFormInfo.btnInfo.key||"CLAIM"===this.openFormInfo.btnInfo.key){var a={state_id:this.nodeInfo.state_id,processors:"",processors_type:"",action_type:this.openFormInfo.btnInfo.key};"SUSPEND"===this.openFormInfo.btnInfo.key&&(a.processors=window.username,a.processors_type="PERSON",a.action_message=t.suspend_message),"UNSUSPEND"!==this.openFormInfo.btnInfo.key&&"CLAIM"!==this.openFormInfo.btnInfo.key||(a.processors=window.username,a.processors_type="PERSON"),this.submitAjax("distributeOrder",a,e)}if("DELIVER"===this.openFormInfo.btnInfo.key||"DISTRIBUTE"===this.openFormInfo.btnInfo.key){var s={state_id:this.nodeInfo.state_id,action_type:this.openFormInfo.btnInfo.key,processors:"",processors_type:""};"DELIVER"===this.openFormInfo.btnInfo.key&&(s.processors=t.person.value,s.processors_type=t.person.type,s.action_message=t.deliverReason),"DISTRIBUTE"===this.openFormInfo.btnInfo.key&&(s.processors=t.person.value,s.processors_type=t.person.type),this.submitAjax("newAssignDeliver",s,e)}if("EXCEPTION_DISTRIBUTE"===this.openFormInfo.btnInfo.key){var o={state_id:this.nodeInfo.state_id,processors:t.person.value,processors_type:t.person.type,action_type:this.openFormInfo.btnInfo.key};this.submitAjax("exceptionDistribute",o,e)}},submitAjax:function(t,e,n){var i=this;if(!this.submitting){this.submitting=!0;var a={params:e,id:n};this.$store.dispatch("deployOrder/"+t,a).then((function(){i.$bkMessage({message:i.openFormInfo.title+i.$t('m.newCommon["成功"]'),theme:"success"}),i.cancelForm(),i.successFn(),i.$emit("closeSlider")})).catch((function(t){(0,k.errorHandler)(t,i)})).finally((function(){i.submitting=!1;["TRANSITION","SUSPEND","UNSUSPEND","CLAIM"].some((function(t){return t===i.openFormInfo.btnInfo.key}))&&i.cancelForm(),setTimeout((function(){i.reloadTicket()}),500)}))}},openFullScreen:function(){this.isFullScreen=!0,this.$bkMessage({message:this.$t('m.common["按 ESC 键退出全屏"]')}),document.addEventListener("keydown",this.handlerKeyDown)},onCloseFullScreen:function(){this.isFullScreen=!1},handlerKeyDown:function(t){27===t.keyCode&&(this.onCloseFullScreen(),document.removeEventListener("keydown",this.handlerKeyDown))},closeUnflod:function(t){if(!this.nodeAutoPass()&&-1===t.target.className.indexOf("bk-processor-check")){if(!this.nodeInfo.can_operate&&!this.currSignProcessorInfo)return;this.unfold=!this.unfold}},successFn:function(){this.$emit("successFn")},cancelForm:function(){this.openFormInfo.isShow=!1},openTriggerDialog:function(t){var e=this,n={};this.nodeInfo.fields.forEach((function(t){n[t.key]=t.val}));var a=this.$store.dispatch("trigger/getTriggerParams",{params:{context:n},id:t.id}),s=this.$store.dispatch("trigger/getResponseList");i.default.all([a,s]).then((function(n){var i=n[0].data;if(e.triggerInfo=n[1].data.find((function(e){return e.name===t.component_name})),"api"===e.triggerInfo.key){var a={contentStatus:!1,isLoading:!1,key:"api",wayInfo:e.triggerInfo};e.triggerInfo=a,e.triggerInfo.wayInfo.field_schema.forEach((function(t){var n=i.find((function(e){return e.key===t.key}));"api_source"===t.key?(e.$set(t,"systemId",""),e.$set(t,"apiId",""),e.$set(t,"value",n.value)):(e.$set(t,"apiContent",{}),e.$set(t,"value",n.value))}))}else e.triggerInfo.field_schema.forEach((function(t){var n=i.find((function(e){return e.key===t.key})),a=n.value||"";if("MEMBERS"===t.type||"MULTI_MEMBERS"===t.type)if(a=[],t.value)t.value.forEach((function(t){if(t.value){var e={key:t.value.member_type,value:t.value.members,secondLevelList:[],isLoading:!1};a.push(e)}}));else{var s={key:n.value[0].value.member_type,value:n.value[0].value.members,secondLevelList:[],isLoading:!1};a.push(s)}e.$set(t,"value",a),"SUBCOMPONENT"===t.type&&t.sub_components&&t.sub_components.length&&t.sub_components.forEach((function(t){t.field_schema.forEach((function(n){var a=i[0].sub_components.find((function(e){return e.key===t.key})),s=n.value||"";if(a){var o=a.params.find((function(t){return t.key===n.key}));s=o.value}if("MEMBERS"===n.type||"MULTI_MEMBERS"===n.type)if(a){t.checked=!0;var r=a.params.find((function(t){return t.key===n.key}));Array.isArray(n.value)?n.value.forEach((function(t){var e={key:t.value.member_type,value:t.value.members,secondLevelList:[],isLoading:!1};s.push(e)})):(s=[],r.value.forEach((function(t){s.push({key:t.value.member_type,value:t.value.members,secondLevelList:[],isLoading:!1})})))}else s=[{key:"",value:"",secondLevelList:[],isLoading:!1}];e.$set(n,"value",s)}))}))}))})).finally((function(){e.$refs.triggerDialog.openDialog(t)}))},isBtnLoading:function(t){var e=t.tasks&&t.tasks.find((function(t){return t.processor.replace(/\((.+?)\)/,"")===window.username}))||{};return!(!["SIGN","APPROVAL"].includes(t.type)||!["RUNNING","EXECUTED"].includes(e.status))},runTime:function(){var t=this,e=this.slaInfo.slaTime;e||(e=(0,g.convertTimeArrToMS)(this.nodeInfo.sla_timeout.map((function(t){return Math.abs(t)}))),this.nodeInfo.sla_timeout=(0,g.convertMStoString)(1e3*e)),this.myInterval((function(){t.slaInfo.isTimeOut?e++:e--,e<=0&&(t.slaInfo.isTimeOut=!0,t.slaInfo.color="#EA3536"),t.nodeInfo.sla_timeout=(0,g.convertMStoString)(1e3*e)}),1e3)},myInterval:function(t,e){var n=this;if(!0===this._isDestroyed)return!1;var i=setTimeout((function(){t(),clearTimeout(i),n.myInterval(t,e)}),e)},replyAssignDeliver:function(){var t=this,e=this.ticketInfo.id,n={params:{state_id:this.nodeInfo.state_id},id:e};this.replyBtnLoading=!0,this.$store.dispatch("deployOrder/replyAssignDeliver",n).then((function(){t.$bkMessage({message:t.$t('m.newCommon["响应成功"]'),theme:"success"}),t.cancelForm(),t.successFn(),t.$emit("closeSlider")})).catch((function(e){t.$bkMessage({message:e.data.msg||t.$t('m.newCommon["响应失败！"]'),theme:"error",ellipsisLine:0})})).finally((function(){t.replyBtnLoading=!1}))}}}},dkT3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n("P2sY")),a=c(n("gDS+")),s=c(n("14Xm")),o=c(n("D3Ub")),r=c(n("m1cH"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"commonCascader",model:{prop:"textinfoOri",event:"change"},props:{textinfoOri:Array,positions:{type:Object,default:function(){return{top:"",left:"",bottom:"",right:""}}},disabled:{type:Boolean,default:function(){return!1}},options:{type:Array,default:function(){return[]}},iscollectTwo:{type:Boolean,default:function(){return!1}},optionsFavorites:{type:Array,default:function(){return[]}},isshowNumber:{type:Boolean,default:function(){return!1}},isactive:{type:Boolean,default:function(){return!1}}},data:function(){return{options_eg:[{key:"zhinan",name:this.$t('m.common["指南"]'),children:[{key:"zujian",name:this.$t('m.common["组件"]'),children:[{key:"basic",name:"Basic"},{key:"form",name:"Form",children:[{key:"radio",name:this.$t('m.common["Radio 单选框"]')}]}]}]}],isCollectOpen:!0,textinfo:"",placeholder:this.$t('m.common["请选择服务目录"]'),readonly:"readonly",selector:{open:!1},selectedOptionsvalue:[],selectedOptions:[],styleObject:{top:this.positions.top?this.top+"px":null,left:this.positions.left?this.left+"px":null,bottom:this.positions.bottom?this.bottom+"px":null,right:this.positions.right?this.right+"px":null},options2:[],options3:[],level1:null,level2:null,level3:null,styletranslateY:{transform:"translate(-26px,-38px)"},searchList:[],searchContent:"",searchItem:{}}},computed:{currentTextinfo:function(){return this.textinfoOri},options1:function(){var t=this.iscollectTwo&&!this.iscollect_first?[this.favoritesItem].concat((0,r.default)(this.options)):[].concat((0,r.default)(this.options));return t&&t.forEach((function(t){t.isselect=!1})),null!==this.level1&&(0===this.level1&&(this.options2=t[this.level1].children),t[this.level1]&&(t[this.level1].isselect=!0)),t},options_favorites_sign:function(){return this.optionsFavorites.map((function(t){return t.key}))},favoritesItem:function(){var t={key:"favorites",name:this.$t('m.common["我的收藏"]'),children:[].concat((0,r.default)(this.optionsFavorites)).map((function(t){return t.favorites=!0,t}))};return t},isTextinfoChange:function(){var t=this;return(0,o.default)(s.default.mark((function e(){var n,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.textinfoOri&&t.textinfoOri.length){e.next=6;break}if(!t.selectedOptionsvalue||!t.selectedOptionsvalue.length){e.next=5;break}return e.next=4,t.reduction();case 4:return e.abrupt("return",t.$t('m.common["清空"]'));case 5:return e.abrupt("return","==1");case 6:if(t.textinfoOri.length===t.selectedOptionsvalue.length){e.next=10;break}return e.next=9,t.assignment(t.textinfoOri);case 9:return e.abrupt("return",t.$t('m.common["赋值1"]'));case 10:if(t.textinfoOri.length!==t.selectedOptionsvalue.length){e.next=18;break}for(n=!1,i=0;i<t.textinfoOri.length;i++)t.selectedOptionsvalue[i].id!==t.textinfoOri[i].id&&(n=!0);if(!n){e.next=17;break}return e.next=16,t.assignment(t.textinfoOri);case 16:return e.abrupt("return",t.$t('m.common["赋值2"]'));case 17:return e.abrupt("return","==2");case 18:return e.abrupt("return","==3");case 19:case"end":return e.stop()}}),e,t)})))()}},watch:{searchContent:function(t){t&&this.getSearchList()},"selector.open":function(t){t&&(this.searchContent="")},options1:function(){var t=this;return(0,o.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.currentTextinfo&&t.currentTextinfo.length,!e.t0){e.next=7;break}return e.t1=t.textinfo,e.next=5,t.currentTextinfo.map((function(t){return t.name})).join("/");case 5:e.t2=e.sent,e.t0=e.t1!==e.t2;case 7:if(!e.t0){e.next=9;break}t.assignment(t.currentTextinfo);case 9:case"end":return e.stop()}}),e,t)})))()},currentTextinfo:function(t){var e=this;return(0,o.default)(s.default.mark((function n(){return s.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&t.length){n.next=4;break}e.reduction(),n.next=11;break;case 4:if(null!==e.level1){n.next=11;break}return n.t0=e.textinfo,n.next=8,t.map((function(t){return t.name})).join("/");case 8:if(n.t1=n.sent,n.t0===n.t1){n.next=11;break}e.assignment(t);case 11:case"end":return n.stop()}}),n,e)})))()},deep:!0},mounted:function(){var t=this;return(0,o.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.textinfoOri||!t.textinfoOri.length||null!==t.level1){e.next=7;break}return e.t0=t.textinfo,e.next=4,t.selectedOptionsvalue.map((function(t){return t.name})).join("/");case 4:if(e.t1=e.sent,e.t0===e.t1){e.next=7;break}t.assignment(t.textinfoOri);case 7:case"end":return e.stop()}}),e,t)})))()},methods:{getSearchList:function(){var t=this,e=this.changeList();this.searchList=e.filter((function(e){return e.name&&e.name.indexOf(t.searchContent)>-1}))},changeList:function(){var t=JSON.parse((0,a.default)(this.options)),e=[];return function t(n,i,a){n.forEach((function(n){n.id=i?i+" / "+n.id:String(n.id),n.name=a?a+" / "+n.name:String(n.name),e.push({id:n.id.split(" / "),name:n.name,disabled:!!n.disabled,isSelected:!!n.isSelected}),n.children&&n.children.length&&t(n.children,n.id,n.name)}))}(t),e},handleSelectItem:function(t){var e=this;t.disabled||(this.searchList.forEach((function(t){t.isSelected=!1})),t.isSelected=!0,1===t.id.length?(this.options.forEach((function(n){e.treeData(n,t.id[0])})),this.performFn(this.options1,1,String(t.id[0]))):2===t.id.length?(this.options.forEach((function(n){e.treeData(n,t.id[0])})),this.performFn(this.options1,1,String(t.id[0])),this.options.forEach((function(n){e.treeData(n,t.id[1])})),this.performFn(this.options2,2,String(t.id[1]))):(this.options.forEach((function(n){e.treeData(n,t.id[0])})),this.performFn(this.options1,1,String(t.id[0])),this.options.forEach((function(n){e.treeData(n,t.id[1])})),this.performFn(this.options2,2,String(t.id[1])),this.options.forEach((function(n){e.treeData(n,t.id[2])})),this.performFn(this.options3,3,String(t.id[2]))),this.selector.open=!1,this.searchContent="")},treeData:function(t,e){var n=this;String(e)===String(t.id)&&(this.searchItem=t),null===t.children||t.children&&!t.children.length||t.children.forEach((function(t){n.treeData(t,e)}))},performFn:function(t,e,n){var i=t.findIndex((function(t){return String(t.id)===String(n)})),a=t.find((function(t){return String(t.id)===String(n)}));this.selectLevel(e,i,a)},assignment:function(t){var e=this;return(0,o.default)(s.default.mark((function n(){var i,a;return s.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.options1;case 2:i=s.default.mark((function n(i){var a;return s.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=-1,e["options"+(i+1)].map((function(e,n){t[i].id===e.id&&(a=n)})),-1===a){n.next=5;break}return n.next=5,e.selectLevel(i+1,a,t[i]);case 5:case"end":return n.stop()}}),n,e)})),a=0;case 4:if(!(a<t.length)){n.next=9;break}return n.delegateYield(i(a),"t0",6);case 6:a++,n.next=4;break;case 9:e.selector.open=!1;case 10:case"end":return n.stop()}}),n,e)})))()},closeHidden:function(){this.selector.open=!1},fnTextinfo:function(){var t=this;return(0,o.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$emit("change",t.selectedOptionsvalue);case 2:case"end":return e.stop()}}),e,t)})))()},scrollEvent:function(t){this.styletranslateY.transform="translate(-26px,"+(-t.target.scrollTop-32)+"px)"},showcascader:function(){var t=this;return(0,o.default)(s.default.mark((function e(){var n,i,a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.disabled){e.next=2;break}return e.abrupt("return");case 2:if(t.textinfo||t.reduction(),t.selector.open=!t.selector.open,n=t.$refs.cascader,i=t,a=function t(e){n.contains(e.target)||(i.selector.open=!1,i.$root.cascaderFunction=void 0,document.removeEventListener("click",t))},t.selector.open){e.next=12;break}return e.next=10,document.removeEventListener("click",t.$root.cascaderFunction);case 10:return t.$root.cascaderFunction=void 0,e.abrupt("return");case 12:t.selector.open&&!t.$root.cascaderFunction&&(t.$root.cascaderFunction=a,document.addEventListener("click",a));case 13:case"end":return e.stop()}}),e,t)})))()},settextinfo:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"own";return(0,o.default)(s.default.mark((function i(){return s.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if("give_default"!==n){i.next=6;break}if(!t[0]||!t[0].id){i.next=5;break}return i.next=4,e.$emit("change",t);case 4:e.textinfo=t[0].name;case 5:return i.abrupt("return");case 6:return t.children&&t.children.length||(e.selector.open=!1),i.next=9,e.selectedOptionsvalue.map((function(t){return t.name})).join("/");case 9:return e.textinfo=i.sent,i.next=12,e.$emit("change",e.selectedOptionsvalue);case 12:return i.next=14,e.fnTextinfo();case 14:case"end":return i.stop()}}),i,e)})))()},selectLevel:function(t,e,n){var i=this;return(0,o.default)(s.default.mark((function a(){return s.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:1===t?(i.level3=null,i.level2=null,i.level1=e,i.options1.forEach((function(t){t.isselect=!1})),i.options2.forEach((function(t){t.isselect=!1})),i.options3.forEach((function(t){t.isselect=!1})),i.options1[e].isselect=!0,i.options3=[],i.options2=[],i.selectedOptionsvalue=[],i.options2=n.children||[]):2===t?(i.level3=null,i.level2=e,i.options2.forEach((function(t){t.isselect=!1})),i.options3.forEach((function(t){t.isselect=!1})),i.options2[e].isselect=!0,i.options3=[],i.selectedOptionsvalue=i.selectedOptionsvalue.slice(0,1),i.options3=n.children||[]):(i.level3=e,i.options3.forEach((function(t){t.isselect=!1})),i.options3[e].isselect=!0,i.selectedOptionsvalue=i.selectedOptionsvalue.slice(0,2)),i.selectedOptionsvalue.push(n),"favorites"!==n.key&&i.settextinfo(n);case 3:case"end":return a.stop()}}),a,i)})))()},collect_s:function(t){var e=this;return(0,o.default)(s.default.mark((function n(){var a,o;return s.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((a=(0,i.default)({},t)).isselect&&delete a.isselect,a.favorites&&delete a.favorites,-1===(o=e.options_favorites_sign.indexOf(a.key))){n.next=8;break}return n.next=7,e.cancelcollect_s(t,o);case 7:return n.abrupt("return");case 8:return n.next=10,e.$emit("collect",[].concat((0,r.default)(e.optionsFavorites),[a]));case 10:case"end":return n.stop()}}),n,e)})))()},cancelcollect_s:function(t,e){var n=this;return(0,o.default)(s.default.mark((function a(){var o,c;return s.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.isselect&&(n.textinfo=""),(o=(0,i.default)({},t)).isselect&&delete o.isselect,o.favorites&&delete o.favorites,(c=[].concat((0,r.default)(n.optionsFavorites))).splice(e,1),a.next=8,n.$emit("cancelcollect",c);case 8:case"end":return a.stop()}}),a,n)})))()},reduction:function(){var t=this;return(0,o.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.textinfo="",t.isCollectOpen=!0,t.level3=null,t.level2=null,t.level1=null,t.options1.forEach((function(t){t.isselect=!1})),t.options2.forEach((function(t){t.isselect=!1})),t.options3.forEach((function(t){t.isselect=!1})),t.options3=[],t.options2=[],t.selectedOptionsvalue=[];case 11:case"end":return e.stop()}}),e,t)})))()}},create:function(){}}},dm0o:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"ext-cls":"bk-line-height","desc-type":"icon"}},[e("bk-radio-group",{on:{change:function(e){t.item.checkValue=!1}},model:{value:t.item.val,callback:function(e){t.$set(t.item,"val",e)},expression:"item.val"}},[t._l(t.item.choice,(function(n){return[e("bk-radio",{key:n.key,attrs:{disabled:t.disabled,value:n.key,"ext-cls":"mr20"}},[t._v(t._s(n.name))])]}))],2),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},do6w:function(t,e,n){},dwEX:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-default-value"},["STRING"===t.formInfo.type?[e("bk-input",{attrs:{"ext-cls":"bk-half",clearable:!0,placeholder:t.$t("m.treeinfo['请输入']")},model:{value:t.formInfo.default_value,callback:function(e){t.$set(t.formInfo,"default_value",e)},expression:"formInfo.default_value"}})]:t._e(),t._v(" "),"TEXT"===t.formInfo.type?[e("div",{staticStyle:{height:"30px"}},[e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.formInfo.default_value,expression:"formInfo.default_value",modifiers:{trim:!0}}],staticClass:"bk-form-textarea bk-textarea-tanble",staticStyle:{width:"49%"},attrs:{rows:"8",placeholder:t.$t("m.treeinfo['请输入']")},domProps:{value:t.formInfo.default_value},on:{input:function(e){e.target.composing||t.$set(t.formInfo,"default_value",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]:t._e(),t._v(" "),"RICHTEXT"===t.formInfo.type?[e("div",[e("rich-text-editor",{attrs:{id:"default-rich-text-editor","full-title":t.label},model:{value:t.formInfo.default_value,callback:function(e){t.$set(t.formInfo,"default_value",e)},expression:"formInfo.default_value"}})],1)]:t._e(),t._v(" "),"MULTISELECT"===t.formInfo.type||"CHECKBOX"===t.formInfo.type||"SELECT"===t.formInfo.type||"RADIO"===t.formInfo.type||"INPUTSELECT"===t.formInfo.type?["API"===t.formInfo.source_type||"RPC"===t.formInfo.source_type?[e("bk-input",{attrs:{"ext-cls":"bk-half",clearable:!0,placeholder:t.$t("m.treeinfo['请输入']")},model:{value:t.formInfo.default_value,callback:function(e){t.$set(t.formInfo,"default_value",e)},expression:"formInfo.default_value"}})]:[e("bk-select",{attrs:{"ext-cls":"bk-half",multiple:"MULTISELECT"===t.formInfo.type||"CHECKBOX"===t.formInfo.type,searchable:""},on:{toggle:t.getSelectList},model:{value:t.formInfo.default_value,callback:function(e){t.$set(t.formInfo,"default_value",e)},expression:"formInfo.default_value"}},t._l(t.selectList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)]]:t._e(),t._v(" "),"INT"===t.formInfo.type?[e("div",{staticClass:"bk-half"},[e("bk-input",{attrs:{clearable:!0,type:"number",precision:t.precision},model:{value:t.formInfo.default_value,callback:function(e){t.$set(t.formInfo,"default_value",e)},expression:"formInfo.default_value"}})],1)]:t._e(),t._v(" "),"DATE"===t.formInfo.type?[e("div",{staticClass:"bk-half"},[e("bk-date-picker",{attrs:{placeholder:t.$t("m.newCommon['选择日期']")},model:{value:t.formInfo.default_value,callback:function(e){t.$set(t.formInfo,"default_value",e)},expression:"formInfo.default_value"}})],1)]:t._e(),t._v(" "),"DATETIME"===t.formInfo.type?[e("div",{staticClass:"bk-half"},[e("bk-date-picker",{attrs:{type:"datetime",placeholder:t.$t("m.newCommon['选择日期时间']")},model:{value:t.formInfo.default_value,callback:function(e){t.$set(t.formInfo,"default_value",e)},expression:"formInfo.default_value"}})],1)]:t._e(),t._v(" "),"MEMBER"===t.formInfo.type?[e("div",{staticStyle:{width:"49%"}},[e("member-select",{attrs:{multiple:!1},model:{value:t.formInfo.default_value,callback:function(e){t.$set(t.formInfo,"default_value",e)},expression:"formInfo.default_value"}})],1)]:t._e(),t._v(" "),"MEMBERS"===t.formInfo.type?[e("div",{staticStyle:{width:"49%"}},[e("member-select",{model:{value:t.formInfo.default_value,callback:function(e){t.$set(t.formInfo,"default_value",e)},expression:"formInfo.default_value"}})],1)]:t._e(),t._v(" "),"CUSTOM-FORM"===t.formInfo.type?[e("div",{staticClass:"editor-wrap"},[e("div",{staticClass:"editor-btn-group"},[e("router-link",{staticClass:"opt-item",attrs:{target:"_blank",to:{name:"CustomFormTest"}}},[t._v(t._s(t.$t("m.common['查看模板']")))]),t._v(" "),e("span",{staticClass:"opt-item",on:{click:t.downCustomFormTempalte}},[t._v("\n          "+t._s(t.$t("m.common['下载模板']")))])],1),t._v(" "),e("code-editor",{attrs:{options:{language:"json"}},model:{value:t.formInfo.default_value,callback:function(e){t.$set(t.formInfo,"default_value",e)},expression:"formInfo.default_value"}})],1),t._v(" "),t.checkStatus.customFormStatus?e("p",{staticClass:"bk-field-error"},[t._v("\n      "+t._s(t.$t("m.treeinfo['格式错误！（JSON 语法错误或者根元素缺少 schemes 和 form_data 属性）']"))+"\n    ")]):t._e()]:t._e()],2)},a=[];i._withStripped=!0},"e+8O":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"child-node"},[t.treeDataList.length?t._l(t.treeDataList,(function(n,i){return e("li",{key:i,staticClass:"vue-tree-item"},[!t.isKeyValue&&n.children&&n.children.length||t.isKeyValue?e("div",{class:["tree-node",{down:n.showChildren,"set-frist-pLeft":t.treeIndex+1===1,active:n.checkInfo}],style:t.pLeft,on:{click:function(e){return e.stopPropagation(),t.toggle(n)}}},[n.showChildren||"object"!==n.type?t._e():e("i",{staticClass:"bk-icon icon-right-shape",class:{"bk-padding":!n.has_children},on:{click:function(e){return e.stopPropagation(),t.toggleChildren(n)}}}),t._v(" "),n.showChildren&&"object"===n.type?e("i",{staticClass:"bk-icon icon-down-shape",class:{"bk-padding":!n.has_children},on:{click:function(e){return e.stopPropagation(),t.toggleChildren(n)}}}):t._e(),t._v(" "),e("i",{staticClass:"bk-icon icon-folder-open-shape"}),t._v(" "),e("span",{staticClass:"name-text",attrs:{title:n.name}},[t._v(t._s(n.name))]),t._v(" "),n.checkInfo?e("i",{staticClass:"bk-icon icon-check-1",staticStyle:{float:"right","margin-top":"11px"}}):t._e()]):t._e(),t._v(" "),e("collapse-transition",["object"===n.type&&n.showChildren&&n.children?[e("exportTree",{attrs:{"tree-data-list":n.children,"tree-index":t.treeIndex+1,"is-key-value":t.isKeyValue},on:{selectItem:t.selectItem,toggle:t.toggle,toggleChildren:t.toggleChildren}})]:t._e()],2)],1)})):[t.isKeyValue?t._e():e("li",{staticClass:"vue-tree-item"},[e("div",{staticClass:"tree-node set-frist-pLeft"},[e("span",{staticClass:"name-text"},[t._v(t._s(t.$t('m.deployPage["暂无数据"]')))])])])]],2)},a=[];i._withStripped=!0},e07s:function(t,e,n){"use strict";n("gHwO")},e42N:function(t,e,n){},eC4C:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-library-opt-panel"},[e("div",{staticClass:"bk-button-group"},[e("bk-button",{class:[{"is-selected":"new"===t.type}],attrs:{size:"small"},on:{click:function(e){return t.onSwitchType("new")}}},[t._v("\n      "+t._s(t.$t("m.systemConfig['新增']")))]),t._v(" "),e("bk-button",{class:[{"is-selected":"update"===t.type}],attrs:{size:"small"},on:{click:function(e){return t.onSwitchType("update")}}},[t._v("\n      "+t._s(t.$t("m.tickets['更新']")))])],1),t._v(" "),e("bk-form",{ref:"taskForm",staticClass:"mt15",attrs:{model:t.formData,rules:t.rules,"form-type":"vertical"}},[e("bk-form-item",{attrs:{label:t.$t("m.task['任务库名称']"),required:!0,property:"name"}},["new"===t.type?[e("bk-input",{attrs:{placeholder:t.$t("m.tickets['请输入任务库名称']"),"max-length":120},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),t._v(" "),e("p",{staticClass:"desc"},[t._v(t._s(t.$t("m.tickets['存入任务库后，可用于快速创建任务']")))])]:e("bk-select",{attrs:{searchable:"",loading:t.templateListLoading},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}},t._l(t.templateList,(function(t){return e("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1)],2)],1),t._v(" "),e("div",{staticClass:"opt-btns"},[e("span",{on:{click:t.onSbumit}},[t._v(t._s(t.$t("m.treeinfo['确定']")))]),t._v(" "),e("span",{on:{click:function(e){return t.$emit("close")}}},[t._v(t._s(t.$t('m.treeinfo["取消"]')))])])],1)},a=[];i._withStripped=!0},eIgA:function(t,e,n){"use strict";n("HwhF")},"eM+a":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-upload"},[e("div",{staticClass:"file-wrapper",class:{isdrag:t.isdrag}},[e("img",{staticClass:"upload-icon",attrs:{src:t.uploadIcon}}),t._v(" "),e("span",{staticClass:"drop-upload"},[t._v(t._s(t.dragText))]),t._v(" "),e("span",{staticClass:"click-upload"},[t._v(t._s(t.clickText))]),t._v(" "),e("input",{ref:"uploadel",attrs:{accept:t.accept,multiple:t.multiple,disabled:t.disabled,type:"file",accept:".txt,.log,.pdf,.doc,.ppt,.xls,.docx,.pptx,.xlsx,.zip,.jpg,.png"},on:{change:t.selectFile}})]),t._v(" "),t.tip?e("p",{staticClass:"tip"},[t._v(t._s(t.tip))]):t._e(),t._v(" "),t.fileList.length?e("div",{staticClass:"all-file"},t._l(t.fileList,(function(n,i){return e("div",{key:i},[e("div",{staticClass:"file-item"},[e("div",{staticClass:"file-icon"},[e("img",{attrs:{src:t.getIcon(n)}})]),t._v(" "),n.done?t._e():e("i",{staticClass:"bk-icon icon-close close-upload",on:{click:function(e){return t.deleteFile(i,n)}}}),t._v(" "),e("div",{staticClass:"file-info"},[e("div",{staticClass:"file-name"},[e("span",[t._v(t._s(n.name))])]),t._v(" "),e("div",{staticClass:"file-message"},[e("span",{directives:[{name:"show",rawName:"v-show",value:!n.done&&"running"===n.status,expression:"!file.done && file.status === 'running'"}],staticClass:"upload-speed"},[t._v(t._s(t.speed)+t._s(t.unit))]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:!n.done,expression:"!file.done"}],staticClass:"file-size"},[t._v(t._s(t.filesize(n.size)))]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:n.done,expression:"file.done"}],staticClass:"file-size done"},[t._v(t._s("上传完成"))])]),t._v(" "),e("div",{staticClass:"progress-bar-wrapper"},[e("div",{staticClass:"progress-bar",class:{fail:n.errorMsg},style:{width:n.progress}})])])]),t._v(" "),n.errorMsg?e("p",{staticClass:"error-msg"},[t._v(t._s(n.errorMsg))]):t._e()])})),0):t._e()])},a=[];i._withStripped=!0},eOfU:function(t,e,n){"use strict";n.r(e);var i=n("XiH4"),a=n("f3v2");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},eRrw:function(t,e,n){"use strict";n("zV3R")},eUZ5:function(t,e,n){"use strict";n.r(e);var i=n("LkXx"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},eYYl:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",t._l(t.responseList,(function(n,i){return e("div",{key:i,staticClass:"bk-trigger-condition"},[e("div",{staticClass:"bk-condition-name"},[e("p",[t._v(t._s(t.$t("m.trigger['响应动作']")))]),t._v(" "),e("div",{staticClass:"bk-between-operat"},[e("i",{staticClass:"bk-itsm-icon icon-flow-add",on:{click:function(e){return t.addResponse(n,i)}}}),t._v(" "),e("i",{staticClass:"bk-itsm-icon icon-flow-reduce",class:{"bk-no-delete":1===t.responseList.length},on:{click:function(e){return t.deleteResponse(n,i)}}})])]),t._v(" "),e("div",{staticClass:"bk-condition-content"},[e("div",{staticClass:"bk-response-way"},[e("p",{staticClass:"bk-response-name"},[t._v(t._s(t.$t("m.trigger['动作名称']"))),e("span",{staticClass:"bk-span-square"},[t._v("*")])]),t._v(" "),e("bk-select",{attrs:{"ext-cls":"bk-way-input",clearable:!1,searchable:""},on:{selected:function(e){return t.selectedWay(...arguments,n)}},model:{value:n.way,callback:function(e){t.$set(n,"way",e)},expression:"item.way"}},t._l(t.responseWayList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1),t._v(" "),n.wayStatus?e("p",{staticClass:"bk-error-info"},[t._v(t._s(t.$t("m.trigger['动作名称为必填项']")))]):t._e()],1),t._v(" "),n.wayInfo.field_schema&&n.wayInfo.field_schema.length?e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:n.isLoading},expression:"{ isLoading: item.isLoading }"}],staticStyle:{"min-height":"100px"}},[!n.isLoading&&n.wayInfo.field_schema&&n.wayInfo.field_schema.length?e("response-content",{attrs:{item:n,signal:t.signal}}):t._e()],1):t._e()])])})),0)},a=[];i._withStripped=!0},eaHi:function(t,e,n){"use strict";n.r(e);var i=n("VGC8"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},efIh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n("14Xm")),a=o(n("D3Ub")),s=n("CeR/");function o(t){return t&&t.__esModule?t:{default:t}}e.default={methods:{getFieldOptions:function(t){var e=this;return(0,a.default)(i.default.mark((function n(){var a;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=[],n.t0=t.source_type,n.next="CUSTOM"===n.t0?4:"API"===n.t0?6:"DATADICT"===n.t0?9:"RPC"===n.t0?17:24;break;case 4:return a=t.choice,n.abrupt("break",24);case 6:return a=[],t.choice.forEach((function(t){a.push({key:String(t.id||t.key),name:t.name,can_delete:Boolean(t.can_delete)})})),n.abrupt("break",24);case 9:if(a=[],!t.choice.some((function(t){return t.can_delete}))){n.next=13;break}return a=t.choice,n.abrupt("break",24);case 13:if("TREESELECT"===t.type){n.next=16;break}return n.next=16,e.$store.dispatch("datadict/get_data_by_key",{key:t.source_uri,field_key:t.key,service:t.service,current_status:t.ticket_status}).then((function(n){a=n.data.map((function(n){var i={key:n.key,name:n.name};return"current_status"===t.key&&e.$set(i,"isOver",n.is_over),i}))})).catch((function(t){(0,s.errorHandler)(t,e)}));case 16:return n.abrupt("break",24);case 17:if(a=[],!t.choice.some((function(t){return t.can_delete}))){n.next=21;break}return a=t.choice,n.abrupt("break",24);case 21:return n.next=23,e.$store.dispatch("apiRemote/getRpcData",t).then((function(t){a=t.data})).catch((function(t){(0,s.errorHandler)(t,e)}));case 23:return n.abrupt("break",24);case 24:return n.abrupt("return",a);case 25:case"end":return n.stop()}}),n,e)})))()},judgeValue:function(t,e){if(t)return e.some((function(e){return-1!==t.toString().indexOf(e.key)}))},conditionField:function(t,e){for(var n=0;n<e.length;n++)if(!e[n].show_type&&(e[n].hasOwnProperty("show_conditions")||e[n].hasOwnProperty("show_result")&&!e[n].show_result)){if(e[n].show_conditions.expressions&&e[n].show_conditions.expressions.length)for(var i=0;i<e[n].show_conditions.expressions.length;i++)if(t.key===e[n].show_conditions.expressions[i].key&&t.key===e[n].key&&null===e[n].value)e[n].showFeild=!0;else if(t.key===e[n].show_conditions.expressions[i].key){if(1===e[n].show_conditions.expressions.length)e[n].showFeild=this.conditionSwitch(t,e[n].show_conditions.expressions[i]);else if("and"===e[n].show_conditions.type){for(var a=[],s=0;s<e[n].show_conditions.expressions.length;s++)for(var o=0;o<e.length;o++)if(e[n].show_conditions.expressions[s].key===e[o].key){var r=this.conditionSwitch(e[o],e[n].show_conditions.expressions[s]);a.push(r)}e[n].showFeild=a.every((function(t){return!!t}))}else{for(var c=[],l=0;l<e[n].show_conditions.expressions.length;l++)for(var u=0;u<e.length;u++)if(e[n].show_conditions.expressions[l].key===e[u].key){var d=this.conditionSwitch(e[u],e[n].show_conditions.expressions[l]);c.push(d)}e[n].showFeild=c.some((function(t){return!!t}))}e[n].showFeild=!e[n].showFeild}}else e[n].showFeild=!0},conditionSwitch:function(t,e){var n=!1,i=["CHECKBOX","MEMBERS","MULTISELECT","TREESELECT"];switch(e.condition){case"==":if(i.some((function(e){return e===t.type})))n=e.value.split(",").map((function(e){return-1===t.val.indexOf(e)})).every((function(t){return!t}))&&t.val.length===e.value.length;else n=t.val===e.value||Number(t.val)===Number(e.value);break;case"!=":if(i.some((function(e){return e===t.type}))){var a=e.value.split(",").map((function(e){return-1===t.val.indexOf(e)}));n=a.some((function(t){return!!t}))?a.some((function(t){return!!t})):t.val.length!==e.value.length}else n=t.val!==e.value&&Number(t.val)!==Number(e.value);break;case">":n="DATE"===t.type||"DATETIME"===t.type?this.timeStamp(t.val)>this.timeStamp(e.value):Number(t.val)>Number(e.value);break;case"<":n="DATE"===t.type||"DATETIME"===t.type?this.timeStamp(t.val)<this.timeStamp(e.value):Number(t.val)<Number(e.value);break;case">=":n="DATE"===t.type||"DATETIME"===t.type?this.timeStamp(t.val)>=this.timeStamp(e.value):Number(t.val)>=Number(e.value);break;case"<=":n="DATE"===t.type||"DATETIME"===t.type?this.timeStamp(t.val)<=this.timeStamp(e.value):Number(t.val)<=Number(e.value);break;case"issuperset":n=e.value.split(",").map((function(e){return-1===t.val.indexOf(e)})).every((function(t){return!t}));break;case"notissuperset":n=!e.value.split(",").map((function(e){return-1===t.val.indexOf(e)})).every((function(t){return!t}));break;default:n=!0}return n},timeStamp:function(t){var e=t.replace(/-/g,"/");return new Date(e).getTime()}}}},eiMn:function(t,e,n){"use strict";n("KUmV")},eqfU:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},[e("bk-select",{class:{"bk-form-two":t.firstShow},attrs:{searchable:"","font-size":"medium",disabled:t.item.is_readonly&&!t.isCurrent||t.disabled,placeholder:t.item.choice[0]?t.item.choice[0].desc:t.firstPlace},on:{selected:t.itemSelect},model:{value:t.firstInfo,callback:function(e){t.firstInfo=e},expression:"firstInfo"}},t._l(t.item.choice,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1),t._v(" "),t.firstShow?[e("bk-select",{class:{"bk-form-two-other":t.firstShow},attrs:{searchable:"",disabled:t.item.is_readonly&&!t.isCurrent||t.disabled,"font-size":"medium",placeholder:t.firstList[0]?t.firstList[0].desc:t.secondPlace},on:{selected:t.changeFrist},model:{value:t.secondInfo,callback:function(e){t.secondInfo=e},expression:"secondInfo"}},t._l(t.firstList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)]:t._e()],2),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2):t._e()},a=[];i._withStripped=!0},evDI:function(t,e,n){"use strict";n.r(e);var i=n("KwT5"),a=n("+Fmt");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("xCrZ");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"7ae02abe",null);e.default=r.exports},ew6e:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=m(n("QbLZ")),a=m(n("14Xm")),s=m(n("P2sY")),o=m(n("gDS+")),r=m(n("D3Ub")),c=m(n("PaSM")),l=m(n("uz2X")),u=m(n("8zq1")),d=n("CeR/"),f=n("ygAv");function m(t){return t&&t.__esModule?t:{default:t}}e.default={name:"addTrigger",components:{triggerCondition:l.default,responseCondition:u.default},mixins:[c.default],props:{projectId:String,triggerInfo:{type:Object,default:function(){return{}}},originInfoToTrigger:{type:Object,default:function(){return{}}}},data:function(){return{contentLoading:!1,formData:{name:"",is_enabled:!0,desc:"",signal:"",moduleTypeDisabled:!1,variableLoading:!1},triggerEventList:[],iconList:[{key:"icon-icon-notice-new",name:"",typeName:"message"},{key:"icon-icon-user-new",name:"",typeName:"user"},{key:"icon-icon-status-new",name:"",typeName:"status"},{key:"icon-icon-api-new",name:"",typeName:"api"}],iconInfo:{status:!1,key:"icon-icon-notice-new",name:"",typeName:""},responseWayList:[],rulesList:[],ruleItem:{name:"",historyName:"",nameChange:!1,triggerStatus:!1,showContent:!0,triggerRules:{type:"all",list:[{type:"all",itemList:[{key:"",condition:"",value:"",conditionList:[],type:"STRING"}]}]},responseList:[{way:"",wayInfo:{},performData:{runMode:"BACKEND",displayName:"",repeat:"one"},isLoading:!1}]},backInfo:{responseList:[],triggerInfo:{}},btnLoading:!1,triggerAllRules:[],rules:{},moduleTypes:[],initFormData:{}}},computed:{globalChoise:function(){return this.$store.state.common.configurInfo}},mounted:function(){this.initData(),this.rules.name=this.checkCommonRules("name").name,this.rules.signal=this.checkCommonRules("select").select},methods:{initData:function(){var t=this;return(0,r.default)(a.default.mark((function e(){var n,i,r,c,l,u,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in n=JSON.parse((0,o.default)(t.ruleItem)),t.rulesList.push(n),t.iconList.forEach((function(e){switch(e.key){case"icon-icon-notice-new":e.name=t.globalChoise.trigger_icon.find((function(t){return"message"===t.typeName})).name;break;case"icon-icon-user-new":e.name=t.globalChoise.trigger_icon.find((function(t){return"user"===t.typeName})).name;break;case"icon-icon-status-new":e.name=t.globalChoise.trigger_icon.find((function(t){return"status"===t.typeName})).name;break;case"icon-icon-api-new":e.name=t.globalChoise.trigger_icon.find((function(t){return"api"===t.typeName})).name}})),t.iconInfo.key=t.iconList[0].key,t.iconInfo.name=t.iconList[0].name,t.iconInfo.typeName=t.iconList[0].typeName,t.triggerEventList=[],t.globalChoise.trigger_signals){for(c in r={key:i,name:t.globalChoise.trigger_categories[i],children:[]},t.globalChoise.trigger_signals[i])r.children.push({key:c,name:t.globalChoise.trigger_signals[i][c]});t.triggerEventList.push(r)}if(!t.originInfoToTrigger.id){e.next=21;break}return l=t.originInfoToTrigger.sender,u=t.originInfoToTrigger.type,d={workflow:t.originInfoToTrigger.id},"task_schemas"===u&&(d.stage=t.originInfoToTrigger.stage,delete d.workflow),"states"===u&&(d.state=t.originInfoToTrigger.sender),e.next=16,t.$store.dispatch("trigger/getTriggerVariables",{id:l,type:u,params:d}).then((function(e){t.$store.commit("trigger/changeTriggerVariables",e.data)}));case 16:t.triggerEventList=t.triggerEventList.filter((function(e){return e.key===t.originInfoToTrigger.filter})),t.triggerEventList[0].children=t.triggerEventList[0].children.filter((function(e){return-1!==t.originInfoToTrigger.signal.indexOf(e.key)})),1===t.triggerEventList.length&&1===t.triggerEventList[0].children.length&&(t.formData.signal=t.triggerEventList[0].children[0].key),e.next=22;break;case 21:t.$store.commit("trigger/changeTriggerVariables",t.globalChoise.ticket_variables);case 22:return t.getModuleTypes(),e.next=25,t.getResponseList();case 25:t.triggerInfo.id?(t.contentLoading=!0,t.getData()):t.initFormData=(0,f.deepClone)((0,s.default)({},{formData:t.formData}));case 26:case"end":return e.stop()}}),e,t)})))()},getModuleTypes:function(){var t=this;this.$store.dispatch("basicModule/get_tables",{all:!0}).then((function(e){t.moduleTypes=e.data})).catch((function(e){(0,d.errorHandler)(e,t)}))},getData:function(){var t=this;return(0,r.default)(a.default.mark((function e(){var n,i,r,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.iconList.find((function(e){return e.typeName===t.triggerInfo.icon})),t.iconInfo.key=n.key,t.iconInfo.name=n.name,t.iconInfo.typeName=n.typeName,t.formData.name=t.triggerInfo.name,t.formData.is_enabled=t.triggerInfo.is_enabled,t.formData.desc=t.triggerInfo.desc,t.formData.signal=t.triggerInfo.signal,t.triggerInfo.source_table_id&&(t.formData.moduleTypeDisabled=!0,t.giveTableVariables(t.triggerInfo.source_table_id)),e.next=11,t.getTriggerRules();case 11:i=t.triggerAllRules.filter((function(e){return e.trigger_id===t.triggerInfo.id})),t.rulesList=[],r=0;case 14:if(!(r<i.length)){e.next=24;break}return(c=JSON.parse((0,o.default)(t.ruleItem))).triggerStatus=i[r].by_condition||!!i[r].condition,c.triggerStatus&&(c.triggerRules=t.conditionValue(i[r].condition)),c.triggerRules.id=i[r].id,e.next=21,t.responseValue(i[r].action_schemas,c);case 21:r++,e.next=14;break;case 24:t.contentLoading=!1,t.initFormData=(0,f.deepClone)((0,s.default)({},{formData:t.formData},{ruleItem:t.ruleItem},{rulesList:t.rulesList}));case 26:case"end":return e.stop()}}),e,t)})))()},conditionValue:function(t){var e=this,n={type:"",list:[]};for(var i in t)n.type=i,t[i].forEach((function(t){var i={};for(var a in t)i.type=a,i.itemList=[],t[a].forEach((function(t){var n={key:t.key,condition:t.operator,meta:t.meta,value:["CHECKBOX","MULTISELECT","MEMBERS","MULTI_MEMBERS","MEMBER"].some((function(e){return e===t.field_type}))?t.value.split(","):t.value,conditionList:[],type:t.field_type};n.conditionList=e.globalChoise.trigger_methods[t.field_type.toLowerCase()],i.itemList.push(n)}));n.list.push(i)}));return n},responseValue:function(t,e){var n=this;return(0,r.default)(a.default.mark((function i(){var s;return a.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s={id__in:t.join(",")},i.next=3,n.$store.dispatch("trigger/getResponseListById",s).then((function(t){var i,s=t.data;e.responseList=[],e.name=s[0].name,s.forEach((i=(0,r.default)(a.default.mark((function t(i){var s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(s={id:i.id,way:"",wayInfo:{},performData:{runMode:"BACKEND",displayName:"",repeat:"one"},isLoading:!1}).way=i.component_type,s.wayInfo=JSON.parse((0,o.default)(n.responseWayList.find((function(t){return t.key===i.component_type})))),"api"===s.way?s.wayInfo.field_schema.forEach((function(t){i.params.forEach((function(e){t.key===e.key&&n.$set(t,"value",e.value)}))})):s.wayInfo.field_schema.forEach((function(t){"SUBCOMPONENT"===t.type?i.params.forEach((function(e){e.key===t.key&&t.sub_components.forEach((function(t){e.sub_components.forEach((function(e){e.key===t.key&&(t.checked=!0,t.field_schema.forEach((function(t){e.params.forEach((function(e){t.key===e.key&&(t.referenceType=e.ref_type,t.value=e.value)}))})))}))}))})):i.params.forEach((function(e){t.key===e.key&&(n.$set(t,"value",e.value),n.$set(t,"ref_type",e.ref_type))}))})),s.performData.runMode=i.operate_type,s.performData.displayName=i.display_name,s.performData.repeat=i.can_repeat?"more":"one",e.responseList.push(s);case 8:case"end":return t.stop()}}),t,n)}))),function(t){return i.apply(this,arguments)})),n.rulesList.push(e)})).catch((function(t){(0,d.errorHandler)(t,n)}));case 3:case"end":return i.stop()}}),i,n)})))()},getResponseFields:function(t){var e=this;return(0,r.default)(a.default.mark((function n(){var s;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={source_uri:t.source_uri,trigger_source_id:e.originInfoToTrigger.id,trigger_source_type:"workflow"},n.next=3,e.$store.dispatch("apiRemote/getRpcData",s).then((function(e){t.choice=e.data.map((function(t){return(0,i.default)({},t,{showFeild:!0,value:""})}))})).catch((function(t){(0,d.errorHandler)(t,e)}));case 3:case"end":return n.stop()}}),n,e)})))()},handleClick:function(){this.iconInfo.status=!0},handleClickOutSide:function(){this.iconInfo.status=!1},changeIcon:function(t){this.iconInfo.key=t.key,this.iconInfo.name=t.name,this.iconInfo.typeName=t.typeName,this.iconInfo.status=!1},addRule:function(){var t=JSON.parse((0,o.default)(this.ruleItem));this.rulesList.push(t),this.$emit("change")},deleteRule:function(t){1!==this.rulesList.length&&(this.rulesList.splice(t,1),this.$emit("change"))},changeName:function(t){t.historyName=t.name,t.nameChange=!0,this.$emit("change")},handleClickName:function(t,e){t.nameChange=!1,"close"===e&&(t.name=t.historyName)},showContent:function(t){t.showContent=!t.showContent},submitTrigger:function(t){var e=this;this.$refs.triggerBasic.validate().then((function(){e.$refs.triggerMade.validate().then((function(){if(!e.checkInfo()){var n={name:e.formData.name,source_type:"basic",source_id:0,signal:e.formData.signal,sender:0,is_draft:t,is_enabled:e.formData.is_enabled,icon:e.iconInfo.typeName,desc:e.formData.desc,project_key:e.$store.state.project.id};e.originInfoToTrigger.id&&(n.source_type=e.originInfoToTrigger.source,n.sender=e.originInfoToTrigger.id,n.source_id=e.originInfoToTrigger.id,n.sender=e.originInfoToTrigger.sender),e.projectId&&(n.project_key=e.projectId),e.triggerInfo.id?e.putTrigger(n):e.creatTrigger(n)}}))}))},checkInfo:function(){var t=this,e=!1;return this.rulesList.forEach((function(n){n.triggerStatus&&n.triggerRules.list.forEach((function(t){t.itemList.forEach((function(t){"non_empty"===t.condition?n.triggerRules.checkStatus=""===t.key:n.triggerRules.checkStatus=""===t.key||""===t.condition||""===t.value}))})),n.responseList.forEach((function(e){t.$set(e,"wayStatus",!e.way),e.wayInfo.field_schema&&("api"===e.wayInfo.key?e.wayInfo.field_schema.forEach((function(t){"api_source"===t.key?e.contentStatus=e.contentStatus?e.contentStatus:!t.apiId:t.apiContent.bodyTableData.forEach((function(t){"array"!==t.type&&"object"!==t.type&&t.is_necessary&&(e.contentStatus=e.contentStatus?e.contentStatus:"CUSTOM"===t.source_type?""===t.value:""===t.value_key)}))})):e.wayInfo.field_schema.forEach((function(t){if("SUBCOMPONENT"===t.type&&t.sub_components&&t.sub_components.length)e.contentStatus=!t.sub_components.some((function(t){return t.checked})),e.contentStatus||t.sub_components.forEach((function(t){t.checked&&t.field_schema.forEach((function(t){t.required&&("MEMBERS"===t.type||"MULTI_MEMBERS"===t.type?e.contentStatus=e.contentStatus?e.contentStatus:t.value.some((function(t){return Array.isArray(t.value)?!t.value.length:!t.value})):e.contentStatus=e.contentStatus?e.contentStatus:!t.value)}))}));else if(t.required){var n=["STARTER_LEADER","ASSIGN_LEADER"];"MEMBERS"===t.type||"MULTI_MEMBERS"===t.type?e.contentStatus=e.contentStatus?e.contentStatus:t.value.some((function(t){return Array.isArray(t.value)?n.includes(t.key)?t.value.length:!t.value.length:!t.value})):e.contentStatus=e.contentStatus?e.contentStatus:"field_value"===t.key?!(t.itemInfo[0].value||t.itemInfo[0].val):!t.value}})),"MANUAL"!==e.performData.runMode||e.contentStatus||(e.contentStatus=!e.performData.displayName))})),e=n.triggerRules.checkStatus||n.responseList.some((function(t){return t.contentStatus||t.wayStatus}))})),e},closeTrigger:function(){this.$emit("closeTrigger")},creatTrigger:function(t){var e=this;this.btnLoading=!0,this.$store.dispatch("trigger/createTriggerRule",t).then((function(t){e.backInfo.triggerInfo=t.data;var n=e.responseParams();e.createRespond(n)})).catch((function(t){(0,d.errorHandler)(t,e),e.btnLoading=!1})).finally((function(){}))},putTrigger:function(t){var e=this;this.btnLoading=!0;var n=this.triggerInfo.id;this.$store.dispatch("trigger/putTriggerRule",{params:t,id:n}).then((function(t){e.backInfo.triggerInfo=t.data;var n=e.responseParams();e.createRespond(n)})).catch((function(t){(0,d.errorHandler)(t,e),e.btnLoading=!1})).finally((function(){}))},createRespond:function(t){var e=this,n=t,i=this.originInfoToTrigger.id;this.$store.dispatch("trigger/createRespond",{id:i,params:n}).then((function(t){e.backInfo.responseList=t.data,e.createTriggerCondition()})).catch((function(t){(0,d.errorHandler)(t,e),e.btnLoading=!1})).finally((function(){}))},responseParams:function(){var t=this,e=[];return this.rulesList.forEach((function(n){n.responseList.forEach((function(i){var a={};i.id&&(a.id=i.id),a.name=n.name,a.display_name=i.performData.displayName,a.operate_type=i.performData.runMode,a.can_repeat="more"===i.performData.repeat,a.component_type=i.wayInfo.key,a.params=[],"api"===i.wayInfo.key?a.params=t.responseApiInfo(i):i.wayInfo.field_schema.forEach((function(e){if("SUBCOMPONENT"===e.type){var n={key:e.key,sub_components:[]};e.sub_components.forEach((function(e){if(e.checked){var i={key:e.key,params:[]};e.field_schema.forEach((function(e){var n={key:e.key,value:t.formattingValue(e),ref_type:e.referenceType};i.params.push(n)})),n.sub_components.push(i)}})),a.params.push(n)}else{var i={key:e.key,value:t.formattingValue(e),ref_type:e.referenceType};a.params.push(i)}})),e.push(a)}))})),e},responseApiInfo:function(t){var e=this,n=[];return t.wayInfo.field_schema.forEach((function(t){if("api_source"===t.key)n.push({key:t.key,value:t.apiId});else{var i={key:t.key,value:{}};i.value=e.treeToJson(t.apiContent.bodyTableData.filter((function(t){return!t.level}))),n.push(i)}})),n},treeToJson:function(t){var e={},n=function t(e,n,i,a){if(n.key)if("array"===n.type){if("array"===a)for(var o in e.push([]),n.children)t(e[e.length-1],n.children[o],1,"array");if("object"===a){var r={};for(var c in r[n.key]=[],(0,s.default)(e,r),n.children)t(e[n.key],n.children[c],1,"array")}}else if("object"===n.type){var l={};if("array"===a)for(var u in e.push(l),n.children)t(e[e.length-1],n.children[u],1,"object");if("object"===a)for(var d in l[n.key]={},(0,s.default)(e,l),n.children)t(e[n.key],n.children[d],1,"object")}else{if("number"===n.type&&(n.value=Number(n.value)),"array"===a){var f={is_leaf:"object"!==n.type&&"array"!==n.type,ref_type:"CUSTOM"===n.source_type?"custom":"reference",value:"CUSTOM"===n.source_type?n.value:n.value_key};e.push(f)}if("object"===a){var m={};m[n.key]={is_leaf:"object"!==n.type&&"array"!==n.type,ref_type:"CUSTOM"===n.source_type?"custom":"reference",value:"CUSTOM"===n.source_type?n.value:n.value_key},(0,s.default)(e,m)}}};for(var i in t)n(e,t[i],0,"object");return e},formattingValue:function(t){var e="";return"receivers"===t.key||"MEMBERS"===t.type||"MEMBER"===t.type?(e=[],t.value.forEach((function(t){var n={ref_type:"VARIABLE"===t.key?"reference":"custom",value:{member_type:t.key,members:Array.isArray(t.value)?t.value.join(","):t.value}};e.push(n)}))):e="VARIABLE"===t.value?Array.isArray(t.insertValue)?t.insertValue.join(","):t.insertValue:t.itemInfo&&t.itemInfo[0].id?t.itemInfo[0].value||t.itemInfo[0].val:t.value,e},createTriggerCondition:function(){var t=this,e=this.conditionParams(),n=this.backInfo.triggerInfo.id;this.$store.dispatch("trigger/batchTriggerCondition",{params:e,id:n}).then((function(){t.$bkMessage({message:t.triggerInfo.id?t.$t("m.common['保存成功']"):t.$t("m.trigger['创建成功']"),theme:"success"}),t.closeTrigger(),t.$emit("getList")})).catch((function(e){(0,d.errorHandler)(e,t)})).finally((function(){t.btnLoading=!1}))},conditionParams:function(){var t=this,e=[],n=0;return this.rulesList.forEach((function(i){var a={condition:{},name:i.name,by_condition:i.triggerStatus,action_schemas:[]};i.triggerRules.id&&(a.id=i.triggerRules.id),i.triggerStatus?(a.condition[i.triggerRules.type]=[],i.triggerRules.list.forEach((function(t){var e={};e[t.type]=[],t.itemList.forEach((function(n){var i={key:n.key,value:Array.isArray(n.value)?n.value.join(","):n.value,field_type:n.type,operator:n.condition,type:"custom"};e[t.type].push(i)})),a.condition[i.triggerRules.type].push(e)}))):a.condition="",i.responseList.forEach((function(e,i){a.action_schemas.push(t.backInfo.responseList[n+i])})),n+=i.responseList.length,e.push(a)})),e},getTriggerRules:function(){var t=this;return(0,r.default)(a.default.mark((function e(){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={trigger_id:t.triggerInfo.id},e.next=3,t.$store.dispatch("trigger/getTriggerRules",n).then((function(e){t.triggerAllRules=e.data})).catch((function(e){(0,d.errorHandler)(e,t)})).finally((function(){}));case 3:case"end":return e.stop()}}),e,t)})))()},getResponseList:function(){var t=this;return(0,r.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("trigger/getResponseList").then(function(){var e=(0,r.default)(a.default.mark((function e(n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.responseWayList=n.data,t.originInfoToTrigger.id&&"task"!==t.originInfoToTrigger.source?t.responseWayList.forEach((function(e){var n;e.field_schema.forEach((n=(0,r.default)(a.default.mark((function e(n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("RPC"!==n.source_type){e.next=3;break}return e.next=3,t.getResponseFields(n);case 3:case"end":return e.stop()}}),e,t)}))),function(t){return n.apply(this,arguments)}))})):t.responseWayList=t.responseWayList.filter((function(t){return"modify_field"!==t.key&&"modify_specified_state_processor"!==t.key}));case 2:case"end":return e.stop()}}),e,t)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){(0,d.errorHandler)(e,t)}));case 2:case"end":return e.stop()}}),e,t)})))()},giveTableVariables:function(t){var e=this;this.formData.variableLoading=!0,this.$store.dispatch("basicModule/get_trigger_tables",t).then((function(t){var n=t.data.fields;n.forEach((function(t){t.name+=e.$t("m.trigger['（基础模型）']")})),e.$store.commit("trigger/changeTriggerVariables",e.globalChoise.ticket_variables.concat(n))})).catch((function(t){(0,d.errorHandler)(t,e)})).finally((function(){e.formData.variableLoading=!1}))}}}},"f/ki":function(t,e,n){"use strict";n("aNt4")},f0yb:function(t,e,n){"use strict";n.r(e);var i=n("ZmkU"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},f3l7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=u(n("QbLZ")),a=u(n("14Xm")),s=u(n("D3Ub")),o=u(n("Y+p1")),r=u(n("+DO/")),c=n("CeR/"),l=u(n("hztf"));function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"InheritTicketTab",components:{InheritTicketAddDialog:r.default,Empty:l.default},inject:["reloadTicket"],props:{ticketInfo:{type:Object,default:function(){return{}}}},data:function(){return{isShowAddInheritTicket:!1,secondClick:!1,masterOrSlave:"",inheritStateList:[],tableLoading:!1,childTableLoading:!1,historyTableLoading:!1,historyInfo:{isShow:!1,width:700,headerPosition:"left",autoClose:!1,precision:0,title:this.$t('m.newCommon["绑定历史"]')},inheritStateInfo:{options:[{key:"chooseMother",name:this.$t('m.newCommon["母单"]')},{key:"chooseChild",name:this.$t('m.newCommon["子单"]')}],inheritType:"chooseMother",otherTitle:this.$t('m.newCommon["新建母子单"]')},historyList:[],unBindInfo:{type:"throwMother",title:"",content:""},unBindItem:"",checkList:[],listError:!1}},mounted:function(){var t=this;return(0,s.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.getInheritStateList(),e.next=3,t.getHistoryList();case 3:case"end":return e.stop()}}),e,t)})))()},methods:{closeSideslider:function(){var t=this;!(0,o.default)(this.$refs.addInheritTicket.templateInfo,this.$refs.addInheritTicket.initFormData.templateInfo)||!(0,o.default)(this.$refs.addInheritTicket.checkList,this.$refs.addInheritTicket.initFormData.checkList)?this.$bkInfo({title:this.$t('m["确定离开当前页？"]'),subTitle:this.$t('m["离开将会导致未保存信息丢失"]'),okText:this.$t('m["离开"]'),confirmLoading:!0,confirmFn:function(){t.isShowAddInheritTicket=!1},cancelFn:function(){t.isShowAddInheritTicket=!0}}):this.isShowAddInheritTicket=!1},showHistory:function(){this.historyList.length&&(this.historyInfo.isShow=!0)},giveUnbindInfo:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("batch"===t)this.unBindItem=this.inheritStateList.map((function(t){return t.id})),this.unBindInfo.type="throwChild",this.unBindInfo.title=this.$t('m.newCommon["确认解绑子单？"]'),this.unBindInfo.content=this.$t('m.newCommon["解绑后，子单将不会同步母单状态及处理信息，单据的后续处理各自独立，不在影响"]');else{if("RUNNING"===n.related_status)return;this.unBindItem=n,this.unBindInfo.type="throwMother",this.unBindInfo.title=this.$t('m.newCommon["确认解绑母单？"]'),this.unBindInfo.content=this.$t('m.newCommon["解绑后，母单将不会同步子单状态及处理信息，单据的后续处理各自独立，不在影响"]')}this.$bkInfo({type:"warning",title:this.unBindInfo.title,subTitle:this.unBindInfo.content,confirmFn:function(){e.unbindFun()}})},getInheritStateList:function(){var t=this,e={id:this.ticketInfo.id};this.$route.query.token&&(e.token=this.$route.query.token),this.tableLoading=!0,this.listError=!1,this.$store.dispatch("change/getInheritState",e).then((function(e){t.masterOrSlave=e.data.related_type,t.inheritStateList=e.data.master_slave_tickets.map((function(e){var n="";switch(e.related_status){case"BIND_SUCCESS":n=t.$t('m.newCommon["已绑定"]');break;case"BIND_FAILED":n=t.$t('m.newCommon["绑定失败"]');break;case"UNBIND_SUCCESS":n=t.$t('m.newCommon["解绑成功"]');break;case"RUNNING":n=t.$t('m.newCommon["解绑中"]');break;case"UNBIND_FAILED":n=t.$t('m.newCommon["解绑失败"]')}return(0,i.default)({},e,{status:n})}))})).catch((function(e){t.listError=!0,(0,c.errorHandler)(e,t)})).finally((function(){t.tableLoading=!1}))},handleSelectAll:function(t){this.checkList=t},handleSelect:function(t){this.checkList=t},disabledFn:function(){return"slave"!==this.masterOrSlave},openAddInheritSlider:function(){this.ticketInfo.is_over||(this.isShowAddInheritTicket=!0)},checkOne:function(t){var e=t.id,n=this.$router.resolve({name:"commonInfo",params:{id:e},query:{id:""+e}}).href;window.open(n,"_blank")},unbindFun:function(){var t=this,e={};"throwMother"===this.unBindInfo.type?(e.master_ticket_id=this.unBindItem.id,e.slave_ticket_ids=[this.ticketInfo.id]):(e.master_ticket_id=this.ticketInfo.id,e.slave_ticket_ids=this.checkList.map((function(t){return t.id}))),this.secondClick||(this.secondClick=!0,this.$store.dispatch("change/unBindInherit",e).then((function(){t.$bkMessage({message:t.$t('m.newCommon["解绑成功"]'),theme:"success"})})).catch((function(e){(0,c.errorHandler)(e,t)})).finally((function(){t.checkList=[],t.secondClick=!1,t.getInheritStateList(),t.getHistoryList()})))},getHistoryList:function(){var t=this;return(0,s.default)(a.default.mark((function e(){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:t.ticketInfo.id,type:"MASTER_SLAVE"},e.next=3,t.$store.dispatch("change/getBindHistory",n).then((function(e){t.historyList=e.data})).catch((function(e){(0,c.errorHandler)(e,t)}));case 3:case"end":return e.stop()}}),e,t)})))()},closeHistory:function(){this.historyInfo.isShow=!1}}}},f3v2:function(t,e,n){"use strict";n.r(e);var i=n("NesJ"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},f5Dy:function(t,e,n){"use strict";n.r(e);var i=n("WzOL"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"f5y/":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"render-view",staticStyle:{"margin-left":"10px"}},t._l(t.formData,(function(n,i){return e("div",{key:i+new Date,staticClass:"view-item-wrap"},[e("ViewItem",{attrs:{"top-index":i,"is-top":!0,scheme:t.getScheme(n),form:n}})],1)})),0)},a=[];i._withStripped=!0},f7Ks:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},[e("bk-input",{class:{"bk-border-error":t.item.checkValue},attrs:{maxlength:120,disabled:t.item.is_readonly&&!t.isCurrent||t.disabled,placeholder:t.item.desc},on:{focus:function(e){t.item.checkValue=!1}},model:{value:t.item.val,callback:function(e){t.$set(t.item,"val",e)},expression:"item.val"}}),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},f9M4:function(t,e,n){},fBJX:function(t,e,n){"use strict";n.r(e);var i=n("jlIa"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},fDgU:function(t,e,n){"use strict";n.r(e);var i=n("Souk"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},fKJ4:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this._self._c;return t("div",{staticClass:"exception-box"},[this.message===this.$t("m.wiki['您没有权限访问']")?t("img",{staticClass:"exception-img",attrs:{src:n("5Reh"),alt:""}}):t("img",{staticClass:"exception-img",attrs:{src:n("onwc"),alt:""}}),this._v(" "),t("p",{staticClass:"exception-p"},[this._v(this._s(this.message))])])},a=[];i._withStripped=!0},fOTe:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Sideslider",components:{RenderView:function(){return Promise.resolve().then(n.bind(null,"FCVG"))}},props:{title:{type:String,default:""},formData:{type:Array,default:function(){return[]}},context:{type:Object,default:function(){return{schemes:{}}}},width:{type:[String,Number],default:800}},data:function(){return{isShow:!0}}}},"fd+i":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=u(n("14Xm")),a=u(n("gDS+")),s=u(n("GQeE")),o=u(n("D3Ub")),r=u(n("NGZu")),c=u(n("c6Q5")),l=u(n("zP2a"));function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"autoNodeInfo",components:{getParam:r.default,postParam:c.default,ace:l.default},props:{nodeInfo:{type:Object,default:function(){return{}}},apiInfo:{type:Object,default:function(){return{}}}},data:function(){return{bodyDetailConfig:{value:"",width:"100%",height:200,readOnly:!0,fullScreen:!0,lang:"json"},isShowAce:!1,isFull:!1}},computed:{apiName:function(){return(this.nodeInfo.api_info.remote_api_info.remote_system_name||"")+"/"+(this.nodeInfo.api_info.remote_api_info.name||"")}},mounted:function(){var t=this;return(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.nodeInfo;case 2:t.nodeInfo&&(0,s.default)(t.bodyDetailConfig.value).length&&(t.bodyDetailConfig.value=(0,a.default)(t.nodeInfo.api_info.response,null,4));case 3:case"end":return e.stop()}}),e,t)})))()},methods:{editorInitAfter:function(){},blur:function(t){this.bodyDetailConfig.value=t}}}},fkix:function(t,e,n){"use strict";n.r(e);var i=n("NXOa"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},fpRC:function(t,e,n){"use strict";n.r(e);var i=n("xbld"),a=n("U2ju");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("EkYo");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"e5f7e27c",null);e.default=r.exports},fxQi:function(t,e,n){},g2DR:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},[e("bk-table",{attrs:{data:t.item.val,size:"small"}},[t._l(t.item.choice,(function(n){return[e("bk-table-column",{key:n.key,attrs:{label:n.name},scopedSlots:t._u([{key:"default",fn:function(i){return[e("bk-input",{attrs:{clearable:!0,disabled:t.disabled},model:{value:i.row[n.key],callback:function(e){t.$set(i.row,n.key,e)},expression:"props.row[title.key]"}})]}}],null,!0)})]})),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.user['操作']"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("bk-button",{attrs:{theme:"primary",disabled:t.disabled,text:""},on:{click:t.addOne}},[t._v("\n            "+t._s(t.$t('m.newCommon["添加"]'))+"\n          ")]),t._v(" "),e("bk-button",{attrs:{theme:"primary",disabled:t.disabled,text:""},on:{click:function(e){return t.deleteOne(n)}}},[t._v("\n            "+t._s(t.$t('m.newCommon["删除"]'))+"\n          ")])]}}],null,!1,1830905243)})],2),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},g5Ts:function(t,e,n){"use strict";n.r(e);var i=n("hSKY"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},gEzK:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},[e("div",{directives:[{name:"bk-clickoutside",rawName:"v-bk-clickoutside",value:t.closeTree,expression:"closeTree"}],staticClass:"bk-search-tree bk-form-width",class:{"bk-border-error":t.item.checkValue}},[e("div",{staticClass:"bk-search-tree-wrapper",class:{bkdisabled:t.disabled},on:{click:function(e){return e.stopPropagation(),t.showTree.apply(null,arguments)}}},[e("span",{class:{"bk-color-tree":t.treeSlectInfo.info.name}},[t._v("\n          "+t._s(t.treeSlectInfo.info.showName||t.$t('m.newCommon["请选择"]'))+"\n        ")]),t._v(" "),e("i",{staticClass:"bk-select-angle bk-icon icon-framework"})]),t._v(" "),e("transition",{attrs:{name:"common-fade"}},[t.treeSlectInfo.show?[t.treeSlectInfo.treeDataList.length?e("div",{staticClass:"bk-search-tree-content"},[e("export-tree",{attrs:{"tree-data-list":t.treeSlectInfo.treeDataList},on:{toggle:t.toggleInfo,toggleChildren:t.toggleChildren}})],1):e("div",{staticClass:"bk-search-tree-content"},[e("p",{staticClass:"bk-search-tree-nodata"},[t._v(t._s(t.$t('m.treeinfo["暂无数据"]')))])])]:t._e()],2)],1)]),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2):t._e()},a=[];i._withStripped=!0},gHwO:function(t,e,n){},gMgb:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tag-table"},[t.hiddenLabel?t._e():e("label",{staticClass:"table-label"},[t._v(t._s(t.label))]),t._v(" "),e("bk-table",{ref:"tagTable",attrs:{data:t.form.value,border:!0}},t._l(t.column,(function(n){return e("bk-table-column",{key:n.key,attrs:{label:n.name,prop:n.key},scopedSlots:t._u([{key:"default",fn:function(i){return[e("ViewItem",{attrs:{scheme:t.getScheme(n,i.row[n.key]),form:i.row[n.key]}})]}}],null,!0)})})),1)],1)},a=[];i._withStripped=!0},gXL2:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNXB4IiB2aWV3Qm94PSIwIDAgMTYgMTUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUxLjMgKDU3NTQ0KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5TdGFyPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IummlumhtSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IuW+heivhOS7t+mhtemdoi1jb3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTEwMC4wMDAwMDAsIC0yNTQuMDAwMDAwKSIgZmlsbD0iI0ZGQjIzQSI+CiAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJTdGFyIiBwb2ludHM9IjExMDggMjY2IDExMDMuMjk3NzIgMjY4LjQ3MjEzNiAxMTA0LjE5NTc3IDI2My4yMzYwNjggMTEwMC4zOTE1NSAyNTkuNTI3ODY0IDExMDUuNjQ4ODYgMjU4Ljc2MzkzMiAxMTA4IDI1NCAxMTEwLjM1MTE0IDI1OC43NjM5MzIgMTExNS42MDg0NSAyNTkuNTI3ODY0IDExMTEuODA0MjMgMjYzLjIzNjA2OCAxMTEyLjcwMjI4IDI2OC40NzIxMzYiPjwvcG9seWdvbj4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},gXmA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n("QbLZ")),a=c(n("EP+X")),s=c(n("FCVG")),o=n("ygAv"),r=n("nShD");function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"fieldsDone",components:{businessCard:a.default,RenderView:s.default},props:{basicInfomation:{type:Object,default:function(){return{}}},fields:{type:Array,required:!1,default:function(){return[]}},ticketId:{type:[Number,String],required:!1,default:function(){return""}},statedId:{type:[Number,String],required:!1,default:function(){return""}},commentId:{type:String,required:!1,default:function(){return""}},item:{type:Object,default:function(){return{}}},origin:{type:String,required:!1,default:function(){return"notLog"}},isShowName:{type:Boolean,default:function(){return!0}},basicInfoType:Array},data:function(){return{showMore:!1,showInfo:!0,downFileUrl:"",routerKey:+new Date,cursorStyle:{cursor:"pointer"},fileList:[],customForm:{formData:[],context:{}},iframeInfo:{show:!1,title:"",url:""}}},computed:{profile:function(){if(this.basicInfomation)return{name:this.basicInfomation.profile.name,phone:this.basicInfomation.profile.phone,department:this.basicInfomation.profile.departments?this.basicInfomation.profile.departments:[]}},fieldType:function(){return this.basicInfoType?this.basicInfoType.includes(this.item.type):[]}},created:function(){if("CUSTOM-FORM"===this.item.type){var t="string"==typeof this.item.value?JSON.parse(this.item.value):this.item.value,e=t.form_data,n=t.schemes,i=t.config;this.customForm={formData:e,context:{schemes:n,config:i}}}},mounted:function(){this.$set(this.item,"isEdit",!1),this.reloadCurPage(),"FILE"===this.item.type&&this.valToList(),"RICHTEXT"===this.item.type&&(this.item.value=(0,o.appendTargetAttrToHtml)(this.item.value).replace(/<p>/g,'<p class="rich-text">'))},methods:{openLickInIframe:function(t){var e=t.name,n=t.value;this.iframeInfo.title=e,this.iframeInfo.url=n,this.iframeInfo.show=!0},closeLinkIframe:function(){this.iframeInfo.title="",this.iframeInfo.url="",this.iframeInfo.show=!1},goToLink:function(t){0!==t.indexOf("http")&&(t="http://"+t),window.open(t,"_blank")},valToList:function(){var t=this.item.value,e=t?JSON.parse(t):{};for(var n in e)this.fileList.push((0,i.default)({},e[n],{key:n}))},reloadCurPage:function(){this.routerKey=+new Date},edit:function(){this.fields.forEach((function(t){t.isEdit=!1})),this.$set(this.item,"isEdit",!0)},downFile:function(t){this.downFileUrl=window.SITE_URL+"api/ticket/fields/"+this.item.id+"/download_file/?unique_key="+t.key+"&file_type=ticket",window.open(this.downFileUrl)},getParseValue:function(t){if(Array.isArray(t))return t;if("string"==typeof t){var e=[];try{e=JSON.parse(t.replace(/\'/g,'"'))}catch(e){console.error(t)}return e}return[]},getCustomTableDisplayValue:function(t,e){return(0,r.getCustomTableDisplayValue)(t,e)}}}},ga4Z:function(t,e,n){"use strict";n.r(e);var i=n("tXBt"),a=n("xJKo");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("D2Hv");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"ff882462",null);e.default=r.exports},gcTd:function(t,e,n){"use strict";n.r(e);var i=n("ADLb"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},ghfZ:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"devops-execut-info"},["RUNNING"===t.status?e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.taskStatusInfoLoading},expression:"{ isLoading: taskStatusInfoLoading }"}],staticClass:"running-info"},[e("i",{staticClass:"bk-itsm-icon icon-icon-loading"}),t._v(" "),e("p",{staticClass:"run-info"},[t._v(t._s(t.$t("m.tickets['任务正在执行中，请稍等']")))]),t._v(" "),e("p",{staticClass:"run-time"},[e("span",{staticClass:"time-block"},[t._v("\n        "+t._s(t.$t("m.tickets['已耗时：']"))+"\n        "+t._s(t.convertMStoString(1e3*t.taskStatusInfo.elapsed_time))+"\n      ")])])]):e("div",{staticClass:"execut-info"},[e("div",{staticClass:"base-info"},[e("h3",{staticClass:"setion-title"},[t._v(t._s(t.$t("m.task['任务信息']")))]),t._v(" "),e("ul",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.taskStatusInfoLoading},expression:"{ isLoading: taskStatusInfoLoading }"}],staticClass:"basic-list"},t._l(t.taskInfoList,(function(n,i){return e("li",{key:i,staticClass:"basic-item"},[e("span",{staticClass:"basic-name"},[t._v(t._s(n.name)+"：")]),t._v(" "),e("span",{staticClass:"basic-value"},["status"!==n.key?[t._v("\n              "+t._s(n.value)+"\n            ")]:[e("task-status",{attrs:{status:t.taskInfo[n.key],type:"text"}})]],2)])})),0)]),t._v(" "),e("div",{staticClass:"base-info mt30"},[e("h3",{staticClass:"setion-title"},[t._v(t._s(t.$t("m.tickets['执行情况']")))]),t._v(" "),e("ul",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.buildStatusLoading},expression:"{ isLoading: buildStatusLoading }"}],staticClass:"basic-list"},t._l(t.displayExecutInfoList,(function(n,i){return e("li",{key:i,staticClass:"basic-item"},[e("span",{staticClass:"basic-name"},[t._v(t._s(n.name)+"：")]),t._v(" "),e("span",{staticClass:"basic-value"},[t._v("\n            "+t._s(n.value)+"\n          ")])])})),0)]),t._v(" "),e("div",{staticClass:"base-info mt30"},[e("h3",{staticClass:"setion-title"},[t._v(t._s(t.$t("m.tickets['构件列表']")))]),t._v(" "),e("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.buildStatusLoading},expression:"{ isLoading: buildStatusLoading }"}],attrs:{data:t.buildList}},[e("bk-table-column",{attrs:{label:"构建名称",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticClass:"link-ui",on:{click:function(e){return e.stopPropagation(),t.openBuildDetail(n.row)}}},[t._v(t._s(n.row.name))])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:"路径",prop:"path"}}),t._v(" "),e("bk-table-column",{attrs:{label:"文件大小",prop:"size"}}),t._v(" "),e("bk-table-column",{attrs:{label:"仓库类型",prop:"artifactoryType"}})],1)],1),t._v(" "),e("div",{staticClass:"base-info mt30"},[e("h3",{staticClass:"setion-title"},[t._v(t._s(t.$t("m.tickets['输出变量']")))]),t._v(" "),e("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.buildStatusLoading},expression:"{ isLoading: buildStatusLoading }"}],attrs:{data:t.outputVariableList}},[e("bk-table-column",{attrs:{label:t.$t("m.tickets['变量']"),prop:"key",width:"180"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.tickets['值']"),prop:"value"}})],1)],1)]),t._v(" "),e("bk-sideslider",{attrs:{"is-show":t.isShowBuildDetailDialog,width:800,"quick-close":!0,title:t.openBuildInfo.name},on:{"update:isShow":function(e){t.isShowBuildDetailDialog=e},"update:is-show":function(e){t.isShowBuildDetailDialog=e}}},[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n      "+t._s(t.$t("m.tickets['构建详情']"))+" 【"+t._s(t.openBuildInfo.name)+"】\n    ")]),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[t.isShowBuildDetailDialog?e("build-detail-info",{attrs:{"build-item":t.openBuildInfo}}):t._e()],1)])],1)},a=[];i._withStripped=!0},"gr+U":function(t,e,n){"use strict";n.r(e);var i=n("vXIu"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},gw7P:function(t,e,n){"use strict";n.r(e);var i=n("KuoK"),a=n("z3Co");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("zXkT");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"02b570c9",null);e.default=r.exports},gy7N:function(t,e,n){"use strict";n.r(e);var i=n("eqfU"),a=n("t9cD");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("tPsg");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"588a75c2",null);e.default=r.exports},h1eg:function(t,e,n){"use strict";n.r(e);var i=n("Y9oG"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},h42h:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",[e("ul",{staticClass:"bk-config-tab"},t._l(t.panels,(function(n,i){return e("li",{key:n.id,class:{"bk-check-config":t.acticeTab===n.key},on:{click:function(e){return t.changeTab(n,i)}}},[e("span",[t._v(t._s(n.label))])])})),0),t._v(" "),"queryParams"===t.acticeTab?[e("div",{staticClass:"param-config"},[e("i",{staticClass:"bk-itsm-icon icon-info-fail"}),t._v(" "),e("span",{staticStyle:{"font-size":"12px",color:"#63656e"}},[t._v(t._s(t.$t("m['参数说明']")))]),t._v(" "),e("params-table",{attrs:{list:t.config.queryParams,"state-list":t.stateList,"is-status":t.isStatus,disable:t.disable},on:{changeFormStatus:t.changeFormStatus}})],1)]:t._e(),t._v(" "),"auth"===t.acticeTab?[e("div",{staticClass:"param-config"},[e("bk-radio-group",{model:{value:t.config.authRadio,callback:function(e){t.$set(t.config,"authRadio",e)},expression:"config.authRadio"}},[e("bk-radio",{attrs:{value:"none"}},[t._v(t._s(t.$t("m['无需认证']")))]),t._v(" "),e("bk-radio",{attrs:{value:"bearer_token"}},[t._v("Bearer Token")]),t._v(" "),e("bk-radio",{attrs:{value:"basic_auth"}},[t._v("Basic Auth")])],1),t._v(" "),e("div",{staticClass:"bk-radio-config"},["none"===t.config.authRadio?e("div",[e("span",[t._v(t._s(t.$t("m['该请求不需要任何认证']")))])]):"bearer_token"===t.config.authRadio?e("div",[e("div",{staticClass:"config-option",staticStyle:{width:"80%"}},[e("p",{staticClass:"mb5"},[t._v("TOKEN ：")]),t._v(" "),e("bk-input",{attrs:{behavior:"simplicity",disabled:t.disable,clearable:!0},model:{value:t.config.auth_config.Token,callback:function(e){t.$set(t.config.auth_config,"Token",e)},expression:"config.auth_config.Token"}})],1)]):e("div",{staticStyle:{display:"flex"}},[e("div",{staticClass:"config-option"},[e("p",{staticClass:"mb5"},[t._v(t._s(t.$t("m['用户名']"))+"：")]),t._v(" "),e("bk-input",{attrs:{behavior:"simplicity",disabled:t.disable,clearable:!0},model:{value:t.config.auth_config.username,callback:function(e){t.$set(t.config.auth_config,"username",e)},expression:"config.auth_config.username"}})],1),t._v(" "),e("div",{staticClass:"config-option"},[e("p",{staticClass:"mb5"},[t._v(t._s(t.$t("m['密码']"))+"：")]),t._v(" "),e("bk-input",{attrs:{behavior:"simplicity",disabled:t.disable,type:"password",clearable:!0},model:{value:t.config.auth_config.password,callback:function(e){t.$set(t.config.auth_config,"password",e)},expression:"config.auth_config.password"}})],1)])])],1)]:t._e(),t._v(" "),"body"===t.acticeTab?[e("div",{staticClass:"param-config"},[e("div",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"8px"}},[e("bk-radio-group",{staticStyle:{width:"500px"},model:{value:t.config.bodyRadio,callback:function(e){t.$set(t.config,"bodyRadio",e)},expression:"config.bodyRadio"}},[e("bk-radio",{attrs:{value:"none"}},[t._v(t._s(t.$t("m['默认']")))]),t._v(" "),e("bk-radio",{attrs:{value:"form-data",disabled:t.radioDisabled}},[t._v("form-data")]),t._v(" "),e("bk-radio",{attrs:{value:"x-www-form-urlencoded",disabled:t.radioDisabled}},[t._v("x-www-form-urlencoded")]),t._v(" "),e("bk-radio",{attrs:{value:"raw",disabled:t.radioDisabled}},[t._v("raw")])],1),t._v(" "),"raw"===t.config.bodyRadio?e("bk-select",{staticStyle:{width:"100px"},attrs:{"ext-cls":"select-custom",disabled:!1,behavior:"simplicity"},model:{value:t.config.rawType,callback:function(e){t.$set(t.config,"rawType",e)},expression:"config.rawType"}},t._l(t.rawList,(function(t,n){return e("bk-option",{key:n,attrs:{id:t,name:t}})})),1):t._e()],1),t._v(" "),"form-data"===t.config.bodyRadio?[e("params-table",{attrs:{list:t.config.bodyFormData,"is-status":t.isStatus,disable:t.disable,"state-list":t.stateList},on:{changeFormStatus:t.changeFormStatus}})]:t._e(),t._v(" "),"x-www-form-urlencoded"===t.config.bodyRadio?[e("params-table",{attrs:{list:t.config.bodyWwwForm,disable:t.disable,"is-status":t.isStatus,"state-list":t.stateList},on:{changeFormStatus:t.changeFormStatus}})]:t._e(),t._v(" "),"raw"===t.config.bodyRadio?[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.config.bodyValue,expression:"config.bodyValue"}],ref:"textarea",staticClass:"bk-form-textarea",staticStyle:{resize:"vertical"},attrs:{placeholder:t.$t("m['请输入']")},domProps:{value:t.config.bodyValue},on:{input:function(e){e.target.composing||t.$set(t.config,"bodyValue",e.target.value)}}}),t._v(" "),e("ul",{directives:[{name:"show",rawName:"v-show",value:0!==t.rawVarList.length,expression:"rawVarList.length !== 0"}],staticClass:"raw-select",style:{left:t.left+"px",top:t.top+"px"}},t._l(t.rawVarList,(function(n,i){return e("li",{key:i,on:{click:function(e){return t.handleSelectContent(n)}}},[t._v("\n            "+t._s(n.name)+"\n            "),e("span",{staticClass:"variable-key"},[t._v("("+t._s(n.key)+")")])])})),0)]:t._e()],2)]:t._e(),t._v(" "),"headers"===t.acticeTab?[e("div",{staticClass:"param-config"},[e("params-table",{attrs:{list:t.config.headers,disable:t.disable,"state-list":t.stateList,"is-status":t.isStatus}})],1)]:t._e(),t._v(" "),"settings"===t.acticeTab?[e("div",{staticClass:"param-config"},[e("div",{staticClass:"setting-option"},[e("p",{staticClass:"mb5"},[t._v(t._s(t.$t("m['请求超时']")))]),t._v(" "),e("div",{staticClass:"setting-content"},[e("bk-input",{attrs:{type:"number",behavior:"simplicity",max:1e3,min:0},model:{value:t.config.settings.timeout,callback:function(e){t.$set(t.config.settings,"timeout",e)},expression:"config.settings.timeout"}}),t._v(" "),e("span",{staticStyle:{"margin-left":"5px"}},[t._v("s")])],1)])])]:t._e()],2)},a=[];i._withStripped=!0},h5om:function(t,e,n){"use strict";n.r(e);var i=n("4FVi"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},hA3y:function(t,e,n){"use strict";n.r(e);var i=n("tl4E"),a=n("jvs4");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("CQIX");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"7add65fd",null);e.default=r.exports},hAcJ:function(t,e,n){"use strict";n.r(e);var i=n("zfNu"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"hF++":function(t,e,n){},hHgK:function(t,e,n){},hHxK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("QbLZ")),a=r(n("q9fp")),s=n("L2JU"),o=r(n("b1K/"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"changeConductor",components:{memberInfo:a.default},props:{itemInfo:{type:Object,default:function(){return{}}},origin:{type:String,default:"normal"},index:{type:Number},isShowVar:{type:Boolean,default:function(){return!0}}},data:function(){return{precision:0,insertValue:"",variableList:[]}},computed:(0,i.default)({globalChoise:function(){return this.$store.state.common.configurInfo}},(0,s.mapState)("trigger",{triggerVariables:function(t){return t.triggerVariables}})),watch:{triggerVariables:function(t){this.variableList=t}},created:function(){if(("SELECT"===this.itemInfo.type||"MULTISELECT"===this.itemInfo.type)&&this.itemInfo.use_variable&&!this.itemInfo.choice.some((function(t){return"VARIABLE"===t.key}))){this.itemInfo.choice.push({key:"VARIABLE",name:"引用变量"});var t="MULTISELECT"===this.itemInfo.type?[]:"";this.$set(this.itemInfo,"insertValue",t)}this.$set(this.itemInfo,"referenceType",this.itemInfo.referenceType||"custom"),this.itemInfo.ref_type?(this.itemInfo.referenceType=this.itemInfo.ref_type,"reference"===this.itemInfo.ref_type?"SELECT"!==this.itemInfo.type&&"MULTISELECT"!==this.itemInfo.type||(this.itemInfo.insertValue="MULTISELECT"===this.itemInfo.type?this.itemInfo.value.split(","):this.itemInfo.value,this.itemInfo.value="VARIABLE"):"MULTISELECT"===this.itemInfo.type&&(this.itemInfo.value=this.itemInfo.value?this.itemInfo.value.split(","):[])):"MULTISELECT"===this.itemInfo.type&&(this.itemInfo.value=this.itemInfo.value?this.itemInfo.value.split(","):[])},mounted:function(){this.variableList=this.triggerVariables},methods:{changeInsert:function(t){this.itemInfo.value=(0,o.default)(this.$el.querySelector(".bk-form-textarea, .bk-form-input"),"conductorId"+this.index,this.itemInfo.value,"${"+t+"}",this),this.itemInfo.referenceType="import",this.insertValue=""},changeImport:function(){this.itemInfo.referenceType="reference"},changeMessagePanel:function(t){t&&"message"===this.origin&&this.$emit("change-panel-status")}}}},hJCJ:function(t,e,n){},hSKY:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ygAv");e.default={name:"SelectTree",components:{},model:{prop:"value",event:"selected"},props:{list:{type:Array,default:function(){return[]}},value:{type:[Number,String,Array],default:""},extCls:{type:String,default:""},organizationLoading:Boolean},data:function(){return{isShowTree:!1,displayName:"",displayList:[],checked:null}},watch:{list:function(){this.initData()},isShowTree:function(t){t&&this.setTreeNodeTitle()}},created:function(){this.initData()},methods:{nodeClickOne:function(t){this.checked=t,this.$emit("toggle",t),this.$emit("selected",t.id),this.setDispalyName(),this.closeTree()},asyncLoadNodes:function(t){var e=this;this.$set(t,"loading",!0),this.$store.dispatch("cdeploy/getTreeInfoChildren",{id:t.id}).then((function(n){n.data.children.forEach((function(t){e.setCheckedValue(t)})),e.$set(t,"children",n.data.children||[])})),this.setTreeNodeTitle(),this.$set(t,"loading",!1)},setDispalyName:function(){this.displayName=this.checked.full_name},setTreeNodeTitle:function(){this.$nextTick((function(){document.querySelectorAll(".tree-node").forEach((function(t){t.title=t.innerText}))}))},setinitValue:function(t){var e=this;this.$store.dispatch("cdeploy/getTreeInfoChildren",{id:t}).then((function(t){e.checked=t.data,e.setDispalyName()}))},initData:function(){var t=this;this.displayList=(0,i.deepClone)(this.list),this.displayList.length&&this.displayList.forEach((function(e){t.setCheckedValue(e)})),this.value&&0!==this.value.length&&this.setinitValue(Number(this.value)),this.checked&&this.$emit("change",(0,i.deepClone)(this.checked))},setCheckedValue:function(t){this.$set(t,"expanded",!1),this.$set(t,"async",t.has_children)},showTree:function(){this.loading||(this.isShowTree=!0)},closeTree:function(){this.isShowTree=!1}}}},hftF:function(t,e,n){"use strict";n.r(e);var i=n("gMgb"),a=n("sRDs");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("6jts"),n("dD0k");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"75b3441b",null);e.default=r.exports},hj6f:function(t,e,n){"use strict";n("Zicn")},"hk/f":function(t,e,n){"use strict";n.r(e);var i=n("x6yq"),a=n("C6tm");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("lI7c");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"0bbd7fbd",null);e.default=r.exports},hmS1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(n("m1cH")),a=l(n("gDS+")),s=l(n("GQeE")),o=l(n("14Xm")),r=l(n("D3Ub")),c=l(n("VflG"));function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"postParam",mixins:[c.default],props:{changeInfo:{type:Object,default:function(){return{}}},apiDetail:{type:Object,default:function(){}},stateList:{type:Array,default:function(){return[]}},isStatic:{type:Boolean,default:function(){return!1}},isCustom:{type:Boolean,default:!1},bodyValue:{type:Object,default:function(){}},entry:{type:String,default:function(){return""}},formInfo:{type:Object,default:function(){return{}}}},data:function(){return{trueSatatus:!0,falseSatatus:!1,lala:{value:"111",offsetTop:""},bodyTableData:[],paramTableData:[],checkInfo:{name:"",road:""},sourceTypeList:[{id:1,key:"CUSTOM",name:this.$t('m.treeinfo["自定义"]')},{id:2,key:"FIELDS",name:this.$t('m.treeinfo["引用变量"]')}],paramTableInfo:{value:"",placeholder:this.$t('m.treeinfo["请选择数据来源"]')}}},computed:{tableList:function(){return this.bodyTableData.filter((function(t){return t.isShow}))}},watch:{apiDetail:function(){this.initData()}},mounted:function(){var t=this;return(0,r.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.isStatic;case 2:return e.next=4,t.bodyValue;case 4:return e.next=6,t.initData();case 6:case"end":return e.stop()}}),e,t)})))()},methods:{initData:function(){this.bodyTableDataChange()},bodyTableDataChange:function(){var t=this;return(0,r.default)(o.default.mark((function e(){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.default)(t.apiDetail.req_body).length){e.next=5;break}t.apiDetail.treeDataList=[{has_children:!1,showChildren:!0,checkInfo:!1,key:"root",is_necessary:!0,type:"object",desc:t.$t('m.treeinfo["初始化数据"]'),parentInfo:"",children:[]}],t.apiDetail.bodyTableData=[],e.next=12;break;case 5:return e.next=7,t.jsonschemaToList({root:JSON.parse((0,a.default)(t.apiDetail.req_body))});case 7:return t.apiDetail.treeDataList=e.sent,t.isStatic||t.isCustom?t.apiDetail.treeDataList=t.jsonValueToTree(t.bodyValue,JSON.parse((0,a.default)(t.apiDetail.treeDataList))):t.changeInfo.api_info&&t.changeInfo.api_info.remote_api_id===t.apiDetail.id&&(t.apiDetail.treeDataList=t.jsonValueToTree(t.changeInfo.api_info.req_body,JSON.parse((0,a.default)(t.apiDetail.treeDataList)))),e.next=11,t.treeToTableList(JSON.parse((0,a.default)(t.apiDetail.treeDataList[0].children)));case 11:t.apiDetail.bodyTableData=e.sent;case 12:return e.next=14,JSON.parse((0,a.default)(t.apiDetail.bodyTableData));case 14:return n=e.sent,e.next=17,n.forEach((function(t){t.isCheck=!1,t.isSatisfied=!1,t.el=null,t.customValue=t.value||"",t.name=t.key||"",t.children=[],t.source_type=t.source_type||"CUSTOM",t.value=void 0!==t.value?t.value:"",t.value_key=void 0!==t.value_key&&t.value_key.toString()?t.value_key:""}));case 17:return e.next=19,t.recordChildren(n);case 19:return e.next=21,n;case 21:t.bodyTableData=e.sent;case 22:case"end":return e.stop()}}),e,t)})))()},recordChildren:function(t,e){for(var n=t.map((function(t){return t.level})),a=Math.max.apply(Math,(0,i.default)(n)),s=function(e){t.filter((function(t){return t.level===e})).forEach((function(e){!function(t,e){t.filter((function(t){return t.level===e.level-1&&t.primaryKey===e.parentPrimaryKey&&t.ancestorsList.toString()===e.ancestorsList.slice(0,-1).toString()}))[0].children.push(e)}(t,e)}))},o=a;o>(e||0);o--)s(o)},changeState:function(t){t.showChildren=!t.showChildren,t.children.forEach((function(e){e.isShow=t.showChildren})),t.showChildren||this.closeChildren(t)},closeChildren:function(t){var e=this;t.children.forEach((function(t){t.isShow=!1,t.has_children&&(t.showChildren=!1,e.closeChildren(t))}))},changeType:function(){},countChildren:function(t){var e=this;return(0,r.default)(o.default.mark((function n(){var i,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=0,a=function t(e){if(e.children&&e.children.length)for(var n=0;n<e.children.length;n++)i+=1,t(e.children[n])},e.next=4,a(t);case 4:return e.abrupt("return",i);case 5:case"end":return e.stop()}}),n,e)})))()},cleanValue:function(t){var e=this;return(0,r.default)(o.default.mark((function n(){var i,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=JSON.parse((0,a.default)(t)),s=function t(e){if(e.value="",e.source_type="CUSTOM",e.children&&e.children.length)for(var n=0;n<e.children.length;n++)t(e.children[n])},e.next=4,s(i);case 4:return e.abrupt("return",i);case 5:case"end":return e.stop()}}),n,e)})))()},countSon:function(t){return 1===this.bodyTableData.filter((function(e){return e.level===t.level-1&&e.primaryKey===t.parentPrimaryKey}))[0].children.length},addChildren:function(t){var e=this;return(0,r.default)(o.default.mark((function n(){var s,r,c,l,u,d;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.bodyTableData.filter((function(e){return e.level===t.level-1&&e.primaryKey===t.parentPrimaryKey}))[0],c=e.bodyTableData.indexOf(r)+1,n.next=4,e.countChildren(r);case 4:return l=n.sent,n.next=7,e.cleanValue(r.children[0]);case 7:return u=n.sent,n.next=10,e.treeToTableList(JSON.parse((0,a.default)([].concat((0,i.default)(r.children),[u]))),r.level+1,r.primaryKey,"array",r.ancestorsList);case 10:return d=n.sent,n.next=13,d.forEach((function(t){t.children=[]}));case 13:return r.children=d.filter((function(t){return t.level===r.level+1})),n.next=16,e.recordChildren(d,r.level+1);case 16:(s=e.bodyTableData).splice.apply(s,[c,l].concat((0,i.default)(d)));case 17:case"end":return n.stop()}}),n,e)})))()},deletChildren:function(t){var e=this;return(0,r.default)(o.default.mark((function n(){var i,a,s;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.countSon(t)){n.next=2;break}return n.abrupt("return");case 2:if(!((i=e.bodyTableData.filter((function(e){return e.level===t.level-1&&e.primaryKey===t.parentPrimaryKey}))[0].children).length<=1)){n.next=5;break}return n.abrupt("return");case 5:return i.splice(i.indexOf(t),1),a=e.bodyTableData.indexOf(t),n.next=9,e.countChildren(t);case 9:s=n.sent,e.bodyTableData.splice(a,s+1);case 11:case"end":return n.stop()}}),n,e)})))()},changeField:function(t,e){var n=this;return(0,r.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:case"end":return t.stop()}}),t,n)})))()},addNewItem:function(t){this.$emit("addNewItem",t)}}}},hqOK:function(t,e,n){"use strict";n("fxQi")},i8o3:function(t,e,n){"use strict";n.r(e);var i=n("Potf"),a=n("Zt4X");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("8xxm");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"e194de04",null);e.default=r.exports},iGEm:function(t,e,n){"use strict";n("6z7N")},iPSC:function(t,e){t.exports="data:image/png;base64,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"},iU89:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("PIEm"),s=(i=a)&&i.__esModule?i:{default:i},o=n("CeR/");e.default={name:"EmailNoticeTab",components:{DealPerson:s.default},props:{ticketInfo:{type:Object,default:function(){return{}}}},data:function(){return{flowStartText:this.$t('m.newCommon["流程开始"]'),flowList:[],followers:{comments:"",clickSecond:!1},includeTypes:[],personSelectCheckValue:{type:"PERSON",value:""}}},created:function(){var t=["GENERAL","PERSON"];this.ticketInfo.is_biz_need&&t.push("CMDB"),this.includeTypes=t},mounted:function(){this.getflowList()},methods:{getflowList:function(){var t=this;if(this.id){var e={ticket_id:this.id};this.$route.query.token&&(e.token=this.$route.query.token),this.$store.dispatch("cdeploy/getfllowLog",e).then((function(e){t.flowList=[],e.data.length&&e.data.forEach((function(e){var n={};n.content='<div title="'+e.group+'" style="word-break: break-all;\n                            display: -webkit-box;\n                            -webkit-line-clamp: 2;\n                            -webkit-box-orient: vertical;\n                            overflow: hidden;">'+e.creator_zh+t.$t('m.newCommon["邮件通知："]')+" "+e.group+"</div>",n.tag=e.create_at,e.message!==t.flowStartText&&t.flowList.push(n)}))})).catch((function(e){(0,o.errorHandler)(e,t)}))}},postFollowlogs:function(){var t=this;if(!this.followers.clickSecond&&this.$refs.personSelect.verifyValue())if(this.followers.comments.length>200||!this.followers.comments)this.$bkMessage({message:this.$t('m.memberSelect["必填项且字数不能超过200"]'),theme:"error"});else{this.followers.clickSecond=!0;var e=this.$refs.personSelect.getValue(),n={ticket_id:this.ticketInfo.id,state_name:this.ticketInfo.current_state_name,followers:e.value,followers_type:e.type,message:this.followers.comments};this.$store.dispatch("cdeploy/postFollowlogs",{params:n}).then((function(){t.$bkMessage({message:t.$t('m.newCommon["发送成功"]'),theme:"success"}),t.clearFollowlogs(),t.getflowList()})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.followers.clickSecond=!1}))}},clearFollowlogs:function(){this.followers={comments:"",clickSecond:!1},this.personSelectCheckValue={type:"PERSON",value:""}}}}},iYOz:function(t,e,n){},ibAw:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(n("4d7F"));e.default=function(t,e){return new i.default((function(n){window.app.$bkInfo({title:t||a.default.$t('m["确定离开当前页？"]'),subTitle:e||a.default.$t('m["离开将会导致未保存信息丢失"]'),okText:a.default.$t('m["离开"]'),confirmFn:function(){return n(!0)},cancelFn:function(){return n(!1)}})}))};var a=s(n("EstQ"));function s(t){return t&&t.__esModule?t:{default:t}}},iesT:function(t,e,n){"use strict";n.r(e);var i=n("bddw"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},ilb7:function(t,e,n){"use strict";n.r(e);var i=n("MaN0"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},ilzV:function(t,e,n){"use strict";n("p8PZ")},in5P:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild&&!t.loading?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"ext-cls":"bk-line-height","desc-type":"icon"}},[e("bk-checkbox-group",{ref:t.item.key,attrs:{value:t.selects},on:{change:t.selected}},t._l(t.item.choice,(function(n){return e("bk-checkbox",{key:n.key,attrs:{value:n.key,disabled:t.disabled,"ext-cls":"mr20"}},[t._v(t._s(n.name)+"\n      ")])})),1),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},ioCs:function(t,e,n){"use strict";n.r(e);var i=n("11QV"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},j7Oh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n("QbLZ")),a=c(n("14Xm")),s=c(n("D3Ub")),o=c(n("efIh")),r=c(n("2Vgw"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"INPUTSELECT",mixins:[o.default],props:{item:{type:Object,default:function(){return{}}},fields:{type:Array,default:function(){return[]}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{options:[],addStatus:!1,tempChoice:{name:"",key:""}}},watch:{"item.val":function(){this.conditionField(this.item,this.fields)},"item.choice":function(t,e){"API"!==this.item.source_type&&"DATADICT"!==this.item.source_type&&"RPC"!==this.item.source_type||e.length===t.length||this.getOption()}},mounted:function(){var t=this;return(0,s.default)(a.default.mark((function e(){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!t.item.val&&t.item.value&&(t.item.val=t.item.value),e.next=3,t.getOption();case 3:n=t.judgeValue(t.item.val,t.item.choice),t.item.val=n?t.item.val:"",t.conditionField(t.item,t.fields);case 6:case"end":return e.stop()}}),e,t)})))()},methods:{getOption:function(){var t=this;return(0,s.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFieldOptions(t.item);case 2:t.item.choice=e.sent,t.options=t.item.choice;case 4:case"end":return e.stop()}}),e,t)})))()},selected:function(){var t=this;this.item.related_fields&&this.item.related_fields.be_relied&&this.item.related_fields.be_relied.forEach((function(e){t.fields.forEach((function(t){e===t.key&&(t.value="",t.val=t.value)}))}))},giveDefaultKey:function(){var t=this;this.tempChoice.name&&!this.tempChoice.key&&(this.tempChoice.key="",(0,r.default)(this.tempChoice.name,{style:r.default.STYLE_NORMAL,heteronym:!1}).forEach((function(e){t.tempChoice.key+=""+e})),this.tempChoice.key=this.tempChoice.key.toUpperCase().replace(/\ /g,"_"),this.tempChoice.key.length>=32&&(this.tempChoice.key=this.tempChoice.key.substr(0,32)))},confirmAdd:function(){this.tempChoice.name&&(this.addStatus=!1,this.options.push((0,i.default)({},this.tempChoice,{can_delete:!0})),this.item.val=this.tempChoice.key,this.tempChoice.key="",this.tempChoice.name=this.tempChoice.key)},cancelAdd:function(){this.addStatus=!1,this.tempChoice.key="",this.tempChoice.name=this.tempChoice.key},handleDeleteOption:function(t){t===this.item.val&&(this.item.val=""),this.options=this.options.filter((function(e){return e.key!==t}))}}}},"jD+q":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-customtable-data"},t._l(t.customTableInfo.list,(function(n,i){return e("div",{key:i,staticClass:"bk-custom-line",class:{mb10:i!==t.customTableInfo.list.length-1}},[e("bk-input",{attrs:{"ext-cls":"bk-custom-input",clearable:!0,placeholder:t.$t("m.treeinfo['请输入名称']")},model:{value:n.name,callback:function(e){t.$set(n,"name",e)},expression:"item.name"}}),t._v(" "),e("bk-checkbox",{staticStyle:{float:"left","margin-right":"10px","line-height":"32px"},attrs:{"true-value":t.trueStatus,"false-value":t.falseStatus},model:{value:n.required,callback:function(e){t.$set(n,"required",e)},expression:"item.required"}},[t._v("\n      "+t._s(t.$t("m.treeinfo['必填']"))+"\n    ")]),t._v(" "),e("bk-select",{attrs:{"ext-cls":"bk-custom-small",clearable:!1,searchable:""},model:{value:n.display,callback:function(e){t.$set(n,"display",e)},expression:"item.display"}},t._l(t.typeList,(function(t){return e("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:n.choice,expression:"item.choice",modifiers:{trim:!0}}],staticClass:"bk-form-textarea bk-textarea-tanble",staticStyle:{width:"180px","min-height":"32px"},attrs:{placeholder:t.$t("m.treeinfo['请输入，Enter分隔']"),disabled:"select"!==n.display&&"multiselect"!==n.display},domProps:{value:n.choice},on:{input:function(e){e.target.composing||t.$set(n,"choice",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),e("div",{staticClass:"bk-custom-icon"},[e("i",{staticClass:"bk-itsm-icon icon-flow-add",on:{click:function(e){return t.addTableData(n,i)}}}),t._v(" "),e("i",{staticClass:"bk-itsm-icon icon-flow-reduce",class:{"bk-no-delete":1===t.customTableInfo.list.length},on:{click:function(e){return t.reduceTableData(n,i)}}})])],1)})),0)},a=[];i._withStripped=!0},jIqJ:function(t,e,n){"use strict";n("0kDG")},jK1o:function(t,e,n){},jN9s:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading},expression:"{ isLoading: loading }"}],staticClass:"log-list"},[e("div",{staticClass:"ticket-process-content",style:t.isShowSla?"height: calc(100vh - 310px);":"height: calc(100vh - 430px);"},[e("div",{staticClass:"ticket-process"},[e("i",{staticClass:"bk-itsm-icon icon-basic-info",on:{click:t.viewProcess}},[t._v(" "+t._s(t.$t('m["查看完整流程"]')))])]),t._v(" "),e("bk-timeline",{attrs:{"data-test-id":"ticket_timeline_viewLog","ext-cls":"log-time-line",list:t.list},on:{select:t.handleSelect}}),t._v(" "),t.isShowComment?e("div",{staticClass:"process-detail"},[e("div",{staticClass:"process-content"},[e("img",{attrs:{src:t.imgUrl,alt:"单据结束"}}),t._v(" "),t.ticketInfo.is_commented||"-1"===t.ticketInfo.comment_id?e("div",[t._v("\n          "+t._s(t.$t('m["已完成评价"]'))+"\n          "),e("div",{staticClass:"comment-content"},[e("div",{staticClass:"comment-content-item"},[e("span",[t._v(t._s(t.$t('m["星级"]'))+":")]),t._v(" "),e("bk-rate",{staticStyle:{"margin-top":"3px"},attrs:{rate:t.commentInfo.stars,edit:!1}})],1),t._v(" "),e("div",{staticClass:"comment-content-item"},[e("span",[t._v(t._s(t.$t('m["评价人"]'))+":")]),t._v(" "),e("p",[t._v(t._s(t.commentInfo.creator||"--"))])]),t._v(" "),e("div",{staticClass:"comment-content-item"},[e("span",[t._v(t._s(t.$t('m["评价时间"]'))+":")]),t._v(" "),e("p",[t._v(t._s(t.commentInfo.create_at||"--"))])]),t._v(" "),e("div",{staticClass:"comment-content-item"},[e("span",[t._v(t._s(t.$t('m["评价内容"]'))+":")]),t._v(" "),e("p",[t._v(t._s(t.commentInfo.comments||t.$t('m.newCommon["这个朋友很懒，什么也没留下"]')))])])])]):[e("p",[t._v(t._s(t.$t('m["当前流程已结束，快去评价吧"]')))]),t._v(" "),e("span",{staticClass:"appraise",on:{click:function(e){return t.$emit("ticketFinishAppraise")}}},[t._v(t._s(t.$t('m["去评价"]')))])]],2)]):t._e()],1),t._v(" "),e("ticket-log-detail",{attrs:{"log-info":t.dispalyLogInfo,show:!!t.dispalyLogInfo},on:{"update:logInfo":function(e){t.dispalyLogInfo=e},"update:log-info":function(e){t.dispalyLogInfo=e},close:()=>{t.dispalyLogInfo=null}}})],1)},a=[];i._withStripped=!0},"jNP/":function(t,e,n){"use strict";n("0T5/")},jRCg:function(t,e,n){"use strict";n.r(e);var i=n("IJn9"),a=n("WnJQ");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("0aeA");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"38f0ec5e",null);e.default=r.exports},jUMR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(n("tQ05")),a=l(n("PIEm")),s=l(n("PaSM")),o=l(n("BWJp")),r=n("CeR/"),c=n("ygAv");function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"newTask",components:{fieldInfo:i.default,DealPerson:a.default},mixins:[o.default,s.default],props:{basicInfomation:{type:Object,default:function(){return{}}},itemContent:{type:Object,default:function(){return{}}},nodeInfo:{type:Object,default:function(){return{}}}},data:function(){return{fieldLoading:!1,showField:!1,btnLoading:!1,falseStatus:!1,showTaskInfo:!0,showTemplateInfo:!0,dealPersonData:{value:"",type:"PERSON"},excludeTypeList:["OPEN","STARTER","BY_ASSIGNOR","EMPTY","VARIABLE","CMDB","ORGANIZATION","IAM","STARTER_LEADER","API"],formData:{template:""},fieldList:[],isComplexMembers:!1,memberContent:{},checkInfo:{template:!1,fields:!1},validatePopInfo:{content:""}}},created:function(){this.itemContent.id?this.initData():(this.formData.template=this.nodeInfo.task_schemas[0].id,this.getFieldList(this.formData.template))},methods:{initData:function(){var t=this;this.formData.template=this.itemContent.task_schema_id,this.dealPersonData.value=this.itemContent.processors,this.dealPersonData.type=this.itemContent.processors_type,this.fieldLoading=!0,this.showField=!1;var e=this.itemContent.id;this.$store.dispatch("taskFlow/getTaskInfo",e).then((function(e){t.fieldList=e.data.fields.create_fields.filter((function(t){return"COMPLEX-MEMBERS"!==t.type})),t.isComplexMembers=e.data.fields.create_fields.some((function(t){return"COMPLEX-MEMBERS"===t.type})),t.fieldList.forEach((function(e){"CASCADE"===e.type&&(e.type="SELECT"),t.$set(e,"showFeild",!0),t.$set(e,"val",e.value||"")})),t.isNecessaryToWatch({fields:t.fieldList},"submit"),t.showField=!0})).catch((function(e){(0,r.errorHandler)(e,t)})).finally((function(){t.fieldLoading=!1}))},selectTemplate:function(t){this.getFieldList(t)},getFieldList:function(t){var e=this,n={task_schema_id:t,stage:"CREATE"};this.fieldLoading=!0,this.showField=!1,this.$store.dispatch("taskFlow/getTaskField",n).then((function(t){e.fieldList=t.data.filter((function(t){return"COMPLEX-MEMBERS"!==t.type})),e.isComplexMembers=t.data.some((function(t){return"COMPLEX-MEMBERS"===t.type})),e.fieldList.forEach((function(t){"CASCADE"===t.type&&(t.type="SELECT"),e.$set(t,"showFeild",!0),e.$set(t,"val",t.value||"")})),e.isNecessaryToWatch({fields:e.fieldList},"submit")})).catch((function(t){(0,r.errorHandler)(t,e)})).finally((function(){e.fieldLoading=!1,e.showField=!0}))},closeSlider:function(){this.$emit("closeSlider")},submitTask:function(){var t=this,e={processors:"",processors_type:"",fields:{},need_start:this.nodeInfo.can_execute_task,state_id:this.nodeInfo.state_id};if(this.itemContent.id||(e.ticket_id=this.basicInfomation.id,e.task_schema_id=this.formData.template),this.$refs.personSelect){var n=this.$refs.personSelect.getValue();e.processors_type=n.type,e.processors=n.value}if(this.fieldList.length&&(this.fieldFormatting(this.fieldList),this.fieldList.forEach((function(n){if("SOPS_TEMPLATE"===n.type){var i=(0,c.deepClone)(n.sopsContent);i.constants.forEach((function(e){t.$set(e,"value",i.formData[e.key])})),e.fields[n.key]={id:i.id,template_source:i.context.project.bk_biz_id?"business":"common",bk_biz_id:-1!==t.basicInfomation.bk_biz_id?t.basicInfomation.bk_biz_id:"",constants:i.constants},"task"!==i.createWay&&"started_task"!==i.createWay||(e.fields[n.key].task_id=i.sopsTask.id,e.fields[n.key].id=i.sopsTask.template_id),i.planId&&i.planId.length>0?e.exclude_task_nodes_id=i.exclude_task_nodes_id:e.exclude_task_nodes_id=[],e.source=i.createWay}else"DEVOPS_TEMPLATE"===n.type?(e.fields.sub_task_params=n.devopsContent.variables,e.fields.sub_task_params.project_id=n.devopsContent.project_id,e.fields.sub_task_params.pipeline_id=n.devopsContent.pipeline_id):e.fields[n.key]=n.value})),e.source||(e.source="template")),!this.checkValue()){var i=this.relatedRegex(this.fieldList,this.fieldList);if(!i.result)return i.validList.forEach((function(e){e.result||(e.validList.forEach((function(e){t.validatePopInfo.content+=e.tips+"、"})),t.validatePopInfo.content=t.validatePopInfo.content.substr(0,t.validatePopInfo.content.length-1)+"！")})),this.$bkInfo({type:"warning",title:"",subTitle:this.validatePopInfo.content}),void(this.validatePopInfo.content="");if(this.btnLoading=!0,this.itemContent.id){var a=this.itemContent.id;this.$store.dispatch("taskFlow/editorTask",{params:e,id:a}).then((function(){t.$bkMessage({message:t.$t("m.task['编辑任务成功']"),theme:"success"}),t.closeSlider(),t.$emit("getTaskList")})).catch((function(e){(0,r.errorHandler)(e,t)})).finally((function(){t.btnLoading=!1}))}else this.$store.dispatch("taskFlow/createTask",{params:e}).then((function(){t.$bkMessage({message:t.$t("m.task['新建任务成功']"),theme:"success"}),t.closeSlider(),t.$emit("getTaskList")})).catch((function(e){(0,r.errorHandler)(e,t)})).finally((function(){t.btnLoading=!1}))}},checkValue:function(){this.checkInfo.template=!this.formData.template;var t=!!this.isComplexMembers&&!this.$refs.personSelect.verifyValue(),e=!this.$refs.fieldInfo.checkValue();return t||this.checkInfo.template||e}}}},jUNn:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modify-fields"},[e("bk-form-item",{attrs:{"ext-cls":"bk-field-schema",label:t.fieldKeyItem.name,required:t.fieldKeyItem.required,desc:t.fieldKeyItem.tips}},[e("bk-select",{staticStyle:{width:"270px"},attrs:{"ext-cls":"bk-insert-info",searchable:""},on:{selected:t.selectedFieldKey},model:{value:t.fieldKeyItem.value,callback:function(e){t.$set(t.fieldKeyItem,"value",e)},expression:"fieldKeyItem.value"}},t._l(t.fieldKeyItem.choice,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)],1),t._v(" "),t.fieldKeyItem.value?[e("bk-form-item",{attrs:{"ext-cls":"bk-field-schema",label:t.fieldValueItem.name,required:t.fieldValueItem.required,desc:t.fieldValueItem.tips}},[e("div",{staticStyle:{float:"left",width:"268px"}},[e("bk-select",{attrs:{clearable:!1,searchable:""},on:{selected:t.selectedReference},model:{value:t.fieldValueItem.referenceType,callback:function(e){t.$set(t.fieldValueItem,"referenceType",e)},expression:"fieldValueItem.referenceType"}},t._l(t.sourceTypeList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)],1),t._v(" "),"custom"===t.fieldValueItem.referenceType?e("div",{staticStyle:{float:"left",width:"268px","margin-left":"10px"}},[t.show?e("field-info",{attrs:{fields:t.fieldValueItem.itemInfo,origin:"trigger"}}):t._e()],1):t._e(),t._v(" "),"reference"===t.fieldValueItem.referenceType?e("div",{staticStyle:{float:"left",width:"268px","margin-left":"10px"}},[e("bk-select",{staticStyle:{width:"270px"},attrs:{"ext-cls":"bk-insert-info",searchable:""},model:{value:t.fieldValueItem.itemInfo[0].value,callback:function(e){t.$set(t.fieldValueItem.itemInfo[0],"value",e)},expression:"fieldValueItem.itemInfo[0].value"}},t._l(t.variableList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)],1):t._e()])]:t._e()],2)},a=[];i._withStripped=!0},jWBk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=d(n("4d7F")),a=d(n("m1cH")),s=d(n("GQeE")),o=d(n("vUrO")),r=d(n("pIur")),c=d(n("s4tT")),l=d(n("PIEm")),u=d(n("bcjM"));function d(t){return t&&t.__esModule?t:{default:t}}e.default={name:"webHookNode",components:{BasicCard:c.default,dealPerson:l.default,commonTriggerList:u.default,requestConfig:r.default,descInfo:o.default},props:{flowInfo:{type:Object,default:function(){return{}}},configur:{type:Object,default:function(){return{}}},isStatus:{type:Boolean,default:function(){return!0}},disable:{type:Boolean,default:function(){return!1}},taskErrorTip:{type:Boolean,default:function(){return!1}}},data:function(){return{isLoading:!1,secondClick:!1,isDropdownShow:!1,curEq:"GET",requestOptions:["GET","POST"],formData:{name:"",desc:"",url:"",success_exp:""},rules:{name:[{required:!0,message:this.$t("m['必填项']"),trigger:"blur"}],url:[{required:!0,message:this.$t("m['必填项']"),trigger:"blur"},{validator:function(t){if(-1!==t.indexOf("{{"))return!0;return/(http|https):\/\/\S*/.test(t)},message:this.$t("m['必需以http://或https://开头']"),trigger:"blur"}]},returnReslut:[{name:"",ref_path:"",check:!1}],processorsInfo:{type:"",value:""},checkStatus:{delivers:!1,processors:!1},excludeProcessor:["EMPTY","OPEN"],isShowUrlVariable:!1,filterParams:"",stateList:[],errorTip:!1,urlField:""}},computed:{retrunResultIsEmtry:function(){return this.returnReslut.length<=1},filterVariableList:function(){if(!this.formData.url)return[];var t=this.formData.url.lastIndexOf("{{");if(-1!==t){var e=this.formData.url.substring(t+2,this.formData.url.length)||"";this.filterParams=e||"";var n=this.stateList.filter((function(t){return-1!==t.name.indexOf(e)||-1!==t.key.indexOf(e)}));return 0!==n.length&&this.$refs.urlInput.focus(),n}return[]},isShowDelete:function(){return this.returnReslut.length-1}},watch:{taskErrorTip:function(t){this.errorTip=t}},mounted:function(){this.getWebHookDetail(),this.getRelatedFields()},methods:{getWebHookDetail:function(){if(this.isStatus){if(console.log(this.configur),0!==(0,s.default)(this.configur.extras).length){var t=this.configur.extras.webhook_info,e=t.url,n=t.success_exp,i=t.method;this.formData.name=this.configur.name,this.formData.desc=this.configur.desc,this.formData.success_exp=n,this.formData.url=e,this.curEq=i,console.log(this.formData),this.processorsInfo.type=this.configur.processors_type,this.processorsInfo.value=this.configur.processors,this.returnReslut=0!==this.configur.variables.outputs.length?[].concat((0,a.default)(this.configur.variables.outputs),(0,a.default)(this.returnReslut)):[{name:"",ref_path:"",check:!1}]}}else{var o=this.configur.api_info.webhook_info,r=o.url,c=o.success_exp,l=o.method;this.formData.name=this.configur.name,this.formData.success_exp=c,this.formData.url=r,this.curEq=l}},getRelatedFields:function(){var t=this;if(this.isStatus){var e={workflow:this.flowInfo.id,state:this.configur.id,field:""};this.$store.dispatch("apiRemote/get_related_fields",e).then((function(e){t.stateList=e.data}))}},handleSelectContent:function(t){this.formData.url=this.formData.url.slice(0,-(this.filterParams.length+2))+"{{ "+t.key+"}}",this.$refs.urlInput.focus()},handleUrlChange:function(t){t.endsWith("{{")?this.isShowUrlVariable=!0:this.isShowUrlVariable=!1},selectRequsetOpt:function(t){this.curEq=t},closeNode:function(){this.$parent.closeConfigur()},addReturnReslut:function(){this.returnReslut.push({name:"",ref_path:"",check:!1})},changeReturnInput:function(t){t.check?[t.name,t.ref_path].every((function(t){return""===t}))&&(this.returnReslut.pop(),t.check=!1):(t.check=!0,this.returnReslut.push({name:"",ref_path:"",check:!1}))},changeFormStatus:function(t){this.errorTip=t},validate:function(){return this.$refs.webForm.validate()},deleteReturnReslut:function(t){if(!this.retrunResultIsEmtry){var e=this.returnReslut.indexOf(t);-1!==e&&this.returnReslut.splice(e,1)}},submit:function(){var t=this;i.default.all([this.$refs.processors.verifyValue(),this.$refs.webForm.validate()]).then((function(){var e=t.$refs.processors.getValue(),n=e.value,i=e.type,a=t.$refs.requestConfig.config,s=a.queryParams,o=a.bodyFormData,r=a.bodyWwwForm,c=a.authRadio,l=a.auth_config,u=a.settings,d=a.bodyValue,f=a.bodyRadio,m=a.rawType,p=a.headers,h=s.filter((function(t){return t.select})),v=t.returnReslut.filter((function(t){return""!==t.name}));v.forEach((function(t){t.source="global",t.type="string"}));var b={auth_type:"None"!==c?c:"",auth_config:{}},k=l.username,g=l.password,_=l.Token;"basic_auth"===c?(b.auth_config.username=k,b.auth_config.password=g):"bearer_token"===c&&(b.auth_config.token=_);var y=p.filter((function(t){return t.select})),I={type:"none"!==f?f:"",raw_type:"",content:""};"form-data"===f?I.content=o.filter((function(t){return t.select})):"x-www-form-urlencoded"===f?I.content=r.filter((function(t){return t.select})):"raw"===f&&(I.raw_type=m||"Text",I.content=d);var w={timeout:Number(u.timeout)},C={name:t.formData.name,desc:t.formData.desc||void 0,processors:n||"",processors_type:i||"",type:"WEBHOOK",is_draft:!1,extras:{webhook_info:{method:t.curEq,url:t.formData.url,query_params:h,auth:b,headers:y,body:I,settings:w,success_exp:t.formData.success_exp}},variables:{outputs:v,inputs:[]},workflow:t.configur.workflow};if("GET"===t.curEq?t.errorTip=!h.every((function(t){return""!==t.key&&""!==t.value})):"string"!=typeof I.content&&(t.errorTip=![I.content,h].every((function(t){return t.every((function(t){return""!==t.key&&""!==t.value}))}))),!t.errorTip&&!t.secondClick){t.secondClick=!0;var S=t.configur.id;t.$store.dispatch("cdeploy/putWebHook",{params:C,stateId:S}).then((function(){t.$bkMessage({message:t.$t('m.treeinfo["保存成功"]'),theme:"success"}),t.$parent.closeConfigur()}),(function(t){console.log(t)})).finally((function(){t.secondClick=!1}))}}))}}}},jeD0:function(t,e,n){"use strict";n("qmm4")},jfEP:function(t,e,n){},jlIa:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=u(n("EstQ")),a=u(n("BWJp")),s=n("zB2w"),o=n("CeR/"),r=u(n("vkdF")),c=u(n("tQ05")),l=u(n("jRCg"));function u(t){return t&&t.__esModule?t:{default:t}}var d=[{key:"component_type",name:i.default.t("m.task['任务类型']"),value:""},{key:"name",name:i.default.t("m.task['任务名称']"),value:""},{key:"status",name:i.default.t("m.task['状态']"),value:""},{key:"processor_users",name:i.default.t("m.task['处理人']"),value:""},{key:"create_at",name:i.default.t("m.task['创建时间']"),value:""}],f=[{key:"task_name",name:i.default.t("m.task['任务名']")},{key:"state",name:i.default.t("m.task['状态']")},{key:"bk_biz_id",name:i.default.t("m.task['业务']")},{key:"creator",name:i.default.t("m.task['创建人']")},{key:"executor",name:i.default.t("m.task['执行人']")},{key:"create_time",name:i.default.t("m.task['创建时间']")},{key:"start_time",name:i.default.t("m.task['执行时间']")},{key:"finish_time",name:i.default.t("m.task['完成时间']")}],m=[{key:"NOT_CREATED",name:i.default.t("m.task['未创建']"),color:"bk-status-over"},{key:"CREATE_FAILED",name:i.default.t("m.task['创建失败']"),color:"bk-status-error"},{key:"CREATED",name:i.default.t("m.task['创建成功']"),color:"bk-status-normal"},{key:"START_FAILED",name:i.default.t("m.task['启动失败']"),color:"bk-status-error"},{key:"RUNNING",name:i.default.t("m.task['执行中']"),color:"bk-status-normal"},{key:"FAILED",name:i.default.t("m.task['执行失败']"),color:"bk-status-error"},{key:"FINISHED",name:i.default.t("m.task['执行成功']"),color:"bk-status-summary"},{key:"REVOKED",name:i.default.t("m.task['已撤销']"),color:"bk-status-over"},{key:"SUSPENDED",name:i.default.t("m.task['已暂停']"),color:"bk-status-normal"}],p=["COMPLEX-MEMBERS","SOPS_TEMPLATE","DEVOPS_TEMPLATE"];e.default={name:"DealTask",components:{taskStatus:r.default,fieldInfo:c.default,fieldPreview:l.default},mixins:[a.default],props:{taskInfo:{type:Object,default:function(){return{}}},dealType:{type:String,default:""},basicInfomation:{type:Object,default:function(){return{}}}},data:function(){return{baseTaskInfoList:d,sopsBaseList:f,sopsStateList:m,specialFieldTypes:p,btnLoading:!1,taskStatusInfoLoading:!1,taskDetailLoading:!1,taskStatusInfo:{},taskDetail:{},createFields:[],createTaskTemplateFields:[],dealFields:[],confirmFields:[],confirmTaskTemplateFields:[]}},computed:{taskType:function(){return this.taskInfo.component_type},taskInfoList:function(){var t=this,e=this.baseTaskInfoList.map((function(e){return"component_type"===e.key?e.value=s.TASK_TEMPLATE_TYPES.find((function(e){return e.type===t.taskType})).name:e.value=t.taskInfo[e.key],e}));return["SOPS","DEVOPS"].includes(this.taskType)&&e.push({name:this.$t("m.task['任务模板']"),value:this.taskInfo.task_schema_id}),"DEVOPS"===this.taskType&&e.push({name:this.$t("m.tickets['流水线']"),value:""}),e},isShowSopsExecInfo:function(){return"SOPS"===this.taskType&&("SEE"===this.dealType||"WAITING_FOR_CONFIRM"===this.taskInfo.status)},confirmText:function(){return"WAITING_FOR_OPERATE"===this.taskInfo.status&&["DEVOPS","SOPS"].includes(this.taskType)?this.$t("m.tickets['执行']"):this.$t("m.task['确认']")}},created:function(){this.initData()},mounted:function(){},methods:{initData:function(){this.getTaskDetail(),this.isShowSopsExecInfo&&this.getTaskStatusInfo()},getTaskDetail:function(){var t=this;this.taskDetailLoading=!0;var e=this.taskInfo.id;this.$store.dispatch("taskFlow/getTaskInfo",e).then((function(e){t.taskDetail=e.data,t.createFields=e.data.fields.create_fields.filter((function(e){return!t.specialFieldTypes.includes(e.type)})),t.createTaskTemplateFields=e.data.fields.create_fields.filter((function(t){return["SOPS_TEMPLATE","DEVOPS_TEMPLATE"].includes(t.type)})),t.createTaskTemplateFields.forEach((function(e){t.$set(e,"showFeild",!0),t.$set(e,"val",e.value||"")})),t.isNecessaryToWatch({fields:t.createFields},"submit"),t.dealFields=e.data.fields.operate_fields.filter((function(e){return!t.specialFieldTypes.includes(e.type)})),t.dealFields.forEach((function(e){"CASCADE"===e.type&&(e.type="SELECT"),t.$set(e,"showFeild",!0),t.$set(e,"val",e.value||"")})),t.isNecessaryToWatch({fields:t.dealFields},"submit"),"FINISHED"===t.taskInfo.status?(t.confirmFields=e.data.fields.confirm_fields.filter((function(e){return!t.specialFieldTypes.includes(e.type)})),t.confirmTaskTemplateFields=e.data.fields.confirm_fields.filter((function(t){return["SOPS_TEMPLATE","DEVOPS_TEMPLATE"].includes(t.type)}))):t.confirmFields=e.data.fields.confirm_fields.filter((function(t){return"COMPLEX-MEMBERS"!==t.type})),t.confirmFields.forEach((function(e){"CASCADE"===e.type&&(e.type="SELECT"),t.$set(e,"showFeild",!0),t.$set(e,"val",e.value||"")})),t.isNecessaryToWatch({fields:t.confirmFields},"submit")})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.taskDetailLoading=!1}))},getTaskStatusInfo:function(){var t=this;this.taskStatusInfoLoading=!0;var e=this.taskInfo.id;this.$store.dispatch("taskFlow/getTaskStatusInfo",e).then((function(e){t.taskStatusInfo=e.data})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.taskStatusInfoLoading=!1}))},getSopsStatusInfo:function(t){return this.sopsStateList.find((function(e){return e.key===t}))||{}},closeSideslider:function(){this.$emit("close")},submitDeal:function(){var t=this;if(this.$refs.fieldInfo&&!this.$refs.fieldInfo.checkValue())return!1;var e={action:"OPERATE"===this.dealType?"operate":"confirm",fields:[]},n=[];["QUEUE","WAITING_FOR_OPERATE","RUNNING"].includes(this.taskInfo.status)?n=this.dealFields:"WAITING_FOR_CONFIRM"===this.taskInfo.status&&(n=this.confirmFields),n.forEach((function(n){"SOPS_TEMPLATE"===n.type?(n.sopsContent.constants.forEach((function(e){t.$set(e,"value",n.sopsContent.formData[e.key])})),e.fields.push({key:n.key,value:{id:n.sopsContent.id,template_source:n.sopsContent.context.project.bk_biz_id?"business":"common",bk_biz_id:-1!==t.basicInfomation.bk_biz_id?t.basicInfomation.bk_biz_id:"",constants:n.sopsContent.constants}})):e.fields.push({key:n.key,value:n.value})})),this.btnLoading=!0;var i=this.taskInfo.id;this.$store.dispatch("taskFlow/dealTask",{params:e,id:i}).then((function(){t.$bkMessage({message:t.$t("m.task['操作任务成功']"),theme:"success"}),t.$emit("dealSuccess")})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.btnLoading=!1}))}}}},jppy:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("rMih"),s=(i=a)&&i.__esModule?i:{default:i},o=n("ygAv");e.default={name:"sopsGetParam",components:{addField:s.default},props:{quoteVars:Array,constantDefaultValue:Object,context:{type:Object,default:function(){return{}}},constants:{type:Array,default:function(){return[]}},isStaticData:{type:Array,default:function(){return[]}},configur:{type:Object,default:function(){return{}}},flowInfo:{type:Object,default:function(){return{}}},stateList:{type:Array,default:function(){return[]}},isStatic:{type:Boolean,default:function(){return!1}},hookedVarList:Object,isHook:{type:Boolean,default:function(){return!0}},isEdit:{type:Boolean,default:function(){return!0}},initFormDate:Object},data:function(){return{disabled:!1,ticketDisable:!1,disabledRenderForm:!1,configLoading:!1,quoteErrors:[],renderKey:"",formData:{},formOptions:{showRequired:!0,showGroup:!0,showLabel:!0,showHook:this.isHook,showDesc:!0,formEdit:!this.disabled&&!this.disabledRenderForm&&this.isEdit},fieldList:[],checkInfo:{name:"",road:""},biz:[{name:this.$t('m.treeinfo["业务"]'),custom_type:"",source_type:"custom",value:"--",key:1}],changeInfo:{workflow:"",id:"",key:"",name:"",type:"STRING",desc:"",layout:"COL_12",validate_type:"REQUIRE",choice:[],is_builtin:!1,source_type:"CUSTOM",source_uri:"",regex:"EMPTY",custom_regex:"",is_tips:!1,tips:""},sourceTypeList:[{id:1,key:"custom",name:this.$t('m.treeinfo["自定义"]')},{id:2,key:"component_inputs",name:this.$t('m.treeinfo["引用变量"]')}],sliderInfo:{title:this.$t('m.treeinfo["添加变量"]'),show:!1,width:700},showTabData:{},sopsTableInfo:[]}},computed:{},watch:{constants:{handler:function(){this.renderKey=(new Date).getTime()},deep:!0},isEdit:function(){this.renderKey=(new Date).getTime()}},mounted:function(){var t=this;this.isStatic&&(this.sopsTableInfo=[],this.isStaticData.forEach((function(e){var n={name:e.name,value:e.value};t.sopsTableInfo.push(n)})))},methods:{onHookChange:function(t,e){this.$emit("onChangeHook",e.tag_code,t);var n=this.constants.find((function(t){return t.key===e.tag_code}));if(n.is_quoted=t,t)this.formData[e.tag_code]="";else{this.formData[e.tag_code]=n?(0,o.deepClone)(this.constantDefaultValue[e.tag_code]):this.initFormDate[e.tag_code].value;var i=this.quoteErrors.findIndex((function(t){return t===e.tag_code}));i>-1&&this.quoteErrors.splice(i,1)}},changeTicketformDisable:function(t){this.$set(this.$refs.renderForm.formOption,"formEdit",t)},onSelectVar:function(t,e){this.formData[e.tag_code]="${"+t+"}"},getRenderFormValidate:function(){return this.$refs.renderForm.validate()},getRelatedFields:function(){this.$parent.getRelatedFields()},addNewItem:function(t){this.showTabData=t,this.sliderInfo.show=!0,this.$refs["selectSops"+t.key].close()},closeShade:function(){this.sliderInfo.show=!1},showNew:function(t,e){this.paramTableShow.forEach((function(n){n.key===t.key&&(n.value=e.data.key)}))}}}},jub7:function(t,e,n){"use strict";n.r(e);var i=n("f7Ks"),a=n("0rd9");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},jvs4:function(t,e,n){"use strict";n.r(e);var i=n("4lVZ"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},k2IW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{class:{"full-screen-wrap":t.isFull}},[t.isFull?e("div",{staticClass:"full-screen-header"},[e("span",{staticClass:"full-screen-title"},[t._v(t._s(t.title))]),t._v(" "),e("div",{staticClass:"full-exit-btn",on:{click:function(e){return e.stopPropagation(),t.onClose.apply(null,arguments)}}},[e("i",{staticClass:"bk-itsm-icon icon-order-close"}),t._v(" "),e("span",{staticClass:"exit-text"},[t._v(t._s(t.$t("m.common['退出全屏']")))])])]):t._e(),t._v(" "),e("div",{staticClass:"full-screen-content"},[t._t("default")],2)])},a=[];i._withStripped=!0},k5mY:function(t,e,n){},k85c:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("UsFA"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"RenderView",components:{ViewItem:s.default},props:{formData:{type:Array,default:function(){return[]}},context:{type:Object,default:function(){return{}}}},provide:function(){var t=this;return{getContext:function(){return t.context}}},data:function(){return{isRootRenderView:null,value:{}}},created:function(){this.initRenderView()},methods:{getScheme:function(t){return this.context.schemes[t.scheme]?this.context.schemes[t.scheme]:{}},initRenderView:function(){for(var t=this,e=!1;!e&&t.$parent;)"render-view"===t.$parent.$options._componentTag?e=!0:t=t.$parent;this.isRootRenderView=!e}}}},kACU:function(t,e,n){},kKPr:function(t,e,n){"use strict";n.r(e);var i=n("GZg8"),a=n("f0yb");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"5a92aca7",null);e.default=r.exports},kOIM:function(t,e,n){"use strict";n.r(e);var i=n("nS99"),a=n("362X");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("eiMn");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"307405e8",null);e.default=r.exports},kQq5:function(t,e,n){"use strict";n.r(e);var i=n("mE3A"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},kSST:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n("14Xm")),a=o(n("D3Ub")),s=o(n("efIh"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"SELECT",mixins:[s.default],props:{item:{type:Object,default:function(){return{}}},fields:{type:Array,default:function(){return[]}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{options:[]}},watch:{"item.val":function(){this.conditionField(this.item,this.fields)},"item.choice":function(t,e){"API"!==this.item.source_type&&"DATADICT"!==this.item.source_type&&"RPC"!==this.item.source_type||e.length===t.length||this.getOption()}},mounted:function(){var t=this;return(0,a.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!t.item.val&&t.item.value&&(t.item.val=t.item.value),e.next=3,t.getOption();case 3:n=t.judgeValue(t.item.val,t.item.choice),t.item.val=n?t.item.val:"",t.conditionField(t.item,t.fields);case 6:case"end":return e.stop()}}),e,t)})))()},methods:{getOption:function(){var t=this;return(0,a.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFieldOptions(t.item);case 2:t.item.choice=e.sent,t.options=t.item.choice;case 4:case"end":return e.stop()}}),e,t)})))()},selected:function(){var t=this;this.item.related_fields&&this.item.related_fields.be_relied&&this.item.related_fields.be_relied.forEach((function(e){t.fields.forEach((function(t){e===t.key&&(t.value="",t.val=t.value)}))}))}}}},kVtS:function(t,e,n){},kWbx:function(t,e,n){"use strict";n.r(e);var i=n("jWBk"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},kcB7:function(t,e,n){"use strict";n.r(e);var i=n("sQdO"),a=n("4Lss");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("GK9h");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"deeb62be",null);e.default=r.exports},kcaP:function(t,e,n){},kvWR:function(t,e,n){"use strict";n("+LW1")},l3JT:function(t,e,n){"use strict";n("PLXv")},lAAG:function(t,e,n){"use strict";n.r(e);var i=n("jD+q"),a=n("9psX");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("SLTv");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"96b3fa0c",null);e.default=r.exports},lArr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=p(n("14Xm")),a=p(n("D3Ub")),s=n("CeR/"),o=p(n("EQpn")),r=p(n("T+BV")),c=p(n("vkdF")),l=p(n("9gVk")),u=p(n("AtYP")),d=p(n("qyFR")),f=p(n("0NR2")),m=n("zB2w");function p(t){return t&&t.__esModule?t:{default:t}}e.default={name:"NodeTaskList",inject:["reload"],components:{TaskStatus:c.default,newTask:o.default,dealTask:r.default,TaskLibrary:d.default,taskHandleTrigger:l.default,DevopsExecutInfo:u.default,TaskLibraryOptPanel:f.default},props:{ticketInfo:{type:Object,default:function(){return{}}},nodeInfo:{type:Object,default:function(){return{}}}},data:function(){return{refreshing:!1,edittingOrderId:"",taskLibrary:{show:!1},createInfo:{isShow:!1,isAdd:!0,taskInfo:{},bk_biz_id:""},dealTaskInfo:{show:!1,title:this.$t("m.task['处理任务']"),loading:!1,itemContent:{},type:""},viewTask:{isShow:!1,isView:!0,taskInfo:{}},isListLoading:!1,operatingMap:{NEW:["edit","delete","view"],QUEUE:["deal","view"],WAITING_FOR_OPERATE:["deal","view"],WAITING_FOR_BACKEND:["view"],RUNNING:["view"],WAITING_FOR_CONFIRM:["confiam","view"],FINISHED:["view"],FAILED:["to_deal_sops","view"],DELETED:[],REVOKED:["view"],SUSPENDED:["view"]},taskList:[],taskTemplateTypes:m.TASK_TEMPLATE_TYPES}},mounted:function(){this.refreshTaskList()},methods:{closeSideslider:function(t){var e=this;this.$bkInfo({type:"warning",title:this.$t('m["内容未保存，离开将取消操作！"]'),confirmLoading:!0,confirmFn:function(){e.createInfo.isShow=!1,e.taskLibrary.show=!1},cancelFn:function(){"newTask"===t?e.createInfo.isShow=!0:e.taskLibrary.show=!0}})},getTaskList:function(t){var e=this,n={ticket_id:this.ticketInfo.id};return this.$store.dispatch("taskFlow/getTaskList",n).then((function(n){e.taskList=n.data,e.taskList.forEach((function(t){e.$set(t,"editOrder",t.order)}));var i=["QUEUE","RUNNING","WAITING_FOR_OPERATE","WAITING_FOR_BACKEND","WAITING_FOR_CONFIRM"];if(n.data.some((function(t){return i.includes(t.status)}))||"refreshBtn"!==t||e.reload(),n.data.some((function(t){return i.includes(t.status)}))){var a=setTimeout((function(){e.getTaskList(t)}),1e4);e.$once("hook:beforeDestroy",(function(){clearInterval(a)}))}})).catch((function(t){(0,s.errorHandler)(t,e)}))},syncSopsTaskStatus:function(){return this.$store.dispatch("taskFlow/syncSopsTaskStatus",{ticket_id:this.ticketInfo.id})},refreshTaskList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"init";return(0,a.default)(i.default.mark((function n(){return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.isListLoading){n.next=2;break}return n.abrupt("return");case 2:return t.isListLoading=!0,n.next=5,t.syncSopsTaskStatus();case 5:return n.next=7,t.getTaskList(e);case 7:t.isListLoading=!1;case 8:case"end":return n.stop()}}),n,t)})))()},onCreateTaskClick:function(){this.createInfo={isShow:!0,isAdd:!0,taskInfo:{},bk_biz_id:this.ticketInfo.bk_biz_id}},onTaskEditClick:function(t){this.createInfo={isShow:!0,isAdd:!1,taskInfo:t,bk_biz_id:this.ticketInfo.bk_biz_id}},onTaskDeleteClick:function(t){var e=this;this.$bkInfo({type:"warning",title:this.$t("m.task['确认删除任务？']"),subTitle:this.$t("m.task['任务如果被删除，与任务相关的触发动作将会一并删除。']"),confirmFn:function(){var n=t.id;e.$store.dispatch("taskFlow/deleteTask",n).then((function(){e.$bkMessage({message:e.$t("m.task['删除成功']"),theme:"success"}),e.getTaskList()})).catch((function(t){(0,s.errorHandler)(t,e)}))}})},dealTaskSlider:function(t,e){this.dealTaskInfo.itemContent=t,this.dealTaskInfo.type=e;var n={SEE:this.$t("m.task['查看任务']"),OPERATE:this.$t("m.task['处理任务']"),CONFIRM:this.$t("m.task['总结任务']"),RETRY:this.$t("m.task['重试任务']")};this.dealTaskInfo.title=n[e],this.dealTaskInfo.show=!0},dealSuccess:function(){this.dealTaskInfo.show=!1,this.getTaskList(),this.$emit("updateCurrentStep")},onJumpToSopsClick:function(t){window.open(t.task_url)},onEditOrderBlur:function(t){var e=this,n={order:Number(t.editOrder)};this.$store.dispatch("taskFlow/editorTask",{params:n,id:t.id}).then((function(){t.order=Number(t.editOrder)})).catch((function(t){(0,s.errorHandler)(t,e)})).finally((function(){e.edittingOrderId=""}))},onViewTaskClick:function(t,e){this.viewTask={isShow:!0,isView:"deal"!==e,taskInfo:t,bk_biz_id:this.ticketInfo.bk_biz_id}},onTaskOrderClick:function(t){if("NEW"!==t.status)return!1;this.edittingOrderId=t.id},handleSubmitSuccess:function(){this.createInfo.isShow=!1,this.getTaskList()},getTaskTypeName:function(t){var e=this.taskTemplateTypes.find((function(e){return e.type===t}));return e?e.name:t},isShowJumpIcon:function(t){return!["NEW","WAITING_FOR_CONFIRM","FINISHED","DELETED"].includes(t.status)&&["SOPS","DEVOPS"].includes(t.component_type)&&"DEVOPS"===t.component_type&&"WAITING_FOR_OPERATE"!==t.status},onCreateByTaskLibrary:function(){this.taskLibrary.show=!0},handleTaskLibraryClose:function(t){this.taskLibrary.show=!1,t&&this.refreshTaskList()}}}},lI7c:function(t,e,n){"use strict";n("vT7S")},lK1Q:function(t,e,n){"use strict";n.r(e);var i=n("GLbv"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},lNfD:function(t,e,n){},lSBQ:function(t,e,n){"use strict";n("WenH")},lVyC:function(t,e,n){"use strict";n("MX/Q")},lWSq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n("14Xm")),a=c(n("D3Ub")),s=c(n("efIh")),o=c(n("u8Ap")),r=c(n("EP+X"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"MEMBERS",components:{memberSelect:o.default,businessCard:r.default},mixins:[s.default],props:{item:{type:Object,required:!0,default:function(){}},fields:{type:Array,default:function(){return[]}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{selectedItems:[]}},watch:{"item.val":function(t){this.selectedItems=t?t.split(","):[]}},mounted:function(){var t=this;return(0,a.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.selectedItems=t.item.val?t.item.val.split(","):[],t.conditionField(t.item,t.fields);case 2:case"end":return e.stop()}}),e,t)})))()},methods:{onMemberSelectChange:function(t){this.item.val=t.join(",")}}}},lpJK:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},[e("bk-table",{attrs:{data:t.item.val,size:"small"}},[t._l(t.item.meta.columns,(function(n){return[e("bk-table-column",{key:n.key,attrs:{label:n.name},scopedSlots:t._u([{key:"default",fn:function(i){return["input"===n.display?[e("bk-input",{attrs:{clearable:!0,disabled:t.disabled},model:{value:i.row[n.key],callback:function(e){t.$set(i.row,n.key,e)},expression:"props.row[columnItem.key]"}})]:t._e(),t._v(" "),"select"===n.display?[e("bk-select",{attrs:{searchable:"","font-size":"medium","popover-min-width":180,disabled:t.disabled},model:{value:i.row[n.key],callback:function(e){t.$set(i.row,n.key,e)},expression:"props.row[columnItem.key]"}},t._l(n.choice,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)]:t._e(),t._v(" "),"multiselect"===n.display?[e("bk-select",{attrs:{searchable:"",multiple:"","popover-min-width":180,"font-size":"medium",disabled:t.disabled,"show-select-all":""},model:{value:i.row[n.key],callback:function(e){t.$set(i.row,n.key,e)},expression:"props.row[columnItem.key]"}},t._l(n.choice,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)]:t._e(),t._v(" "),"date"===n.display?[e("bk-date-picker",{attrs:{transfer:!0,disabled:t.disabled},model:{value:i.row[n.key],callback:function(e){t.$set(i.row,n.key,e)},expression:"props.row[columnItem.key]"}})]:t._e(),t._v(" "),"datetime"===n.display?[e("bk-date-picker",{attrs:{transfer:!0,disabled:t.disabled,type:"datetime"},model:{value:i.row[n.key],callback:function(e){t.$set(i.row,n.key,e)},expression:"props.row[columnItem.key]"}})]:t._e()]}}],null,!0)})]})),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.user['操作']"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("bk-button",{attrs:{theme:"primary",text:"",disabled:t.disabled},on:{click:t.addOne}},[t._v("\n            "+t._s(t.$t('m.newCommon["添加"]'))+"\n          ")]),t._v(" "),e("bk-button",{attrs:{theme:"primary",text:"",disabled:t.disabled},on:{click:function(e){return t.deleteOne(n)}}},[t._v("\n            "+t._s(t.$t('m.newCommon["删除"]'))+"\n          ")])]}}],null,!1,3418295963)})],2)],1),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2):t._e()},a=[];i._withStripped=!0},ls84:function(t,e,n){"use strict";n("VSrL")},m1XF:function(t,e,n){"use strict";n.r(e);var i=n("r4nQ"),a=n("N5hH");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("ASBv");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"cb489e28",null);e.default=r.exports},m4Da:function(t,e,n){},mAOo:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-dialog-form bk-change"},[t.versionStatus?e("div",{staticClass:"bk-itsm-version"},[e("span",[t._v(t._s(t.$t('m.newCommon["新建母子单："]')))]),t._v(" "),e("span",[t._v("\n      "+t._s(t.$t('m.newCommon["可以通过母子单的创建，将一些需要进行相同处理操作的同类单据进行关联。一个母单可以关联多个子单，一个子单只能关联到一个母单。一旦关联，子单将冻结操作，子单的状态将全部跟随母单更新。"]'))+"\n    ")]),t._v(" "),e("i",{staticClass:"bk-icon icon-close",on:{click:t.closeVersion}})]):t._e(),t._v(" "),e("p",{staticClass:"bk-ticket-title"},[t._v("\n    "+t._s(t.$t('m.newCommon["选择以下单据作为"]'))+"\n  ")]),t._v(" "),e("div",{staticClass:"bk-ticket-content"},[e("bk-radio-group",{model:{value:t.templateInfo.inheritType,callback:function(e){t.$set(t.templateInfo,"inheritType",e)},expression:"templateInfo.inheritType"}},[t._l(t.templateInfo.options,(function(n){return[e("bk-radio",{key:n.key,staticClass:"mr20",attrs:{value:n.key,disabled:t.getFlag(n.key,t.ticketInfo)},on:{change:t.changeRadio}},[t._v("\n          "+t._s(n.name)+"\n        ")])]}))],2)],1),t._v(" "),e("p",{staticClass:"bk-ticket-title"},[t._v("\n    "+t._s(t.$t('m.manageCommon["可关联的列表"]'))+"\n  ")]),t._v(" "),e("div",{staticClass:"bk-ticket-content"},[e("div",{staticClass:"bk-content-search"},[e("bk-input",{staticStyle:{width:"200px",float:"left"},attrs:{clearable:!0,"right-icon":"bk-icon icon-search"},on:{enter:t.getList,clear:t.clearInfo},model:{value:t.searchForm.keyword,callback:function(e){t.$set(t.searchForm,"keyword",e)},expression:"searchForm.keyword"}})],1),t._v(" "),e("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isDataLoading},expression:"{ isLoading: isDataLoading }"}],attrs:{data:t.tabInfoList,size:"small",pagination:t.pagination},on:{"page-change":t.handlePageChange,"page-limit-change":t.handlePageLimitChange}},[e("bk-table-column",{attrs:{width:"60",align:"center","render-header":t.renderRadio},scopedSlots:t._u([{key:"default",fn:function(n){return["chooseChild"===t.templateInfo.inheritType?e("bk-checkbox",{attrs:{value:n.row.check,disabled:t.getItemFlag(n.row)},on:{change:function(e){return t.checkOne(n.row)}}}):e("bk-radio",{attrs:{value:n.row.check,disabled:t.getItemFlag(n.row)},on:{change:function(e){return t.checkOne(n.row)}}})]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.newCommon['单号']"),"min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticClass:"bk-lable-primary",attrs:{title:n.row.sn},on:{click:function(e){return t.openNewPage(n.row)}}},[t._v("\n            "+t._s(n.row.sn)+"\n          ")])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.manageCommon['标题']"),prop:"title","min-width":"100"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.manageCommon['提单人']"),prop:"creator"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.manageCommon['提单时间']"),prop:"create_at"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.manageCommon['状态']"),"min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticClass:"bk-status-color-info",style:t.getstatusColor(n.row),attrs:{title:n.row.current_status_display}},[t._v("\n            "+t._s(t.localeCookie?n.row.current_status_display:n.row.current_status)+"\n          ")])]}}])})],1)],1),t._v(" "),e("div",{staticClass:"bk-state-button"},[e("bk-button",{staticClass:"mr10",attrs:{theme:"primary",loading:t.secondClick,disabled:!t.getButtonFlag(),title:t.$t("m.treeinfo['提交']")},on:{click:t.submitTemplate}},[t._v("\n      "+t._s(t.$t('m.treeinfo["提交"]'))+"\n    ")]),t._v(" "),e("bk-button",{attrs:{theme:"default",disabled:t.secondClick,title:t.$t("m.treeinfo['取消']")},on:{click:t.closeShow}},[t._v("\n      "+t._s(t.$t('m.treeinfo["取消"]'))+"\n    ")])],1)])},a=[];i._withStripped=!0},mBl7:function(t,e,n){"use strict";n.r(e);var i=n("A1Rv"),a=n("5XEB");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("wJAD");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"1f05be8e",null);e.default=r.exports},mCAA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"devopsNodeInfo",props:{nodeInfo:{type:Object,default:function(){return{}}},apiInfo:{type:Object,default:function(){return{}}}},data:function(){return{taskStatus:{FINISHED:this.$t('m.task["执行成功"]'),RUNNING:this.$t('m.task["执行中"]'),FAILED:this.$t('m.task["执行失败"]')}}}}},mCpm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"TaskStatus",props:{status:{type:String,default:""},nodeType:{type:String}},data:function(){return{info:""}},watch:{status:function(){this.getStatusInfo()}},created:function(){this.getStatusInfo()},methods:{getStatusInfo:function(){var t={RUNNING:{cls:"running",icon:"bk-itsm-icon icon-icon-loading",text:{APPROVAL:this.$t('m.task["等待审批中"]'),NORMAL:this.$t('m.task["等待处理中"]')}[this.nodeType]||this.$t('m.task["执行中"]')},SUCCESS:{cls:"success",icon:"bk-icon icon-check-circle-shape",text:this.$t('m.task["执行成功"]')},FAILED:{cls:"failed",icon:"bk-itsm-icon icon-itsm-icon-square-one",text:this.$t('m.task["执行失败"]')}};this.info=t[this.status]||""}}}},mE3A:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("rfXi")),a=r(n("R5iJ")),s=r(n("CXV/")),o=r(n("W3y+"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"bk-upload",props:{name:{type:String,default:"upload_file"},multiple:{type:Boolean,default:!0},accept:{type:String,default:"*"},delayTime:{type:Number,default:0},url:{required:!0,type:String},size:{type:[Number,Object],default:function(){return{maxFileSize:5,maxImgSize:1}}},handleResCode:{type:Function,default:function(t){return 0===t.code}},header:[Array,Object],tip:{type:String,default:""},validateName:{type:RegExp},withCredentials:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{dragText:"支持的附件格式：txt，log，pdf，doc，ppt，xls，docx，pptx，xlsx，zip，jpg，png，每个文件不超过200Mb",clickText:"点击上传",showDialog:!0,fileList:[],width:0,barEl:null,fileIndex:null,speed:0,total:0,unit:"kb/s",isdrag:!1,progress:0,uploadIcon:o.default}},watch:{fileIndex:function(t){null!==t&&t<this.fileList.length&&this.uploadFile(this.fileList[t],t)}},methods:{filesize:function(t){var e=t/1e3;if(e<1)return t.toFixed(3)+" KB";var n=e.toString().indexOf(".");return e.toString().slice(0,n+2)+" MB"},selectFile:function(t){var e=this,n=(0,i.default)(t.target.files);if(n.length){n.forEach((function(t,n){var i={name:t.name,originSize:t.size,size:t.size/1e3,maxFileSize:null,maxImgSize:null,type:t.type,fileHeader:"",origin:t,base64:"",status:"",done:!1,responseData:"",speed:null,errorMsg:"",progress:""},a=i.type.indexOf("/"),s=i.type.slice(0,a),o=i.type.indexOf("application/x-photoshop")>-1;i.fileHeader=s,"number"==typeof e.size?(i.maxFileSize=e.size,i.maxImgSize=e.size):(i.maxFileSize=e.size.maxFileSize,i.maxImgSize=e.size.maxImgSize),("image"===s||o)&&e.handleImage(i,t),("image"!==s||!o)&&i.size>1e3*i.maxFileSize&&(i.errorMsg="文件不能超过"+i.maxFileSize+"MB"),e.validateName&&(e.validateName.test(i.name)||(i.errorMsg="文件名不合法")),e.fileList.push(i)}));var a=this.fileList.length,s=this.fileIndex;a-1===s?this.uploadFile(this.fileList[s],s):this.fileIndex=0,t.target.value=""}},hideFileList:function(){var t=this;this.delayTime&&setTimeout((function(){t.fileList=[]}),this.delayTime)},uploadFile:function(t){var e=this;if(t.errorMsg)return this.fileIndex+=1,void(t.progress="100%");var n=new FormData,i=new XMLHttpRequest;n.append(this.name,t.origin),this.isdrag=!1,t.xhr=i,i.onreadystatechange=function(){if(4===i.readyState){try{var n=JSON.parse(i.responseText);200===i.status&&e.handleResCode(n)?(t.done=!0,t.responseData=n,e.$emit("on-success",e.fileList)):(t.errorMsg=n.message,e.$emit("on-error",t,e.fileList))}catch(e){t.progress="100%",t.errorMsg=error.message}e.fileIndex+=1,e.unit="kb/s",e.total=0,t.status="done",e.fileIndex===e.fileList.length&&(e.$emit("on-done",e.fileList),e.hideFileList())}};if(i.upload.addEventListener("progress",(function(n){if(n.lengthComputable){var i=Math.round(100*n.loaded/n.total),a=Math.round(n.loaded/1e3);t.progress=i+"%",e.speed=a-e.total,e.total=a,e.unit="kb/s",e.speed>1e3&&(e.speed=Math.round(e.speed/1e3),e.unit="mb/s"),e.$emit("on-progress",n,t,e.fileList)}t.status="running"}),!1),i.withCredentials=this.withCredentials,i.open("POST",this.url,!0),this.header)if(Array.isArray(this.header))this.header.forEach((function(t){var n=e.header.name,a=e.header.value;i.setRequestHeader(n,a)}));else{var a=this.header.name,s=this.header.value;i.setRequestHeader(a,s)}i.send(n)},handleImage:function(t,e){var n=this;if(!/image\/(jpg|png|jpeg)$/.test(t.type))return t.errorMsg="只允许上传JPG|PNG|JPEG格式的图片",!1;if(t.size>1e3*t.maxImgSize)return t.errorMsg="图片大小不能超过"+t.maxImgSize+"MB",!1;var i=new FileReader;return i.onload=function(e){n.smallImage(i.result,t)},i.readAsDataURL(e),!0},smallImage:function(t,e){var n=new Image,i=document.createElement("canvas"),a=i.getContext("2d");n.onload=function(){var t=n.width,s=n.height,o=t,r=s;(t>42||s>42)&&(t/s>1?(o=42,r=Math.round(s/t*42)):(o=42,r=42)),i.width=o,i.height=r,a.clearRect(0,0,o,r),a.drawImage(n,0,0,o,r),e.base64=i.toDataURL()},n.src=t},getIcon:function(t){if(t.base64)return t.base64;for(var e=!1,n=["zip","rar","tar","gz"],i=0;i<n.length;i++)if(t.type.indexOf(n[i])>-1){e=!0;break}return e?a.default:s.default},deleteFile:function(t,e){e.xhr&&e.xhr.abort(),this.fileList.splice(t,1);var n=this.fileList.length;n||(this.fileIndex=null),0===t&&n&&(this.fileIndex=0,this.uploadFile(this.fileList[0]))}},mounted:function(){var t=this,e=this.$refs.uploadel;e.addEventListener("dragenter",(function(e){t.isdrag=!0})),e.addEventListener("dragleave",(function(e){t.isdrag=!1})),e.addEventListener("dragend",(function(e){t.isdrag=!1}))}}},mOxC:function(t,e,n){"use strict";n("aRCN")},mRFm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=f(n("m1cH")),a=f(n("sT1I")),s=f(n("evDI")),o=f(n("W/0y")),r=n("ygAv"),c=f(n("PaSM")),l=f(n("efIh")),u=f(n("BWJp")),d=f(n("Je9i"));function f(t){return t&&t.__esModule?t:{default:t}}e.default={name:"LeftTicketContent",components:{BasicInformation:a.default,OrderPreview:s.default,CurrentSteps:o.default,WangEditor:d.default},mixins:[c.default,l.default,u.default],props:{commentId:[Number,String],commentList:Array,loading:Object,ticketInfo:Object,nodeList:Array,firstStateFields:Array,nodeTriggerList:Array,ticketId:[Number,String],commentLoading:Boolean,isPageOver:Boolean,hasNodeOptAuth:Boolean,isShowAssgin:Boolean,moreLoading:Boolean,isShowComment:{type:Boolean,default:function(){return!0}}},inject:["reloadTicket"],data:function(){return{isShowBasicInfo:!0,baseActiveTab:"base",stepActiveTab:"currentStep",currentStepList:[],allFieldList:[],currentStepLoading:!1,activeName:["ticket"],isShow:!1}},computed:{currStepNodeNum:function(){return this.ticketInfo.is_over?0:this.currentStepList.length},currSetpIsIframe:function(){return"TicketDetailIframe"===this.$route.name}},watch:{hasNodeOptAuth:function(t){this.stepActiveTab=t?"currentStep":"allComments"},isShowAssgin:function(t){t&&(this.stepActiveTab="currentStep")},isShowBasicInfo:function(t){this.$emit("getBacicInfoStatus",t)}},methods:{initCurrentStepData:function(){var t=this;this.currentStepLoading=!0;var e=(0,r.deepClone)(this.currentStepList),n=[];this.currentStepList=[],this.allFieldList=[],this.nodeList.forEach((function(e){["RUNNING","SUSPEND","FAILED","SUCCESS"].includes(e.status)&&n.push(e),t.allFieldList=t.allFieldList.concat(e.fields)})),n.forEach((function(n){var i=e.find((function(t){return t.state_id===n.state_id}));t.isSameStatusNode(n,i)&&"RUNNING"===i.status?t.currentStepList.push(i):t.currentStepList.push(n)})),this.allFieldList.forEach((function(e){t.$set(e,"showFeild",!!e.show_type),t.$set(e,"val",e.value||"")})),this.allFieldList.forEach((function(e){t.conditionField(e,t.allFieldList)})),this.currentStepList.forEach((function(e){if(e.fields&&e.fields.length&&(e.fields.forEach((function(e){t.$set(e,"service",t.ticketInfo.service_type),"current_status"===e.key&&t.$set(e,"ticket_status",t.ticketInfo.current_status)})),t.isNecessaryToWatch(e,"")),"SIGN"===e.type&&!e.is_sequential){var n=e.tasks.filter((function(t){return"FINISHED"===t.status}));e.tasks=e.tasks.filter((function(t){return-1===n.findIndex((function(e){return e.processor===t.processor}))})),e.tasks=[].concat((0,i.default)(n),(0,i.default)(e.tasks))}})),this.$nextTick((function(){t.currentStepLoading=!1}))},changeDialogStatus:function(t){this.isShow=t},refreshComment:function(){this.$emit("refreshComment")},addTargetComment:function(t){this.$emit("addTargetComment",t)}}}},mVIP:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},["CUSTOM-FORM"===t.item.type?e("p",{staticClass:"mt5 mb0 f12",staticStyle:{color:"#c4c6cc"},attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.$t('m["当前字段为自定义表单"]')))]):t._e(),t._v(" "),e("render-view",{attrs:{"form-data":t.formData,context:t.context}})],1),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2):t._e()},a=[];i._withStripped=!0},mW7z:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("P2sY"),s=(i=a)&&i.__esModule?i:{default:i},o=n("CeR/");e.default={name:"dataSource",components:{},mixins:[],props:{formInfo:{type:Object,default:function(){return{}}},prcData:{type:Object,default:function(){return{}}},dictionaryData:{type:Object,default:function(){return{}}},apiInfo:{type:Object,default:function(){return{}}},changeInfo:{type:Object,default:function(){return{}}}},data:function(){return{typeClass:"",isApiLoading:!1,isSystemLoading:!1,sourceList:[],apiSysList:[],apiPortList:[]}},computed:{globalChoise:function(){return this.$store.state.common.configurInfo},dataSourceDisable:function(){return(this.changeInfo.is_builtin||"TABLE"===this.changeInfo.source||this.changeInfo.meta&&"APPROVE_RESULT"===this.changeInfo.meta.code)&&"bk_biz_id"!==this.formInfo.key}},watch:{"formInfo.type":function(){this.initData(),this.getSourceList()}},mounted:function(){this.initData(),this.getSourceList()},methods:{initData:function(){this.typeClass="API"===this.formInfo.source_type?"bk-threeline-item bk-halfline-margin":"bk-halfline-item bk-halfline-margin",this.getApiSystemList(),"API"===this.formInfo.source_type&&this.apiInfo.remote_system_id&&this.getApiPortList(this.apiInfo.remote_system_id)},getSourceList:function(){var t=this.globalChoise.source_type.filter((function(t){return"CUSTOM_API"!==t.typeName}));"TABLE"===this.formInfo.type?this.sourceList=t.filter((function(t){return"CUSTOM"===t.typeName})):"TREESELECT"===this.formInfo.type?this.sourceList=t.filter((function(t){return"DATADICT"===t.typeName||"RPC"===t.typeName})):this.sourceList=t},getApiSystemList:function(){var t=this,e={project_key:this.$store.state.project.id||"public"};this.isSystemLoading=!0,this.$store.dispatch("apiRemote/get_all_remote_system",e).then((function(e){t.apiSysList=e.data.filter((function(t){return t.is_activated}))})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.isSystemLoading=!1}))},getApiPortList:function(t){var e=this,n={remote_system:t||""};this.isApiLoading=!0,this.$store.dispatch("apiRemote/get_remote_api",n).then((function(t){e.apiPortList=t.data.filter((function(t){return t.is_activated}));var n=e.apiPortList.filter((function(t){return String(t.id)===String(e.apiInfo.remote_api_id)}))[0],i=(0,s.default)({},n);e.$emit("changeApiInfo",i)})).catch((function(t){(0,o.errorHandler)(t,e)})).finally((function(){e.isApiLoading=!1}))},changeApiPort:function(t){this.apiInfo.rsp_data="",this.apiInfo.req_params={},this.apiInfo.req_body={};var e=this.apiPortList.filter((function(e){return String(e.id)===String(t)}))[0],n=(0,s.default)({},e);this.$emit("changeApiInfo",n)},changeSource:function(){this.typeClass="API"===this.formInfo.source_type?"bk-threeline-item bk-halfline-margin":"bk-halfline-item bk-halfline-margin"},changeApiSystem:function(t){this.apiInfo.remote_api_id="",this.apiInfo.rsp_data="",this.apiInfo.req_params={},this.apiInfo.req_body={},this.getApiPortList(t)},changeRpc:function(t){var e=this.prcData.list.filter((function(e){return e.key===t}))[0].req_params;this.$emit("getRpcData",e)},checkSouce:function(){var t=!1;return"DATADICT"===this.formInfo.source_type?t=!this.dictionaryData.check:"API"===this.formInfo.source_type?t=!this.apiInfo.remote_system_id||!this.apiInfo.remote_api_id:"RPC"===this.formInfo.source_type&&(t=!this.prcData.check),t&&this.$bkMessage({theme:"warning",message:this.$t('m.treeinfo["请选择正确的数据源"]')}),t}}}},mfOu:function(t,e,n){},mjuI:function(t,e,n){"use strict";n.r(e);var i=n("c/a9"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},ml4i:function(t,e,n){"use strict";n.r(e);var i=n("hHxK"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},mn6F:function(t,e,n){"use strict";n("6xgL")},msTu:function(t,e,n){"use strict";n("mfOu")},n2nG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("KaYb"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"sopsNodeInfo",components:{getParam:s.default},props:{nodeInfo:{type:Object,default:function(){return{}}},apiInfo:{type:Object,default:function(){return{}}}},data:function(){return{status:"",errorLength:""}},mounted:function(){this.status=this.nodeInfo.api_info.sops_result,this.errorLength=this.nodeInfo.api_info.error_message?this.nodeInfo.api_info.error_message.length:0}}},n43x:function(t,e,n){},n5mh:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"child-node"},t._l(t.treeDataList,(function(n,i){return e("li",{key:i,staticClass:"vue-tree-item"},[e("div",{class:["tree-node",{down:n.showChildren,"set-frist-pLeft":t.treeIndex+1===1,active:n.checkInfo}],style:t.pLeft,on:{click:function(e){return t.toggle(n)}}},[n.showChildren?e("i",{staticClass:"bk-icon icon-down-shape",class:{"bk-padding":!n.has_children},on:{click:function(e){return e.stopPropagation(),t.toggleChildren(n)}}}):e("i",{staticClass:"bk-icon icon-right-shape",class:{"bk-padding":!n.has_children},on:{click:function(e){return e.stopPropagation(),t.toggleChildren(n)}}}),t._v(" "),e("i",{staticClass:"bk-icon icon-folder-open-shape"}),t._v(" "),e("span",{staticClass:"name-text"},[t._v(t._s(n.name))]),t._v(" "),n.checkInfo?e("i",{staticClass:"bk-icon icon-check-1",staticStyle:{float:"right","margin-top":"11px"}}):t._e()]),t._v(" "),e("collapse-transition",[n.showChildren&&n.children?[e("exportTree",{attrs:{"tree-data-list":n.children,"tree-index":t.treeIndex+1},on:{selectItem:t.selectItem,toggle:t.toggle,toggleChildren:t.toggleChildren}})]:t._e()],2)],1)})),0)},a=[];i._withStripped=!0},nCLG:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},[e("div",{staticStyle:{position:"relative"}},[e("div",{staticClass:"bk-form-content",staticStyle:{position:"relative"}},[e("custom-upload",{ref:"upload",attrs:{name:"field_file",multiple:!0,"with-credentials":!0,disabled:t.disabled,tip:"",size:200,url:t.url},on:{"on-success":t.uploadSuccess,"on-error":t.uploadErr,"on-progress":t.uploadProgress,"on-done":t.uploadDone}}),t._v(" "),e("ul",t._l(t.datas,(function(n,i){return e("li",{directives:[{name:"show",rawName:"v-show",value:!n.errorMsg,expression:"!file.errorMsg"}],key:i,staticClass:"upload_p",staticStyle:{"word-break":"break-word"}},[e("span",[t._v(t._s(n.name))]),t._v(" "),e("span",{staticClass:"bk-icon icon-delete",staticStyle:{color:"#3c96ff","margin-left":"10px",cursor:"pointer"},on:{click:function(e){return t.deleteFile(n)}}})])})),0)],1)]),t._v(" "),t.tempFileList.length>0?e("div",{staticClass:"bk-form-item"},[e("label",{staticClass:"bk-label"},[t._v(t._s(t.$t('m.newCommon["模板下载"]'))+"：")]),t._v(" "),e("div",{staticClass:"bk-form-content"},t._l(t.tempFileList,(function(n,i){return e("ul",{key:i},[e("li",{staticClass:"bk-icon icon-download bk-tab-cursor fa-file",on:{click:function(e){return t.downloadFile(n)}}},[t._v(" "+t._s(n.name)+"\n          ")])])})),0)]):t._e(),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},nDZo:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this._self._c;return t("div",{class:["basic-info-wrap",{fold:!this.showMore},{"has-more-icon":this.displayMoreIcon}]},[t("div",{ref:"basicInfo",staticClass:"bk-basic-info"},[t("div",{staticClass:"bk-basic-form"},[t("table-fields",{attrs:{"basic-infomation":this.basicInfomation,"first-state-fields":this.firstStateFields}})],1)])])},a=[];i._withStripped=!0},nDi6:function(t,e,n){},nI7W:function(t,e,n){"use strict";n("KQMz")},nMQ0:function(t,e,n){"use strict";n("C/Jd")},nMdP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"toolPanel",props:{fullStatus:{type:Boolean,default:function(){return!1}}},data:function(){return{}},methods:{onZoomIn:function(){this.$emit("onZoomIn")},onZoomOut:function(){this.$emit("onZoomOut")},onResetPosition:function(){this.$emit("onResetPosition")}}}},nS99:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"node-task-list"},[e("div",{staticClass:"task-header"},[e("span",{staticClass:"task-title"},[t._v(t._s(t.$t("m.task['任务列表']")))]),t._v(" "),t.nodeInfo.can_create_task?[e("bk-button",{staticClass:"ml20",attrs:{theme:"primary",title:t.$t("m.task['创建任务']"),icon:"plus",size:"small",disabled:"DISTRIBUTE"===t.nodeInfo.action_type},on:{click:t.onCreateTaskClick}},[t._v("\n        "+t._s(t.$t("m.task['创建任务']"))+"\n      ")]),t._v(" "),e("bk-button",{staticClass:"ml10",attrs:{title:t.$t("m.task['从任务库创建']"),size:"small",disabled:"DISTRIBUTE"===t.nodeInfo.action_type},on:{click:t.onCreateByTaskLibrary}},[t._v("\n        "+t._s(t.$t("m.task['从任务库创建']"))+"\n      ")])]:t._e(),t._v(" "),e("span",{staticClass:"header-right-content"},[e("bk-popover",{ref:"taskLibraryPopover",attrs:{placement:"bottom-start",trigger:"manual","ext-cls":"save-template-pop",theme:"light","tippy-options":{hideOnClick:!1}}},[t.nodeInfo.can_create_task?e("bk-button",{staticClass:"mr10",attrs:{title:t.$t("m.tickets['存入任务库']"),size:"small",disabled:"DISTRIBUTE"===t.nodeInfo.action_type},on:{click:function(e){return t.$refs.taskLibraryPopover.showHandler()}}},[t._v("\n          "+t._s(t.$t("m.tickets['存入任务库']"))+"\n        ")]):t._e(),t._v(" "),e("div",{staticClass:"task-library-manage-panel",staticStyle:{width:"294px"},attrs:{slot:"content"},slot:"content"},[e("task-library-opt-panel",{attrs:{"task-list":t.taskList,"ticket-info":t.ticketInfo},on:{close:function(e){return t.$refs.taskLibraryPopover.hideHandler()}}})],1)],1),t._v(" "),e("span",{staticClass:"refresh-tasks-icon",on:{click:function(e){return t.refreshTaskList("refreshBtn")}}},[e("i",{staticClass:"bk-icon icon-refresh"})])],1)],2),t._v(" "),e("div",{staticClass:"task-list-content"},[e("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isListLoading},expression:"{ isLoading: isListLoading }"}],attrs:{data:t.taskList,size:"small"}},[e("bk-table-column",{attrs:{label:t.$t("m.task['顺序']"),width:60},scopedSlots:t._u([{key:"default",fn:function(n){return[t.edittingOrderId===n.row.id?e("bk-input",{directives:[{name:"bk-focus",rawName:"v-bk-focus"}],on:{blur:function(e){return t.onEditOrderBlur(n.row)}},model:{value:n.row.editOrder,callback:function(e){t.$set(n.row,"editOrder",e)},expression:"props.row.editOrder"}}):e("span",{staticClass:"task-order",on:{click:function(e){return t.onTaskOrderClick(n.row)}}},[t._v("\n            "+t._s(n.row.order)+"\n          ")])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['任务名称']")},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:n.row.name,expression:"props.row.name",modifiers:{top:!0}}],staticClass:"task-name"},[t._v("\n            "+t._s(n.row.name||"--")+"\n          ")])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['处理人']")},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:n.row.processor_users,expression:"props.row.processor_users",modifiers:{top:!0}}]},[t._v("\n            "+t._s(n.row.processor_users||"--")+"\n          ")])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['任务类型']")},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:n.row.processor_users,expression:"props.row.processor_users",modifiers:{top:!0}}]},[t._v("\n            "+t._s(t.getTaskTypeName(n.row.component_type)||"--")+"\n          ")])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['状态']"),wdith:120},scopedSlots:t._u([{key:"default",fn:function(t){return[e("task-status",{attrs:{status:t.row.status}})]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['操作']"),"min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(n){return[t._l(t.operatingMap[n.row.status],(function(i,a){return["edit"===i?e("bk-button",{key:a,attrs:{theme:"primary",text:"",disabled:!t.nodeInfo.can_create_task},on:{click:function(e){return t.onTaskEditClick(n.row)}}},[t._v("\n              "+t._s(t.$t("m.task['编辑']"))+"\n            ")]):t._e(),t._v(" "),"delete"===i?e("bk-button",{key:a,attrs:{theme:"primary",text:""},on:{click:function(e){return t.onTaskDeleteClick(n.row)}}},[t._v("\n              "+t._s(t.$t("m.user['删除']"))+"\n            ")]):t._e(),t._v(" "),"deal"===i?e("bk-button",{key:a,attrs:{theme:"primary",text:"",disabled:!t.nodeInfo.can_execute_task||!n.row.can_process||"QUEUE"===n.row.status},on:{click:function(e){return t.dealTaskSlider(n.row,"OPERATE")}}},[n.row.can_process?"QUEUE"===n.row.status?[e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:t.$t("m.task['请先处理前置任务']"),expression:"\n                    $t(`m.task['请先处理前置任务']`)\n                  ",modifiers:{top:!0}}]},[t._v("\n                  "+t._s(t.$t("m.task['处理']"))+"\n                ")])]:[t._v("\n                "+t._s(t.$t("m.task['处理']"))+"\n              ")]:[e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:t.$t("m.task['无处理权限']"),expression:"\n                    $t(`m.task['无处理权限']`)\n                  ",modifiers:{top:!0}}]},[t._v("\n                  "+t._s(t.$t("m.task['处理']"))+"\n                ")])]],2):t._e(),t._v(" "),"to_deal_sops"===i&&"SOPS"===n.row.component_type?e("bk-button",{key:a,attrs:{theme:"primary",text:""},on:{click:function(e){return t.onJumpToSopsClick(n.row)}}},[t._v("\n              "+t._s(t.$t("m.task['处理']"))+"\n            ")]):t._e(),t._v(" "),"confiam"===i?e("bk-button",{key:a,attrs:{disabled:!n.row.can_process,theme:"primary",text:""},on:{click:function(e){return t.dealTaskSlider(n.row,"CONFIRM")}}},[t._v("\n              "+t._s(t.$t("m.task['总结']"))+"\n            ")]):t._e(),t._v(" "),"view"===i?e("bk-button",{key:a,attrs:{theme:"primary",text:""},on:{click:function(e){return t.dealTaskSlider(n.row,"SEE")}}},[t._v("\n              "+t._s(t.$t("m.task['查看']"))+"\n            ")]):t._e()]})),t._v(" "),t.isShowJumpIcon(n.row)?e("i",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips",value:"DEVOPS"===n.row.component_type?t.$t("m.tickets['前往蓝盾']"):t.$t("m.tickets['前往标准运维']"),expression:"\n              props.row.component_type === 'DEVOPS'\n                ? $t(`m.tickets['前往蓝盾']`)\n                : $t(`m.tickets['前往标准运维']`)\n            "}],staticClass:"bk-itsm-icon icon-itsm-icon-three-seven icon-open-sops",on:{click:function(e){return e.stopPropagation(),t.onJumpToSopsClick(n.row)}}}):t._e()]}}])})],1)],1),t._v(" "),e("bk-sideslider",{attrs:{"is-show":t.createInfo.isShow,title:t.createInfo.isAdd?t.$t("m.task['创建任务']"):this.$t("m.task['编辑任务']"),"quick-close":!0,"before-close":()=>{t.closeSideslider("newTask")},width:800},on:{"update:isShow":function(e){return t.$set(t.createInfo,"isShow",e)},"update:is-show":function(e){return t.$set(t.createInfo,"isShow",e)}}},[e("div",{staticStyle:{"min-height":"300px"},attrs:{slot:"content"},slot:"content"},[t.createInfo.isShow?e("new-task",{ref:"newTask",attrs:{"node-info":t.nodeInfo,"basic-infomation":t.ticketInfo,"item-content":t.createInfo.taskInfo},on:{closeSlider:function(e){t.createInfo.isShow=!1},getTaskList:t.getTaskList}}):t._e()],1)]),t._v(" "),e("bk-sideslider",{attrs:{"is-show":t.dealTaskInfo.show,"quick-close":!0,width:800},on:{"update:isShow":function(e){return t.$set(t.dealTaskInfo,"show",e)},"update:is-show":function(e){return t.$set(t.dealTaskInfo,"show",e)}}},[e("div",{attrs:{slot:"header"},slot:"header"},[t.dealTaskInfo.show?e("task-handle-trigger",{attrs:{"task-info":t.dealTaskInfo.itemContent,title:t.dealTaskInfo.title,"show-status":!0},on:{"close-slider":function(e){t.dealTaskInfo.show=!1}}},[t.isShowJumpIcon(t.dealTaskInfo.itemContent)?e("div",{staticClass:"jump-to-other-system",attrs:{slot:"right-content"},on:{click:function(e){return e.stopPropagation(),t.onJumpToSopsClick(t.dealTaskInfo.itemContent)}},slot:"right-content"},[e("i",{staticClass:"bk-itsm-icon icon-itsm-icon-three-seven icon-open-sops"}),t._v(" "),"SOPS"===t.dealTaskInfo.itemContent.component_type?e("span",[t._v("\n            "+t._s(t.$t("m.tickets['前往标准运维查看详情']"))+"\n          ")]):t._e(),t._v(" "),"DEVOPS"===t.dealTaskInfo.itemContent.component_type?e("span",[t._v("\n            "+t._s(t.$t("m.tickets['前往蓝盾流水线查看详情']"))+"\n          ")]):t._e()]):t._e()]):t._e()],1),t._v(" "),e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.dealTaskInfo.addLoading},expression:"{ isLoading: dealTaskInfo.addLoading }"}],staticStyle:{height:"100%"},attrs:{slot:"content"},slot:"content"},[t.dealTaskInfo.show?["DEVOPS"===t.dealTaskInfo.itemContent.component_type&&["RUNNING","FINISHED","FAILED"].includes(t.dealTaskInfo.itemContent.status)&&"SEE"===t.dealTaskInfo.type?e("devops-execut-info",{attrs:{"task-info":t.dealTaskInfo.itemContent}}):e("deal-task",{attrs:{"deal-type":t.dealTaskInfo.type,"task-info":t.dealTaskInfo.itemContent,"basic-infomation":t.ticketInfo},on:{close:function(e){t.dealTaskInfo.show=!1},dealSuccess:t.dealSuccess}})]:t._e()],2)]),t._v(" "),e("bk-sideslider",{attrs:{"is-show":t.taskLibrary.show,title:t.$t("m.tickets['从任务库创建任务']"),"before-close":()=>{t.closeSideslider("taskLibrary")},"quick-close":!0,width:800},on:{"update:isShow":function(e){return t.$set(t.taskLibrary,"show",e)},"update:is-show":function(e){return t.$set(t.taskLibrary,"show",e)}}},[e("div",{staticStyle:{"min-height":"300px"},attrs:{slot:"content"},slot:"content"},[t.taskLibrary.show?e("task-library",{ref:"taskLibrary",attrs:{"ticket-info":t.ticketInfo,"node-info":t.nodeInfo},on:{close:t.handleTaskLibraryClose}}):t._e()],1)])],1)},a=[];i._withStripped=!0},nShD:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Field=e.getCustomTableDisplayValue=void 0;var i=r(n("GQeE")),a=r(n("iCc5")),s=r(n("V7oC")),o=n("ygAv");function r(t){return t&&t.__esModule?t:{default:t}}e.getCustomTableDisplayValue=function(t,e){var n=(0,o.deepClone)(e[t.key]);return!t||"multiselect"!==t.display&&"select"!==t.display?n:("string"==typeof n?[n]:n).map((function(e){var n=t.choice.find((function(t){return t.key===e||t.name===e}));return n?n.name:""})).join(",")},e.Field=function(){function t(e,n){(0,a.default)(this,t),this.prevId="",this.name="",this.type=e,this.regex="",this.regex_config={rule:{expressions:[],type:"and"}},this.customRegex="",this.source_type="",this.source_uri="",this.default_value="",this.layout="",this.validate="",this.desc="",this.is_tips="",this.tips="",this.show_type="",this.show_conditions={},this.setDefaultValue(n)}return(0,s.default)(t,[{key:"setDefaultValue",value:function(t){var e=this;(0,i.default)(t).forEach((function(n){e[n]=t[n]}))}}]),t}()},nVin:function(t,e,n){"use strict";n.r(e);var i=n("nmi9"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},nZ24:function(t,e,n){"use strict";n.r(e);var i=n("/hlf"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},nd0Z:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=L(n("14Xm")),a=L(n("D3Ub")),s=L(n("PaSM")),o=L(n("z1yn")),r=L(n("jub7")),c=L(n("Za/z")),l=L(n("u14n")),u=L(n("/KdC")),d=L(n("TNjk")),f=L(n("qyUP")),m=L(n("VrAx")),p=L(n("4K0D")),h=L(n("nxpg")),v=L(n("eOfU")),b=L(n("MBfY")),k=L(n("/Hw/")),g=L(n("Q3ZP")),_=L(n("Wl5c")),y=L(n("0njq")),I=L(n("+QRE")),w=L(n("070I")),C=L(n("gy7N")),S=L(n("IDfM")),T=n("CeR/");function L(t){return t&&t.__esModule?t:{default:t}}e.default={name:"fieldsRunning",inject:["reloadTicket"],components:{"CW-STRING":o.default,"CW-LINK":r.default,"CW-INT":c.default,"CW-TEXT":l.default,"CW-CHECKBOX":u.default,"CW-RADIO":d.default,"CW-SELECT":f.default,"CW-INPUTSELECT":m.default,"CW-MULTISELECT":p.default,"CW-DATE":h.default,"CW-DATETIME":v.default,"CW-MEMBER":b.default,"CW-MEMBERS":k.default,"CW-TABLE":g.default,"CW-CUSTOMTABLE":_.default,"CW-RICHTEXT":y.default,"CW-TREESELECT":I.default,"CW-FILE":w.default,"CW-CASCADE":C.default,"CW-CUSTOM-FORM":S.default},mixins:[s.default],props:{basicInfomation:{type:Object,default:function(){return{}}},fields:{type:Array,default:function(){return[]}},item:{type:Object,default:function(){return{}}}},data:function(){return{showMore:!1,showInfo:!0,fieldList:[{isEdit:!1,name:1,content:"qwsqw"},{isEdit:!1,name:2,content:"qw1q1qsqw"}],routerKey:+new Date,secondClick:!1,rotate:!1,marginTypeList:["TABLE","CUSTOMTABLE","FILE","RICHTEXT"]}},computed:{profile:function(){if(this.basicInfomation)return{name:this.basicInfomation.profile.name,phone:this.basicInfomation.profile.phone,department:this.basicInfomation.profile.departments?this.basicInfomation.profile.departments:[]}}},mounted:function(){var t=this;this.$set(this.item,"isEdit",!0),this.$nextTick((function(){t.reloadCurPage()})),this.$forceUpdate()},methods:{freshBtn:function(t,e){this.rotate=!this.rotate,this.freshApi(t,e,"field")},freshRpc:function(t){var e=this;this.$store.dispatch("apiRemote/getRpcData",t).then((function(e){t.choice=e.data,t.val=""})).catch((function(t){(0,T.errorHandler)(t,e)}))},submitTemplate:function(){var t=this,e=this.basicInfomation.id;this.fieldFormatting([this.item]);var n={field:{id:this.item.id,key:this.item.key,value:this.item.value,type:this.item.type}};this.secondClick||(this.secondClick=!0,this.$store.dispatch("basicModule/edit_field",{params:n,id:e}).then((function(){t.$bkMessage({message:t.$t('m.systemConfig["修改成功"]'),theme:"success"}),t.reloadTicket()})).catch((function(e){(0,T.errorHandler)(e,t)})).finally((function(){t.secondClick=!1,t.toDone()})))},reloadCurPage:function(){this.routerKey=+new Date},cancel:function(){this.fields.forEach((function(t){t.isEdit=!1})),this.$set(this.item,"isEdit",!1)},save:function(){var t=this;return(0,a.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"current_status"===t.item.key&&"True"===(n=t.item.choice.filter((function(e){return e.key===t.item.val}))[0]).is_over?t.$bkInfo({type:"warning",title:t.$t('m.systemConfig["确认保存？"]'),subTitle:t.$t('m.systemConfig["状态修改为【"]')+n.name+t.$t('m.systemConfig["】将导致整个单据结束"]'),confirmFn:function(){t.submitTemplate(),t.reloadTicket()}}):t.submitTemplate();case 1:case"end":return e.stop()}}),e,t)})))()},toDone:function(){var t=this;return(0,a.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$set(t.item,"isEdit",!1);case 2:case"end":return e.stop()}}),e,t)})))()}}}},nmi9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("QbLZ")),a=r(n("NPk7")),s=r(n("hftF")),o=n("ygAv");function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"ViewItem",components:{TagText:a.default,TagTable:s.default,RenderView:function(){return Promise.resolve().then(n.bind(null,"FCVG"))}},inject:["getContext"],props:{scheme:{type:Object,default:function(){return{}}},form:{type:Object,default:function(){return{}}},isTop:{type:Boolean,default:!1},topIndex:{type:Number}},data:function(){return{crumbsList:[],childrenViewConfig:{form_data:[]}}},computed:{componentType:function(){return"Tag"+this.scheme.type.replace(/^[a-z]/,(function(t){return t.toUpperCase()}))},currentDisplatCrumbs:function(){return this.crumbsList[this.crumbsList.length-1]||{label:"默认",form_data:[]}}},created:function(){this.appendCrumbsItem(this.form.label,this.form)},methods:{getAttrs:function(t){return(0,i.default)({},this.scheme.attrs,t)},appendCrumbsItem:function(t,e){this.crumbsList.push({label:t,form_data:(0,o.deepClone)(e)}),this.updateChildViewConfig()},getScheme:function(t){var e=this.getContext().schemes;return e[t.scheme]?e[t.scheme]:{}},onCrumbsClick:function(t){this.crumbsList=this.crumbsList.filter((function(e,n){return n<=t})),this.updateChildViewConfig()},updateChildViewConfig:function(){this.childrenViewConfig={form_data:(0,o.deepClone)(this.currentDisplatCrumbs.form_data)}}}}},"no//":function(t,e,n){"use strict";n("tafs")},nrD6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n("14Xm")),a=o(n("D3Ub")),s=o(n("efIh"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"RADIO",mixins:[s.default],props:{item:{type:Object,required:!0,default:function(){}},fields:{type:Array,default:function(){return[]}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{}},watch:{"item.val":function(){this.conditionField(this.item,this.fields)}},mounted:function(){var t=this;return(0,a.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.item.value&&!t.item.val&&(t.item.val=t.item.value),e.next=3,t.getFieldOptions(t.item);case 3:t.item.choice=e.sent,n=t.judgeValue(t.item.val,t.item.choice),t.item.val=n?t.item.val:"",t.conditionField(t.item,t.fields);case 7:case"end":return e.stop()}}),e,t)})))()},methods:{}}},nuXq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("2eEL"),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:"BasicCard",components:{collapseTransition:s.default},props:{showFoldTitle:{type:Boolean,default:!1},foldTitle:{type:String,default:""},firstUnfold:{type:Boolean,default:!0},cardLabel:{type:String,default:""},cardDesc:{type:String,default:""}},data:function(){return{showMore:!0}},watch:{isFold:{handler:function(){this.showMore=this.firstUnfold},immediate:!0}}}},nxpg:function(t,e,n){"use strict";n.r(e);var i=n("29mx"),a=n("Ha+5");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},"o1/R":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n("14Xm")),a=c(n("D3Ub")),s=c(n("efIh")),o=c(n("u8Ap")),r=c(n("EP+X"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"MEMBER",components:{memberSelect:o.default,businessCard:r.default},mixins:[s.default],props:{item:{type:Object,default:function(){return{}}},fields:{type:Array,default:function(){return[]}},isCurrent:{type:Boolean,default:!1}},data:function(){return{selectedItems:[]}},watch:{"item.val":function(){this.item.val&&(this.selectedItems=this.item.val?[this.item.val]:[]),this.conditionField(this.item,this.fields)},selectedItems:{handler:function(){this.item.val=this.selectedItems.join(",")}}},mounted:function(){var t=this;return(0,a.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.selectedItems=t.item.val?[t.item.val]:[],t.conditionField(t.item,t.fields);case 2:case"end":return e.stop()}}),e,t)})))()}}},o7Fe:function(t,e,n){"use strict";n.r(e);var i=n("Vmvk"),a=n("mjuI");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("1zRx");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"61b0b08d",null);e.default=r.exports},o8rv:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-timeline-contain"},[e("div",{staticClass:"bk-timeline-contain-va"},[t._l(t.lineList,(function(n,i){return[e("li",{key:i,class:{"bk-timeline-item":!0,"content-va-sign":"sign"===t.parent}},[e("div",{class:{"bk-timeline-item-head-va":!0,"head-va-sign":"sign"===t.parent,"head-va-sign-first":"sign"===t.parent&&!i}},[e("div",{staticClass:"bk-timeline-item-head"},[e("header",[t._t("header",null,{item:n})],2)])]),t._v(" "),e("div",{staticClass:"bk-timeline-item-content-va"},[e("div",{staticClass:"bk-timeline-item-content"},[e("main",[t._t("content",null,{item:n})],2)])])])]}))],2)])},a=[];i._withStripped=!0},oLmb:function(t,e,n){"use strict";n.r(e);var i=n("jN9s"),a=n("tWND");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("Zeye");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"6eca176e",null);e.default=r.exports},ofbo:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-new-task"},[e("h3",{staticClass:"setion-title"},[e("span",{staticClass:"setion-title-icon",on:{click:function(e){e.stopPropagation(),t.showTaskInfo=!t.showTaskInfo}}},[t.showTaskInfo?e("i",{staticClass:"bk-icon icon-angle-down"}):e("i",{staticClass:"bk-icon icon-angle-right"})]),t._v("\n    "+t._s(t.$t("m.task['任务信息']"))+"\n  ")]),t._v(" "),e("bk-form",{directives:[{name:"show",rawName:"v-show",value:t.showTaskInfo,expression:"showTaskInfo"}],ref:"addTask",staticClass:"task-info",attrs:{"label-width":200,"form-type":"vertical"}},[0!==t.nodeInfo.task_schemas.length?[e("bk-form-item",{staticClass:"half-width-item",attrs:{label:t.$t("m.task['任务模板']"),required:!0,property:"template"}},[e("bk-select",{attrs:{searchable:"",clearable:t.falseStatus,disabled:!!t.itemContent.id},on:{selected:t.selectTemplate},model:{value:t.formData.template,callback:function(e){t.$set(t.formData,"template",e)},expression:"formData.template"}},t._l(t.nodeInfo.task_schemas,(function(t){return e("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1),t._v(" "),t.checkInfo.template?e("p",{staticClass:"bk-task-error"},[t._v("\n          "+t._s(t.$t("m.task['任务模板为必填项']"))+"\n        ")]):t._e()],1)]:t._e(),t._v(" "),t.isComplexMembers?[e("bk-form-item",{attrs:{label:t.$t("m.task['处理人']"),required:!0,property:"processor"}},[e("deal-person",{ref:"personSelect",staticClass:"deal-person",attrs:{shortcut:!0,value:t.dealPersonData,"exclude-role-type-list":t.excludeTypeList}})],1)]:t._e()],2),t._v(" "),e("h3",{staticClass:"setion-title"},[e("span",{staticClass:"setion-title-icon",on:{click:function(e){e.stopPropagation(),t.showTemplateInfo=!t.showTemplateInfo}}},[t.showTemplateInfo?e("i",{staticClass:"bk-icon icon-angle-down"}):e("i",{staticClass:"bk-icon icon-angle-right"})]),t._v("\n    "+t._s(t.$t("m.tickets['模板信息']"))+"\n  ")]),t._v(" "),e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.fieldLoading},expression:"{ isLoading: fieldLoading }"},{name:"show",rawName:"v-show",value:t.showTemplateInfo,expression:"showTemplateInfo"}],staticClass:"bk-field-info"},[t.showField?e("field-info",{ref:"fieldInfo",attrs:{fields:t.fieldList,"basic-infomation":t.basicInfomation}}):t._e()],1),t._v(" "),e("div",{staticClass:"bk-submit-task",attrs:{slot:"footer"},slot:"footer"},[e("bk-button",{staticClass:"mr10",attrs:{theme:"primary",title:t.$t("m.task['确认']"),disabled:t.btnLoading||t.fieldLoading},on:{click:t.submitTask}},[t._v("\n      "+t._s(t.$t("m.task['确认']"))+"\n    ")]),t._v(" "),e("bk-button",{attrs:{theme:"default",disabled:t.btnLoading,title:t.$t("m.task['取消']")},on:{click:t.closeSlider}},[t._v("\n      "+t._s(t.$t("m.task['取消']"))+"\n    ")])],1)],1)},a=[];i._withStripped=!0},ohl0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n("14Xm")),a=o(n("D3Ub")),s=o(n("efIh"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"CHECKBOX",mixins:[s.default],props:{item:{type:Object,required:!0,default:function(){}},fields:{type:Array,default:function(){return[]}},isCurrent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{loading:!1,selects:[]}},watch:{"item.val":function(t){this.selects=""===t?[]:t.split(","),this.conditionField(this.item,this.fields)},"item.choice":{handler:function(){this.resetCheckboxGroupData()},deep:!0}},created:function(){var t=this;return(0,a.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFieldOptions(t.item,t.isPreview);case 2:t.item.choice=e.sent,n=t.judgeValue(t.item.val,t.item.choice),t.item.val=n?t.item.val:"",t.selects=""===t.item.val?[]:t.item.val.split(","),t.conditionField(t.item,t.fields),t.item.value&&!t.item.val&&(t.item.val=t.item.value);case 8:case"end":return e.stop()}}),e,t)})))()},methods:{selected:function(t){this.item.val=t.join(","),this.item.checkValue=!1},resetCheckboxGroupData:function(){var t=this,e=this.item.key;this.$refs[e]&&(this.$refs[e].checkboxItems=[],this.loading=!0,this.$nextTick((function(){t.loading=!1})))}}}},onwc:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATQAAACcCAYAAADxuVeoAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjMwNzg4MkU0NjZEMjExRTdCNUNERTU3NzJFRUNCMTdBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjMwNzg4MkU1NjZEMjExRTdCNUNERTU3NzJFRUNCMTdBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzA3ODgyRTI2NkQyMTFFN0I1Q0RFNTc3MkVFQ0IxN0EiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzA3ODgyRTM2NkQyMTFFN0I1Q0RFNTc3MkVFQ0IxN0EiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6E8KPvAAAjWUlEQVR42uxd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"},owsg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=f(n("QbLZ")),a=n("L2JU"),s=f(n("oLmb")),o=f(n("QYLf")),r=f(n("stwv")),c=f(n("JWjO")),l=f(n("S6UB")),u=f(n("mBl7")),d=f(n("KHQS"));function f(t){return t&&t.__esModule?t:{default:t}}e.default={name:"RightTiketTabs",components:{LogTab:s.default,AssociatedTab:o.default,InheritTicket:r.default,EmailNoticeTab:c.default,CommentTab:l.default,AllTaskTab:u.default,taskHistory:d.default},props:{ticketInfo:{type:Object,default:function(){return{}}},nodeList:{type:Array,default:function(){return[]}},hasNodeOptAuth:Boolean,isShowSla:Boolean},data:function(){return{activeTab:"log",isUseSla:!0,isResponseTimeout:!0,isDisposeTimeout:!1,isNormal:!1}},computed:(0,i.default)({},(0,a.mapState)({openFunction:function(t){return t.openFunction}})),methods:{viewSlaRule:function(){this.$router.push({name:"slaAgreement",query:{project_id:this.$route.query.project_id||0}})},viewProcess:function(t){this.$emit("viewProcess",t)}}}},p3oz:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n("gDS+")),a=o(n("GQeE")),s=o(n("QbLZ"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"webHookInfo",props:{nodeInfo:{type:Object,default:function(){return{}}}},data:function(){return{status:"",isFormData:!1}},computed:{queryList:function(){if("query_params"in this.nodeInfo.api_info.webhook_info){var t=this.nodeInfo.api_info.webhook_info.query_params,e=[];for(var n in t)e.push({key:n,value:t[n]});return e}return[]},bodyParams:function(){var t={raw:"",form:[]};if("body"in this.nodeInfo.api_info.webhook_info){var e=this.nodeInfo.api_info.webhook_info.body;"string"==typeof e&&(t.raw=e)}return(0,s.default)({},t)},variableList:function(){return"variables"in this.nodeInfo.api_info&&0!==(0,a.default)(this.nodeInfo.api_info.variables).length?this.nodeInfo.api_info.variables:[]}},mounted:function(){this.status=this.nodeInfo.status},methods:{convertValue:function(t){return null===t?"--":(0,i.default)(t)}}}},p8PZ:function(t,e,n){},pIur:function(t,e,n){"use strict";n.r(e);var i=n("h42h"),a=n("d88Z");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("4855");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"66cb2bb8",null);e.default=r.exports},pLkd:function(t,e,n){"use strict";n("Z/e7")},pRDg:function(t,e,n){},pRHh:function(t,e,n){"use strict";n.r(e);var i=n("CBo5"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},phV7:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-get-param"},[e("bk-table",{attrs:{data:t.tableList,size:"small"}},[e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['名称']"),"min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("div",{staticClass:"bk-more"},[e("span",{style:{paddingLeft:20*n.row.level+"px"}},[n.row.has_children?e("span",{class:["bk-icon","tree-expanded-icon",n.row.showChildren?"icon-down-shape":"icon-right-shape"],on:{click:function(e){return t.changeState(n.row)}}}):e("span",{staticClass:"bk-icon bk-more-icon"}),t._v(" "),e("span",[t._v(t._s(n.row.key||"--"))])])])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['类型']"),prop:"type"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['是否必须']")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.is_necessary?t.$t('m.treeinfo["是"]'):t.$t('m.treeinfo["否"]'))+"\n            ")]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['备注']"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{attrs:{title:n.row.desc}},[t._v(t._s(n.row.desc||"--"))])]}}])}),t._v(" "),t.isStatic?e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['参数值']"),width:"270"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.customValue||"--")+"\n            ")]}}],null,!1,4172783685)}):t.isCustom?e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['参数值']"),width:"270"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("bk-input",{staticClass:"bk-respone-input",attrs:{clearable:!0,type:"text",placeholder:t.$t("m.treeinfo['请输入参数值']")},model:{value:n.row.customValue,callback:function(e){t.$set(n.row,"customValue",e)},expression:"props.row.customValue"}})]}}])}):e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['引用为全局变量']"),width:"300"},scopedSlots:t._u([{key:"default",fn:function(n){return[n.row.isSelectAbled?[e("bk-checkbox",{staticStyle:{width:"40px",position:"absolute",top:"12px",left:"15px"},attrs:{"true-value":t.trueStatus,"false-value":t.falseStatus,disabled:n.row.isSelectedKeyDisabled},on:{change:function(e){return t.selectOneKey(n.row)}},model:{value:n.row.isSelectedKey,callback:function(e){t.$set(n.row,"isSelectedKey",e)},expression:"props.row.isSelectedKey"}}),t._v(" "),e("bk-input",{staticClass:"bk-respone-input",class:{"bk-border-error":n.row.isCheck&&!n.row.isSelectedValue.toString()},attrs:{clearable:!0,type:"text",placeholder:t.$t("m.treeinfo['请输入变量名']"),disabled:n.row.isSelectedValueDisabled},model:{value:n.row.isSelectedValue,callback:function(e){t.$set(n.row,"isSelectedValue",e)},expression:"props.row.isSelectedValue"}})]:[e("span",[t._v("--")])]]}}])})],1)],1)},a=[];i._withStripped=!0},pnfo:function(t,e,n){"use strict";n.r(e);var i=n("ucVW"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},ptjD:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"customTableData",props:{customTableInfo:{type:Object,default:function(){return{}}}},data:function(){return{typeList:[{id:"input",name:this.$t('m.treeinfo["输入框"]')},{id:"select",name:this.$t('m.treeinfo["单选框"]')},{id:"multiselect",name:this.$t('m.treeinfo["多选框"]')},{id:"datetime",name:this.$t('m.treeinfo["时间"]')},{id:"date",name:this.$t('m.treeinfo["日期"]')}],trueStatus:!0,falseStatus:!1}},computed:{globalChoise:function(){return this.$store.state.common.configurInfo}},mounted:function(){},methods:{addTableData:function(t,e){this.customTableInfo.list.splice(e+1,0,{name:"",display:"input",choice:"",required:!1})},reduceTableData:function(t,e){1!==this.customTableInfo.list.length&&this.customTableInfo.list.splice(e,1)}}}},"q+Zq":function(t,e,n){"use strict";n.r(e);var i=n("o8rv"),a=n("eaHi");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("nMQ0");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"23d28b56",null);e.default=r.exports},"q//X":function(t,e,n){"use strict";n("Sy6k")},q090:function(t,e,n){"use strict";n("Utxi")},q4Iw:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{class:["tag-text",{"active-link":t.hasChildren}],on:{click:t.onClick}},[Array.isArray(t.value)?e("div",t._l(t.value,(function(n,i){return e("p",{key:i,staticClass:"text-block"},[n.label?e("label",{staticClass:"label"},[t._v("\n        "+t._s(n.label)+"\n        "),n.desc||t.desc?e("i",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips",value:n.desc||t.desc,expression:"item.desc || desc"}],staticClass:"bk-itsm-icon icon-itsm-icon-help"}):t._e()]):t._e(),t._v(" "),e("span",{staticClass:"value"},[t._v(t._s(n.value))])])})),0):e("p",[t.label?e("label",{staticClass:"label"},[t._v("\n      "+t._s(t.label)+"\n      "),t.desc?e("i",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips",value:t.desc,expression:"desc"}],staticClass:"bk-itsm-icon icon-itsm-icon-help"}):t._e()]):t._e(),t._v(" "),e("span",{staticClass:"value"},[t._v(t._s(t.value))])])])},a=[];i._withStripped=!0},q9fp:function(t,e,n){"use strict";n.r(e);var i=n("UljE"),a=n("5Pf/");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("wSaC");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"165fa2cc",null);e.default=r.exports},qCK4:function(t,e,n){"use strict";n.r(e);var i=n("hmS1"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},qCVH:function(t,e,n){},qJoz:function(t,e,n){"use strict";n.r(e);var i=n("SioU"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},qTC0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n("ga4Z")),a=c(n("3jdt")),s=c(n("kKPr")),o=n("CeR/"),r=c(n("iVi/"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"TicketHeader",components:{StepSubmitDialog:s.default,TicketTriggerDialog:i.default,EvaluationTicketModal:a.default},props:{ticketInfo:{type:Object,default:function(){return{}}},headerInfo:{type:Object,default:function(){return{}}},ticketTriggerList:{type:Array,default:function(){return{}}}},data:function(){return{isSubmitting:!1,hasAttention:!1,rotate:!1,isDropdownShow:!1,disabledText:this.$t('m.newCommon["暂无权限或单据已结束"]'),ticketOperateType:"",localeCookie:!1}},mounted:function(){this.initData(),this.localeCookie="zh-cn"!==r.default.parse(document.cookie).blueking_language},methods:{initData:function(){this.hasAttention=!!this.ticketInfo.followers&&this.ticketInfo.followers.some((function(t){return t===window.username}))},onAttention:function(){var t=this,e=this.ticketInfo.id,n={attention:!this.hasAttention},i=this.hasAttention?this.$t("m.manageCommon['取消关注成功']"):this.$t("m.manageCommon['添加关注成功']");this.$store.dispatch("deployOrder/setAttention",{params:n,id:e}).then((function(){t.$bkMessage({message:i,theme:"success",ellipsisLine:0}),t.hasAttention=!t.hasAttention})).catch((function(e){t.$bkMessage({message:e.data.msg,theme:"error",ellipsisLine:0})}))},onTicketBtnClick:function(t,e){switch(this.$refs.dropdown.hide(),t){case"print":var n=this.$router.resolve({path:"/printOrder?ticket_id="+this.ticketInfo.id}).href;window.open(n,"_blank");break;case"trigger":this.openTriggerDialog(e);break;case"comment":this.$refs.evaluationModal.show();break;case"service":this.JumpCurTicketService();break;default:this.ticketOperatingHandler(t)}},JumpCurTicketService:function(){var t=this;this.$store.dispatch("service/getServiceDetail",this.ticketInfo.service_id).then((function(e){if(e.result){var n=t.$router.resolve({path:"/project/service/edit/basic",query:{project_id:t.$store.state.project.id,serviceId:t.ticketInfo.service_id}});window.open(n.href,"_blank")}}))},ticketOperatingHandler:function(t){var e=this;"widthdraw"!==t&&"supervise"!==t||this.confirmOperating(t),"suspend"!==t&&"close"!==t&&"restore"!==t||(this.ticketOperateType=t,this.$nextTick((function(){e.$refs.ticketOperate.openCel()})))},confirmOperating:function(t){var e=this,n={widthdraw:{title:this.$t('m.newCommon["确认撤销此单据？"]'),instructions:this.$t('m.newCommon["撤销后，您仍然可以在“我的申请单”中查看单据信息。"]'),dispatchAcationPath:"deployOrder/widthdrawOrder",successText:this.$t('m.newCommon["撤单成功"]'),params:{state_id:this.ticketInfo.id}},supervise:{title:this.$t('m.newCommon["确认催办该节点？"]'),instructions:this.$t('m.newCommon["执行催办操作后，将发送信息至处理人。"]'),dispatchAcationPath:"change/submitSupervise",successText:this.$t('m.newCommon["催办成功"]'),params:{}}};this.$bkInfo({type:"warning",title:n[t].title,subTitle:n[t].instructions,confirmFn:function(){e.submitOperating(t,n)}})},submitOperating:function(t,e){var n=this;this.isSubmitting=!0;var i=this.ticketInfo.id,a=e[t],s=a.dispatchAcationPath,r=a.params,c=a.successText;this.$store.dispatch(s,{params:r,id:i}).then((function(){n.$bkMessage({message:c,theme:"success"}),n.reloadTicket()})).catch((function(t){(0,o.errorHandler)(t,n)})).finally((function(){n.isSubmitting=!1}))},openTriggerDialog:function(t){this.$refs.ticketTriggerDialog.openDialog(t)},reloadTicket:function(){this.$emit("reloadTicket")},triggerSuccessCallback:function(){this.reloadTicket()},onRefreshBtnClick:function(){var t=this;this.rotate=!this.rotate,setTimeout((function(){t.reloadTicket()}),500)},evaluationSubmitSuccess:function(){this.reloadTicket()},getDisabledContentText:function(t){return t?this.$t('m.newCommon["已评价"]'):this.$t('m.newCommon["单据处理未完成或没有评价权限，不能评价！"]')},onBackClick:function(){var t=this.$route.query.from||"";"projectTicket"===t||""===t?this.$router.push({name:"projectTicket",query:{project_id:this.$route.query.project_id}}):"created"===t?this.$router.push({name:"myCreatedTicket"}):this.$router.push({name:t})}}}},qVGl:function(t,e,n){"use strict";n.r(e);var i=n("dwEX"),a=n("LJsK");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("v4/x");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"7bd4ee96",null);e.default=r.exports},qgII:function(t,e,n){"use strict";n.r(e);var i=n("FbwU"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},qh2C:function(t,e,n){"use strict";n("B1hg")},qkdU:function(t,e,n){"use strict";n("xBbh")},qmm4:function(t,e,n){},qrHj:function(t,e,n){"use strict";n.r(e);var i=n("ZGum"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},quWS:function(t,e,n){"use strict";n.r(e);var i=n("Liz4"),a=n("01Jc");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("YwU9");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"fa85a66c",null);e.default=r.exports},qyFR:function(t,e,n){"use strict";n.r(e);var i=n("Kap0"),a=n("Y7d/");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("ls84");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"195e16dd",null);e.default=r.exports},qyUP:function(t,e,n){"use strict";n.r(e);var i=n("7V2o"),a=n("XUL0");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},"r+Sh":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isLoading},expression:"{ isLoading: isLoading }"}],staticClass:"bk-basic-node"},[e("basic-card",[e("bk-form",{ref:"webForm",attrs:{"label-width":150,model:t.formData,rules:t.rules,"form-type":"vertical"}},[t.isStatus?e("bk-form-item",{attrs:{label:t.$t("m['节点名称']"),"ext-cls":"bk-form-width bk-form-display",property:"name","error-display-type":"normal",required:""}},[e("bk-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1):t._e(),t._v(" "),e("desc-info",{model:{value:t.formData.desc,callback:function(e){t.$set(t.formData,"desc",e)},expression:"formData.desc"}}),t._v(" "),t.isStatus?e("bk-form-item",{attrs:{"data-test-id":"devops-component-processor",label:t.$t("m.treeinfo['处理人：']"),required:!0}},[e("div",{on:{click:function(e){t.checkStatus.processors=!1}}},[e("deal-person",{ref:"processors",attrs:{value:t.processorsInfo,"show-overbook":!0,"node-info":t.configur,"exclude-role-type-list":t.excludeProcessor}})],1)]):t._e(),t._v(" "),e("bk-form-item",{attrs:{label:"URL","ext-cls":"bk-form-display",required:"",property:"url","error-display-type":"normal"}},[e("bk-input",{ref:"urlInput",attrs:{clearable:!0,"font-size":"medium",placeholder:t.isStatus?t.$t("m['以http://或https://开头(引用变量忽略), 输入“{{”可选择引用变量']"):t.$t("m['请输入']"),disabled:t.disable},on:{change:t.handleUrlChange},model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}},[e("bk-dropdown-menu",{ref:"dropdown",staticClass:"group-text",attrs:{slot:"prepend","font-size":"medium"},on:{show:function(e){t.isDropdownShow=!0},hide:function(e){t.isDropdownShow=!1}},slot:"prepend"},[e("bk-button",{attrs:{slot:"dropdown-trigger",type:"primary"},slot:"dropdown-trigger"},[t._l(t.requestOptions,(function(n,i){return[t.curEq===n?e("span",{key:i},[t._v(t._s(n))]):t._e()]})),t._v(" "),e("i",{class:["bk-icon icon-angle-down",{"icon-flip":t.isDropdownShow}]})],2),t._v(" "),e("ul",{staticClass:"bk-dropdown-list",attrs:{slot:"dropdown-content"},slot:"dropdown-content"},t._l(t.requestOptions,(function(n,i){return e("li",{key:i},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.selectRequsetOpt(n)}}},[t._v(t._s(n))])])})),0)],1)],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.filterVariableList.length,expression:"filterVariableList.length !== 0"}],staticClass:"select-variables"},[e("ul",t._l(t.filterVariableList,(function(n,i){return e("li",{key:i,on:{click:function(e){return t.handleSelectContent(n)}}},[t._v("\n              "+t._s(n.name)+"\n              "),e("span",{staticClass:"variable-key"},[t._v("("+t._s(n.key)+")")])])})),0)])],1),t._v(" "),e("bk-form-item",{attrs:{"ext-cls":"bk-form-display"}},[e("div",{staticClass:"requset-config"},[e("request-config",{ref:"requestConfig",attrs:{type:t.curEq,configur:t.configur,"is-status":t.isStatus,"state-list":t.stateList,disable:t.disable},on:{changeFormStatus:t.changeFormStatus}}),t._v(" "),t.errorTip?e("p",{staticClass:"error-tip"},[t._v(t._s(t.$t("m['已选参数的字段名和值不能为空']")))]):t._e()],1)]),t._v(" "),e("bk-form-item",{attrs:{label:t.$t("m['成功条件']"),"ext-cls":"bk-form-display"}},[e("bk-input",{attrs:{disabled:t.disable,placeholder:t.$t("m['输入你所要的条件，如： resp.result==ture 或者 false']")},model:{value:t.formData.success_exp,callback:function(e){t.$set(t.formData,"success_exp",e)},expression:"formData.success_exp"}})],1),t._v(" "),t.isStatus?e("bk-form-item",{attrs:{label:t.$t("m['返回变量']"),"ext-cls":"bk-form-display"}},[e("bk-table",{attrs:{data:t.returnReslut,size:"small"}},[e("bk-table-column",{attrs:{label:t.$t("m['变量名称']")},scopedSlots:t._u([{key:"default",fn:function(n){return[e("bk-input",{attrs:{behavior:"simplicity",disabled:t.disable},on:{change:function(e){return t.changeReturnInput(n.row,n.$index)}},model:{value:n.row.name,callback:function(e){t.$set(n.row,"name",e)},expression:"props.row.name"}})]}}],null,!1,1214002578)}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m['来源']")},scopedSlots:t._u([{key:"default",fn:function(n){return[e("bk-input",{attrs:{behavior:"simplicity",disabled:t.disable,placeholder:t.$t("m['输入变量来源，如：resp.message']")},on:{change:function(e){return t.changeReturnInput(n.row,n.$index)}},model:{value:n.row.ref_path,callback:function(e){t.$set(n.row,"ref_path",e)},expression:"props.row.ref_path"}})]}}],null,!1,183365448)}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m['操作']"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(n){return t.disable||t.isShowDelete===t.returnReslut.indexOf(n.row)?void 0:[e("i",{staticClass:"bk-itsm-icon icon-flow-other-add result-icon",on:{click:t.addReturnReslut}}),t._v(" "),e("i",{staticClass:"bk-itsm-icon icon-flow-other-reduc result-icon",class:{"no-delete":t.retrunResultIsEmtry},on:{click:function(e){return t.deleteReturnReslut(n.row)}}})]}}],null,!0)})],1)],1):t._e()],1),t._v(" "),t.isStatus?e("common-trigger-list",{ref:"commonTriggerList",attrs:{origin:"state","node-type":t.configur.type,"source-id":t.flowInfo.id,sender:t.configur.id,table:t.flowInfo.table}}):t._e(),t._v(" "),t.isStatus?e("div",{staticClass:"mt20",staticStyle:{"font-size":"0"}},[e("bk-button",{staticClass:"mr10",attrs:{theme:"primary","data-test-id":"devops-button-submit",title:t.$t("m.treeinfo['确定']"),loading:t.secondClick},on:{click:t.submit}},[t._v("\n        "+t._s(t.$t("m.treeinfo['确定']"))+"\n      ")]),t._v(" "),e("bk-button",{staticClass:"mr10",attrs:{theme:"default","data-test-id":"devops-button-close",title:t.$t("m.treeinfo['取消']")},on:{click:t.closeNode}},[t._v("\n        "+t._s(t.$t("m.treeinfo['取消']"))+"\n      ")])],1):t._e()],1)],1)},a=[];i._withStripped=!0},"r/L1":function(t,e,n){"use strict";n("/7qM")},r4nQ:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-derive"},[e("p",{staticClass:"bk-ticket-title"},[t._v(t._s(t.$t("m.manageCommon['关联类型']")))]),t._v(" "),e("div",{staticClass:"bk-ticket-content"},[e("bk-radio-group",{on:{change:t.clearFieldList},model:{value:t.typeSelected,callback:function(e){t.typeSelected=e},expression:"typeSelected"}},[t._l(t.typeSelectRadio,(function(n){return[e("bk-radio",{key:n.key,staticClass:"mr20",attrs:{value:n.key}},[t._v(t._s(n.name))])]}))],2)],1),t._v(" "),"associate"===t.typeSelected?[e("p",{staticClass:"bk-ticket-title"},[t._v("\n      "+t._s(t.$t('m.manageCommon["可关联的列表"]'))+"\n    ")]),t._v(" "),e("div",{staticClass:"bk-ticket-content"},[e("div",{staticClass:"bk-content-search"},[e("bk-select",{staticStyle:{width:"200px",float:"left","margin-right":"10px"},attrs:{searchable:"","font-size":"medium",multiple:"",placeholder:t.$t("m.serviceConfig['服务类型']")},on:{toggle:t.serviceSearch,clear:t.clearSearch},model:{value:t.searchInfo.serviceType,callback:function(e){t.$set(t.searchInfo,"serviceType",e)},expression:"searchInfo.serviceType"}},t._l(t.serviceTypeList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1),t._v(" "),e("bk-input",{staticStyle:{width:"200px",float:"left"},attrs:{placeholder:t.$t("m.manageCommon['请输入标题/单号']"),clearable:!0,"right-icon":"bk-icon icon-search"},on:{enter:t.getList,clear:t.clearInfo},model:{value:t.searchInfo.keyword,callback:function(e){t.$set(t.searchInfo,"keyword",e)},expression:"searchInfo.keyword"}})],1),t._v(" "),e("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isTableLoading},expression:"{ isLoading: isTableLoading }"}],attrs:{data:t.tabShowList,size:"small",pagination:t.pagination},on:{"page-change":t.handlePageChange,"page-limit-change":t.handlePageLimitChange,"select-all":t.handleSelectAll,select:t.handleSelect}},[e("bk-table-column",{attrs:{type:"selection",width:"60",align:"center",selectable:t.disabledFn}}),t._v(" "),e("bk-table-column",{attrs:{type:"index",label:"No.",align:"center",width:"60"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.newCommon['单号']"),"min-width":"140","render-header":t.$renderHeader},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticClass:"bk-lable-primary",attrs:{title:n.row.sn},on:{click:function(e){return t.checkOne(n.row)}}},[t._v("\n              "+t._s(n.row.sn)+"\n            ")])]}}],null,!1,2437289606)}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.manageCommon['标题']"),"min-width":"120","show-overflow-tooltip":!0,"render-header":t.$renderHeader},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{attrs:{title:n.row.title}},[t._v("\n              "+t._s(n.row.title||"--")+"\n            ")])]}}],null,!1,3983964110)}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.manageCommon['提单人']"),"show-overflow-tooltip":!0,"render-header":t.$renderHeader,prop:"creator"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.manageCommon['提单时间']"),"show-overflow-tooltip":!0,"render-header":t.$renderHeader,prop:"create_at"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.manageCommon['状态']"),"show-overflow-tooltip":!0,"render-header":t.$renderHeader,"min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticClass:"bk-status-color-info",style:t.getstatusColor(n.row),attrs:{title:n.row.current_status_display}},[t._v("\n              "+t._s(n.row.current_status_display||"--")+"\n            ")])]}}],null,!1,705899897)}),t._v(" "),e("div",{staticClass:"empty",attrs:{slot:"empty"},slot:"empty"},[e("empty",{attrs:{"is-error":t.listError},on:{onRefresh:function(e){return t.getList()}}})],1)],1)],1),t._v(" "),e("div",{staticClass:"bk-ticket-button"},[e("bk-button",{staticClass:"mr10",attrs:{theme:"primary",loading:t.buttonDisabled,disabled:!t.checkList.length,title:t.$t("m.treeinfo['提交']")},on:{click:t.bindTicket}},[t._v("\n        "+t._s(t.$t('m.treeinfo["提交"]'))+"\n      ")]),t._v(" "),e("bk-button",{attrs:{theme:"default",disabled:t.buttonDisabled,title:t.$t("m.treeinfo['取消']")},on:{click:t.closeOpen}},[t._v("\n        "+t._s(t.$t('m.treeinfo["取消"]'))+"\n      ")])],1)]:[e("select-service",{ref:"SelectService",attrs:{"custom-id":t.customId,"is-get-field":t.isGetField},on:{getFieldList:t.getFieldList}}),t._v(" "),e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.showField||!t.fieldList.length},expression:"{ isLoading: showField || !fieldList.length }"}]},[e("p",{staticClass:"bk-ticket-title mt20"},[t._v("\n        "+t._s(t.$t('m.manageCommon["单据信息"]'))+"\n      ")]),t._v(" "),e("div",{staticClass:"bk-ticket-content",staticStyle:{"min-height":"50px"}},[e("field-info",{ref:"fieldInfo",attrs:{fields:t.fieldList}})],1),t._v(" "),e("div",{staticClass:"mt20"},[e("bk-button",{staticClass:"mr10",attrs:{theme:"primary",loading:t.buttonDisabled,title:t.$t("m.treeinfo['提交']")},on:{click:t.setFields}},[t._v("\n          "+t._s(t.$t('m.treeinfo["提交"]'))+"\n        ")]),t._v(" "),e("bk-button",{attrs:{theme:"default",disabled:t.buttonDisabled,title:t.$t("m.treeinfo['取消']")},on:{click:t.closeOpen}},[t._v("\n          "+t._s(t.$t('m.treeinfo["取消"]'))+"\n        ")])],1)])]],2)},a=[];i._withStripped=!0},r6F3:function(t,e,n){"use strict";n.r(e);var i=n("cqwU"),a=n("UHza");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("0aAG"),n("xBhy");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"ae393052",null);e.default=r.exports},rMih:function(t,e,n){"use strict";n.r(e);var i=n("Om//"),a=n("ioCs");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("x+Aj");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"0efaed49",null);e.default=r.exports},rOlX:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(n("P2sY")),a=n("CeR/"),s=l(n("/ojM")),o=l(n("xl+m")),r=l(n("T3vI")),c=l(n("ukIK"));function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"TicketTriggerDialog",components:{sendMessage:o.default,apiCall:r.default,changeConductor:c.default,modifyField:s.default},props:{item:{type:Object,default:function(){}}},data:function(){return{isTrigger:!1,trigger:"",checkedbox:!1,errorTip:!1,info:{show:!1,status:"loading",title:"loading…",subTitle:""}}},computed:{isshowForm:function(){return this.item||!1}},methods:{openDialog:function(t){this.isTrigger=!0,this.trigger=t},refechTicket:function(){this.$store.commit("taskHistoryRefreshFunc"),!this.trigger.need_refresh&&this.trigger.can_repeat||this.$emit("init-info")},getTriggerStatus:function(t){var e=this;this.$store.dispatch("ticket/getTriggerStatus",t).then((function(n){if(["FAILED","SUCCEED"].includes(n.data.status))e.info.title=n.data.status_name,e.info.status="FAILED"===n.data.status?"error":"success";else{var i=setTimeout((function(){e.getTriggerStatus(t)}),1e3);e.$once("hook:beforeDestroy",(function(){clearInterval(i)}))}}))},checkInfo:function(){var t=this,e=!1;return"api"===this.item.key?this.item.wayInfo.field_schema.forEach((function(t){if("req_params"===t.key)for(var n in t.value)Array.isArray(t.value[n])?t.value[n].forEach((function(t){""===t.value&&(e=!0)})):""===t.value&&(e=!0);else""===t.value&&(e=!0)})):this.item.field_schema.forEach((function(n){"SUBCOMPONENT"===n.type?(n.sub_components.some((function(t){return t.checked}))||(t.checkedbox=t.$t("m['至少勾选一项']")),n.sub_components.forEach((function(t){t.checked&&t.field_schema.forEach((function(t){"MEMBERS"===t.type||"MULTI_MEMBERS"===t.type?0!==t.value[0].value.length&&""!==t.key||(e=!0):""===t.value&&(e=!0)}))}))):n.required&&("MEMBERS"===n.type||"MULTI_MEMBERS"===n.type?n.value.forEach((function(t){0!==t.value.length&&""!==t.key||(e=!0)})):""===n.value&&(e=!0))})),e},executeTrigger:function(){var t=this;if(this.errorTip=!1,this.checkInfo()||this.checkedbox)this.errorTip=!0;else{var e={params:[]};"api"===this.item.key?this.item.wayInfo.field_schema.forEach((function(n){if("api_source"===n.key)e.params.push({key:n.key,value:n.apiId});else{var i={key:n.key,value:{}};i.value=t.treeToJson(n.apiContent.bodyTableData.filter((function(t){return!t.level}))),e.params.push(i)}})):this.item.field_schema.forEach((function(t){if("SUBCOMPONENT"===t.type){var n={key:t.key,sub_components:[]};t.sub_components.forEach((function(t){if(t.checked){var e={key:t.key,params:[]};t.field_schema.forEach((function(t){var n=[];if("MULTI_MEMBERS"===t.type||"MEMBERS"===t.type){var i={};i.ref_type=t.referenceType,i.value={member_type:t.value[0].key,members:t.value[0].value.toString()},n.push(i)}else n=t.value;var a={key:t.key,value:n,ref_type:t.referenceType};e.params.push(a)})),n.sub_components.push(e)}})),e.params.push(n)}else{var i=[];if("MEMBERS"===t.type){var a={};a.ref_type=t.referenceType,a.value={member_type:t.value[0].key,members:t.value[0].value.toString()},i.push(a)}else i=t.value;var s={key:t.key,value:i,ref_type:t.referenceType};e.params.push(s)}})),this.$store.dispatch("trigger/executeTrigger",{params:e,id:this.trigger.id}).then((function(e){e.result&&(t.info.show=!0,t.getTriggerStatus(e.data.action_id))})).catch((function(e){(0,a.errorHandler)(e,t)})).finally((function(){t.isTrigger=!1}))}},treeToJson:function(t){var e={},n=function t(e,n,a,s){if(n.key)if("array"===n.type){if("array"===s)for(var o in e.push([]),n.children)t(e[e.length-1],n.children[o],1,"array");if("object"===s){var r={};for(var c in r[n.key]=[],(0,i.default)(e,r),n.children)t(e[n.key],n.children[c],1,"array")}}else if("object"===n.type){var l={};if("array"===s)for(var u in e.push(l),n.children)t(e[e.length-1],n.children[u],1,"object");if("object"===s)for(var d in l[n.key]={},(0,i.default)(e,l),n.children)t(e[n.key],n.children[d],1,"object")}else{if("number"===n.type&&(n.value=Number(n.value)),"array"===s){var f={is_leaf:"object"!==n.type&&"array"!==n.type,ref_type:"CUSTOM"===n.source_type?"custom":"reference",value:"CUSTOM"===n.source_type?n.value:n.value_key};e.push(f)}if("object"===s){var m={};m[n.key]={is_leaf:"object"!==n.type&&"array"!==n.type,ref_type:"CUSTOM"===n.source_type?"custom":"reference",value:"CUSTOM"===n.source_type?n.value:n.value_key},(0,i.default)(e,m)}}};for(var a in t)n(e,t[a],0,"object");return e},confirmTrigger:function(){this.executeTrigger()}}}},rW75:function(t,e,n){"use strict";n.r(e);var i=n("Ykh+"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},rcsN:function(t,e,n){},rrYd:function(t,e,n){"use strict";n.r(e);var i=n("ISfy"),a=n("JSRh");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("C4jB");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"0295a5ad",null);e.default=r.exports},rsoA:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading},expression:"{ isLoading: loading }"}],staticClass:"bk-task-history",style:t.isShowSla?"height: calc(100vh - 320px);":"height: calc(100vh - 436px);"},[e("div",{staticClass:"history-table"},[e("bk-collapse",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("bk-collapse-item",{attrs:{name:"ticket"}},[t._v("\n        "+t._s(t.$t("m['单据触发器']"))+"\n        "),e("div",{staticClass:"f13",attrs:{slot:"content"},slot:"content"},[e("bk-table",{attrs:{"header-cell-attributes":t.headerCellAttributes,data:t.ticketAction,size:"small"},on:{"sort-change":t.orderingClick}},[e("bk-table-column",{attrs:{label:t.$t("m.task['执行时间']"),"render-header":t.$renderHeader,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{attrs:{title:n.row.end_time}},[t._v("\n                  "+t._s(n.row.end_time||"--")+"\n                ")])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['响应动作']"),"render-header":t.$renderHeader,"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticStyle:{color:"#3A84FF",cursor:"pointer"},attrs:{title:n.row.display_name},on:{click:function(e){return t.openDetail(n.row)}}},[t._v("\n                  "+t._s(n.row.component_name||"--")+"\n                ")])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['执行状态']"),"render-header":t.$renderHeader,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticClass:"bk-status-success",class:{"bk-status-failed":"FAILED"===n.row.status},attrs:{title:n.row.status_name}},[t._v("\n                  "+t._s(n.row.status_name||"--")+"\n                ")])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['操作人']"),"render-header":t.$renderHeader,"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{attrs:{title:n.row.operator_username}},[t._v("\n                  "+t._s(n.row.operator_username||"--")+"\n                ")])]}}])}),t._v(" "),e("div",{staticClass:"empty",attrs:{slot:"empty"},slot:"empty"},[e("empty",{attrs:{"is-error":t.listError},on:{onRefresh:function(e){return t.getHistoryList()}}})],1)],1)],1)]),t._v(" "),t._l(t.nodeActions,(function(n){return e("bk-collapse-item",{key:n.name,attrs:{name:n.name}},[t._v("\n        "+t._s(t.$t("m['节点']")+"："+n.name)+"\n        "),e("div",{staticClass:"f13",attrs:{slot:"content"},slot:"content"},[e("bk-table",{attrs:{data:n.actions,size:"small"},on:{"sort-change":t.orderingClick}},[e("bk-table-column",{attrs:{label:t.$t("m.task['执行时间']"),"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{attrs:{title:n.row.end_time}},[t._v("\n                  "+t._s(n.row.end_time||"--")+"\n                ")])]}}],null,!0)}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['响应动作']"),"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticStyle:{color:"#3A84FF",cursor:"pointer"},attrs:{title:n.row.display_name},on:{click:function(e){return t.openDetail(n.row)}}},[t._v("\n                  "+t._s(n.row.component_name||"--")+"\n                ")])]}}],null,!0)}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['执行状态']"),"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticClass:"bk-status-success",class:{"bk-status-failed":"FAILED"===n.row.status},attrs:{title:n.row.status_name}},[t._v("\n                  "+t._s(n.row.status_name||"--")+"\n                ")])]}}],null,!0)}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.task['操作人']"),"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{attrs:{title:n.row.operator_username}},[t._v("\n                  "+t._s(n.row.operator_username||"--")+"\n                ")])]}}],null,!0)}),t._v(" "),e("div",{staticClass:"empty",attrs:{slot:"empty"},slot:"empty"},[e("empty",{attrs:{"is-error":t.listError},on:{onRefresh:function(e){return t.getHistoryList()}}})],1)],1)],1)])}))],2)],1),t._v(" "),e("bk-sideslider",{attrs:{"is-show":t.historyDetail.isShow,title:t.historyDetail.title,width:t.historyDetail.width,"quick-close":!0},on:{"update:isShow":function(e){return t.$set(t.historyDetail,"isShow",e)},"update:is-show":function(e){return t.$set(t.historyDetail,"isShow",e)}}},[e("div",{attrs:{slot:"content"},slot:"content"},[t.historyDetail.isShow?e("history-detail",{attrs:{"history-id":t.historyDetail.id,"basic-infomation":t.basicInfomation,"node-id-map":t.nodeIdMap,"node-list":t.nodeList}}):t._e()],1)])],1)},a=[];i._withStripped=!0},s4tT:function(t,e,n){"use strict";n.r(e);var i=n("/JtJ"),a=n("b/Aw");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("/m8X");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"b8a5ec4c",null);e.default=r.exports},sHh5:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return t.item.showFeild?e("div",[e("bk-form-item",{attrs:{label:t.item.name,required:"REQUIRE"===t.item.validate_type,desc:t.item.tips,"desc-type":"icon"}},[e("bk-select",{class:{"bk-border-error":t.item.checkValue},attrs:{searchable:"","search-with-pinyin":!0,disabled:t.item.is_readonly&&!t.isCurrent||t.disabled,placeholder:t.item.desc,"font-size":"medium"},on:{selected:t.selected,toggle:function(e){t.item.checkValue=!1}},model:{value:t.item.val,callback:function(e){t.$set(t.item,"val",e)},expression:"item.val"}},[t._l(t.options,(function(n){return e("bk-option",{key:n.key,staticClass:"custom-option",attrs:{id:n.key,name:n.name}},[e("span",[t._v(t._s(n.name))]),t._v(" "),n.can_delete?e("i",{staticClass:"bk-icon icon-close",on:{click:function(e){return e.stopPropagation(),t.handleDeleteOption(n.key)}}}):t._e()])})),t._v(" "),e("div",{attrs:{slot:"extension"},slot:"extension"},[e("div",{staticClass:"plus-content",on:{click:function(e){t.addStatus=!t.addStatus}}},[e("i",{staticClass:"bk-icon icon-plus-circle"}),t._v("新增\n        ")]),t._v(" "),t.addStatus?e("div",{staticClass:"add-status"},[e("bk-form-item",{attrs:{label:"name"}},[e("bk-input",{on:{blur:t.giveDefaultKey},model:{value:t.tempChoice.name,callback:function(e){t.$set(t.tempChoice,"name",e)},expression:"tempChoice.name"}})],1),t._v(" "),e("bk-form-item",{attrs:{label:"key"}},[e("bk-input",{model:{value:t.tempChoice.key,callback:function(e){t.$set(t.tempChoice,"key",e)},expression:"tempChoice.key"}})],1),t._v(" "),e("p",{staticClass:"operations"},[e("span",{class:{disabled:!t.tempChoice.name},on:{click:t.confirmAdd}},[t._v(t._s(t.$t("m.task['确认']")))]),t._v(" "),e("span",{on:{click:t.cancelAdd}},[t._v(t._s(t.$t("m.task['取消']")))])])],1):t._e()])],2),t._v(" "),t.item.checkValue?[t.item.checkMessage?e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.checkMessage))]):e("p",{staticClass:"bk-task-error"},[t._v(t._s(t.item.name)+t._s(t.$t('m.newCommon["为必填项！"]')))])]:t._e()],2)],1):t._e()},a=[];i._withStripped=!0},sJ3n:function(t,e,n){"use strict";n("lNfD")},sQdO:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading},expression:"{ isLoading: loading }"}],staticClass:"bk-history-detail"},[e("div",{staticClass:"basic-information"},[e("div",{staticClass:"info-content"},[e("span",{staticClass:"info-title",attrs:{title:t.$t("m.task['触发器名称：']")}},[t._v(t._s(t.$t('m.task["触发器名称："]')))]),t._v(" "),e("span",{staticClass:"info-info",attrs:{title:t.historyInfo.trigger_name||"--"}},[t._v(t._s(t.historyInfo.trigger_name||"--"))])]),t._v(" "),e("div",{staticClass:"info-content"},[e("span",{staticClass:"info-title",attrs:{title:t.$t("m.task['触发事件：']")}},[t._v(t._s(t.$t('m.task["触发事件："]')))]),t._v(" "),e("span",{staticClass:"info-info",attrs:{title:t.historyInfo.signal_name||"--"}},[t._v(t._s(t.historyInfo.signal_name||"--"))])]),t._v(" "),e("div",{staticClass:"info-content"},[e("span",{staticClass:"info-title",attrs:{title:t.$t("m.task['响应动作：']")}},[t._v(t._s(t.$t('m.task["响应动作："]')))]),t._v(" "),e("span",{staticClass:"info-info",attrs:{title:t.historyInfo.component_name||"--"}},[t._v(t._s(t.historyInfo.component_name||"--"))])]),t._v(" "),e("div",{staticClass:"info-content"},[e("span",{staticClass:"info-title",attrs:{title:t.$t("m.task['执行人：']")}},[t._v(t._s(t.$t('m.task["执行人："]')))]),t._v(" "),e("span",{staticClass:"info-info",attrs:{title:t.historyInfo.operator_username||"--"}},[t._v(t._s(t.historyInfo.operator_username||"--"))])]),t._v(" "),e("div",{staticClass:"info-content"},[e("span",{staticClass:"info-title",attrs:{title:t.$t("m.task['执行方式：']")}},[t._v(t._s(t.$t('m.task["执行方式："]')))]),t._v(" "),e("span",{staticClass:"info-info",attrs:{title:t.historyInfo.operate_type||"--"}},[t._v(t._s(t.historyInfo.operate_type||"--"))])]),t._v(" "),e("div",{staticClass:"info-content"},[e("span",{staticClass:"info-title",attrs:{title:t.$t("m.task['执行状态：']")}},[t._v(t._s(t.$t('m.task["执行状态："]')))]),t._v(" "),e("span",{staticClass:"info-info",style:{color:"SUCCEED"===t.historyInfo.status?"#2DCB56":"#FF5656"},attrs:{title:t.historyInfo.status_name||"--"}},[t._v(t._s(t.historyInfo.status_name||"--"))])]),t._v(" "),e("div",{staticClass:"info-content"},[e("span",{staticClass:"info-title",attrs:{title:t.$t("m.task['执行时间：']")}},[t._v(t._s(t.$t('m.task["执行时间："]')))]),t._v(" "),e("span",{staticClass:"info-info",attrs:{title:t.historyInfo.create_at||"--"}},[t._v(t._s(t.historyInfo.create_at||"--"))])])]),t._v(" "),e("div",{staticClass:"field-information"},t._l(t.historyInfo.fields,(function(n,i){return e("div",{key:i,staticClass:"field-content"},["sub_message_component"===n.key?e("div",{staticClass:"field-content-box"},[e("bk-tab",{attrs:{active:t.activeName,type:"border-card"},on:{"tab-change":t.changPanel}},t._l(n.value,(function(i,a){return e("bk-tab-panel",t._b({key:a},"bk-tab-panel",i,!1),[e("template",{slot:"label"},[e("i",{staticClass:"bk-icon",class:[i.icon]}),t._v(" "),e("span",{staticClass:"panel-name"},[t._v(t._s(i.label))])]),t._v(" "),t._l(n.value,(function(n,i){return t.activeName===n.name?e("div",{key:i},t._l(n.fields,(function(n,i){return e("div",{key:i,staticClass:"mb20",staticStyle:{display:"flex"}},[e("span",{staticClass:"field-title inline",attrs:{title:n.name}},[t._v(t._s(n.name))]),t._v(" "),e("span",{staticClass:"field-value inline",attrs:{title:n.value||"--"}},[t._v(t._s(n.value||"--"))])])})),0):t._e()}))],2)})),1)],1):"req_params"===n.key?e("div",{staticClass:"field-content-box"},[e("bk-table",{attrs:{data:t.apiTableData,size:"small"}},[e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['名称']"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("div",{staticClass:"bk-more"},[e("span",{style:{paddingLeft:20*n.row.level+"px"}},[n.row.has_children?e("span",{class:["bk-icon","tree-expanded-icon",n.row.showChildren?"icon-down-shape":"icon-right-shape"],on:{click:function(e){return t.changeState(n.row)}}}):e("span",{staticClass:"bk-icon bk-more-icon"}),t._v(" "),e("span",[t._v(t._s(n.row.key||"--"))])])])]}}],null,!0)}),t._v(" "),e("bk-table-column",{attrs:{label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.type)+"\n            ")]}}],null,!0)}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['备注']"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{attrs:{title:n.row.desc}},[t._v(t._s(n.row.desc||"--"))])]}}],null,!0)}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['参数值']"),width:"280"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(n.row.value))])]}}],null,!0)})],1)],1):e("div",{staticClass:"field-content-box"},[e("p",{staticClass:"field-title inline",attrs:{title:n.name}},[t._v(t._s(n.name))]),t._v(" "),e("p",{staticClass:"field-value inline",attrs:{title:n.value}},[t._v(t._s(n.value))])])])})),0)])},a=[];i._withStripped=!0},sRDs:function(t,e,n){"use strict";n.r(e);var i=n("OkDz"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},sT1I:function(t,e,n){"use strict";n.r(e);var i=n("nDZo"),a=n("eUZ5");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("8ksY");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"57b92e34",null);e.default=r.exports},sdYe:function(t,e,n){"use strict";n.r(e);var i=n("/e7F"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},serL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"paramsTable",props:{list:{type:Array,defalut:function(){return[]}},disable:{type:Boolean,default:function(){return!1}},stateList:Array,isStatus:{type:Boolean,default:function(){return!0}}},data:function(){return{formData:[],wwwFormData:[],curCulum:"",curIndex:"",filterParams:""}},computed:{isShowDelete:function(){return this.list.length-1},isShowSelect:function(){return 0===this.wwwFormData.length||""===this.filterParams}},watch:{list:{handler:function(t){var e=this;this.isStatus&&t.forEach((function(t,n){""===t.value&&e.$nextTick((function(){e.$refs["inputParam"+n].hideHandler()}))}))},immediate:!0,deep:!0},wwwFormData:{handler:function(t){var e=this;if(0===t.length&&this.isStatus)for(var n=function(t){e.$nextTick((function(){e.$refs["inputParam"+t].hideHandler()}))},i=0;i<this.list.length;i++)n(i)},immediate:!0}},mounted:function(){var t=this;if(0!==this.list.length&&this.isStatus)for(var e=function(e){t.$nextTick((function(){t.$refs["inputParam"+e].hideHandler()}))},n=0;n<this.list.length;n++)e(n)},methods:{changeTab:function(t){this.acticeTab=t.key},handleDelete:function(t){var e=this.list.indexOf(t);-1!==e&&this.list.splice(e,1)},handleSelectContent:function(t){this.list[this.curIndex].value=this.list[this.curIndex].value.slice(0,-(this.filterParams.length+2))+"{{ "+t.key+"}}",this.$refs["inputParam"+this.curIndex].hideHandler(),this.filterParams="",this.wwwFormData=[]},changeInput:function(t,e){var n=this;if(this.isStatus){var i=t.value.lastIndexOf("{{");if(this.curIndex="",-1!==i){this.$refs["inputParam"+e].showHandler();var a=t.value.substring(i+2,t.value.length)||"";this.filterParams=a||"",this.wwwFormData=this.stateList.filter((function(t){return-1!==t.name.indexOf(n.filterParams)||-1!==t.key.indexOf(n.filterParams)})),this.curIndex=e}else this.$refs["inputParam"+e].hideHandler();this.curCulum=t}(this.$emit("changeFormStatus",!1),t.check)?[t.key,t.value,t.desc].every((function(t){return""===t}))&&(this.list.pop(),t.check=!1,t.select=!1):(t.check=!0,t.select=!0,this.list.push({check:!1,key:"",value:"",desc:"",select:!1}))}}}},spfV:function(t,e,n){"use strict";n.r(e);var i=n("9BD6"),a=n("/Mzk");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("Gue3");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"865c5838",null);e.default=r.exports},sshH:function(t,e,n){"use strict";n.r(e);var i=n("PGA1"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},stwv:function(t,e,n){"use strict";n.r(e);var i=n("OcdN"),a=n("Ozxi");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("mn6F");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"642d8e0f",null);e.default=r.exports},"t/b3":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("ETop"),s=(i=a)&&i.__esModule?i:{default:i},o=n("CeR/");e.default={name:"SelectService",components:{commonCascade:s.default},props:{customId:{type:String,default:function(){return""}},isGetField:{type:Boolean,default:function(){return!1}}},data:function(){return{isSecondLoading:!1,formData:{cascadeCheck:[],cascadeId:"",service_id:"",canAgency:!1,key:""},cascadeList:[],billList:[],billListInfo:"",optionsFavorites:[]}},watch:{"formData.service_id":function(){this.isGetField&&this.$emit("getFieldList")}},mounted:function(){this.getBillList(),"all"!==this.customId&&this.getfavorites()},methods:{getBillList:function(){var t=this,e={key:"all"===this.customId?"global":this.customId,show_deleted:!1,project_key:this.$store.state.project.id};this.$store.dispatch("serviceCatalog/getTreeData",e).then((function(e){t.cascadeList=e.data.length?e.data[0].children:[],t.$refs.commoncascader.settextinfo([t.cascadeList[0]],"give_default")})).catch((function(e){(0,o.errorHandler)(e,t)}))},getServiceList:function(){var t=this;if(this.formData.cascadeId){var e={catalog_id:this.formData.cascadeId,service_key:"all"===this.customId?"globalview":this.customId,is_valid:1,project_key:this.$store.state.project.id};this.isSecondLoading=!0,this.$store.dispatch("catalogService/getServices",e).then((function(e){t.billList=e.data,t.billList.forEach((function(e){t.$set(e,"disabled",!e.is_valid)})),t.billList.length?(t.formData.service_id=t.billList[0].id,t.billListInfo=t.billList[0].desc,t.formData.canAgency=t.billList[0].can_ticket_agency,t.formData.key=t.billList[0].key):(t.formData.service_id="",t.billListInfo="",t.formData.canAgency="",t.formData.key="")})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.isSecondLoading=!1}))}},handleChange:function(t){this.formData.cascadeId=t[t.length-1].id,this.billListInfo="",this.getServiceList()},selectedService:function(t){var e=this.billList.filter((function(e){return e.id===t}))[0];this.billListInfo=e.desc,this.formData.canAgency=e.can_ticket_agency,this.formData.key=e.key},getfavorites:function(){var t=this;if(this.customId){var e={service:this.customId};this.$store.dispatch("service/getfavorites",e).then((function(e){e.data.length?t.optionsFavorites=e.data[0].data.filter((function(t){return!1===t.is_deleted})):t.optionsFavorites=[]})).catch((function(e){(0,o.errorHandler)(e,t)}))}},collect:function(t){var e=this,n={};n.service=this.customId,n.data=t,this.$store.dispatch("service/updatefavorites",n).then((function(){e.$bkMessage({message:e.$t('m.manageCommon["收藏成功"]'),theme:"success"}),e.optionsFavorites=t})).catch((function(t){(0,o.errorHandler)(t,e)}))},cancelcollect:function(t){var e=this,n={};n.service=this.customId,n.data=t,this.$store.dispatch("service/updatefavorites",n).then((function(){e.$bkMessage({message:e.$t('m.manageCommon["取消成功"]'),theme:"success"}),e.optionsFavorites=t})).catch((function(t){(0,o.errorHandler)(t,e)}))}}}},t9cD:function(t,e,n){"use strict";n.r(e);var i=n("5/Zn"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},tM7y:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("CeR/"),a=n("zB2w"),s=c(n("BWJp")),o=c(n("tQ05")),r=c(n("PIEm"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"TaskLibrary",components:{fieldInfo:o.default,DealPerson:r.default},mixins:[s.default],props:{ticketInfo:{type:Object,default:function(){return{}}},nodeInfo:{type:Object,default:function(){return{}}}},data:function(){return{btnLoading:!1,taskListLoading:!1,templateListLoading:!1,formData:{templateId:"",selectedTask:""},templateList:[],taskList:[],selectedTasks:[],viewTaskInfo:{show:!1,item:null,dealPerson:{type:"PERSON",value:""}}}},mounted:function(){this.getLibraryList()},methods:{getLibraryList:function(){var t=this;this.templateListLoading=!0,this.$store.dispatch("taskFlow/getLibraryList",{service_id:this.ticketInfo.service_id}).then((function(e){t.templateList=e.data})).catch((function(e){(0,i.errorHandler)(e,t)})).finally((function(){t.templateListLoading=!1}))},getLibraryTasks:function(t){var e=this;this.taskListLoading=!0;var n={task_lib_id:t};this.$store.dispatch("taskFlow/getLibraryInfo",{params:n,id:t}).then((function(t){e.taskList=t.data})).catch((function(t){(0,i.errorHandler)(t,e)})).finally((function(){e.taskListLoading=!1}))},handleSubmitClick:function(){var t=this;if(!this.selectedTasks.length)return!1;var e={batch_create:!0,ticket_id:this.ticketInfo.id,tasks:[]};this.selectedTasks.forEach((function(n){var i={processors:n.processors,processors_type:n.processors_type,fields:{},need_start:t.nodeInfo.can_execute_task,state_id:t.nodeInfo.state_id,ticket_id:t.ticketInfo.id,task_schema_id:n.task_schema_id,source:"template"};n.fields.forEach((function(t){"SOPS_TEMPLATE"===n.type?(i.fields[t.key]={id:t.value.id,template_source:t.value.template_source,bk_biz_id:t.value.bk_biz_id,constants:t.value.constants},i.exclude_task_nodes_id=[]):"DEVOPS_TEMPLATE"===n.type?i.fields.sub_task_params=t.value:i.fields[t.key]=t.value})),e.tasks.push(i)})),this.btnLoading=!0,this.$store.dispatch("taskFlow/createTask",{params:e}).then((function(){t.$bkMessage({message:t.$t("m.task['新建任务成功']"),theme:"success"}),t.$emit("close",!0)})).catch((function(e){(0,i.errorHandler)(e,t)})).finally((function(){t.btnLoading=!1}))},onTaskLibChange:function(t){this.getLibraryTasks(t)},getTaskZhName:function(t){return a.TASK_TEMPLATE_TYPES.find((function(e){return e.type===t})).name},handleSelectedTaskChange:function(t){this.selectedTasks=t,console.log(t,"selection")},handleDeleteTaskLib:function(t){var e=this,n=t.id;this.$store.dispatch("taskFlow/deleteLibrary",n).then((function(){e.$bkMessage({message:e.$t('m.serviceConfig["删除成功"]'),theme:"success"}),e.getLibraryList(),n===e.formData.templateId&&(e.formData.templateId="",e.taskList=[],e.selectedTasks=[])})).catch((function(t){(0,i.errorHandler)(t,e)}))},onTaskNameClick:function(t){var e=this;this.viewTaskInfo.show=!0,this.viewTaskInfo.item=t,this.viewTaskInfo.dealPerson={type:t.processors_type,value:t.processors};var n=t.fields.filter((function(t){return"COMPLEX-MEMBERS"!==t.type}));n.forEach((function(t){e.$set(t,"showFeild",!0),e.$set(t,"val",t.value||"")})),this.isNecessaryToWatch({fields:n},"submit"),this.viewTaskInfo.item.fields=n}}}},tMBJ:function(t,e,n){},tNV3:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAA5CAYAAABZClfIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkU1NzFFNzcxRjUzQzExRTdBMkU1QUQxMkE2RTNCRDUwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU1NzFFNzcyRjUzQzExRTdBMkU1QUQxMkE2RTNCRDUwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTU3MUU3NkZGNTNDMTFFN0EyRTVBRDEyQTZFM0JENTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTU3MUU3NzBGNTNDMTFFN0EyRTVBRDEyQTZFM0JENTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5558DUAAAHDUlEQVR42uyc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"},tPsg:function(t,e,n){"use strict";n("Wew5")},tQ05:function(t,e,n){"use strict";n.r(e);var i=n("u0fD"),a=n("Abqk");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("sJ3n");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"c3012aea",null);e.default=r.exports},tT7i:function(t,e,n){"use strict";n.r(e);var i=n("fKJ4"),a=n("uQ6K");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("vZGf");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"f9229418",null);e.default=r.exports},tWND:function(t,e,n){"use strict";n.r(e);var i=n("3r/l"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},tXBt:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"trigger-dialog-box"},[e("bk-dialog",{attrs:{width:"930",theme:"primary","mask-close":!1,"auto-close":!1,"header-position":"left",title:t.trigger.component_name},on:{confirm:t.confirmTrigger},model:{value:t.isTrigger,callback:function(e){t.isTrigger=e},expression:"isTrigger"}},[e("p",{staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(t.$t("m['触发器名称：']")+t.trigger.display_name))]),t._v(" "),t.isshowForm?e("bk-form",{key:(new Date).getTime(),ref:"conductorForm",attrs:{"form-type":"horizontal","label-width":100}},[t.item&&"api"===t.item.key?[e("api-call",{attrs:{item:t.item}})]:t.item&&"modify_field"===t.item.key?[e("modify-field",{attrs:{"field-schema":t.item}})]:[t._l(t.item.field_schema,(function(t,n){return["SUBCOMPONENT"===t.type?[e("send-message",{key:n,attrs:{"is-show-var":!1,"item-info":t}})]:[e("bk-form-item",{key:n,attrs:{"ext-cls":t.required?"bk-field-schema mb20":"bk-field-schema no-require-item mb20",label:t.name,required:t.required,desc:t.tips}},[e("change-conductor",{attrs:{"is-show-var":!1,"item-info":t}})],1)]]}))]],2):t._e(),t._v(" "),t.errorTip?e("p",{staticClass:"error-tip",staticStyle:{color:"red","margin-top":"4px"}},[e("i",{staticClass:"bk-itsm-icon icon-itsm-icon-square-one"}),t._v("\n      "+t._s(t.$t("m['带*的表单项不能为空！']"))+"\n    ")]):t._e()],1),t._v(" "),e("bk-dialog",{attrs:{theme:"primary","mask-close":!1,"show-footer":!1},on:{confirm:t.refechTicket},model:{value:t.info.show,callback:function(e){t.$set(t.info,"show",e)},expression:"info.show"}},[e("div",{staticClass:"status"},["success"===t.info.status?e("i",{staticClass:"bk-itsm-icon icon-success status-icon",staticStyle:{color:"#3fc06d"}}):"error"===t.info.status?e("i",{staticClass:"bk-itsm-icon icon-itsm-icon-four status-icon",staticStyle:{color:"red"}}):e("i",{staticClass:"bk-itsm-icon icon-icon-loading status-load-icon"}),t._v(" "),e("p",{staticClass:"title"},[t._v(t._s(t.info.title))]),t._v(" "),e("p",{staticClass:"title"},[t._v(t._s(t.info.subTitle))])])])],1)},a=[];i._withStripped=!0},tafs:function(t,e,n){},tgnH:function(t,e,n){"use strict";n.r(e);var i=n("P2aA"),a=n("pnfo");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("JtQW");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"248e77f2",null);e.default=r.exports},tl4E:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-get-param"},[e("div",{staticClass:"bk-params-title"},[t._v("\n    "+t._s(t.$t('m.treeinfo["返回数据"]'))+"\n  ")]),t._v(" "),e("div",{staticClass:"bk-param-three"},[e("bk-form-item",{attrs:{label:t.$t("m.treeinfo['选取数组']"),required:!0}},[e("div",{staticClass:"bk-form-content bk-dialog-input"},[e("div",{ref:"cascader"},[[e("div",{directives:[{name:"bk-clickoutside",rawName:"v-bk-clickoutside",value:t.closeOther0,expression:"closeOther0"}],staticClass:"bk-search-tree",staticStyle:{width:"100%",float:"left"}},[[(t.changeInfo.is_builtin||t.formInfo.isModule)&&"bk_biz_id"!==t.formInfo.key?e("div",{staticClass:"bk-search-tree-wrapper",class:{"bk-border-red":t.checkInfo.assignors,"bk-back-color":(t.changeInfo.is_builtin||t.formInfo.isModule)&&"bk_biz_id"!==t.formInfo.key}},[e("span",{class:{"bk-color-tree":t.organization.assignorTree.name}},[t._v(t._s(t.organization.assignorTree.name||t.$t('m.treeinfo["请选择"]')))]),t._v(" "),e("i",{staticClass:"bk-select-angle bk-icon icon-framework"})]):e("div",{staticClass:"bk-search-tree-wrapper",class:{"bk-border-red":t.checkInfo.assignors,"bk-back-color":(t.changeInfo.is_builtin||t.formInfo.isModule)&&"bk_biz_id"!==t.formInfo.key},on:{click:function(e){return e.stopPropagation(),t.showTree(0)}}},[e("span",{class:{"bk-color-tree":t.organization.assignorTree.name}},[t._v(t._s(t.organization.assignorTree.name||t.$t('m.treeinfo["请选择"]')))]),t._v(" "),e("i",{staticClass:"bk-select-angle bk-icon icon-framework"})])],t._v(" "),e("transition",{attrs:{name:"fade"}},[t.organizaInfo.assignorShow[0]?e("div",{staticClass:"bk-search-tree-content",style:{width:50*t.maxLevelTree[0]+"%"}},[e("export-tree",{attrs:{disabled:(t.changeInfo.is_builtin||t.formInfo.isModule)&&"bk_biz_id"!==t.formInfo.key,"tree-data-list":t.organization.assignorPerson,"is-key-value":0},on:{toggle:t.assignorToggle,toggleChildren:t.toggleChildren}})],1):t._e()])],2)]],2)])]),t._v(" "),e("bk-form-item",{attrs:{label:t.$t("m.treeinfo['关键字字段']"),required:!0}},[e("div",{staticClass:"bk-form-content bk-dialog-input"},[e("div",{ref:"cascader"},[[e("div",{directives:[{name:"bk-clickoutside",rawName:"v-bk-clickoutside",value:t.closeOther1,expression:"closeOther1"}],staticClass:"bk-search-tree",staticStyle:{width:"100%",float:"left"}},[[(t.changeInfo.is_builtin||t.formInfo.isModule)&&"bk_biz_id"!==t.formInfo.key?e("div",{staticClass:"bk-search-tree-wrapper",class:{"bk-back-color":(t.changeInfo.is_builtin||t.formInfo.isModule)&&"bk_biz_id"!==t.formInfo.key}},[e("span",{class:{"bk-color-tree":t.settingKeyName}},[t._v(t._s(t.settingKeyName||t.$t('m.treeinfo["请选择"]')))]),t._v(" "),e("i",{staticClass:"bk-select-angle bk-icon icon-framework"})]):e("div",{staticClass:"bk-search-tree-wrapper",class:{"bk-back-color":(t.changeInfo.is_builtin||t.formInfo.isModule)&&"bk_biz_id"!==t.formInfo.key},on:{click:function(e){return e.stopPropagation(),t.showTree(1)}}},[e("span",{class:{"bk-color-tree":t.settingKeyName}},[t._v(t._s(t.settingKeyName||t.$t('m.treeinfo["请选择"]')))]),t._v(" "),e("i",{staticClass:"bk-select-angle bk-icon icon-framework"})])],t._v(" "),e("transition",{attrs:{name:"fade"}},[t.organizaInfo.assignorShow[1]?e("div",{staticClass:"bk-search-tree-content",style:{width:50*t.maxLevelTree[1]+"%"}},[e("export-tree",{attrs:{disabled:(t.changeInfo.is_builtin||t.formInfo.isModule)&&"bk_biz_id"!==t.formInfo.key,"tree-data-list":t.selectInfo.selectkeylist,"is-key-value":1},on:{toggle:t.assignorToggle,toggleChildren:t.toggleChildren}})],1):t._e()])],2)]],2)])]),t._v(" "),e("bk-form-item",{attrs:{label:t.$t("m.treeinfo['显示字段']"),required:!0}},[e("div",{staticClass:"bk-form-content bk-dialog-input"},[e("div",{ref:"cascader"},[[e("div",{directives:[{name:"bk-clickoutside",rawName:"v-bk-clickoutside",value:t.closeOther2,expression:"closeOther2"}],staticClass:"bk-search-tree",staticStyle:{width:"100%",float:"left"}},[[(t.changeInfo.is_builtin||t.formInfo.isModule)&&"bk_biz_id"!==t.formInfo.key?e("div",{staticClass:"bk-search-tree-wrapper",class:{"bk-back-color":(t.changeInfo.is_builtin||t.formInfo.isModule)&&"bk_biz_id"!==t.formInfo.key}},[e("span",{class:{"bk-color-tree":t.settingValueName}},[t._v(t._s(t.settingValueName||t.$t('m.treeinfo["请选择"]')))]),t._v(" "),e("i",{staticClass:"bk-select-angle bk-icon icon-framework"})]):e("div",{staticClass:"bk-search-tree-wrapper",class:{"bk-back-color":(t.changeInfo.is_builtin||t.formInfo.isModule)&&"bk_biz_id"!==t.formInfo.key},on:{click:function(e){return e.stopPropagation(),t.showTree(2)}}},[e("span",{class:{"bk-color-tree":t.settingValueName}},[t._v(t._s(t.settingValueName||t.$t('m.treeinfo["请选择"]')))]),t._v(" "),e("i",{staticClass:"bk-select-angle bk-icon icon-framework"})])],t._v(" "),e("transition",{attrs:{name:"fade"}},[t.organizaInfo.assignorShow[2]?e("div",{staticClass:"bk-search-tree-content",style:{width:50*t.maxLevelTree[2]+"%"}},[e("export-tree",{attrs:{disabled:(t.changeInfo.is_builtin||t.formInfo.isModule)&&"bk_biz_id"!==t.formInfo.key,"tree-data-list":t.selectInfo.selectvaluelist,"is-key-value":2},on:{toggle:t.assignorToggle,toggleChildren:t.toggleChildren}})],1):t._e()])],2)]],2)])])],1)])},a=[];i._withStripped=!0},tsYB:function(t,e,n){"use strict";n("EqEr")},tudf:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-sops-node-content"},[e("div",{staticClass:"bk-page bk-auto-node-basic"},[e("p",{staticClass:"bk-header-bold"},[t._v(t._s(t.$t('m.newCommon["基本信息"]')))]),t._v(" "),e("div",{staticClass:"bk-main bk-flex"},[e("div",{staticClass:"bk-node-name"},[e("span",[t._v(t._s(t.$t('m.newCommon["节点名称"]'))+" : ")]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.name||"--"))])])])]),t._v(" "),e("div",{staticClass:"bk-page bk-auto-node-basic"},[e("p",{staticClass:"bk-header-bold"},[t._v(t._s(t.$t('m.newCommon["任务参数"]')))]),t._v(" "),e("div",[e("div",{staticClass:"bk-param"},[e("bk-table",{attrs:{data:t.nodeInfo.api_info.devops_info,"ext-cls":"bk-editor-table"}},[e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['字段名']"),prop:"name"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['参数值']"),width:"400"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(n.row.value||"--"))])]}}],null,!1,3905507693)})],1)],1)])]),t._v(" "),e("div",{staticClass:"bk-page bk-auto-node-basic"},[e("p",{staticClass:"bk-header-bold"},[t._v(t._s(t.$t('m.taskTemplate["执行详情"]')))]),t._v(" "),e("div",[e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.taskTemplate["执行状态："]')))]),t._v(" "),e("span",{class:{statusShow:!0,statusSuccess:"FINISHED"===t.nodeInfo.status,statusRunning:"RUNNING"===t.nodeInfo.status,statusFailed:"FAILED"===t.nodeInfo.status}},[t._v("\n          "+t._s(t.taskStatus[t.nodeInfo.status]||"--"))])]),t._v(" "),e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.taskTemplate["任务详情："]')))]),t._v(" "),t.nodeInfo.api_info.devops_build_url?[e("a",{staticStyle:{color:"#5482F4"},attrs:{href:t.nodeInfo.api_info.devops_build_url,target:"_blank"}},[t._v("\n            "+t._s(t.$t('m["跳转蓝盾查看"]'))+"\n          ")])]:[e("span",{staticStyle:{color:"#DC5D5D"}},[t._v("--")])]],2),t._v(" "),e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.common["开始时间："]')))]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.create_at))])]),t._v(" "),e("p",{staticClass:"bk-partition"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.common["结束时间："]')))]),t._v(" "),e("span",[t._v(t._s(t.nodeInfo.end_at||t.$t('m.taskTemplate["尚未结束"]'))+"\n        ")])]),t._v(" "),e("div",{staticClass:"bk-partition errorDiv"},[e("b",{staticClass:"bk-base-label"},[t._v(t._s(t.$t('m.taskTemplate["错误信息："]')))])]),t._v(" "),e("div",{staticClass:"langError"},[t._v(t._s(t.nodeInfo.api_info.error_message||"--"))])])])])},a=[];i._withStripped=!0},u0fD:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{ref:"fieldContent",staticClass:"bk-field-preview",attrs:{id:"bkPreview"}},[e("bk-form",{attrs:{"label-width":t.labelWidth,"form-type":"vertical","ext-cls":"bk-ext-form"}},[t._l(t.fields,(function(n,i){return[n.showFeild?e("div",{key:i,class:{"bk-field-line":"COL_12"===n.layout,"bk-field-half":"COL_6"===n.layout,"bk-field-trigger":"trigger"===t.origin}},[e("CW-"+n.type,{ref:"component"+i,refInFor:!0,tag:"component",attrs:{item:n,fields:t.fields,"basic-infomation":t.basicInfomation,"type-info":t.typeInfo,disabled:t.disabled}}),t._v(" "),"trigger"!==t.origin?["API"===n.source_type?e("i",{staticClass:"bk-icon icon-refresh bk-icon-refresh",class:{"not-rotate":!t.rotate,rotate:t.rotate},on:{click:function(e){return t.freshBtn(n)}}}):t._e(),t._v(" "),"RPC"===n.source_type?e("i",{staticClass:"bk-icon icon-refresh bk-icon-refresh",class:{"not-rotate":!t.rotate,rotate:t.rotate},on:{click:function(e){return t.freshRpc(n)}}}):t._e()]:t._e()],2):t._e()]}))],2)],1)},a=[];i._withStripped=!0},u14n:function(t,e,n){"use strict";n.r(e);var i=n("Axd5"),a=n("pRHh");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},uK6t:function(t,e,n){"use strict";n.r(e);var i=n("phV7"),a=n("xpPb");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("5eUO");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"3a6d3529",null);e.default=r.exports},uQ6K:function(t,e,n){"use strict";n.r(e);var i=n("Q7OQ"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},ucVW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"DevopsPreview",components:{},props:{stages:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}},data:function(){return{isFullScreen:!1}},methods:{openFullScreen:function(){this.isFullScreen=!0,this.$bkMessage({message:this.$t('m.common["按 ESC 键退出全屏"]')}),document.addEventListener("keydown",this.handlerKeyDown)},onCloseFullScreen:function(){this.isFullScreen=!1},handlerKeyDown:function(t){27===t.keyCode&&(this.onCloseFullScreen(),document.removeEventListener("keydown",this.handlerKeyDown))},getPath:function(t,e){if(0===e)return"M 60 2 L 55 2 Q 50 2 50 7 L 50 60 Q 50 62 45 62 L 0 62";var n=56*(t.containers[e-1].elements.length+1);return"M 50 2 L 50 "+(n-10)+" Q 50 "+(n-5)+" 45 "+(n-5)+" L 0 "+(n-5)},getSvgStyle:function(t,e){if(0===e)return"";var n=56*(t.containers[e-1].elements.length+1)-27;return n?"top: "+-n+"px;":""},isElementCanExecute:function(t){if(!t.additionalOptions||!t.additionalOptions.runCondition)return!0;var e=t.additionalOptions,n=e.runCondition,i=e.customVariables;if(!e.enable)return!1;switch(n){case"CUSTOM_VARIABLE_MATCH":return i.every((function(t){return!!t.value}));case"CUSTOM_VARIABLE_MATCH_NOT_RUN":return!i.every((function(t){return!!t.value}));default:return!0}}}}},ughI:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CUSTOM_FORM_DEFAULT_VALUE=void 0;var i,a=n("gDS+"),s=(i=a)&&i.__esModule?i:{default:i};e.CUSTOM_FORM_DEFAULT_VALUE=(0,s.default)({schemes:{},form_data:[]},null,4)},ukIK:function(t,e,n){"use strict";n.r(e);var i=n("unyW"),a=n("ml4i");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("hj6f");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"fd4c2596",null);e.default=r.exports},unqN:function(t,e,n){},unyW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-change-conductor"},["STRING"===t.itemInfo.type?[e("bk-input",{directives:[{name:"cursorIndex",rawName:"v-cursorIndex",value:"conductorId"+t.index,expression:"'conductorId' + index"}],staticStyle:{width:"260px"},attrs:{placeholder:t.$t("m.trigger['20个字符以内']")},model:{value:t.itemInfo.value,callback:function(e){t.$set(t.itemInfo,"value",e)},expression:"itemInfo.value"}})]:t._e(),t._v(" "),"SELECT"===t.itemInfo.type?[e("bk-select",{staticStyle:{width:"260px"},attrs:{"ext-cls":"bk-insert-info",clearable:!1,searchable:""},model:{value:t.itemInfo.value,callback:function(e){t.$set(t.itemInfo,"value",e)},expression:"itemInfo.value"}},t._l(t.itemInfo.choice,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)]:t._e(),t._v(" "),"MULTISELECT"===t.itemInfo.type?[e("bk-select",{staticStyle:{width:"260px"},attrs:{"ext-cls":"bk-insert-info",clearable:!1,searchable:"",multiple:""},model:{value:t.itemInfo.value,callback:function(e){t.$set(t.itemInfo,"value",e)},expression:"itemInfo.value"}},t._l(t.itemInfo.choice,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)]:t._e(),t._v(" "),"MEMBERS"===t.itemInfo.type||"MULTI_MEMBERS"===t.itemInfo.type?t._l(t.itemInfo.value,(function(n,i){return e("div",{key:i,staticClass:"bk-send-recipient",class:{"bk-none-margin":t.itemInfo.value.length-1===i}},[e("member-info",{attrs:{"item-info":t.itemInfo,"recipient-item":n,"recipient-index":i}})],1)})):t._e(),t._v(" "),"TEXT"===t.itemInfo.type?[e("bk-input",{directives:[{name:"cursorIndex",rawName:"v-cursorIndex",value:"conductorId"+t.index,expression:"'conductorId' + index"}],attrs:{type:"textarea","ext-cls":"bk-remindway-form",rows:6},on:{blur:t.changeMessagePanel},model:{value:t.itemInfo.value,callback:function(e){t.$set(t.itemInfo,"value",e)},expression:"itemInfo.value"}})]:t._e(),t._v(" "),"RADIO"===t.itemInfo.type?[e("bk-radio-group",{model:{value:t.itemInfo.value,callback:function(e){t.$set(t.itemInfo,"value",e)},expression:"itemInfo.value"}},[t._l(t.itemInfo.choice,(function(n,i){return[e("bk-radio",{key:i,attrs:{value:n.key,"ext-cls":"mr50"}},[t._v(t._s(n.name))])]}))],2)]:t._e(),t._v(" "),"CHECKBOX"===t.itemInfo.type?[e("bk-checkbox-group",{model:{value:t.itemInfo.value,callback:function(e){t.$set(t.itemInfo,"value",e)},expression:"itemInfo.value"}},[t._l(t.itemInfo.choice,(function(n,i){return[e("bk-checkbox",{key:i,attrs:{value:n.key,"ext-cls":"mr10"}},[t._v(t._s(n.name))])]}))],2)]:t._e(),t._v(" "),"INT"===t.itemInfo.type?[e("bk-input",{attrs:{clearable:!0,precision:t.precision,type:"number"},model:{value:t.itemInfo.value,callback:function(e){t.$set(t.itemInfo,"value",e)},expression:"itemInfo.value"}})]:t._e(),t._v(" "),!t.isShowVar||"STRING"!==t.itemInfo.type&&"TEXT"!==t.itemInfo.type?t._e():[e("div",{staticClass:"bk-select-btn"},[e("bk-button",{staticClass:"bk-form-btn plus-cus",attrs:{theme:"default",title:t.$t("m.slaContent['插入变量']"),icon:"plus"}},[t._v("\n        "+t._s(t.$t('m.slaContent["插入变量"]'))+"\n      ")]),t._v(" "),e("bk-select",{attrs:{"ext-cls":"bk-select-btn-opacity",searchable:""},on:{selected:t.changeInsert},model:{value:t.insertValue,callback:function(e){t.insertValue=e},expression:"insertValue"}},t._l(t.variableList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)],1)],t._v(" "),t.isShowVar&&"VARIABLE"===t.itemInfo.value?[e("bk-select",{staticStyle:{width:"260px"},attrs:{"ext-cls":"bk-insert-info",searchable:"",multiple:Array.isArray(t.itemInfo.insertValue)},on:{selected:t.changeImport},model:{value:t.itemInfo.insertValue,callback:function(e){t.$set(t.itemInfo,"insertValue",e)},expression:"itemInfo.insertValue"}},t._l(t.variableList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)]:t._e()],2)},a=[];i._withStripped=!0},"up/p":function(t,e,n){},utoA:function(t,e,n){},uz2X:function(t,e,n){"use strict";n.r(e);var i=n("676K"),a=n("dU2m");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("iGEm");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"20fd9ae2",null);e.default=r.exports},uzD8:function(t,e,n){},v3W4:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("header",{staticClass:"ticket-header"},[e("arrows-left-icon",{on:{click:t.onBackClick}}),t._v(" "),e("span",{staticClass:"ticket-status",style:{backgroundColor:t.headerInfo.statusColor},attrs:{title:t.ticketInfo.current_status_display}},[t._v("\n    "+t._s(t.localeCookie?t.ticketInfo.current_status:t.ticketInfo.current_status_display)+"\n  ")]),t._v(" "),t.ticketInfo.is_commented||t.ticketInfo.can_commen?e("span",{staticClass:"ticket-status comments-info"},[t.ticketInfo.is_commented?e("span",[t._v(t._s(t.$t('m.newCommon["已评价"]')))]):t._e(),t._v(" "),t.ticketInfo.can_comment?e("span",[t._v(t._s(t.$t('m.newCommon["待评论"]')))]):t._e()]):t._e(),t._v(" "),e("span",{staticClass:"bk-operation-focus"},[e("bk-popover",{attrs:{content:t.hasAttention?t.$t("m.manageCommon['取消关注']"):t.$t("m.manageCommon['关注单据']"),interactive:!1,placement:"top"}},[e("i",{class:["bk-itsm-icon",t.hasAttention?"icon-favorite":"icon-rate"],on:{click:t.onAttention}})])],1),t._v(" "),e("span",{staticClass:"ticket-sn mr10"},[t._v(t._s(t.ticketInfo.sn))]),t._v(" "),e("span",{staticClass:"ticket-title",attrs:{title:t.ticketInfo.title}},[t._v("\n    "+t._s(t.ticketInfo.title||"--")+"\n  ")]),t._v(" "),e("div",{staticClass:"operation-group"},[e("bk-button",{staticClass:"mr10 operation-refresh",class:{rotate:t.rotate,"not-rotate":!t.rotate},attrs:{"data-test-id":"ticket_button_refreshTicketDetail",size:"small",icon:"icon-refresh",theme:"default"},on:{click:t.onRefreshBtnClick}},[t._v("\n      "+t._s(t.$t('m.newCommon["刷新"]'))+"\n    ")]),t._v(" "),e("bk-popover",{attrs:{content:t.$t("m.tickets['只有提单人才能撤单']"),disabled:t.ticketInfo.can_withdraw}},[e("bk-button",{staticClass:"mr10",attrs:{"data-test-id":"ticket_button_removeTicket",size:"small",theme:"default",disabled:!t.ticketInfo.can_withdraw},on:{click:function(e){return t.onTicketBtnClick("widthdraw")}}},[t._v("\n        "+t._s(t.$t('m.newCommon["撤单"]'))+"\n      ")])],1),t._v(" "),e("bk-popover",{attrs:{content:t.ticketInfo.can_supervise?t.$t("m.newCommon['执行催办操作后，将发送信息至处理人。']"):t.disabledText}},[e("bk-button",{staticClass:"mr10",attrs:{"data-test-id":"ticket_button_superviseTicket",size:"small",theme:"default",disabled:!t.ticketInfo.can_supervise||"SUSPENDED"===t.ticketInfo.current_status},on:{click:function(e){return t.onTicketBtnClick("supervise")}}},[t._v("\n        "+t._s(t.$t('m.newCommon["催办"]'))+"\n      ")])],1),t._v(" "),e("bk-popover",{attrs:{content:t.getDisabledContentText(t.ticketInfo.is_commented),disabled:!(t.ticketInfo.is_commented||!t.ticketInfo.can_comment)}},[-1!==Number(t.ticketInfo.comment_id)?e("bk-button",{staticClass:"mr10",attrs:{"data-test-id":"ticket_button_appraiseTicket",size:"small",theme:"default",disabled:t.ticketInfo.is_commented||!t.ticketInfo.can_comment||-1===t.ticketInfo.comment_id},on:{click:function(e){return t.onTicketBtnClick("comment")}}},[t._v("\n        "+t._s(t.$t('m.newCommon["评价"]'))+"\n      ")]):t._e()],1),t._v(" "),e("bk-dropdown-menu",{ref:"dropdown",staticClass:"bk-dropdown-menu-cus mr10",attrs:{align:"right","font-size":"medium"},on:{show:function(e){t.isDropdownShow=!0},hide:function(e){t.isDropdownShow=!1}}},[e("div",{staticClass:"dropdown-trigger-btn",staticStyle:{width:"auto"},attrs:{slot:"dropdown-trigger"},slot:"dropdown-trigger"},[e("span",[t._v(t._s(t.$t("m.newCommon['更多操作']")))]),t._v(" "),e("i",{class:["bk-icon icon-angle-down",{"icon-flip":t.isDropdownShow}]})]),t._v(" "),e("ul",{staticClass:"bk-dropdown-list-cus",attrs:{slot:"dropdown-content"},slot:"dropdown-content"},[e("li",[e("bk-button",{staticClass:"bk-dropdown-list-btn",attrs:{"data-test-id":"ticket_button_ticketPrint",theme:"default",text:!0},on:{click:function(e){return t.onTicketBtnClick("print")}}},[t._v("\n            "+t._s(t.$t('m.newCommon["打印"]'))+"\n          ")])],1),t._v(" "),e("li",[e("bk-popover",{attrs:{content:t.disabledText,disabled:t.ticketInfo.can_operate&&"SUSPENDED"!==t.ticketInfo.current_status,placement:"left-end"}},[e("bk-button",{staticClass:"bk-dropdown-list-btn",attrs:{"data-test-id":"ticket_button_ticketPending",theme:"default",text:!0,disabled:!(t.ticketInfo.can_operate&&"SUSPENDED"!==t.ticketInfo.current_status)},on:{click:function(e){return t.onTicketBtnClick("suspend")}}},[t._v("\n              "+t._s(t.$t('m.newCommon["挂起"]'))+"\n            ")])],1)],1),t._v(" "),e("li",[e("bk-popover",{attrs:{content:t.disabledText,disabled:t.ticketInfo.can_operate&&"SUSPENDED"===t.ticketInfo.current_status,placement:"left-end"}},[e("bk-button",{staticClass:"bk-dropdown-list-btn",attrs:{"data-test-id":"ticket_button_ticketRecover",text:!0,disabled:!(t.ticketInfo.can_operate&&"SUSPENDED"===t.ticketInfo.current_status)},on:{click:function(e){return t.onTicketBtnClick("restore")}}},[t._v("\n              "+t._s(t.$t('m.newCommon["恢复"]'))+"\n            ")])],1)],1),t._v(" "),e("li",[e("bk-popover",{attrs:{content:t.disabledText,disabled:t.ticketInfo.can_close,placement:"left-end"}},[e("bk-button",{staticClass:"bk-dropdown-list-btn",attrs:{"data-test-id":"ticket_button_ticketClose",text:!0,disabled:!t.ticketInfo.can_close},on:{click:function(e){return t.onTicketBtnClick("close")}}},[t._v("\n              "+t._s(t.$t('m.newCommon["关单"]'))+"\n            ")])],1)],1),t._v(" "),t._l(t.ticketTriggerList,(function(n,i){return e("li",{key:i},[e("bk-popover",{attrs:{content:t.disabledText,disabled:t.ticketInfo.can_operate,placement:"left-end"}},[e("bk-button",{staticClass:"bk-dropdown-list-btn",attrs:{"data-test-id":"ticket_button_trigger",text:!0,disabled:!t.ticketInfo.can_operate},on:{click:function(e){return t.onTicketBtnClick("trigger",n)}}},[t._v("\n              "+t._s(n.display_name)+"\n            ")])],1)],1)})),t._v(" "),e("li",[e("bk-button",{staticClass:"bk-dropdown-list-btn",attrs:{"data-test-id":"ticket_button_ticketService",text:!0},on:{click:function(e){return t.onTicketBtnClick("service")}}},[t._v("\n            "+t._s(t.$t('m["服务"]'))+"\n          ")])],1)],2)])],1),t._v(" "),e("ticket-trigger-dialog",{ref:"ticketTriggerDialog",on:{"init-info":t.triggerSuccessCallback}}),t._v(" "),e("evaluation-ticket-modal",{ref:"evaluationModal",attrs:{"ticket-info":t.ticketInfo},on:{submitSuccess:t.evaluationSubmitSuccess}}),t._v(" "),e("step-submit-dialog",{ref:"ticketOperate",attrs:{"ticket-info":t.ticketInfo,"ticket-operate-type":t.ticketOperateType},on:{submitSuccess:t.reloadTicket}})],1)},a=[];i._withStripped=!0},"v4/x":function(t,e,n){"use strict";n("jfEP")},vHK0:function(t,e,n){"use strict";n("HH2K")},vO6j:function(t,e,n){},vT7S:function(t,e,n){},vUrO:function(t,e,n){"use strict";n.r(e);var i=n("zO7g"),a=n("EJGV");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("A7pL");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"e0b09b76",null);e.default=r.exports},vXIu:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(n("GQeE")),a=l(n("QbLZ")),s=l(n("gDS+")),o=n("CeR/"),r=l(n("EstQ")),c=l(n("tgnH"));function l(t){return t&&t.__esModule?t:{default:t}}function u(){return{required:!0,message:r.default.t('m.treeinfo["字段必填"]'),trigger:"blur"}}var d={project_id:[u()],pipeline_id:[u()]};e.default={name:"DEVOPS_TEMPLATE",components:{DevopsPreview:c.default},props:{item:{type:Object,required:!0,default:function(){}},basicInfomation:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1}},data:function(){return{projectLoading:!1,pipelineLoading:!1,pipelineStartLoading:!1,pipelineDetailLoading:!1,showPipelineVariable:!0,showPipelineStages:!0,defaultRules:{project_id:[{required:!0,message:r.default.t('m.treeinfo["字段必填"]'),trigger:"blur"}],pipeline_id:[{required:!0,message:r.default.t('m.treeinfo["字段必填"]'),trigger:"blur"}]},rules:{project_id:[u()],pipeline_id:[u()]},projectList:[],pipelineList:[],pipelineStartInfo:{},pipelineVariableList:[],pipelineStages:[]}},created:function(){this.item.devopsContent||this.$set(this.item,"devopsContent",{project_id:"",pipeline_id:"",variables:{}})},mounted:function(){if(this.getDevopsUserProjectList(),this.item.value){var t=this.item.value,e=t.pipeline_id,n=t.project_id;this.item.devopsContent={project_id:n,pipeline_id:e,variables:JSON.parse((0,s.default)((0,a.default)({},this.item.value,{project_id:void 0,pipeline_id:void 0})))},this.getDevopsPipelineList(n),this.getDevopsPipelineStartInfo(),this.getDevopsPipelineDetail()}},methods:{getDevopsUserProjectList:function(){var t=this;this.projectLoading=!0,this.$store.dispatch("ticket/getDevopsUserProjectList",{ticket_id:this.basicInfomation.id}).then((function(e){t.projectList=e.data})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.projectLoading=!1}))},getDevopsPipelineList:function(t){var e=this;this.pipelineLoading=!0,this.$store.dispatch("ticket/getDevopsPipelineList",{project_id:t}).then((function(t){e.pipelineList=t.data})).catch((function(t){(0,o.errorHandler)(t,e)})).finally((function(){e.pipelineLoading=!1}))},getDevopsPipelineStartInfo:function(){var t=this;this.pipelineStartLoading=!0;var e=this.item.devopsContent,n=e.project_id,i=e.pipeline_id;this.$store.dispatch("ticket/getDevopsPipelineStartInfo",{project_id:n,pipeline_id:i}).then((function(e){t.pipelineStartInfo=e.data,t.pipelineVariableList=e.data.properties;var n=t.item.devopsContent.variables;e.data.properties.forEach((function(e){Object.prototype.hasOwnProperty.call(n,e.id)||t.$set(n,e.id,e.defaultValue||"")})),t.resetFormRules()})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.pipelineStartLoading=!1}))},getDevopsPipelineDetail:function(){var t=this;this.pipelineDetailLoading=!0;var e=this.item.devopsContent,n=e.project_id,i=e.pipeline_id;this.$store.dispatch("ticket/getDevopsPipelineDetail",{project_id:n,pipeline_id:i}).then((function(e){t.pipelineStages=e.data.stages||[]})).finally((function(){t.pipelineDetailLoading=!1}))},handleProjectChange:function(t){this.pipelineList=[],this.pipelineStartInfo={},this.pipelineVariableList=[],this.item.devopsContent.pipeline_id="",this.item.devopsContent.variables={},this.resetFormRules(),this.getDevopsPipelineList(t)},handlePipelineChange:function(){this.pipelineStartInfo={},this.pipelineVariableList=[],this.item.devopsContent.variables={},this.resetFormRules(),this.getDevopsPipelineStartInfo(),this.getDevopsPipelineDetail()},resetFormRules:function(){var t=this,e={};(0,i.default)(this.item.devopsContent.variables).forEach((function(n){t.pipelineVariableList.find((function(t){return t.id===n})).required&&(e[n]=[u()])})),this.rules=(0,a.default)({},d,e)},validate:function(){this.$refs.devopsForm.validate(),this.$refs.devopsVariable.validate();var t=this.item.devopsContent,e=t.project_id,n=t.pipeline_id,a=t.variables,s=(0,i.default)(a).every((function(t){return!!a[t]}));return s||(this.showPipelineVariable=!0),!!e&&!!n&&s}}}},vZGf:function(t,e,n){"use strict";n("TRMT")},veXO:function(t,e,n){"use strict";n.r(e);var i=n("v3W4"),a=n("xgGs");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("vHK0");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"c0c6acf8",null);e.default=r.exports},vg5J:function(t,e,n){"use strict";n("k5mY")},vkdF:function(t,e,n){"use strict";n.r(e);var i=n("D6vF"),a=n("U7zB");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("dCU7");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"5cd26145",null);e.default=r.exports},vlfB:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-data-source"},[e("bk-select",{attrs:{"ext-cls":t.typeClass,clearable:!1,disabled:t.dataSourceDisable,searchable:""},on:{selected:t.changeSource},model:{value:t.formInfo.source_type,callback:function(e){t.$set(t.formInfo,"source_type",e)},expression:"formInfo.source_type"}},t._l(t.sourceList,(function(t){return e("bk-option",{key:t.typeName,attrs:{id:t.typeName,name:t.name}})})),1),t._v(" "),"DATADICT"===t.formInfo.source_type?[e("bk-select",{attrs:{"ext-cls":"bk-halfline-item",clearable:!1,disabled:t.dataSourceDisable,searchable:""},model:{value:t.dictionaryData.check,callback:function(e){t.$set(t.dictionaryData,"check",e)},expression:"dictionaryData.check"}},t._l(t.dictionaryData.list,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)]:t._e(),t._v(" "),"API"===t.formInfo.source_type?[e("bk-select",{attrs:{"ext-cls":"bk-threeline-item bk-halfline-margin",placeholder:t.$t("m.treeinfo['请选择接入系统']"),clearable:!1,loading:t.isSystemLoading,searchable:""},on:{selected:t.changeApiSystem},model:{value:t.apiInfo.remote_system_id,callback:function(e){t.$set(t.apiInfo,"remote_system_id",e)},expression:"apiInfo.remote_system_id"}},t._l(t.apiSysList,(function(t){return e("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1),t._v(" "),e("bk-select",{attrs:{"ext-cls":"bk-threeline-item",placeholder:t.$t("m.treeinfo['请选择接口']"),clearable:!1,loading:t.isApiLoading,searchable:""},on:{selected:t.changeApiPort},model:{value:t.apiInfo.remote_api_id,callback:function(e){t.$set(t.apiInfo,"remote_api_id",e)},expression:"apiInfo.remote_api_id"}},t._l(t.apiPortList,(function(t){return e("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})})),1)]:t._e(),t._v(" "),"RPC"===t.formInfo.source_type?[e("bk-select",{attrs:{"ext-cls":"bk-halfline-item",clearable:!1,searchable:""},on:{selected:t.changeRpc},model:{value:t.prcData.check,callback:function(e){t.$set(t.prcData,"check",e)},expression:"prcData.check"}},t._l(t.prcData.list,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)]:t._e()],2)},a=[];i._withStripped=!0},voeL:function(t,e,n){"use strict";n.r(e);var i=n("LnbJ"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},vvxu:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wang-editor-template"},[e("ul",{directives:[{name:"show",rawName:"v-show",value:t.isShowSelect,expression:"isShowSelect"}],staticClass:"select-pattern"},t._l(t.selectPatternList,(function(n,i){return e("li",{key:i,on:{click:function(e){return t.postComment(n.type)}}},[e("i",{class:n.icon}),t._v(" "),e("span",[t._v(t._s(n.name))]),t._v(" "),e("p",[t._v(t._s(n.docs))])])})),0),t._v(" "),t.isReplyComment?e("div",{staticClass:"reply-comment"},[e("div",{staticClass:"reply-title"},[e("i",{staticClass:"bk-itsm-icon icon-yinyong"}),t._v(" "),e("span",{staticClass:"quote-creator"},[t._v(t._s(t.$t('m["回复"]'))+" "+t._s(t.replyContent.creator)+" "+t._s(t.$t('m["的评论"]'))+" :")]),t._v(" "),e("span",{staticClass:"repeal-reply",on:{click:t.repealReply}},[t._v(t._s(t.$t('m["取消回复"]')))])]),t._v(" "),e("div",{staticClass:"reply-content"},[e("div",{domProps:{innerHTML:t._s(t.replyContent.content)}})])]):t._e(),t._v(" "),t.isShowEditor?e("editor",{ref:"editorAdd",attrs:{"editor-id":"editor1","comment-type":t.commentType},on:{postComment:t.postComment,changebuttonStatus:t.changebuttonStatus}}):t._e(),t._v(" "),e("bk-button",{directives:[{name:"show",rawName:"v-show",value:t.isShowEditor,expression:"isShowEditor"}],staticClass:"submit",attrs:{theme:"primary"},on:{click:t.submit}},[t._v(t._s(t.isEditEditor?t.$t('m["发布"]'):t.$t('m["返回"]')))]),t._v(" "),e("bk-divider"),t._v(" "),e("div",[t._v(t._s(t.$t('m["全部评论"]')))]),t._v(" "),e("ul",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.commentLoading},expression:"{ isLoading: commentLoading }"},{name:"show",rawName:"v-show",value:0!==t.commentList.length,expression:"commentList.length !== 0"}],staticClass:"comment-list"},[t._l(t.commentList,(function(n,i){return e("li",{key:i,class:[{twinkling:t.flash[n.id]}]},[e("comment-item",{attrs:{"comment-list":t.commentList,"cur-comment":n},on:{replyComment:t.replyComment,refreshComment:t.refreshComment,jumpTargetComment:t.jumpTargetComment,editComment:t.editComment}})],1)})),t._v(" "),e("li",{staticClass:"page-over"},[e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.moreLoading},expression:"{ isLoading: moreLoading }"}]}),t._v(" "),t.isPageOver?e("span",[t._v(t._s(t.$t('m["评论已经加载完了"]')))]):t._e()])],2),t._v(" "),0===t.commentList.length?e("div",{staticClass:"no-comment"},[e("img",{attrs:{src:t.imgUrl}}),t._v(" "),e("p",[t._v(t._s(t.$t('m["当前暂无评论，快去评论吧！"]')))])]):t._e(),t._v(" "),e("bk-dialog",{attrs:{title:"edit"===t.editType?t.$t("m['编辑评论']"):t.$t("m['回复评论']"),width:"800",theme:"primary","mask-close":!1},on:{confirm:t.submitEdit},model:{value:t.isEdit,callback:function(e){t.isEdit=e},expression:"isEdit"}},[e("editor",{ref:"editorEdit",attrs:{"editor-id":"editor2","comment-type-reply":t.commentType}})],1)],1)},a=[];i._withStripped=!0},wA6F:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-get-param"},[e("bk-table",{attrs:{data:t.tableList,size:"small"}},[e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['名称']"),"min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("div",{staticClass:"bk-more"},[e("span",{style:{paddingLeft:20*n.row.level+"px"}},[n.row.has_children?e("span",{class:["bk-icon","tree-expanded-icon",n.row.showChildren?"icon-down-shape":"icon-right-shape"],on:{click:function(e){return t.changeState(n.row)}}}):e("span",{staticClass:"bk-icon bk-more-icon"}),t._v(" "),e("span",[t._v(t._s(n.row.key||"--"))])])])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['类型']"),prop:"type"}}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['是否必须']")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.is_necessary?t.$t('m.treeinfo["是"]'):t.$t('m.treeinfo["否"]'))+"\n      ")]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['备注']"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{attrs:{title:n.row.desc}},[t._v(t._s(n.row.desc||"--"))])]}}])}),t._v(" "),e("bk-table-column",{attrs:{label:t.$t("m.treeinfo['参数值']"),width:"300"},scopedSlots:t._u([{key:"default",fn:function(n){return[t.isStatic&&"object"!==n.row.type&&"array"!==n.row.type?[t._v("\n          "+t._s(n.row.customValue||"--")+"\n        ")]:t.isCustom&&"object"!==n.row.type&&"array"!==n.row.type?[e("bk-input",{attrs:{type:"string"===n.row.type?"text":"number",placeholder:t.$t("m.treeinfo['请输入参数值']")},model:{value:n.row.customValue,callback:function(e){t.$set(n.row,"customValue",e)},expression:"props.row.customValue"}})]:["object"!==n.row.type&&"array"!==n.row.type?[e("div",{staticStyle:{width:"120px",position:"absolute",top:"5px",left:"15px"}},[e("bk-select",{attrs:{clearable:!1,searchable:"","font-size":"medium"},model:{value:n.row.source_type,callback:function(e){t.$set(n.row,"source_type",e)},expression:"props.row.source_type"}},t._l(t.sourceTypeList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)],1),t._v(" "),n.row.source_type&&"CUSTOM"!==n.row.source_type?e("div",{staticStyle:{width:"140px",position:"absolute",top:"4px",right:"15px"}},[e("bk-select",{class:{"bk-border-error":n.row.isCheck&&!n.row.value_key.toString()},attrs:{clearable:!1,searchable:"","font-size":"medium"},model:{value:n.row.value_key,callback:function(e){t.$set(n.row,"value_key",e)},expression:"props.row.value_key"}},[t._l(t.stateList,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),t._v(" "),"addField"!==t.entry?[e("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"extension"},on:{click:function(e){return t.addNewItem(n.row)}},slot:"extension"},[e("i",{staticClass:"bk-icon icon-plus-circle"}),t._v(t._s(t.$t('m.treeinfo["添加变量"]'))+"\n                  ")])]:t._e()],2)],1):e("div",{staticStyle:{width:"140px",position:"absolute",top:"4px",right:"15px"}},["string"===n.row.type||"number"===n.row.type?[e("bk-input",{class:{"bk-border-error":n.row.isCheck&&!n.row.value.toString()},attrs:{type:"string"===n.row.type?"text":"number",placeholder:t.$t("m.treeinfo['请输入参数值']")},model:{value:n.row.value,callback:function(e){t.$set(n.row,"value",e)},expression:"props.row.value"}})]:t._e(),t._v(" "),"boolean"===n.row.type?[e("bk-radio-group",{model:{value:n.row.value,callback:function(e){t.$set(n.row,"value",e)},expression:"props.row.value"}},[e("bk-radio",{attrs:{value:t.trueSatatus}},[t._v("true")]),t._v(" "),e("bk-radio",{attrs:{value:t.falseSatatus}},[t._v("false")])],1)]:t._e()],2)]:t._e(),t._v(" "),t.isStatic||"array"!==n.row.lastType?t._e():e("div",{staticClass:"bk-between-operat"},[e("i",{staticClass:"bk-itsm-icon icon-flow-add",on:{click:function(e){return t.addChildren(n.row)}}}),t._v(" "),"array"===n.row.lastType?e("i",{staticClass:"bk-itsm-icon icon-flow-reduce",class:{"bk-no-delete":t.countSon(n.row)},on:{click:function(e){return t.deletChildren(n.row)}}}):t._e()])]]}}])})],1)],1)},a=[];i._withStripped=!0},wHJd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n("/14K")),a=c(n("rrYd")),s=c(n("quWS")),o=c(n("VTYh")),r=c(n("jRCg"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"ticketLogDetail",components:{fieldsDone:i.default,autoNodeInfo:a.default,sopsNodeLog:s.default,fieldPreview:r.default,devopsNodeLog:o.default},props:{show:{type:Boolean,default:!1},logInfo:{type:Object,default:function(){return null}}},data:function(){return{basicList:[{name:this.$t('m.newCommon["节点名称"]'),value:"",key:"from_state_name"},{name:this.$t('m.newCommon["处理人"]'),value:"",key:"operator"},{name:this.$t('m.newCommon["处理时间"]'),value:"",key:"operate_at"}]}}}},wHkh:function(t,e,n){},wHqx:function(t,e,n){"use strict";n.r(e);var i=n("owsg"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},wJAD:function(t,e,n){"use strict";n("zIbp")},wNCD:function(t,e,n){"use strict";n.r(e);var i=n("S5n2"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"wP/J":function(t,e,n){},wSaC:function(t,e,n){"use strict";n("unqN")},wXXQ:function(t,e,n){},wegR:function(t,e,n){"use strict";n.r(e);var i=n("Jje2"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},wpaA:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"bk-clickoutside",rawName:"v-bk-clickoutside",value:t.closeTree,expression:"closeTree"}],staticClass:"bk-search-tree",class:t.extCls},[e("div",{staticClass:"bk-search-tree-wrapper",on:{click:function(e){return e.stopPropagation(),t.showTree("view")}}},[e("span",{class:{"bk-color-tree":t.displayName}},[t._v("\n      "+t._s(t.displayName||t.$t('m.serviceConfig["请选择"]'))+"\n    ")]),t._v(" "),t.organizationLoading?e("i",{staticClass:"bk-select-angle bk-itsm-icon icon-icon-loading"}):t._e()]),t._v(" "),e("transition",{attrs:{name:"common-fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowTree,expression:"isShowTree"}],staticClass:"bk-search-tree-content"},[e("bk-tree",{ref:"tree1",attrs:{"ext-cls":"bk-tree",data:t.displayList,"node-key":"id","show-icon":!1,"has-border":!1},on:{"on-click":t.nodeClickOne,"async-load-nodes":t.asyncLoadNodes}})],1)])],1)},a=[];i._withStripped=!0},wsaz:function(t,e,n){"use strict";n("NabY")},wvg8:function(t,e,n){"use strict";n.r(e);var i=n("OjKp"),a=n("XTEZ");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("XsWr");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"12ae0128",null);e.default=r.exports},"x+Aj":function(t,e,n){"use strict";n("e42N")},x0hC:function(t,e,n){},x6yq:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){return(0,this._self._c)("section",{staticClass:"code-editor"})},a=[];i._withStripped=!0},"x9y/":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bk-add-trigger"},[e("div",{staticClass:"bk-service-name"},[e("h1",[e("span",{staticClass:"is-outline"}),t._v(t._s(t.$t('m.trigger["基础信息"]')))])]),t._v(" "),e("div",{staticClass:"bk-trigger-basic"},[e("bk-form",{ref:"triggerBasic",attrs:{"label-width":170,model:t.formData,"ext-cls":"bk-basic-form","form-type":"vertical",rules:t.rules}},[e("bk-form-item",{attrs:{label:t.$t("m.trigger['触发器名称']"),"data-test-id":"trigger-input-name",required:!0,property:"name"}},[e("bk-input",{attrs:{placeholder:t.$t("m.trigger['请输入触发器名称']")},on:{change:function(e){return t.$emit("change")}},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),e("bk-form-item",{attrs:{label:t.$t("m.trigger['是否启用']")}},[e("bk-switcher",{attrs:{"data-test-id":"triggers_switcher_isUseTrigger",size:"small"},on:{change:function(e){return t.$emit("change")}},model:{value:t.formData.is_enabled,callback:function(e){t.$set(t.formData,"is_enabled",e)},expression:"formData.is_enabled"}})],1),t._v(" "),e("bk-form-item",{attrs:{label:t.$t("m.trigger['触发器描述']")}},[e("bk-input",{attrs:{placeholder:t.$t("m.trigger['请输入触发器描述']"),type:"textarea",rows:3,maxlength:100},on:{change:function(e){return t.$emit("change")}},model:{value:t.formData.desc,callback:function(e){t.$set(t.formData,"desc",e)},expression:"formData.desc"}})],1)],1)],1),t._v(" "),e("div",{staticClass:"bk-service-name"},[e("h1",[e("span",{staticClass:"is-outline"}),t._v(t._s(t.$t("m.trigger['触发机制']")))])]),t._v(" "),e("div",{staticClass:"bk-trigger-made"},[e("bk-form",{ref:"triggerMade",attrs:{"label-width":170,model:t.formData,"form-type":"vertical",rules:t.rules}},[e("bk-form-item",{staticStyle:{width:"300px"},attrs:{label:t.$t("m.trigger['触发事件']"),"data-test-id":"trigger-select-triggerEvent",required:!0,property:"signal"}},[e("bk-select",{attrs:{"data-test-id":"triggers_select_choiceEvent",placeholder:t.$t("m.trigger['请选择触发事件']")},on:{change:function(e){return t.$emit("change")}},model:{value:t.formData.signal,callback:function(e){t.$set(t.formData,"signal",e)},expression:"formData.signal"}},t._l(t.triggerEventList,(function(n,i){return e("bk-option-group",{key:i,attrs:{name:n.name}},t._l(n.children,(function(t){return e("bk-option",{key:t.key,attrs:{id:t.key,name:t.name}})})),1)})),1)],1),t._v(" "),e("bk-form-item",{attrs:{"data-test-id":"trigger-div-triggerRules",label:t.$t("m.trigger['触发规则']"),required:!0}},[e("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.contentLoading},expression:"{ isLoading: contentLoading }"}],staticStyle:{"min-height":"300px"}},[t._l(t.rulesList,(function(n,i){return e("div",{key:i,staticClass:"bk-trigger-rule mb10"},[e("div",{staticClass:"bk-rule-title"},[e("div",{staticStyle:{float:"left","margin-right":"10px"}},[n.showContent?e("i",{staticClass:"bk-icon icon-down-shape icon-cus",on:{click:function(e){return t.showContent(n)}}}):e("i",{staticClass:"bk-icon icon-right-shape icon-cus",on:{click:function(e){return t.showContent(n)}}})]),t._v(" "),n.nameChange?e("div",{staticClass:"bk-name-input"},[e("bk-input",{staticStyle:{width:"260px",display:"inline-block"},attrs:{clearable:!0},on:{change:function(e){return t.$emit("change")}},model:{value:n.name,callback:function(e){t.$set(n,"name",e)},expression:"item.name"}}),t._v(" "),e("span",{staticClass:"bk-input-submit",on:{click:function(e){return e.stopPropagation(),t.handleClickName(n,"submit")}}},[t._v(t._s(t.$t("m.trigger['确认']")))]),t._v(" "),e("span",{staticClass:"bk-input-submit",on:{click:function(e){return e.stopPropagation(),t.handleClickName(n,"close")}}},[t._v(t._s(t.$t("m.trigger['取消']")))])],1):e("span",{staticClass:"bk-title-name",on:{click:function(e){return e.stopPropagation(),t.changeName(n)}}},[t._v("\n                "+t._s(n.name||t.$t("m.trigger['规则']")+"-"+(i+1))+"\n              ")]),t._v(" "),1!==t.rulesList.length?[e("i",{staticClass:"bk-icon icon-close icon-nodelete",on:{click:function(e){return e.stopPropagation(),t.deleteRule(i)}}})]:[e("i",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top-start",value:t.$t("m.trigger['规则不能为空']"),expression:"$t(`m.trigger['规则不能为空']`)",modifiers:{"top-start":!0}}],staticClass:"bk-icon icon-close icon-nodelete",attrs:{"data-test-id":"trigger_i_closeTriggerRule"}})],t._v(" "),e("div",{staticClass:"bk-condition-switch"},[e("span",{staticClass:"mr5"},[t._v(t._s(t.$t("m.trigger['条件触发']")))]),t._v(" "),e("bk-switcher",{attrs:{"data-test-id":"triggers_switcher_conditionTriggered",size:"small"},on:{change:function(e){return t.$emit("change")}},model:{value:n.triggerStatus,callback:function(e){t.$set(n,"triggerStatus",e)},expression:"item.triggerStatus"}})],1)],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:n.showContent,expression:"item.showContent"}]},[n.triggerStatus?e("trigger-condition",{attrs:{"trigger-rules":n.triggerRules}}):t._e(),t._v(" "),e("response-condition",{attrs:{signal:t.formData.signal,"response-way-list":t.responseWayList,"response-list":n.responseList}})],1)])})),t._v(" "),e("p",{staticClass:"bk-add-rules",on:{click:t.addRule}},[e("i",{staticClass:"bk-icon icon-plus-circle"}),e("span",{attrs:{"data-test-id":"trigger_span_addTriggerRules"}},[t._v(t._s(t.$t("m.trigger['添加规则']")))])])],2)])],1)],1),t._v(" "),e("div",{staticClass:"bk-submit-trigger"},[e("bk-button",{staticClass:"mr10",attrs:{theme:"primary","data-test-id":"trigger_button_submitTrigger",title:t.$t("m.trigger['确认']"),disabled:t.btnLoading},on:{click:function(e){return t.submitTrigger(!1)}}},[t._v("\n      "+t._s(t.$t("m.trigger['确认']"))+"\n    ")]),t._v(" "),e("bk-button",{staticClass:"mr10",attrs:{theme:"default","data-test-id":"trigger_button_submitTrigger",title:t.$t("m.trigger['保持草稿']"),disabled:t.btnLoading},on:{click:function(e){return t.submitTrigger(!0)}}},[t._v("\n      "+t._s(t.$t("m.trigger['保持草稿']"))+"\n    ")]),t._v(" "),e("bk-button",{attrs:{theme:"default","data-test-id":"trigger_button_KeepDraft",disabled:t.btnLoading,title:t.$t("m.trigger['取消']")},on:{click:t.closeTrigger}},[t._v("\n      "+t._s(t.$t("m.trigger['取消']"))+"\n    ")])],1)])},a=[];i._withStripped=!0},xBbh:function(t,e,n){},xBhy:function(t,e,n){"use strict";n("1+H+")},xCrZ:function(t,e,n){"use strict";n("+f5g")},xEUG:function(t,e,n){"use strict";n("9buo")},xJKo:function(t,e,n){"use strict";n.r(e);var i=n("rOlX"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},xbld:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"failed-wrap"},[""===t.operationType&&t.reason&&"FAILED"===t.nodeInfo.status?e("div",{staticClass:"fail-reason"},[e("span",{staticClass:"reason-title"},[t._v(t._s(t.$t('m.common["失败原因："]')))]),t._v(" "),e("input",{staticStyle:{display:"none"},attrs:{type:"checkbox",name:"toggle-"+t.nodeInfo.state_id,id:"toggle-"+t.nodeInfo.state_id}}),t._v(" "),e("p",{class:"describe-"+t.nodeInfo.state_id},[t._v("\n      "+t._s(t.reason)+"\n    ")]),t._v(" "),e("label",{staticClass:"show-more",attrs:{for:"toggle-"+t.nodeInfo.state_id}},[t._v("..."),e("span",{staticClass:"show-more-text"},[t._v(t._s(t.$t('m.common["展示更多"]')))])])]):e("p",{staticClass:"operation-tips"},[t._v(t._s(t.operationTips))]),t._v(" "),""!==t.operationType&&"retry"!==t.operationType||t.reloadParams?t._e():[t.nodeInfo.api_info.remote_api_info.req_params&&t.nodeInfo.api_info.remote_api_info.req_params.length?e("div",{staticClass:"bk-param"},[e("h3",{staticClass:"params-title"},[t._v(t._s(t.$t('m.newCommon["输入参数"]')))]),t._v(" "),e("get-param",{ref:"getParam",attrs:{"query-value":t.nodeInfo.api_info.req_params,"is-static":!t.operationType,"is-custom":!0,"api-detail":t.nodeInfo.api_info.remote_api_info}})],1):t._e(),t._v(" "),t.nodeInfo.api_info.remote_api_info.req_body&&Object.keys(t.nodeInfo.api_info.remote_api_info.req_body).length&&t.nodeInfo.api_info.remote_api_info.req_body.properties&&Object.keys(t.nodeInfo.api_info.remote_api_info.req_body.properties).length?e("div",{staticClass:"bk-param"},[e("h3",{staticClass:"params-title"},[t._v(t._s(t.$t('m.newCommon["输入参数"]')))]),t._v(" "),e("post-param",{ref:"postParam",attrs:{"body-value":t.nodeInfo.api_info.req_body,"is-static":!t.operationType,"is-custom":!0,"api-detail":t.nodeInfo.api_info.remote_api_info}})],1):t._e()],t._v(" "),(""===t.operationType||"ignore"===t.operationType||"hand"===t.operationType)&&t.apiDetail.rsp_data&&Object.keys(t.apiDetail.rsp_data).length&&t.apiDetail.rsp_data.properties&&Object.keys(t.apiDetail.rsp_data.properties).length&&!t.reloadParams?e("div",{staticClass:"bk-param"},[e("h3",{staticClass:"params-title"},[t._v(t._s(t.$t('m.systemConfig["返回数据"]')))]),t._v(" "),e("response-data-node",{ref:"responseDataNode",attrs:{"change-info":{},"api-detail":t.apiDetail,"is-static":!t.operationType,"is-custom":!0}})],1):t._e(),t._v(" "),e("div",{staticClass:"operation-button-group"},[t.operationType?t._e():t._l(t.buttons,(function(n){return e("bk-button",{key:n.key,staticClass:"mr10",attrs:{theme:n.theme,title:n.name,disabled:!t.nodeInfo.is_schedule_ready||"FAILED"!==t.nodeInfo.status||!t.nodeInfo.can_operate},on:{click:function(e){return t.clickBtn(n.key)}}},[t.nodeInfo.is_schedule_ready?[t._v("\n          "+t._s(n.name)+"\n        ")]:[e("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:t.readyTips,expression:"readyTips",modifiers:{top:!0}}]},[t._v(t._s(n.name))])]],2)})),t._v(" "),t.operationType&&"FAILED"===t.nodeInfo.status?[e("bk-button",{staticClass:"mr10",attrs:{theme:"primary"},on:{click:t.onSubmit}},[t._v("\n        "+t._s(t.$t('m.common["提交"]'))+"\n      ")]),t._v(" "),e("bk-button",{staticClass:"mr10",on:{click:t.onCancel}},[t._v("\n        "+t._s(t.$t('m["取消"]'))+"\n      ")])]:t._e(),t._v(" "),t._t("button-extend")],2)],2)},a=[];i._withStripped=!0},xgGs:function(t,e,n){"use strict";n.r(e);var i=n("qTC0"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},xgIe:function(t,e,n){"use strict";n("m4Da")},"xl+m":function(t,e,n){"use strict";n.r(e);var i=n("CPxG"),a=n("1hFm");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("yfOj");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"1dd614c2",null);e.default=r.exports},xpPb:function(t,e,n){"use strict";n.r(e);var i=n("HtfW"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},y5Cw:function(t,e,n){"use strict";n("rcsN")},ybrk:function(t,e,n){"use strict";n.r(e);var i=n("/nBP"),a=n("iesT");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("UCAk");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"9d704a3e",null);e.default=r.exports},yeXF:function(t,e,n){"use strict";n("M84O")},yfOj:function(t,e,n){"use strict";n("jK1o")},ymPp:function(t,e,n){"use strict";n.r(e);var i=n("7DqX"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},"z/kA":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(n("gDS+")),a=l(n("u8Ap")),s=l(n("ybrk")),o=l(n("hk/f")),r=n("dGg1"),c=n("CeR/");function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"defaultValue",components:{memberSelect:a.default,RichTextEditor:s.default,CodeEditor:o.default},props:{formInfo:{type:Object,default:function(){return{}}},fieldInfo:{type:Object,default:function(){return{}}},dictionaryData:{type:Object,default:function(){return{}}},changeInfo:{type:Object,default:function(){return{}}},label:{type:String,default:""},checkStatus:{type:Object,default:function(){return{}}}},data:function(){return{selectList:[],updateStatus:!1,typeList:["MULTISELECT","CHECKBOX","MEMBERS","MEMBER"],precision:0}},watch:{"formInfo.source_type":function(){var t=this;this.updateStatus&&(this.formInfo.default_value=this.typeList.some((function(e){return e===t.formInfo.type}))?[]:""),this.formInfo.source_type!==this.changeInfo.source_type&&(this.updateStatus=!0,this.formInfo.default_value=this.typeList.some((function(e){return e===t.formInfo.type}))?[]:""),"API"!==this.formInfo.source_type&&"RPC"!==this.formInfo.source_type||(this.formInfo.default_value="")},"formInfo.type":function(){var t=this;this.updateStatus&&(this.formInfo.default_value=this.typeList.some((function(e){return e===t.formInfo.type}))?[]:""),this.formInfo.type!==this.changeInfo.type&&(this.updateStatus=!0,this.formInfo.default_value=this.typeList.some((function(e){return e===t.formInfo.type}))?[]:""),"API"!==this.formInfo.source_type&&"RPC"!==this.formInfo.source_type||(this.formInfo.default_value="")},"formInfo.default_value":function(){"CUSTOM-FORM"===this.formInfo.type&&(this.checkStatus.customFormStatus=!1)}},mounted:function(){this.changeInfo.id&&"DATADICT"===this.changeInfo.source_type&&this.getDictionList(this.changeInfo.source_uri),""!==this.formInfo.default_value&&this.getSelectList(this.formInfo.default_value)},methods:{getSelectList:function(t){this.selectList=[],t&&("CUSTOM"===this.formInfo.source_type?this.selectList=this.fieldInfo.list.filter((function(t){return t.key&&t.name})):"DATADICT"===this.formInfo.source_type?this.dictionaryData.check&&this.getDictionList(this.dictionaryData.check):"API"!==this.formInfo.source_type&&"RPC"!==this.formInfo.source_type||this.getApiList())},getDictionList:function(t){var e=this,n={key:t};this.$store.dispatch("datadict/get_data_by_key",n).then((function(t){e.selectList=t.data})).catch((function(t){(0,c.errorHandler)(t,e)}))},downCustomFormTempalte:function(){var t=document.createElement("a"),e=+new Date;t.download="bk_itsm_custom_form_template_"+e+".json",t.href="data:text/plain,"+(0,i.default)(r.CUSTOM_FORM_TEMPLATE,null,4),t.click()},getApiList:function(){}}}},z1yn:function(t,e,n){"use strict";n.r(e);var i=n("8aPs"),a=n("wegR");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},z3Co:function(t,e,n){"use strict";n.r(e);var i=n("Iu+4"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},zB2w:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TASK_TEMPLATE_TYPES=void 0;var i,a=n("EstQ"),s=(i=a)&&i.__esModule?i:{default:i};e.TASK_TEMPLATE_TYPES=[{name:s.default.t("m.tickets['蓝盾任务']"),type:"DEVOPS"},{name:s.default.t("m.task['标准运维任务']"),type:"SOPS"},{name:s.default.t("m.task['普通任务']"),type:"NORMAL"}]},zIbp:function(t,e,n){},zO7g:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("bk-form-item",[t.isEdit?e("bk-input",{ref:"input",staticStyle:{width:"450px"},attrs:{behavior:"simplicity",maxlength:64,placeholder:t.$t("m.systemConfig['请输入描述']"),type:"textarea"},on:{blur:function(e){return e.target!==e.currentTarget?null:t.change.apply(null,arguments)}},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}}):e("div",{staticStyle:{"font-size":"12px",color:"#63656e",width:"450px","word-wrap":"break-word","line-height":"16px"}},[t.value?t._e():e("span",[t._v(t._s(t.$t("m['当前节点未设置节点描述']")))]),t._v("\n    "+t._s(t.desc)+"\n    "),e("i",{staticClass:"bk-itsm-icon icon-edit-bold edit-icon",staticStyle:{"font-size":"16px"}}),t._v(" "),e("span",{staticStyle:{color:"#3a84ff"},on:{click:t.edit}},[t._v(t._s(t.$t("m['点击修改']")))])])],1)},a=[];i._withStripped=!0},zP2a:function(t,e,n){"use strict";t.exports={template:'<div :style="{height: calcSize(height), width: calcSize(width)}"></div>',props:{value:{type:String,default:""},width:{type:[Number,String],default:500},height:{type:[Number,String],default:300},lang:{type:String,default:"text"},theme:{type:String,default:"monokai"},readOnly:{type:Boolean,default:!1},fullScreen:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},fontSize:{type:Number,default:14}},data:function(){return{$editor:null}},watch:{value:function(t){this.$editor&&this.$editor.setValue&&this.$editor.setValue(t,1)},fullScreen:function(){this.$el.classList.toggle("ace-full-screen"),this.$editor.resize()}},methods:{calcSize:function(t){var e=t.toString();return e.match(/^\d*$/)?t+"px":e.match(/^[0-9]?%$/)?e:"100%"}},mounted:function(){var t=this;this.$editor=this.$ace.edit(this.$el);var e=this.$editor,n=this.lang,i=void 0===n?"javascript":n,a=this.theme,s=void 0===a?"monokai":a,o=this.readOnly,r=this.fontSize,c=e.getSession();this.$editor.setFontSize(r),this.$emit("init",e),c.setMode("ace/mode/"+i),e.setTheme("ace/theme/"+s),e.setTheme("ace/theme/textmate"),c.setUseWrapMode(!0),e.setValue(this.value,1),e.setReadOnly(o),e.setShowPrintMargin(!1),e.on("change",(function(n,i){var a=e.getValue();t.$emit("update:hasError",!a),t.$emit("input",a,n,i)})),e.on("blur",(function(n,i){var a=e.getValue();t.$emit("update:hasError",!a),t.$emit("blur",a,n,i)})),c.on("changeAnnotation",(function(e,n){var i=n.$annotations;i&&i.length&&t.$emit("change-annotation",i)}))}}},zV3R:function(t,e,n){},zXkT:function(t,e,n){"use strict";n("NzWO")},zcr8:function(t,e,n){},zfNu:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("GQeE")),a=r(n("gDS+")),s=r(n("QbLZ")),o=r(n("5hmv"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"FILE",components:{customUpload:o.default},props:{item:{type:Object,required:!0,default:function(){}},idInfo:{type:Object,required:!1,default:function(){return null}},isCurrent:{type:Boolean,default:!1},isFilePreview:{type:Boolean,default:!1},isBuild:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{datas:[],uploadFileList:[],tempFileList:[],historyList:[],url:this.isFilePreview?"":window.SITE_URL+"api/misc/upload_file/",tempObj:{}}},mounted:function(){this.item.val=[],this.choiceToList()},methods:{choiceToList:function(){for(var t in this.item.choice)this.tempFileList.push((0,s.default)({},this.item.choice[t],{key:t}));if(this.item.value){var e=JSON.parse(this.item.value);for(var n in e)this.historyList.push((0,s.default)({},e[n],{key:n}));this.datas=this.historyList.concat([]),this.item.val="";var i=[];this.datas.forEach((function(t){var e={};e[t.key]={path:t.path,name:t.name},i.push((0,a.default)(e))})),this.item.val=i.join(",")}},downloadFile:function(t){var e=t.key;this.isBuild?window.open(window.SITE_URL+"api/ticket/fields/"+this.item.id+"/download_file/?unique_key="+e+"&file_type=version&flow_id="+this.item.version_id):this.isCurrent?window.open(window.SITE_URL+"api/ticket/fields/"+this.item.id+"/download_file/?unique_key="+e+"&file_type=template"):window.open(window.SITE_URL+"api/workflow/fields/"+this.item.id+"/download_file/?unique_key="+e+"&file_type=template")},uploadErr:function(){},uploadSuccess:function(t){var e=this;this.datas=t,this.uploadFileList=t,this.item.value="",this.item.val=this.item.value,t.forEach((function(t){if(!t.errorMsg&&t.responseData.data)for(var n in t.responseData.data.succeed_files)e.$set(e.tempObj,n,t.responseData.data.succeed_files[n])})),this.historyList.length&&(this.datas=this.datas.concat(this.historyList),this.historyList.forEach((function(t){e.tempObj[t.key]={path:t.path,name:t.name}}))),this.item.value=(0,a.default)(this.tempObj),this.item.val=this.item.value},uploadProgress:function(){this.$store.commit("changeFileStatus",!0)},uploadDone:function(){this.$store.commit("changeFileStatus",!1)},deleteFile:function(t){if(this.datas.splice(this.datas.indexOf(t),1),this.historyList.length&&this.historyList.some((function(e){return e.key===t.key})))for(var e in this.historyList=this.historyList.filter((function(e){return e.key!==t.key})),this.tempObj)e===t.key&&delete this.tempObj[e];else for(var n in this.tempObj)for(var s in t.responseData.data.succeed_files)n===s&&delete this.tempObj[n];var o=this.uploadFileList.indexOf(t);-1!==o&&this.$refs.upload.deleteFile(o,t),(0,i.default)(this.tempObj).length?this.item.val=(0,a.default)(this.tempObj):this.item.val=""}}}},zmPZ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=u(n("14Xm")),a=u(n("D3Ub")),s=u(n("gDS+")),o=u(n("u8Ap")),r=u(n("3eLr")),c=n("CeR/"),l=n("ygAv");function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"dealPerson",components:{bkTree:r.default,memberSelect:o.default},props:{value:{type:Object,default:function(){return{type:"",value:[]}}},specifyIdList:{type:Array,default:function(){return[]}},excludeRoleTypeList:{type:Array,default:function(){return[]}},showRoleTypeList:{type:Array,default:function(){return[]}},nodeInfo:{type:Object,default:function(){return{}}},formType:{type:String,default:""},shortcut:{type:Boolean,default:!1},requiredMsg:{type:String,default:""},showOverbook:{type:Boolean,default:!1}},data:function(){return{showError:!1,initLoaing:!1,isLoading:!1,organizationLoading:!1,formData:{levelOne:"",levelSecond:[]},allUserlist:[],firstLevelList:[],secondLevelList:[],organizationList:[],frontMemberField:[],secondLevelRange:{},noSecondTypeList:["EMPTY","OPEN","STARTER","BY_ASSIGNOR","STARTER_LEADER"],organizationTip:{show:!1,count:""}}},computed:{targetSpecifyIdList:function(){var t=this,e=this.specifyIdList.find((function(e){return e.type===t.formData.levelOne}));return e?e.list:[]}},watch:{value:{handler:function(t,e){(0,s.default)(t)!==(0,s.default)(e)&&this.initData()},deep:!0},showRoleTypeList:{handler:function(){this.initData()},deep:!0},excludeRoleTypeList:{handler:function(){this.initData()},deep:!0}},created:function(){this.setDeaultSecondLeve(this.value.type)},mounted:function(){var t=this;return(0,a.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.initData();case 1:case"end":return e.stop()}}),e,t)})))()},methods:{toggleInfo:function(t){!this.nodeInfo.is_builtin&&this.showOverbook&&this.getOrganizationNumber(t.id)},initData:function(){var t=this;return(0,a.default)(i.default.mark((function e(){var n,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.initLoaing=!0,e.next=3,t.getRoleGroup();case 3:n=t.value.type,t.firstLevelList.find((function(t){return t.id===n}))&&(a="ORGANIZATION"===n||"ASSIGN_LEADER"===n?t.value.value:t.value.value?t.value.value.split(",").filter((function(t){return""!==t})):[],t.formData={levelOne:n,levelSecond:a}),n&&t.getSecondLevelList(n),t.initLoaing=!1;case 7:case"end":return e.stop()}}),e,t)})))()},getRoleGroup:function(){var t=this;if(!this.allUserlist.length)return this.$store.dispatch("deployCommon/getUser",{is_processor:!0,project_key:this.$store.state.project.id}).then((function(e){t.allUserlist=e.data,t.getFirstLevelList(e.data)})).catch((function(e){(0,c.errorHandler)(e,t)}));this.getFirstLevelList(this.allUserlist)},getFirstLevelList:function(t){var e=this;this.firstLevelList=t.filter((function(t){return e.excludeRoleTypeList.length?!e.excludeRoleTypeList.includes(t.type):!e.showRoleTypeList.length||e.showRoleTypeList.includes(t.type)})).map((function(t){return{id:t.type,name:t.name}}))},setDeaultSecondLeve:function(t){switch(t){case"ORGANIZATION":case"ASSIGN_LEADER":this.formData.levelSecond="";break;default:this.formData.levelSecond=[]}this.secondLevelList=[]},getSecondLevelList:function(t){this.noSecondTypeList.includes(t)||("ORGANIZATION"===t?this.getOrganization():"ASSIGN_LEADER"===t?this.getPreStates():"VARIABLE"===t?this.getFrontNodesList():this.secondListFn(t))},getOrganizationNumber:function(t){var e=this;return(0,a.default)(i.default.mark((function n(){var a;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.showOverbook){n.next=5;break}return n.next=3,e.$store.dispatch("common/getOrganizationNumber",t);case 3:(a=n.sent).data.count>100&&(e.organizationTip.count=a.data.count,e.organizationTip.show=!0);case 5:case"end":return n.stop()}}),n,e)})))()},cancelSelect:function(){this.formData.levelOne="PERSON",this.formData.levelSecond=[]},onFirstLevelChange:function(t){var e=this;return(0,a.default)(i.default.mark((function n(){return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$set(e.formData,"levelSecond",[]),e.setDeaultSecondLeve(t),e.getSecondLevelList(t);case 3:case"end":return n.stop()}}),n,e)})))()},secondListFn:function(t){var e=this;if(t){var n={role_type:t,project_key:this.$store.state.project.id||this.$route.query.project.id};this.shortcut&&(n.scope="shortcut"),this.isLoading=!0,this.$store.dispatch("deployCommon/getSecondUser",n).then((function(n){var i=[];i=n.data.map((function(n){if("GENERAL"===t){var i=e.shortcut?"":"("+n.count+")";return{id:String(n.id),name:n.name+i,disabled:0===n.count}}return"API"===t?{id:n.role_key,name:n.name}:{id:String(n.id),name:n.name}})),e.targetSpecifyIdList.length&&"GENERAL"!==t&&(i=i.filter((function(t){return e.targetSpecifyIdList.some((function(e){return String(e)===t.id}))}))),e.secondLevelList=i})).catch((function(t){(0,c.errorHandler)(t,e)})).finally((function(){e.isLoading=!1}))}},getOrganization:function(){var t=this;this.organizationLoading=!0,this.$store.dispatch("cdeploy/getTreeInfo").then((function(e){t.organizationList=e.data,t.organizationList.forEach((function(e){t.$set(e,"route",[])}))})).catch((function(e){(0,c.errorHandler)(e,t)})).finally((function(){t.organizationLoading=!1}))},getFrontNodesList:function(){var t=this;this.isLoading=!0;var e={workflow:this.nodeInfo.workflow,state:this.nodeInfo.id,exclude_self:!0};return this.$store.dispatch("apiRemote/get_related_fields",e).then((function(e){t.secondLevelList=e.data.filter((function(t){return"MEMBERS"===t.type&&"REQUIRE"===t.validate_type||"MEMBER"===t.type&&"REQUIRE"===t.validate_type})).map((function(t){return{id:t.key,name:t.name}}))})).catch((function(e){(0,c.errorHandler)(e,t)})).finally((function(){t.isLoading=!1}))},getPreStates:function(){var t=this;this.isLoading=!0,this.$store.dispatch("deployCommon/getPreStates",{id:this.nodeInfo.id}).then((function(e){t.secondLevelList=e.data.filter((function(t){return!["ROUTER-P","COVERAGE"].includes(t.type)})).map((function(t){return{id:t.id,name:t.name}}))})).catch((function(e){(0,c.errorHandler)(e,t)})).finally((function(){t.isLoading=!1}))},verifyValue:function(){var t=!1;return t=this.formData.levelOne&&!this.noSecondTypeList.includes(this.formData.levelOne)?(0,l.isEmpty)(this.formData.levelOne)||(0,l.isEmpty)(this.formData.levelSecond):(0,l.isEmpty)(this.formData.levelOne),this.showError=t,!t},getValue:function(){var t=this.formData.levelSecond;return Array.isArray(this.formData.levelSecond)&&(t=t.join(",")),{value:t||"",type:this.formData.levelOne}}}}},zzpp:function(t,e,n){"use strict";n.r(e);var i=n("+0UK"),a=n("qrHj");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("hqOK");var o=n("KHd+"),r=Object(o.a)(a.default,i.a,i.b,!1,null,"aa7cd86a",null);e.default=r.exports}}]);